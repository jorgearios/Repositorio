import{bz as qs,bA as Nr,l as U,s as V,m as b,n as K,o as u,c as B,y as Ai,q as Be,b as t,a as m,j as N,w as S,f as ce,t as w,B as De,h as Fe,i as I,p as j,M as Qe,_ as Ge,z as co,bB as Or,bC as Mr,b7 as rt,aW as Ce,aB as $n,e as Y,bD as Al,bs as xo,u as Oe,ac as ga,r as Ee,F as ne,ba as Sa,bE as Nl,ar as Ye,bF as zs,ap as Je,aI as Ol,aH as Ml,bG as ja,aZ as $e,b5 as kl,D as tt,bh as Vr,bi as Rr,a4 as Gs,x as Ze,b2 as ot,bk as bt,aT as lt,bl as qr,bm as Ft,ai as ft,bc as ki,bH as Ur,bI as zr,bJ as Di,bK as jr,bj as st,bL as Ro,J as ze,K as Dl,L as xt,v as uo,b8 as _a,b9 as Ca,bo as Yr,aL as ha,bM as Fi,bN as mo,bO as ms,bP as wa,bQ as Hn,bR as Wr,bS as Hr,ao as ct,bT as po,aN as vt,bU as wi,bV as Pi,bW as Cs,bX as ys,aS as ht,g as qo,b6 as Ct,bY as hs,bZ as Zr,b_ as Gr,b$ as Za,c0 as Ti,ag as Li,c1 as Mt,c2 as Ut,aD as $t,c3 as Qt,c4 as bs,aE as fo,c5 as Kt,c6 as Ta,aA as go,aq as ho,c7 as Jr,a_ as Js,c8 as Xr,c9 as vs,as as nt,ca as vo,cb as Fl,cc as Qr,cd as Uo,ce as zo,bn as gt,cf as wl,bg as Kr,cg as Vl,a9 as e0,aQ as La,aP as Rl,aV as t0,ch as a0,ci as Si,cj as s0,ck as l0,cl as n0,cm as o0,cn as Eo,co as i0,cp as r0,cq as c0,cr as jo,cs as x0,af as u0,ak as d0}from"./stepForm.8ce50639.js";import{e as m0,f as We,u as p0,m as at,_ as Pl}from"./eventListForm.daec9afe.js";import{_ as f0}from"./catalogForm.8cf457f0.js";function Ot(n,a){let e=a!==""?JSON.parse(n.translations)[a]:JSON.parse(n.translations);if(qs in e)return e[qs];let s=Object.keys(e),l=Object.keys(e).map(i=>i.length>2?i.slice(0,2):i),o="";for(let i=0;i<l.length;i++){if(Nr===s[i]&&e[s[i]]){o=e[s[i]];break}l[i]===qs&&e[s[i]]&&(o=e[s[i]])}return o}function Nn(n,a){return n.translations&&JSON.parse(n.translations)[a]&&Ot(n,a)?Ot(n,a):n[a]}function qt(n){return n.translations&&JSON.parse(n.translations).name&&Ot(n,"name")?Ot(n,"name"):n.name}function g0(n){return n.translations&&Ot(n,"")?Ot(n,""):n.name}function n5(n){return n.translations&&Ot(n,"")?Ot(n,""):n.content}function h0(n){return n.translations&&Ot(n,"name")?Ot(n,"name"):n.label}function v0(n){return n.translations&&Ot(n,"")?Ot(n,""):n.label}function ra(n){return n.translations&&JSON.parse(n.translations).description&&Ot(n,"description")?Ot(n,"description"):n.description}function o5(n){n.services&&n.services.length&&n.services.forEach(a=>{a.name=qt(a),a.description=ra(a),a.extras.forEach(e=>{e.name=qt(e),e.description=ra(e)})}),n.locations&&n.locations.length&&n.locations.forEach(a=>{a.name=qt(a),a.description=ra(a)}),n.packages&&n.packages.length&&n.packages.forEach(a=>{a.name=qt(a),a.description=ra(a),a.bookable.forEach(e=>{e.service.name=qt(e.service),e.service.description=ra(e.service),"extras"in e.service&&e.service.extras.forEach(s=>{s.name=qt(s),s.description=ra(s)})})}),n.categories&&n.categories.length&&n.categories.forEach(a=>{a.name=qt(a),a.serviceList.forEach(e=>{e.name=qt(e),e.description=ra(e),e.extras.forEach(s=>{s.name=qt(s),s.description=ra(s)})})}),n.events&&n.events.length&&n.events.forEach(a=>{a.name=qt(a),a.description=ra(a),a.extras.forEach(e=>{e.name=qt(e),e.description=ra(e)})}),n.customFields&&n.customFields.length&&n.customFields.forEach(a=>{a.label=h0(a),a.options.forEach(e=>{e.label=v0(e)})}),n.employees&&n.employees.length&&n.employees.forEach(a=>{a.firstName=Nn(a,"firstName"),a.lastName=Nn(a,"lastName"),a.description=Nn(a,"description")})}const E0={props:{ready:{type:Boolean,default:!0}},setup(n){let a=U("amColors",V({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),e=b(()=>({"--am-c-caph-text":a.value.colorMainText,"--am-c-caph-heading-text":a.value.colorMainHeadingText,"--am-c-caph-text-op15":K(a.value.colorMainText,.15)}));return(s,l)=>(u(),B("div",{class:"am-caph__main",style:Be(t(e))},[Ai(s.$slots,"default")],4))}};const _0={key:0},C0={key:1},y0={key:2},b0={name:"MainProfileFooter"},B0=Object.assign(b0,{props:{parentWidth:{type:Number,default:1200},display:{type:String,default:"first"},loading:{type:Boolean,default:!1},customizedLabels:{type:Object,default:()=>({})},deleteFooterType:{type:String,default:"plain"},saveFooterButton:{type:String,default:"filled"},passFooterButton:{type:String,default:"filled"}},setup(n){const a=n,e=U("labels");function s(p){return Object.keys(a.customizedLabels).length&&a.customizedLabels[p]?a.customizedLabels[p]:e[p]}const l=U("settings");let o=U("deleteProfileDialog",V(!1)),i=U("saveProfileChanges",()=>{}),r=U("saveCustomerCustomFields",()=>{}),x=U("changeProfilePassword",()=>{}),c=U("amColors"),f=b(()=>({"--am-c-cappf-bgr":c.value.colorMainBgr,"--am-c-cappf-text":c.value.colorMainText,"--am-c-cappf-text-op15":K(c.value.colorMainText,.15)}));return(p,d)=>(u(),B("div",{class:"am-cappf",style:Be(t(f))},[m("div",{class:j(["am-cappf__options",{"am-only-one":n.display==="second"||!t(l).roles.allowCustomerDeleteProfile}])},[n.display==="first"&&t(l).roles.allowCustomerDeleteProfile?(u(),B("div",_0,[N(Fe,{category:"danger",size:t(a).parentWidth<=360?"small":"default",type:t(a).deleteFooterType,class:"am-cappf__delete",disabled:n.loading,onClick:d[0]||(d[0]=_=>De(o)?o.value=!0:o=!0)},{default:S(()=>[ce(w(s("delete_profile")),1)]),_:1},8,["size","type","disabled"])])):I("",!0),n.display==="first"||n.display==="third"?(u(),B("div",C0,[N(Fe,{type:t(a).saveFooterButton,size:t(a).parentWidth<=360?"small":"default",disabled:n.loading,onClick:d[1]||(d[1]=_=>n.display==="first"?t(i)():t(r)())},{default:S(()=>[ce(w(s("save_changes")),1)]),_:1},8,["type","size","disabled"])])):I("",!0),n.display==="second"?(u(),B("div",y0,[N(Fe,{type:t(a).passFooterButton,size:t(a).parentWidth<=360?"small":"default",disabled:n.loading,onClick:d[2]||(d[2]=_=>t(x)())},{default:S(()=>[ce(w(s("change_password")),1)]),_:1},8,["type","size","disabled"])])):I("",!0)],2)],4))}});const A0={key:0,class:"am-date-picker__input-date"},k0={key:1,class:"am-date-picker__input-start"},D0={key:2,class:"am-date-picker__input-end"},ea={props:{modelValue:{type:[String,Array,Object,Number]},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator(n){return["default","medium","small","mini","micro"].includes(n)}},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:""},startPlaceholder:{type:String},endPlaceholder:{type:String},type:{type:String,default:"date",validator(n){return["year","years","month","months","date","dates","datetime","week","datetimerange","daterange","monthrange","yearrange"].includes(n)}},format:{type:String},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>{}},rangeSeparator:{type:String,default:"-"},defaultValue:{type:[String,Array,Object,Number]},defaultTime:{type:[String,Array,Object,Number]},valueFormat:{type:String},id:{type:[String,Array]},name:{type:[String,Array]},unlinkPanels:{type:Boolean,default:!1},prefixIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="calendar"/>'})},clearIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="close"/>'})},validateEvent:{type:Boolean,default:!0},disabledDate:{type:Function,default:()=>{}},shortcuts:{type:Array,default:()=>[]},cellClassName:{type:Function},teleported:{type:Boolean,default:!0},emptyValues:{type:[String,Array]},valueOnClear:{type:[String,Number,Boolean,Function],default:""},fallbackPlacements:{type:Array},placement:{type:String,default:"bottom",validator(n){return["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"].includes(n)}},lang:{type:String,default:""}},emits:["update:modelValue","change","blur","focus","clear","calendar-change","panel-change","visible-change"],setup(n,{emit:a}){const e=n;let{modelValue:s}=co(e),l=b({get:()=>s.value,set:c=>{a("update:modelValue",c)}});const o=V(null);function i(){o.value&&o.value.focus()}let r=U("amColors"),x=b(()=>({"--am-c-primary":r.value.colorPrimary,"--am-c-inp-bgr":r.value.colorInpBgr,"--am-c-inp-border":r.value.colorInpBorder,"--am-c-inp-text":r.value.colorInpText,"--am-c-inp-text-op03":K(r.value.colorInpText,.03),"--am-c-inp-text-op05":K(r.value.colorInpText,.05),"--am-c-inp-text-op40":K(r.value.colorInpText,.4),"--am-c-inp-text-op60":K(r.value.colorInpText,.6),"--am-c-inp-placeholder":r.value.colorInpPlaceHolder,"--am-c-drop-bgr":r.value.colorDropBgr,"--am-c-drop-text":r.value.colorDropText,"--am-c-drop-text-op03":K(r.value.colorDropText,.03),"--am-c-drop-text-op10":K(r.value.colorDropText,.1),"--am-c-drop-text-op30":K(r.value.colorDropText,.3),"--am-c-drop-text-op50":K(r.value.colorDropText,.5),"--am-c-drop-text-op70":K(r.value.colorDropText,.7),"--am-c-drop-text-op80":K(r.value.colorDropText,.8),"--am-c-drop-border":r.value.colorDropBorder,"--am-c-skeleton-op20":K(r.value.colorMainText,.2),"--am-c-skeleton-op60":K(r.value.colorMainText,.6),"--am-c-skeleton-sb-op20":K(r.value.colorSbText,.2),"--am-c-skeleton-sb-op60":K(r.value.colorSbText,.6)}));return(c,f)=>{const p=Or,d=Mr;return u(),B("div",{class:j(["am-date-picker__wrapper",{"is-disabled":e.disabled}]),style:Be(t(x))},[m("div",{class:j(["am-date-picker__input",[`am-${e.type}`,{"is-disabled":e.disabled}]]),onClick:i},[e.type==="date"&&t(l)?(u(),B("div",A0,w(t(rt)(t(Ce)(t(l)).format("YYYY-MM-DD"))),1)):I("",!0),e.type==="daterange"&&t(l)[0]?(u(),B("div",k0,w(t(rt)(t(Ce)(t(l)[0]).format("YYYY-MM-DD"))),1)):I("",!0),e.type==="daterange"&&t(l)[1]?(u(),B("div",D0,w(t(rt)(t(Ce)(t(l)[1]).format("YYYY-MM-DD"))),1)):I("",!0)],2),N(d,{locale:t(m0)(e.lang)},{default:S(()=>[N(p,{id:n.id,ref_key:"amDatePicker",ref:o,modelValue:t(l),"onUpdate:modelValue":f[0]||(f[0]=_=>De(l)?l.value=_:l=_),readonly:e.readonly,disabled:e.disabled,editable:e.editable,clearable:e.clearable,placeholder:e.placeholder,"start-placeholder":e.startPlaceholder,"end-placeholder":e.endPlaceholder,type:e.type,format:e.format,"popper-class":e.popperClass,"popper-options":e.popperOptions,"popper-style":t(x),"range-separator":e.rangeSeparator,"default-value":e.defaultValue,"default-time":e.defaultTime,"value-format":e.valueFormat,"unlink-panels":e.unlinkPanels,"prefix-icon":e.prefixIcon,"clear-icon":e.clearIcon,"validate-event":e.validateEvent,"disabled-date":n.disabledDate,shortcuts:e.shortcuts,"cell-class-name":e.cellClassName,teleported:e.teleported,"empty-values":e.emptyValues,"value-on-clear":e.valueOnClear,"fallback-placements":e.fallbackPlacements,placement:e.placement,class:j(["am-date-picker",[`am-date-picker--${n.size}`,{"am-date-picker--disabled":e.disabled}]]),onChange:f[1]||(f[1]=_=>c.$emit("change",_)),onBlur:f[2]||(f[2]=_=>c.$emit("blur",_)),onFocus:f[3]||(f[3]=_=>c.$emit("focus",_)),onClear:f[4]||(f[4]=_=>c.$emit("clear",_)),onCalendarChange:f[5]||(f[5]=_=>c.$emit("calendar-change",_)),onPanelChange:f[6]||(f[6]=_=>c.$emit("panel-change",_)),onVisibleChange:f[7]||(f[7]=_=>c.$emit("visible-change",_))},null,8,["id","modelValue","readonly","disabled","editable","clearable","placeholder","start-placeholder","end-placeholder","type","format","popper-class","popper-options","popper-style","range-separator","default-value","default-time","value-format","unlink-panels","prefix-icon","clear-icon","validate-event","disabled-date","shortcuts","cell-class-name","teleported","empty-values","value-on-clear","fallback-placements","placement","class"])]),_:1},8,["locale"])],6)}}};const F0={class:"am-oit__wrapper"},w0={class:"am-oit"},P0={class:"am-oit__img"},T0={key:0},L0={class:"am-oit__content am-oit__content-short"},S0={class:"am-oit__data"},I0={class:"am-oit__data-label-name"},$0=["innerHTML"],N0={style:{display:"flex"}},O0=m("span",{class:"am-icon-circle-info"},null,-1),M0=[O0],V0={class:"am-dialog__title"},R0={class:"am-dialog__body"},q0={class:"am-dialog__body-heading"},U0={class:"am-oit__img"},z0={key:0},j0={class:"am-dialog__body-heading__text"},Y0={class:"am-dialog__body-heading__text-name"},W0=["innerHTML"],H0={inheritAttrs:!1},Z0=Object.assign(H0,{props:{identifier:{type:[String,Number],required:!0},imageThumb:{type:String,default:""},label:{type:[String,Number],default:""},description:{type:String,default:""},price:{type:[String,Number],default:""},dialogTitle:{type:String,default:""},dialogButtonText:{type:String,default:""},badge:{type:[String,Number,Object]}},emits:["click"],setup(n,{emit:a}){const e=n;let s=V(!1);const l=d=>{d.stopPropagation(),s.value=!0},o=()=>{s.value=!1,a("click",e.identifier)};function i(d){if(!d)return"";let _=d.replace(/<br\s*\/?>/gi," ");return _=_.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<\/li>/gi," "),_=_.replace(/<[^>]*>/g,""),_=_.replace(/&nbsp;/g," "),_=_.replace(/\s+/g," ").trim(),_}function r(){if(e.label){let d="";return e.label.split(" ").forEach(_=>{d+=_.charAt(0).toUpperCase()}),d}}let x=U("primDescBtnType","filled"),c=U("amColors"),f=b(()=>({"--am-oit-c-main-bgr":c.value.colorMainBgr,"--am-oit-c-main-btn-color":c.value.colorBtnPrim,"--am-oit-c-main-btn-color-text":c.value.colorBtnPrimText,"--am-oit-c-main-heading-text":c.value.colorMainHeadingText,"--am-oit-c-main-heading-text-op90":K(c.value.colorMainHeadingText,.9),"--am-oit-c-main-text":c.value.colorMainText,"--am-c-option-img-text":c.value.colorMainBgr})),p=b(()=>({"--am-c-option-selected":c.value.colorPrimary}));return(d,_)=>(u(),B("span",F0,[m("span",w0,[m("span",P0,[m("span",{class:"am-oit__img-placeholder",style:Be({backgroundImage:`url(${e.imageThumb})`})},[e.imageThumb?I("",!0):(u(),B("span",T0,w(r()),1))],4)]),m("span",L0,[m("span",S0,[m("span",{class:j(`am-oit__data-label ${n.badge?"am-oit__data-label-wrap":""}`)},[m("span",I0,w(n.label),1),n.badge?(u(),B("span",{key:0,class:"am-oit__data-label-badge",style:Be({background:n.badge.color})},w(n.badge.content),5)):I("",!0)],2),!n.badge&&t($n)(n.description)?(u(),B("span",{key:0,class:"am-oit__data-description",innerHTML:i(n.description)},null,8,$0)):I("",!0)]),m("span",N0,[e.price?(u(),B("span",{key:0,class:"am-oit__price",style:Be(t(p))},w(e.price),5)):I("",!0),t($n)(n.description)?(u(),B("span",{key:1,class:"am-oit__info-trigger",onClick:l},M0)):I("",!0)])])]),t($n)(n.description)?(u(),Y(f0,{key:0,modelValue:t(s),"onUpdate:modelValue":_[0]||(_[0]=T=>De(s)?s.value=T:s=T),"custom-class":"am-option-template-dialog am-dialog ql-description","append-to-body":!0,"custom-styles":t(f),"destroy-on-close":!0,"align-center":!0,"modal-class":"am-dialog-employee-description"},{title:S(()=>[m("span",V0,w(n.dialogTitle),1)]),footer:S(()=>[N(Fe,{type:t(x),category:"primary",onClick:o},{default:S(()=>[ce(w(n.dialogButtonText),1)]),_:1},8,["type"])]),default:S(()=>[m("div",R0,[m("div",q0,[m("span",U0,[m("span",{class:"am-oit__img-placeholder",style:Be({backgroundImage:`url(${e.imageThumb})`})},[e.imageThumb?I("",!0):(u(),B("span",z0,w(r()),1))],4)]),m("div",j0,[m("span",Y0,w(n.label),1),n.badge?(u(),B("span",{key:0,class:"am-dialog__body-heading__text-badge",style:Be({background:n.badge.color})},w(n.badge.content),5)):I("",!0)])]),m("div",{class:"am-dialog__body-content",innerHTML:n.description},null,8,W0)])]),_:1},8,["modelValue","custom-styles"])):I("",!0)]))}});function G0(n,a,e){let s={};return n.forEach(l=>{a===""&&l.periods.forEach(f=>{f.periodStart=Al(f.periodStart),f.periodEnd=Al(f.periodEnd)});let i=Ce(l.periods[0].periodStart,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD"),r=e.getters.getSettings.general.usedLanguages.map(f=>f.length>2?f.slice(0,2):f);(e.getters.getSettings.general.usedLanguages.indexOf(e.getters.getLocalLanguage)!==-1||r.indexOf(e.getters.getLocalLanguage.split("_")[0])!==-1)&&(l.name=qt(l),l.customTickets.forEach(f=>{f.name=g0(f)})),l.recurring&&l.recurring.until&&(l.recurring.until=l.recurring.until.split(" ")[0]),i in s||(s[i]={date:i,events:[]});let c=l.bookings.some(f=>f.status==="waiting");if(l.full&&l.status==="approved"?l.status="full":l.upcoming&&l.status==="approved"&&(l.status="upcoming"),c&&(l.status="waiting"),e.getters["auth/getProfile"].type==="provider"){let f=JSON.parse(JSON.stringify(l));s[i].events.push(f)}else l.bookings.forEach(f=>{let p=JSON.parse(JSON.stringify(l));p.bookings=[f],s[i].events.push(p)})}),s}function Ii(n){let a=0;return n.bookings.forEach(e=>{if(["approved","pending"].includes(e.status)){let s=0;if(e.ticketsData.length>0)for(let o=0;o<e.ticketsData.length;o++)s+=e.ticketsData[o].persons*e.ticketsData[o].price;else s+=n.price*e.persons;let l=xo(n,e.coupon,e.tax?e.tax[0]:null,s,!1);a+=l.price-l.discount+l.tax}}),a>=0?a:0}function J0(n){let a=[];return n.forEach(e=>{let s=Ce(e.periodStart.split(" ")[0],"YYYY-MM-DD"),l=Ce(e.periodEnd.split(" ")[0],"YYYY-MM-DD"),o=e.periodStart.split(" ")[1].slice(0,5),i=e.periodEnd.split(" ")[1].slice(0,5);i==="00:00"&&(i="24:00",l.subtract(1,"days"));let r=[];for(;s.isSameOrBefore(l);)r.push(s.format("YYYY-MM-DD")),s.add(1,"days");r.forEach(x=>{a.push({date:x,startTime:o,endTime:i,periodStart:x+" "+o,periodEnd:x+" "+i,zoomLink:n.length>1&&e.zoomMeeting?e.zoomMeeting.joinUrl:"",lessonSpaceLink:n.length>1&&e.lessonSpace?e.lessonSpace:"",googleMeetLink:n.length>1&&e.googleMeetUrl?e.googleMeetUrl:"",microsoftTeamsLink:n.length>1&&e.microsoftTeamsUrl?e.microsoftTeamsUrl:""})})}),a}function X0(n){let a={};return n.bookings.forEach(e=>{["approved","pending"].includes(e.status)&&e.ticketsData&&e.ticketsData.length&&e.ticketsData.forEach(s=>{s.eventTicketId in a||(a[s.eventTicketId]={persons:0,price:s.price,name:n.customTickets.find(l=>l.id===s.eventTicketId).name}),a[s.eventTicketId].persons=a[s.eventTicketId].persons+s.persons})}),a}function Q0(n,a){let e=n.getters["entities/getLocations"];if(a.locationId&&e.length){let s=e.find(l=>l.id===a.locationId);return typeof s<"u"?s:null}else if(a.customLocation)return{address:"",name:a.customLocation};return null}function K0(n){let a=[];return n.bookings.forEach(e=>{if(["approved","pending"].includes(e.status)&&e.qrCodes){let s=JSON.parse(e.qrCodes);s=s.map(l=>({...l,bookingId:e.id,eventId:n.id})),a=a.concat(s)}}),a}const ec={class:"am-msd__item-wrapper"},tc={class:"am-msd__item-inner"},ac=m("div",{class:"am-msd__item-icon"},[m("span",{class:"am-icon-close"})],-1),sc=["onClick"],lc={class:"am-msd__item-inner"},nc={class:"am-msd__item-icon"},oc={key:1,class:"am-msd__item-divider"},ic={class:"am-msd__item-inner"},rc=m("div",{class:"am-msd__item-icon"},[m("span",{class:"am-icon-logout"})],-1),cc={class:"am-msd__item-heading"},xc={props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},monitor:{type:String,required:!0},menuItems:{type:Array,required:!0},customCss:{type:Object,default:()=>{}},width:{type:Number,default:300},position:{type:String,default:"right",validator(n){return["right","left","top","bottom"].includes(n)}}},emits:["click","update:visibility","logout"],setup(n,{emit:a}){const e=n;let s=U("labels");const l=Oe();let o=b(()=>document?document.documentElement.dir==="rtl":!1);function i(f,p){a("click",{step:f,index:p}),a("update:visibility",!1)}function r(){a("update:visibility",!1)}function x(f){return Object.keys(e.customizedLabels).length&&e.customizedLabels[f]?e.customizedLabels[f]:s[f]}let c=b(()=>({"--am-mw-msd":`${e.width}px`}));return(f,p)=>(u(),Y(Sa,{visibility:n.visibility,position:n.position,"custom-class":"am-msd","close-outside":!0,"custom-css":{...n.customCss,...t(c)},"onUpdate:visibility":p[1]||(p[1]=d=>t(a)("update:visibility",!1))},{footer:S(()=>[m("div",{class:"am-msd__item",onClick:p[0]||(p[0]=()=>t(a)("logout"))},[m("div",ic,[rc,m("p",cc,w(x("log_out")),1)])])]),default:S(()=>[m("div",ec,[m("div",{class:"am-msd__item",onClick:r},[m("div",tc,[N(ga,{name:"fade"},{default:S(()=>[m("p",{class:j(["am-msd__item-heading",{"am-rtl":t(o)}])},w(x("menu_title")),3)]),_:1}),N(ga,{name:"fade"},{default:S(()=>[ac]),_:1})])]),(u(!0),B(ne,null,Ee(n.menuItems,(d,_)=>(u(),B(ne,{key:d.key},[d.key!=="packages"||t(l).getters["entities/getPackages"].length?(u(),B("div",{key:0,class:j(["am-msd__item",{selected:n.monitor===d.key}]),onClick:T=>i(d,_)},[m("div",lc,[m("div",nc,[m("span",{class:j(`am-icon-${d.icon}`)},null,2)]),N(ga,{name:"fade"},{default:S(()=>[m("p",{class:j(["am-msd__item-heading",{"am-rtl":t(o)}])},w(d.label),3)]),_:2},1024),N(ga,{name:"fade"},{default:S(()=>[m("div",{class:j(["am-msd__item-indicator",{"am-rtl":t(o)}])},[m("span",{class:j(t(o)?"am-icon-arrow-big-left":"am-icon-arrow-big-right")},null,2)],2)]),_:1})])],10,sc)):I("",!0),_===0?(u(),B("div",oc)):I("",!0)],64))),128))])]),_:1},8,["visibility","position","custom-css"]))}};const Zn={props:{size:{type:String,default:"default"}},setup(n){const a=n,e=Nl().cookies,s=U("settings");let l=U("cabinetType"),{bookingsCounterChanger:o}=U("bookingsCounterChanger",{bookingsCounterChanger:()=>{}});const i=Oe();let r=b({get:()=>i.getters["cabinet/getTimeZone"],set:E=>{i.commit("cabinet/setTimeZone",E||"")}}),x=b(()=>i.getters["appointment/getActive"]||i.getters["event/getActive"]||i.getters["attendee/getActive"]);const c=U("timeZone"),f=U("timeZones");let p=V("");function d(E){p.value=E.toLowerCase()}let _=b(()=>p.value?f.filter(E=>E.toLowerCase().includes(p.value)):f);function T(){let E;s.general.showClientTimeZone?E=zs():E=c.value,e.set("ameliaUserTimeZone",E,s.roles[l.value+"Cabinet"].tokenValidTime),o(),i.commit("cabinet/setTimeZone",E)}function A(E){e.set("ameliaUserTimeZone",E,s.roles[l.value+"Cabinet"].tokenValidTime),o()}return(E,P)=>t(x)?I("",!0):(u(),Y(Je,{key:0,modelValue:t(r),"onUpdate:modelValue":P[0]||(P[0]=L=>De(r)?r.value=L:r=L),filterable:!0,placeholder:t(zs)(),clearable:!0,size:t(a).size,"custom-class":"am-ctz","prefix-icon":"globe-watch","filter-method":d,onClear:T,onChange:A},{default:S(()=>[(u(!0),B(ne,null,Ee(t(_),(L,D)=>(u(),Y(Ye,{key:D,label:L,value:L},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","size"]))}};function $i(){return"ameliaBooking"in window&&"cabinet"in window.ameliaBooking&&"disableAuthorizationHeader"in window.ameliaBooking.cabinet&&window.ameliaBooking.cabinet.disableAuthorizationHeader}function Ue(n){let a=n.getters["auth/getToken"];return a&&!$i()?{headers:{Authorization:"Bearer "+a}}:{}}const uc={key:0,class:"el-skeleton-item-wrapper-title"},dc={name:"AuthSkeleton"},Wt=Object.assign(dc,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(n){const a=n;return(e,s)=>{const l=Ol,o=Ml;return u(),Y(o,{animated:"",class:j(["am-asi-el-skeleton",t(a).mainClass])},{template:S(()=>[t(a).centerFirst?(u(),B("div",uc,[N(l,{variant:"rect"})])):I("",!0),(u(!0),B(ne,null,Ee(new Array(t(a).count),i=>(u(),B("div",{key:i,class:"el-skeleton-item-wrapper"},[N(l,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});function mc(n,a){let e=ja(ja(ja(window.location.href,"code"),"state"),"scope");$e.post("/google/authorization/token",{authCode:n,userId:kl(window.location.href).state,redirectUri:e}).then(()=>{history.pushState(null,null,e)}).catch(s=>{console.log(s)}).finally(()=>{a()})}function pc(n){const a=n.getters.getSettings;n.getters["auth/getGoogleLoading"]||(n.commit("auth/setGoogleLoading",!0),a.googleCalendar.accessToken||$e.get("/google/authorization/url/"+n.getters["employee/getId"],Object.assign({redirectUri:window.location.href.split("?")[0]},Ue(n))).then(e=>{window.location.href=e.data.data.authUrl.replace(/redirect_uri=.+?&/,"redirect_uri="+window.location.href+"&")}).catch(e=>{console.log(e),n.commit("auth/setGoogleLoading",!1)}),a.googleCalendar.accessToken&&$e.get("/google-calendar/authorization/url/"+n.getters["employee/getId"],{params:{redirectUri:window.location.href}}).then(e=>{window.location.href=e.data.data.authUrl}).catch(e=>{console.log(e),n.commit("auth/setGoogleLoading",!1)}))}async function fc(n){n.commit("auth/setGoogleLoading",!0),await $e.post("/google/disconnect/"+n.getters["employee/getId"]).then(async()=>{n.commit("employee/setGoogleId",null),n.commit("employee/setGoogleCalendarId",""),n.commit("employee/setGoogleToken",null),n.commit("auth/setGoogleCalendars",[])}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setGoogleLoading",!1)})}function gc(n,a){let e=ja(ja(ja(window.location.href,"code"),"state"),"type");$e.post("/outlook/authorization/token",{authCode:n,userId:kl(window.location.href).state.split("amelia-outlook-calendar-auth-")[1],redirectUri:window.location.href.split("?")[0]}).then(()=>{history.pushState({},null,e)}).catch(s=>{console.log(s)}).finally(()=>{a()})}function hc(n){const a=n.getters.getSettings;n.getters["auth/getOutlookLoading"]||(n.commit("auth/setOutlookLoading",!0),a.outlookCalendar.accessToken||$e.get("/outlook/authorization/url/"+n.getters["employee/getId"],Object.assign({redirectUri:window.location.href.split("?")[0]},Ue(n))).then(e=>{window.location.href=e.data.data.authUrl.replace(/redirect_uri=.+?&/,"redirect_uri="+window.location.href+"&")}).catch(e=>{console.log(e),n.commit("auth/setOutlookLoading",!1)}),a.outlookCalendar.accessToken&&$e.get("/outlook-calendar/authorization/url/"+n.getters["employee/getId"],{params:{redirectUri:window.location.href}}).then(e=>{window.location.href=e.data.data.authUrl}).catch(e=>{console.log(e),n.commit("auth/setOutlookLoading",!1)}))}function vc(n){n.commit("auth/setOutlookLoading",!0),$e.post("/outlook/disconnect/"+n.getters["employee/getId"]).then(()=>{n.commit("employee/setOutlookId",""),n.commit("employee/setOutlookCalendarId",""),n.commit("employee/setOutlookToken",null),n.commit("auth/setOutlookCalendars",[])}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setOutlookLoading",!1)})}function Ec(n){n.commit("auth/setZoomLoading",!0),$e.get("/zoom/users",Object.assign(Ue(n),{params:{source:"cabinet-provider"}})).then(a=>{"data"in a.data&&"users"in a.data.data&&n.commit("auth/setZoomUsers",a.data.data?.users?a.data.data.users:[])}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setZoomLoading",!1)})}function _c(n){n.commit("auth/setStripeLoading",!0),$e.get("/stripe/accounts/"+n.getters["employee/getId"],Object.assign({},Ue(n))).then(a=>{a.data.data.account&&(n.commit("auth/setStripeProvider",a.data.data.account),n.getters["employee/getStripeConnect"]||n.commit("employee/setStripeConnect",{id:a.data.data.account.id,amount:null}))}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setStripeLoading",!1)})}function Cc(n,a){n.commit("auth/setStripeLoading",!0),$e.post("/stripe/onboard/"+n.getters["auth/getProfile"].id,Object.assign({returnUrl:window.location.href,accountType:a},Ue(n))).then(e=>{window.location.href=e.data.data.url}).catch(e=>{n.commit("auth/setStripeLoading",!1),console.log("response"in e&&"data"in e.response&&"message"in e.response.data?e.response.data.message:e.message)})}function yc(n){n.commit("auth/setStripeLoading",!0),$e.post("/stripe/disconnect/"+n.getters["auth/getProfile"].id,Ue(n)).then(()=>{n.commit("auth/setStripeProvider",{id:"",email:"",type:"",completed:!1}),n.commit("employee/setStripeConnect",null)}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setStripeLoading",!1)})}function bc(n){let a=n.getters["auth/getStripeProvider"];n.commit("auth/setStripeLoading",!0),a.type==="standard"?(window.open("https://dashboard.stripe.com/"+a.id,"_blank"),n.commit("auth/setStripeLoading",!1)):a.type==="express"&&$e.post("/stripe/dashboard/"+n.getters["auth/getProfile"].id,Ue(n)).then(e=>{e.data.data.url&&window.open(e.data.data.url,"_blank")}).catch(e=>{console.log(e)}).finally(()=>{n.commit("auth/setStripeLoading",!1)})}let Aa=V(!1);function Gn(n){n.commit("auth/setAppleLoading",!0),$e.get("/apple/calendar-list/"+n.getters["employee/getId"],Ue(n)).then(a=>{n.commit("auth/setAppleCalendars",a.data.data?.calendarList?a.data.data.calendarList:[]),n.getters["auth/getAppleCalendars"].map(e=>e.id).indexOf(n.getters["employee/getAppleCalendarId"])===-1&&n.commit("employee/setAppleCalendarId",""),n.commit("employee/setAppleCalendarId",a.data.data?.appleCalendarId),Aa.value=a.data.data.isEmployeeConnectedToPersonalAppleCalendar}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setAppleLoading",!1)})}const Bc={class:"am-asi__top"},Ac={class:"am-asi__header"},kc={class:"am-asi__text"},Dc={key:0},Fc={class:"am-asi__social-wrapper"},wc={class:"am-asi__social-divider"},Pc={class:"par-sm"},Tc={class:"am-asi__footer"},Lc={class:"am-asi__footer-text"},Sc={key:1,id:"am-recaptcha",class:"am-recaptcha-holder"},Ic={name:"AuthSignIn"},$c=Object.assign(Ic,{setup(n){let a=U("licence"),e=Oe();const s=Nl().cookies,l=U("settings");let o=U("amCustomize");const i=U("labels"),r=U("localLanguage");let x=b(()=>l.general.usedLanguages.includes(r.value)),c=b(()=>{let $=tt({...i}),W=o.value.signIn.translations;return W&&Object.keys(W).forEach(ae=>{W[ae][r.value]&&x.value?$[ae]=W[ae][r.value]:W[ae].default&&($[ae]=W[ae].default)}),$}),f={components:{IconComponent:Ge},template:'<IconComponent icon="email"></IconComponent>'},p={components:{IconComponent:Ge},template:'<IconComponent icon="password"></IconComponent>'},d=V("");const _=Vr.factory($e,Rr);function T({provider:$,credentials:W}){e.commit("setLoading",!0);const ae=`/users/authentication/${$}`,J={};d=$,J.cabinetType=R.value,$==="facebook"&&(J.redirectUri=_.options.providers[$].redirectUri,_.options.providers[$].url=`${ae}`,e.commit("setLoading",!1),_.authenticate($,J).then(Z=>{y.value.email=Z.data.data.user.email,A(Z,!0)}).catch(Z=>{_.isAuthenticated()||(H.value=!0,z.value="User is not authenticated.",e.commit("setLoading",!1)),Z.response?.data&&(H.value=!0,z.value=Z.response.data.message),e.commit("setLoading",!1)})),$==="google"&&(J.code=W,$e.post(`${ae}`,J).then(Z=>{y.value.email=Z.data.data.user.email,A(Z,!0)}).catch(Z=>{if(!("data"in Z.response.data)&&"message"in Z.response.data){H.value=!0,z.value=Z.response.data.message;return}"invalid_credentials"in Z.response.data.data&&(H.value=!0,z.value=c.value.invalid_credentials)}).finally(()=>{e.commit("setLoading",!1)}))}function A($,W){if("token"in $.data.data){const J=window.location.protocol==="https:";s.set("ameliaToken",$.data.data.token,l.roles[R.value+"Cabinet"].tokenValidTime,null,null,J),s.set("ameliaUserEmail",$.data.data.user.email,l.roles[R.value+"Cabinet"].tokenValidTime,null,null,J),e.commit("auth/setToken",$.data.data.token)}"user"in $.data.data&&$.data.data.user.type==="provider"&&le($),e.commit("auth/setProfile",$.data.data.user),$.data.data.user.timeZone&&e.commit("cabinet/setTimeZone",$.data.data.user.timeZone),!$.data.data.user.countryPhoneIso&&l.general.phoneDefaultCountryCode&&l.general.phoneDefaultCountryCode!=="auto"&&e.commit("auth/setProfileCountryPhoneIso",l.general.phoneDefaultCountryCode),W&&e.commit("auth/setAuthenticated",W);let ae=R.value==="customer"?l.roles.customerCabinet.tokenValidTime*1e3:l.roles.providerCabinet.tokenValidTime*1e3;ae>0&&ae<18144e5&&setTimeout(()=>{e.dispatch("auth/logout")},ae),window?.ameliaBooking?.cabinet?.userLoggedIn&&window.ameliaBooking.cabinet.userLoggedIn($.data.data.user)}let E=V(null),P=V(!1),L=V(null);function D(){P.value=!1,H.value=!0,z.value=c.value.recaptcha_invalid_error}function h($){P.value=!0,L.value=$,l.general.googleRecaptcha.invisible&&ee()}let g=V(null),y=V({email:b({get:()=>e.getters["auth/getEmail"],set:$=>{e.commit("auth/setEmail",$||"")}}),password:b({get:()=>e.getters["auth/getPassword"],set:$=>{e.commit("auth/setPassword",$||"")}})}),k=V({email:[{required:!0,message:c.value.enter_email_or_username_warning,trigger:"submit"}],password:[{required:!0,message:c.value.enter_password_warning,trigger:"submit"}]}),C=V({email:{template:We.text,props:{itemName:"email",label:c.value.email_or_username,prefixIcon:Qe(f),placeholder:"",class:"am-asi__item"}},password:{template:We.text,props:{itemName:"password",itemType:"password",showPassword:!0,label:c.value.password,prefixIcon:Qe(p),placeholder:"",class:"am-asi__item"}}}),F=U("pageKey"),R=U("cabinetType"),M=b(()=>e.getters.getLoading),O=b(()=>e.getters["auth/getProfileDeleted"]),H=V(!1),z=V("");function X($,W){let ae=Ro("token");$?Q($,!1,!1,!1):ae?Q(ae,!0,!1,W):Q("",!1,!0,!1)}function le($){let W={id:$.data.data.user.id,firstName:$.data.data.user.firstName,lastName:$.data.data.user.lastName,email:$.data.data.user.email,phone:$.data.data.user.phone,countryPhoneIso:$.data.data.user.countryPhoneIso,googleCalendar:{id:"id"in $.data.data.user.googleCalendar?$.data.data.user.googleCalendar.id:null,calendarId:$.data.data.user.googleCalendar.calendarId?$.data.data.user.googleCalendar.calendarId:"",token:"token"in $.data.data.user.googleCalendar?$.data.data.user.googleCalendar.token:null},outlookCalendar:{id:"id"in $.data.data.user.outlookCalendar?$.data.data.user.outlookCalendar.id:null,calendarId:$.data.data.user.outlookCalendar.calendarId?$.data.data.user.outlookCalendar.calendarId:"",token:"token"in $.data.data.user.outlookCalendar?$.data.data.user.outlookCalendar.token:null},appleCalendarId:$.data.data.user.appleCalendarId?$.data.data.user.appleCalendarId:"",googleCalendarId:$.data.data.user.googleCalendarId?$.data.data.user.googleCalendarId:"",outlookCalendarId:$.data.data.user.outlookCalendarId?$.data.data.user.outlookCalendarId:"",stripeConnect:$.data.data.user.stripeConnect,zoomUserId:$.data.data.user.zoomUserId?$.data.data.user.zoomUserId:"",locationId:$.data.data.user.locationId,pictureFullPath:$.data.data.user.pictureFullPath,pictureThumbPath:$.data.data.user.pictureThumbPath,description:$.data.data.user.description,weekDayList:$.data.data.user.weekDayList,specialDayList:$.data.data.user.specialDayList,dayOffList:$.data.data.user.dayOffList,serviceList:$.data.data.user.serviceList};W.serviceList.forEach(ae=>{Ur(ae,!0)}),e.commit("employee/setSavedSpecialDayList",JSON.parse(JSON.stringify($.data.data.user.specialDayList))),e.commit("employee/setSavedDayOffList",JSON.parse(JSON.stringify($.data.data.user.dayOffList))),W.serviceList.forEach(ae=>{zr(ae)}),e.getters["entities/getReady"]&&(e.commit("entities/setEmployees",[JSON.parse(JSON.stringify(W))]),W.serviceList=Di(e,W.serviceList)),e.commit("employee/setEmployee",jr(e,W)),e.commit("auth/setOutlookCalendars",$.data.data.user.outlookCalendar?.calendarList?$.data.data.user.outlookCalendar.calendarList:[]),e.commit("auth/setGoogleCalendars",$.data.data.user.googleCalendar?.calendarList?$.data.data.user.googleCalendar.calendarList:[]),l.appleCalendar&&!a.isLite&&!a.isStarter&&Gn(e),l.payments.stripe.enabled&&l.payments.stripe.connect.enabled&&!a.isLite&&!a.isStarter&&!a.isBasic&&_c(e),l.zoom.enabled&&!a.isLite&&!a.isStarter&&Ec(e)}function Q($,W,ae,J){let Z={cabinetType:R.value,changePass:J};L.value!==null&&(Z.recaptcha=L.value),ae&&(Z.checkIfWpUser=!0);let xe=e.getters["auth/getPassword"],he=e.getters["auth/getEmail"];!$&&xe&&he&&(Z.password=xe,Z.email=he),W&&(Z.token=$),$e.post("/users/authenticate",Z,$!==null&&!$i()?{headers:{Authorization:"Bearer "+$}}:{}).then(re=>{if("authentication_required"in re.data.data){l.roles[R.value+"Cabinet"].loginEnabled||(F.value="sendAccessLink");return}A(re,!1),Ro("token")&&window.history.replaceState(null,null,ja(window.location.href,"token")),"set_password"in re.data.data&&re.data.data.set_password||"change_password"in re.data.data&&re.data.data.change_password?F.value="setPassword":e.commit("auth/setAuthenticated",!0)}).catch(re=>{if(!("data"in re.response.data)&&"message"in re.response.data){H.value=!0,z.value=re.response.data.message;return}"invalid_credentials"in re.response.data.data&&(H.value=!0,z.value=c.value.invalid_credentials),"recaptcha_error"in re.response.data.data&&(H.value=!0,z.value=c.value.recaptcha_error)}).finally(()=>{e.commit("setLoading",!1)})}function ue(){g.value.validate($=>{if($)if(l.general.googleRecaptcha.enabled&&l.roles[R.value+"Cabinet"].googleRecaptcha)if(l.general.googleRecaptcha.invisible)E.value.execute();else if(P.value)ee();else return H.value=!0,z.value=c.value.recaptcha_error,!1;else ee();else return!1})}function ee(){e.commit("setLoading",!0),Q(null,!1,!1,!1)}function me(){X(s.get("ameliaToken"),"changePass"in kl(window.location.href))}Gs(()=>{e.commit("setLoading",!0)}),Ze(()=>{if(e.getters["auth/getLoggedOut"])l.roles[R.value+"Cabinet"].loginEnabled||(F.value="sendAccessLink"),e.commit("setLoading",!1);else{let $=kl(window.location.href);l.googleCalendar.enabled&&R.value==="provider"&&$&&$.code&&$.scope?mc($.code,me):l.outlookCalendar.enabled&&R.value==="provider"&&$&&$.code&&$.state?gc($.code,me):me()}});let se=U("containerWidth"),_e=b(()=>ot(se.value)),de=U("amFonts"),oe=U("amColors"),ye=b(()=>({"--am-c-primary":oe.value.colorPrimary,"--am-c-success":oe.value.colorSuccess,"--am-c-error":oe.value.colorError,"--am-c-warning":oe.value.colorWarning,"--am-c-main-bgr":oe.value.colorMainBgr,"--am-c-main-heading-text":oe.value.colorMainHeadingText,"--am-c-main-text":oe.value.colorMainText,"--am-c-main-text-op70":K(oe.value.colorMainText,.7),"--am-c-main-text-op60":K(oe.value.colorMainText,.6),"--am-c-main-text-op40":K(oe.value.colorMainText,.4),"--am-c-main-text-op25":K(oe.value.colorMainText,.25),"--am-c-inp-bgr":oe.value.colorInpBgr,"--am-c-inp-border":oe.value.colorInpBorder,"--am-c-inp-text":oe.value.colorInpText,"--am-c-inp-placeholder":oe.value.colorInpPlaceHolder,"--am-c-btn-prim":oe.value.colorBtnPrim,"--am-c-btn-prim-text":oe.value.colorBtnPrimText,"--am-c-skeleton-op20":K(oe.value.colorMainText,.2),"--am-c-skeleton-op60":K(oe.value.colorMainText,.6),"--am-font-family":de.value.fontFamily,"--am-c-scroll-op30":K(oe.value.colorPrimary,.3),"--am-c-scroll-op10":K(oe.value.colorPrimary,.1)}));return($,W)=>{const ae=st;return t(M)?(u(),Y(t(Wt),{key:1,count:4,"center-first":!0,"main-class":"am-asi-sign-in am-asi"})):(u(),B("div",{key:0,class:"am-asi",style:Be(t(ye))},[m("div",Bc,[t(O)?(u(),Y(bt,{key:0,class:"am-asi__top-message am-asi__top-message-success",type:"success",title:t(c).profile_deleted,description:"","show-icon":!0,closable:!0,onClose:W[0]||(W[0]=J=>t(e).commit("auth/setProfileDeleted",!1))},null,8,["title"])):I("",!0),t(H)?(u(),Y(bt,{key:1,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:t(z),description:"","show-icon":!0,closable:!0,onClose:W[1]||(W[1]=J=>t(e).commit("auth/setProfileDeleted",!1))},null,8,["title"])):I("",!0),m("div",Ac,w(t(c).welcome_back),1),m("div",kc,w(t(c).enter_credentials),1)]),t(lt).socialLogin.googleLoginEnabled&&t(lt).general.googleClientId||t(lt).socialLogin.facebookLoginEnabled&&t(lt).socialLogin.facebookCredentialsEnabled?(u(),B("div",Dc,[m("div",Fc,[N(qr,{provider:t(d),onSocialAction:T},null,8,["provider"])]),m("div",wc,[m("span",Pc,w(t(c).or_enter_details_below),1)])])):I("",!0),N(ae,{ref_key:"authFormRef",ref:g,model:t(y),rules:t(k),"label-position":"top",class:j(["am-asi__form",t(_e)])},{default:S(()=>[(u(!0),B(ne,null,Ee(t(C),(J,Z)=>(u(),Y(ft(J.template),Ft({key:Z,ref_for:!0,ref:"customerCollectorRef",modelValue:t(y)[Z],"onUpdate:modelValue":xe=>t(y)[Z]=xe},J.props,{onEnter:ue}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),N(Fe,{class:"am-asi__btn",type:t(o).signIn.options.signInBtn.buttonType,onClick:ue},{default:S(()=>[ce(w(t(c).sign_in),1)]),_:1},8,["type"]),m("div",Tc,[m("span",Lc,w(t(c).forgot_your_password),1),m("span",{class:"am-asi__footer-link",onClick:W[2]||(W[2]=J=>De(F)?F.value="sendAccessLink":F="sendAccessLink")},w(t(c).reset_password),1)]),t(l).general.googleRecaptcha.enabled&&t(l).roles[t(R)+"Cabinet"].googleRecaptcha?(u(),B("div",Sc,[N(t(ki),{ref_key:"recaptchaRef",ref:E,size:t(l).general.googleRecaptcha.invisible?"invisible":null,"load-recaptcha-script":!0,sitekey:t(l).general.googleRecaptcha.siteKey,onVerify:h,onExpired:D},null,8,["size","sitekey"])])):I("",!0)],4))}}});const Nc={class:"am-asi__top"},Oc={class:"am-asi__header"},Mc={class:"am-asi__text"},Vc={key:0,class:"am-asi__footer"},Rc={key:1,id:"am-recaptcha",class:"am-recaptcha-holder"},qc={name:"AuthReset"},Uc=Object.assign(qc,{setup(n){let a=Oe();const e=U("settings");let s=U("amCustomize");const l=U("labels"),o=U("localLanguage");let i=b(()=>e.general.usedLanguages.includes(o.value)),r=b(()=>{let H=tt({...l}),z=s.value.accessLink.translations;return z&&Object.keys(z).forEach(X=>{z[X][o.value]&&i.value?H[X]=z[X][o.value]:z[X].default&&(H[X]=z[X].default)}),H}),x=V(!1),c=V(""),f=V(null),p=V(!1),d=V(null);function _(){p.value=!1,x.value=!0,c.value=r.value.recaptcha_invalid_error}function T(H){p.value=!0,d.value=H,e.general.googleRecaptcha.invisible&&k()}let A=V(null),E=V({email:b({get:()=>a.getters["auth/getEmail"],set:H=>{a.commit("auth/setEmail",H||"")}})}),P=V({email:[{required:!0,message:r.value.enter_email_warning,trigger:"submit"}]}),L=V({email:{template:We.text,props:{itemName:"email",itemType:"email",label:r.value.email,placeholder:"",class:"am-asi__item"}}}),D=U("pageKey"),h=U("cabinetType"),g=b(()=>a.getters.getLoading);function y(){A.value.validate(H=>{if(H)if(e.general.googleRecaptcha.enabled&&e.roles[h.value+"Cabinet"].googleRecaptcha)if(e.general.googleRecaptcha.invisible)f.value.execute();else if(p.value)k();else return x.value=!0,c.value=r.value.recaptcha_error,!1;else k();else return!1})}function k(){a.commit("setLoading",!0);let H={email:a.getters["auth/getEmail"],locale:window.localeLanguage[0],cabinetType:h.value};d.value!==null&&(H.recaptcha=d.value),$e.post("/users/customers/reauthorize",H).then(()=>{D.value="sendAccessLinkProcess"}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)})}let C=U("containerWidth"),F=b(()=>ot(C.value)),R=U("amFonts"),M=U("amColors"),O=b(()=>({"--am-c-primary":M.value.colorPrimary,"--am-c-success":M.value.colorSuccess,"--am-c-error":M.value.colorError,"--am-c-warning":M.value.colorWarning,"--am-c-main-bgr":M.value.colorMainBgr,"--am-c-main-heading-text":M.value.colorMainHeadingText,"--am-c-main-text":M.value.colorMainText,"--am-c-main-text-op70":K(M.value.colorMainText,.7),"--am-c-main-text-op60":K(M.value.colorMainText,.6),"--am-c-main-text-op40":K(M.value.colorMainText,.4),"--am-c-main-text-op25":K(M.value.colorMainText,.25),"--am-c-inp-bgr":M.value.colorInpBgr,"--am-c-inp-border":M.value.colorInpBorder,"--am-c-inp-text":M.value.colorInpText,"--am-c-inp-placeholder":M.value.colorInpPlaceHolder,"--am-c-btn-prim":M.value.colorBtnPrim,"--am-c-btn-prim-text":M.value.colorBtnPrimText,"--am-c-skeleton-op20":K(M.value.colorMainText,.2),"--am-c-skeleton-op60":K(M.value.colorMainText,.6),"--am-font-family":R.value.fontFamily,"--am-c-scroll-op30":K(M.value.colorPrimary,.3),"--am-c-scroll-op10":K(M.value.colorPrimary,.1)}));return(H,z)=>{const X=st;return t(g)?(u(),Y(t(Wt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(u(),B("div",{key:0,class:"am-asi",style:Be(t(O))},[m("div",Nc,[t(x)?(u(),Y(bt,{key:0,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:t(c),description:"","show-icon":!0,closable:!0},null,8,["title"])):I("",!0),m("div",Oc,w(t(r).access_link_send),1),m("div",Mc,w(t(r).access_link_send_description),1)]),N(X,{ref_key:"authFormRef",ref:A,model:t(E),rules:t(P),"label-position":"top",class:j(["am-asi__form",t(F)])},{default:S(()=>[(u(!0),B(ne,null,Ee(t(L),(le,Q)=>(u(),Y(ft(le.template),Ft({key:Q,ref_for:!0,ref:"customerCollectorRef",modelValue:t(E)[Q],"onUpdate:modelValue":ue=>t(E)[Q]=ue},le.props,{onEnter:y}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),N(Fe,{class:"am-asi__btn",type:t(s).accessLink.options.sendBtn.buttonType,onClick:y},{default:S(()=>[ce(w(t(r).send),1)]),_:1},8,["type"]),t(e).roles[t(h)+"Cabinet"].loginEnabled?(u(),B("div",Vc,[m("span",{class:"am-asi__footer-link",onClick:z[0]||(z[0]=le=>De(D)?D.value="signIn":D="signIn")},w(t(r).sign_in),1)])):I("",!0),t(e).general.googleRecaptcha.enabled&&t(e).roles[t(h)+"Cabinet"].googleRecaptcha?(u(),B("div",Rc,[N(t(ki),{ref_key:"recaptchaRef",ref:f,size:t(e).general.googleRecaptcha.invisible?"invisible":null,"load-recaptcha-script":!0,sitekey:t(e).general.googleRecaptcha.siteKey,onVerify:T,onExpired:_},null,8,["size","sitekey"])])):I("",!0)],4))}}});const zc={class:"am-asi__top"},jc={class:"am-asi__header"},Yc={class:"am-asi__text"},Wc={class:"am-asi__email"},Hc={class:"am-asi__footer"},Zc={class:"am-asi__footer-text"},Gc={name:"AuthResetProcess"},Jc=Object.assign(Gc,{setup(n){let a=Oe();const e=U("settings");let s=U("amCustomize");const l=U("labels"),o=U("localLanguage");let i=b(()=>e.general.usedLanguages.includes(o.value)),r=b(()=>{let _=tt({...l}),T=s.value.accessLinkSuccess.translations;return T&&Object.keys(T).forEach(A=>{T[A][o.value]&&i.value?_[A]=T[A][o.value]:T[A].default&&(_[A]=T[A].default)}),_}),x=b(()=>a.getters["auth/getEmail"]),c=U("pageKey"),f=U("amFonts"),p=U("amColors"),d=b(()=>({"--am-c-primary":p.value.colorPrimary,"--am-c-success":p.value.colorSuccess,"--am-c-error":p.value.colorError,"--am-c-warning":p.value.colorWarning,"--am-c-main-bgr":p.value.colorMainBgr,"--am-c-main-heading-text":p.value.colorMainHeadingText,"--am-c-main-text":p.value.colorMainText,"--am-c-main-text-op70":K(p.value.colorMainText,.7),"--am-c-main-text-op60":K(p.value.colorMainText,.6),"--am-c-main-text-op40":K(p.value.colorMainText,.4),"--am-c-main-text-op25":K(p.value.colorMainText,.25),"--am-c-inp-bgr":p.value.colorInpBgr,"--am-c-inp-border":p.value.colorInpBorder,"--am-c-inp-text":p.value.colorInpText,"--am-c-inp-placeholder":p.value.colorInpPlaceHolder,"--am-c-btn-prim":p.value.colorBtnPrim,"--am-c-btn-prim-text":p.value.colorBtnPrimText,"--am-c-skeleton-op20":K(p.value.colorMainText,.2),"--am-c-skeleton-op60":K(p.value.colorMainText,.6),"--am-font-family":f.value.fontFamily,"--am-c-scroll-op30":K(p.value.colorPrimary,.3),"--am-c-scroll-op10":K(p.value.colorPrimary,.1)}));return(_,T)=>(u(),B("div",{class:"am-asi",style:Be(t(d))},[m("div",zc,[m("div",jc,w(t(r).access_link_send_check),1),m("div",Yc,w(t(r).access_link_send_click),1),m("div",Wc,w(t(x)),1)]),m("div",Hc,[m("span",Zc,w(t(r).access_link_send_inbox),1),m("span",{class:"am-asi__footer-link",onClick:T[0]||(T[0]=A=>De(c)?c.value="sendAccessLink":c="sendAccessLink")},w(t(r).access_link_send_retry),1)])],4))}});const Xc={class:"am-asi__top"},Qc={class:"am-asi__header"},Kc={class:"am-asi__text"},ex={name:"AuthNewPass"},tx=Object.assign(ex,{setup(n){let a=Oe();const e=U("settings");let s=U("amCustomize");const l=U("labels"),o=U("localLanguage");let i=b(()=>e.general.usedLanguages.includes(o.value)),r=b(()=>{let h=tt({...l}),g=s.value.setPass.translations;return g&&Object.keys(g).forEach(y=>{g[y][o.value]&&i.value?h[y]=g[y][o.value]:g[y].default&&(h[y]=g[y].default)}),h}),x=V(null),c=V({newPassword:b({get:()=>a.getters["auth/getNewPassword"],set:h=>{a.commit("auth/setNewPassword",h||"")}}),confirmPassword:b({get:()=>a.getters["auth/getConfirmPassword"],set:h=>{a.commit("auth/setConfirmPassword",h||"")}})}),f=V({newPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"}],confirmPassword:[{required:!0,message:r.value.new_password_required,trigger:"submit"},{min:4,message:r.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:r.value.passwords_not_match,trigger:"submit"}]}),p=V({newPassword:{template:We.text,props:{itemName:"newPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon,placeholder:"",minLength:3,class:"am-asi__item"}},confirmPassword:{template:We.text,props:{itemName:"confirmPassword",itemType:"password",showPassword:!0,label:r.value.new_password_colon_retype,placeholder:"",minLength:3,class:"am-asi__item"}}}),d=U("cabinetType"),_=b(()=>a.getters.getLoading);function T(){x.value.validate(h=>{if(h&&a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"]){let g=a.getters["auth/getProfile"];a.commit("setLoading",!0),$e.post("/users/"+d.value+"s/"+g.id,{password:a.getters["auth/getNewPassword"]},Object.assign(Ue(a),{params:{source:"cabinet-"+d.value}})).then(()=>{a.commit("auth/setAuthenticated",!0)}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)})}else return!1})}let A=U("containerWidth"),E=b(()=>ot(A.value)),P=U("amFonts"),L=U("amColors"),D=b(()=>({"--am-c-primary":L.value.colorPrimary,"--am-c-success":L.value.colorSuccess,"--am-c-error":L.value.colorError,"--am-c-warning":L.value.colorWarning,"--am-c-main-bgr":L.value.colorMainBgr,"--am-c-main-heading-text":L.value.colorMainHeadingText,"--am-c-main-text":L.value.colorMainText,"--am-c-main-text-op70":K(L.value.colorMainText,.7),"--am-c-main-text-op60":K(L.value.colorMainText,.6),"--am-c-main-text-op40":K(L.value.colorMainText,.4),"--am-c-main-text-op25":K(L.value.colorMainText,.25),"--am-c-inp-bgr":L.value.colorInpBgr,"--am-c-inp-border":L.value.colorInpBorder,"--am-c-inp-text":L.value.colorInpText,"--am-c-inp-placeholder":L.value.colorInpPlaceHolder,"--am-c-btn-prim":L.value.colorBtnPrim,"--am-c-btn-prim-text":L.value.colorBtnPrimText,"--am-c-skeleton-op20":K(L.value.colorMainText,.2),"--am-c-skeleton-op60":K(L.value.colorMainText,.6),"--am-font-family":P.value.fontFamily,"--am-c-scroll-op30":K(L.value.colorPrimary,.3),"--am-c-scroll-op10":K(L.value.colorPrimary,.1)}));return(h,g)=>{const y=st;return t(_)?(u(),Y(t(Wt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(u(),B("div",{key:0,class:"am-asi",style:Be(t(D))},[m("div",Xc,[m("div",Qc,w(t(r).new_password_set),1),m("div",Kc,w(t(r).new_password_set_description),1)]),N(y,{ref_key:"authFormRef",ref:x,model:t(c),rules:t(f),"label-position":"top",class:j(["am-asi__form",t(E)])},{default:S(()=>[(u(!0),B(ne,null,Ee(t(p),(k,C)=>(u(),Y(ft(k.template),Ft({key:C,ref_for:!0,ref:"customerCollectorRef",modelValue:t(c)[C],"onUpdate:modelValue":F=>t(c)[C]=F},k.props,{onEnter:T}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),N(Fe,{class:"am-asi__btn",type:t(s).setPass.options.newPassBtn.buttonType,onClick:T},{default:S(()=>[ce(w(t(r).new_password_set_action),1)]),_:1},8,["type"])],4))}}});const ax={class:"am-asi__top"},sx=m("div",{class:"am-asi__img"},[m("span",{class:"am-icon-check"})],-1),lx={class:"am-asi__header"},nx={class:"am-asi__text"},ox={name:"ChangePassSuccess"},ix=Object.assign(ox,{setup(n){const a=U("settings");let e=U("amCustomize");const s=U("labels"),l=U("localLanguage");let o=b(()=>a.general.usedLanguages.includes(l.value)),i=b(()=>{let p=tt({...s}),d=e.value.setPassSuccess.translations;return d&&Object.keys(d).forEach(_=>{d[_][l.value]&&o.value?p[_]=d[_][l.value]:d[_].default&&(p[_]=d[_].default)}),p}),r=U("pageKey"),x=U("amFonts"),c=U("amColors"),f=b(()=>({"--am-c-primary":c.value.colorPrimary,"--am-c-success":c.value.colorSuccess,"--am-c-error":c.value.colorError,"--am-c-warning":c.value.colorWarning,"--am-c-main-bgr":c.value.colorMainBgr,"--am-c-main-heading-text":c.value.colorMainHeadingText,"--am-c-main-text":c.value.colorMainText,"--am-c-main-text-op70":K(c.value.colorMainText,.7),"--am-c-main-text-op60":K(c.value.colorMainText,.6),"--am-c-main-text-op40":K(c.value.colorMainText,.4),"--am-c-main-text-op25":K(c.value.colorMainText,.25),"--am-c-btn-prim":c.value.colorBtnPrim,"--am-c-btn-prim-text":c.value.colorBtnPrimText,"--am-c-skeleton-op20":K(c.value.colorMainText,.2),"--am-c-skeleton-op60":K(c.value.colorMainText,.6),"--am-font-family":x.value.fontFamily,"--am-c-scroll-op30":K(c.value.colorPrimary,.3),"--am-c-scroll-op10":K(c.value.colorPrimary,.1)}));return(p,d)=>(u(),B("div",{class:"am-asi",style:Be(t(f))},[m("div",ax,[sx,m("div",lx,w(t(i).new_password_changed),1),m("div",nx,w(t(i).new_password_changed_description),1)]),N(Fe,{class:"am-asi__btn",type:t(e).setPassSuccess.options.signInBtn.buttonType,onClick:d[0]||(d[0]=_=>De(r)?r.value="signIn":r="signIn")},{default:S(()=>[ce(w(t(i).sign_in),1)]),_:1},8,["type"])],4))}}),rx={name:"AuthWrapper"},cx=Object.assign(rx,{setup(n){const a=U("settings");let e=V({signIn:Qe($c),sendAccessLink:Qe(Uc),sendAccessLinkProcess:Qe(Jc),setPassword:Qe(tx),changeSuccess:Qe(ix)}),s=U("originKey"),l=V("signIn");ze("pageKey",l);const o=V(a.customizedData?a.customizedData.fonts:Dl.fonts);ze("amFonts",o);let i=b(()=>a.customizedData&&s.value in a.customizedData?a.customizedData[s.value].colors:Dl[s.value].colors);return ze("amColors",i),(r,x)=>(u(),Y(ft(t(e)[t(l)])))}});const xx={class:"am-csd__inner"},ux={class:"am-csd__header"},dx={class:"am-csd__header-text"},mx={class:"am-csd__content"},px={class:"am-csd__footer"},fx={name:"DeleteProfile"},gx=Object.assign(fx,{props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},customizedOptions:{type:Object,default:()=>({})}},emits:["close","deleteProfile"],setup(n,{emit:a}){const e=n;let s=U("containerWidth");const l=U("labels");function o(c){return Object.keys(e.customizedLabels).length&&e.customizedLabels[c]?e.customizedLabels[c]:l[c]}let i=U("amFonts"),r=U("amColors"),x=b(()=>({"--am-c-csd-text":r.value.colorMainText,"--am-c-csd-bgr":r.value.colorMainBgr,"--am-c-csd-text-op10":K(r.value.colorMainText,.1),"--am-font-family":i.value.fontFamily}));return(c,f)=>(u(),Y(Sa,{visibility:t(e).visibility,"custom-class":"am-csd am-csd__cancel",style:Be(t(x)),position:"center"},{footer:S(()=>[m("div",px,[N(Fe,{category:"secondary",size:t(s)<=360?"small":"default",type:t(e).customizedOptions.closeBtn.buttonType,onClick:f[1]||(f[1]=()=>{a("close")})},{default:S(()=>[ce(w(o("close")),1)]),_:1},8,["size","type"]),N(Fe,{category:"danger",size:t(s)<=360?"small":"default","loading-icon":"loading",type:t(e).customizedOptions.confirmBtn.buttonType,onClick:f[2]||(f[2]=()=>{a("deleteProfile")})},{default:S(()=>[ce(w(o("delete")),1)]),_:1},8,["size","type"])])]),default:S(()=>[m("div",xx,[m("div",ux,[m("div",dx,w(o("delete_profile")),1),m("div",{class:"am-csd__header-btn",onClick:f[0]||(f[0]=()=>{a("close")})},[N(Ge,{icon:"close"})])]),m("div",mx,[m("p",null,w(o("delete_profile_description")),1)])])]),_:1},8,["visibility","style"]))}});const Bl={props:{pageWidth:{type:Number,default:768},count:{type:[Number,String],default:2},itemDirection:{type:String,default:"row",validator(n){return["row","row-reverse","column","column-reverse","initial","revert","unset"].includes(n)}}},setup(n){const a=n;let e=b(()=>ot(a.pageWidth)),s=U("amColors"),l=b(()=>({"--am-c-skeleton-op20":K(s.value.colorMainText,.2),"--am-c-skeleton-op60":K(s.value.colorMainText,.6),"--am-c-flex-direction":a.itemDirection}));return(o,i)=>{const r=Ol,x=Ml;return u(),Y(x,{animated:"",class:"am-cps",style:Be(t(l))},{template:S(()=>[(u(!0),B(ne,null,Ee(new Array(t(a).count),c=>(u(),B("div",{key:c,class:j(["am-cps__item",t(e)])},[N(r,{class:"am-cps__item-label",variant:"rect"}),N(r,{class:"am-cps__item-input",variant:"rect"})],2))),128))]),_:1},8,["style"])}}};const hx={class:"am-capi__inner"},vx=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),Ex={name:"CabinetProfile",key:"profile"},_x=Object.assign(Ex,{setup(n){let a=Oe(),e=b(()=>a.getters.getLoading),s=V(null),l=V(0),o=U("sidebarCollapsed");window.addEventListener("resize",i);function i(){s.value&&(l.value=s.value.offsetWidth)}xt(o,te=>{te?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){l.value=s.value.offsetWidth}Ze(()=>{uo(()=>{l.value=s.value.offsetWidth}),xe()});let x=b(()=>ot(l.value));const c=U("settings");let f=U("cabinetType"),p=U("amCustomize");const d=U("labels"),_=U("localLanguage");let T=b(()=>c.general.usedLanguages.includes(_.value));function A(te,Ae){return Ae&&Object.keys(Ae).forEach(we=>{Ae[we][_.value]&&T.value?te[we]=Ae[we][_.value]:Ae[we].default&&(te[we]=Ae[we].default)}),te}let E=b(()=>{let te=tt({...d}),Ae=p.value.profile.translations;return A(te,Ae)});function P(te){let Ae={},we=p.value[te].translations;return A(Ae,we)}let L=b(()=>p.value.profile.options),D=V("first"),h=V("");function g(){Q.value=!1,h.value=""}let y=V(null),k=V(!1),C=V({firstName:b({get:()=>a.getters["auth/getProfile"].firstName,set:te=>{a.commit("auth/setProfileFirstName",te||"")}}),lastName:b({get:()=>a.getters["auth/getProfile"].lastName,set:te=>{a.commit("auth/setProfileLastName",te||"")}}),email:b({get:()=>a.getters["auth/getProfile"].email,set:te=>{a.commit("auth/setProfileEmail",te||"")}}),phone:b({get:()=>a.getters["auth/getProfile"].phone,set:te=>{a.commit("auth/setProfilePhone",te||"")}}),birthday:b({get:()=>a.getters["auth/getProfile"].birthday?a.getters["auth/getProfile"].birthday:"",set:te=>{a.commit("auth/setProfileBirthday",te?Ce(te).format("YYYY-MM-DD"):"")}})}),F=V({firstName:{template:We.text,props:{itemName:"firstName",label:E.value.first_name_colon,placeholder:E.value.enter_first_name,class:b(()=>`am-capi__item ${x.value}`)}},lastName:{template:We.text,props:{itemName:"lastName",label:E.value.last_name_colon,placeholder:E.value.enter_last_name,class:b(()=>`am-capi__item ${x.value}`)}},email:{template:We.text,props:{itemName:"email",label:E.value.email_colon,placeholder:E.value.enter_email,class:b(()=>`am-capi__item ${x.value}`)}},phone:{countryPhoneIso:b({get:()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:"",set:te=>{a.commit("auth/setProfileCountryPhoneIso",te?te.toLowerCase():"")}}),template:We.phone,props:{itemName:"phone",label:E.value.phone_colon,placeholder:E.value.enter_phone,defaultCode:b(()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:""),phoneError:b(()=>k.value),whatsAppLabel:E.value.whatsapp_opt_in_text,isWhatsApp:c.notifications.whatsAppEnabled&&c.notifications.whatsAppAccessToken&&c.notifications.whatsAppBusinessID&&c.notifications.whatsAppPhoneID,class:b(()=>`am-capi__item ${x.value}`)}},birthday:{template:We.datepicker,props:{itemName:"birthday",label:E.value.date_of_birth,placeholder:E.value.enter_date_of_birth,clearable:!0,readonly:!1,class:b(()=>`am-capi__item am-capi__item-birthday ${x.value}`)}}}),R=V({firstName:[{required:!0,message:E.value.enter_first_name_warning,trigger:"submit"}],lastName:[{required:L.value.lastName.required,message:E.value.enter_last_name_warning,trigger:"submit"}],email:[{required:L.value.email.required,type:"email",message:E.value.enter_valid_email_warning,trigger:"submit"}],phone:[{required:L.value.phone.required,message:E.value.enter_phone_warning,trigger:"submit"}],birthday:[{required:L.value.birthday.required,message:E.value.enter_date_of_birth_warning,trigger:"submit"}]}),M=V(!1);ze("deleteProfileDialog",M);function O(){a.commit("auth/setProfileFirstName",C.value.firstName?C.value.firstName.trim():""),a.commit("auth/setProfileLastName",C.value.lastName?C.value.lastName.trim():""),a.commit("auth/setProfileEmail",C.value.email?C.value.email.trim():""),y.value.validate(te=>{if(te){h.value=E.value.profile_data_success;let Ae=a.getters["auth/getProfile"];a.commit("setLoading",!0),$e.post("/users/"+f.value+"s/"+Ae.id,Ae,Ue(a)).finally(()=>{a.commit("setLoading",!1),Q.value=!0,L.value.phone.required&&C.value.phone&&(k.value=!1)})}else return L.value.phone.required&&!C.value.phone&&(k.value=!0),!1})}ze("saveProfileChanges",O);let H=V(null),z=V({newPass:b({get:()=>a.getters["auth/getNewPassword"],set:te=>{a.commit("auth/setNewPassword",te||"")}}),confirmPass:b({get:()=>a.getters["auth/getConfirmPassword"],set:te=>{a.commit("auth/setConfirmPassword",te||"")}})}),X=V({newPass:{template:We.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:E.value.new_password_colon,placeholder:"",minLength:3,class:b(()=>`am-capp__item ${x.value}`)}},confirmPass:{template:We.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:E.value.new_password_colon_retype,placeholder:"",minLength:3,class:b(()=>`am-capp__item ${x.value}`)}}}),le=V({newPass:[{required:!0,message:E.value.new_password_required,trigger:"submit"},{min:4,message:E.value.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:E.value.new_password_required,trigger:"submit"},{min:4,message:E.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:E.value.passwords_not_match,trigger:"submit"}]}),Q=V(!1);function ue(){Q.value=!1}function ee(){H.value.validate(te=>{if(te){let Ae=a.getters["auth/getProfile"];a.commit("setLoading",!0),$e.post("/users/customers/"+Ae.id,{password:a.getters["auth/getNewPassword"]},Ue(a)).then(()=>{h.value=E.value.password_success,a.commit("auth/setNewPassword",""),a.commit("auth/setConfirmPassword","")}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1),Q.value=!0})}else return!1})}ze("changeProfilePassword",ee);function me(){M.value=!1,a.commit("auth/setProfileDeleted",!0),a.dispatch("auth/logout")}function se(te,Ae){if(te){for(const we in W)if(W[we].id===Ae){W[we].components=Yr(te);break}}}function _e(){a.commit("setLoading",!0);let te=a.getters["auth/getProfile"]?a.getters["auth/getProfile"].id:null;if(!te)return;let Ae={email:"",firstName:E.value.customer,lastName:te,phone:"",birthday:"",gender:"",externalId:"",password:""};const we=Nl().cookies;$e.post("/users/customers/"+te,Object.assign(Ue(a),Ae)).then(()=>{a.commit("auth/setProfile",{}),we.remove("ameliaUserEmail"),a.commit("setLoading",!1),me()}).catch(Me=>{a.commit("setLoading",!1),console.log(Me)})}const de=V(null),oe=tt({}),ye=tt({}),$=tt({}),W=tt({});function ae(te,Ae,we){oe[Ae]=we??""}function J(te,Ae){if($[Ae]={template:We[te.type],props:{id:Ae,itemName:Ae.toString(),label:te.label,options:te.options,class:`am-capei-att-cf__item am-cf-width-${te.width}`}},te.type==="text-area"&&($[Ae].props.itemType="textarea"),te.type==="datepicker"&&($[Ae].props.weekStartsFromDay=c.wordpress.startOfWeek),te.type==="file"){let we=a.getters["auth/getProfile"]?a.getters["auth/getProfile"].id:null;$[Ae].props={...$[Ae].props,btnLabel:E.value.upload_file_here,isUpload:!0,bookingId:we,source:"cabinet-customer"}}}function Z(te){ye[te.id]=[{message:E.value.required_field,required:te.required,trigger:["submit","change"]}]}function xe(){const te=a.getters["entities/getCustomFields"],Ae=JSON.parse(a.getters["auth/getProfile"].customFields||"{}");te.filter(we=>we.saveType==="customer"&&we.type!=="content").sort((we,Me)=>we.position-Me.position).forEach((we,Me)=>{const{id:Le}=we,ke=Ae[Le]?.value;W[Me]={...we,value:ke??(we.type==="checkbox"||we.type==="file"?[]:"")},we.type==="address"&&Ae[Le]?.components&&(W[Me].components=Ae[Le]?.components),ae(we,Le,W[Me].value),J(we,Le),Z(we)})}function he(){de.value.validate(te=>{if(te){const Ae=a.getters["auth/getProfile"],we={};for(const Le in W){const ke=W[Le],pe=oe[ke.id];we[ke.id]={label:ke.label,type:ke.type,value:typeof pe=="string"?pe.trim():pe},ke.type==="address"&&ke.components&&(we[ke.id].components=ke.components)}const Me={...Ae,customFields:JSON.stringify(we)};a.commit("setLoading",!0),$e.post(`/users/${f.value}s/${Ae.id}`,Me,Ue(a)).finally(()=>{a.commit("setLoading",!1),h.value=E.value.profile_data_success,Q.value=!0})}else return!1})}ze("saveCustomerCustomFields",he);let re=U("amColors"),be=b(()=>({"--am-c-capi-primary":re.value.colorPrimary,"--am-c-capi-text":re.value.colorMainText,"--am-c-capi-text-op10":K(re.value.colorMainText,.1)}));return(te,Ae)=>{const we=st,Me=_a,Le=Ca;return u(),B("div",{ref_key:"pageContainer",ref:s,class:"am-capi",style:Be(t(be))},[m("div",hx,[t(Q)?(u(),Y(bt,{key:0,type:"success","show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:g,onTriggerClose:g},{title:S(()=>[vx,ce(" "+w(t(h)),1)]),_:1})):I("",!0),N(Le,{modelValue:t(D),"onUpdate:modelValue":Ae[0]||(Ae[0]=ke=>De(D)?D.value=ke:D=ke),class:"am-capi__tabs",onTabClick:ue},{default:S(()=>[N(Me,{class:"am-capi__tabs-item",label:t(E).personal_info,name:"first"},{default:S(()=>[t(e)?(u(),Y(Bl,{key:1,count:5,"page-width":t(l)},null,8,["page-width"])):(u(),B(ne,{key:0},[t(a).getters["auth/getProfile"]?(u(),Y(we,{key:0,ref_key:"infoFormRef",ref:y,model:t(C),rules:t(R),"label-position":"top",class:j(["am-capi__form",t(x)])},{default:S(()=>[(u(!0),B(ne,null,Ee(t(p).profile.order,ke=>(u(),B(ne,{key:ke.id},[!t(L)[ke.id]||t(L)[ke.id].visibility?(u(),Y(ft(t(F)[ke.id].template),Ft({key:0,ref_for:!0,ref:"customerCollectorRef",modelValue:t(C)[ke.id],"onUpdate:modelValue":pe=>t(C)[ke.id]=pe,countryPhoneIso:t(F)[ke.id].countryPhoneIso,"onUpdate:countryPhoneIso":pe=>t(F)[ke.id].countryPhoneIso=pe},t(F)[ke.id].props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"])):I("",!0)],64))),128))]),_:1},8,["model","rules","class"])):I("",!0)],64))]),_:1},8,["label"]),Object.keys(t(W)).length?(u(),Y(Me,{key:0,label:t(E).custom_fields,name:"third"},{default:S(()=>[t(e)?(u(),Y(Bl,{key:1,count:Object.keys(t(W)).length,"page-width":t(l)},null,8,["count","page-width"])):(u(),Y(we,{key:0,ref_key:"customFieldsFormRef",ref:de,model:t(oe),rules:t(ye),"label-position":"top",class:j(["am-capei-att-cf__form",t(x)])},{default:S(()=>[(u(!0),B(ne,null,Ee(Object.values(t(W)),ke=>(u(),B(ne,{key:ke.id},[ke.id in t(oe)?(u(),Y(ft(t($)[ke.id]?.template),Ft({key:0,modelValue:t(oe)[ke.id],"onUpdate:modelValue":pe=>t(oe)[ke.id]=pe},t($)[ke.id]?.props,{onAddressSelected:pe=>se(pe,ke.id)}),null,16,["modelValue","onUpdate:modelValue","onAddressSelected"])):I("",!0)],64))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])):I("",!0),N(Me,{class:"am-capi__tabs-item",label:t(E).password_tab,name:"second"},{default:S(()=>[t(e)?(u(),Y(Bl,{key:1,"item-direction":"column",count:2,"page-width":t(l)},null,8,["page-width"])):(u(),Y(we,{key:0,ref_key:"passFormRef",ref:H,model:t(z),rules:t(le),"label-position":"top",class:j(["am-capi__form",t(x)])},{default:S(()=>[(u(!0),B(ne,null,Ee(t(X),(ke,pe)=>(u(),Y(ft(ke.template),Ft({key:ke.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:t(z)[pe],"onUpdate:modelValue":ie=>t(z)[pe]=ie},ke.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])]),_:1},8,["modelValue"]),N(gx,{visibility:t(M),"customized-labels":P("deleteProfile"),"customized-options":t(p).deleteProfile.options,onClose:Ae[1]||(Ae[1]=ke=>De(M)?M.value=!1:M=!1),onDeleteProfile:_e},null,8,["visibility","customized-labels","customized-options"]),N(B0,{loading:t(e),display:t(D),"parent-width":t(l),"customized-labels":t(E),"save-footer-button":t(L).saveFooterButton.buttonType,"delete-footer-type":t(L).deleteFooterButton.buttonType,"pass-footer-button":t(L).passFooterButton.buttonType},null,8,["loading","display","parent-width","customized-labels","save-footer-button","delete-footer-type","pass-footer-button"])])],4)}}});var Ie=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(Ie||{});class ca{constructor(a,e,s={}){this.attrName=a,this.keyName=e;const l=Ie.TYPE&Ie.ATTRIBUTE;this.scope=s.scope!=null?s.scope&Ie.LEVEL|l:Ie.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(a){return Array.from(a.attributes).map(e=>e.name)}add(a,e){return this.canAdd(a,e)?(a.setAttribute(this.keyName,e),!0):!1}canAdd(a,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(a){a.removeAttribute(this.keyName)}value(a){const e=a.getAttribute(this.keyName);return this.canAdd(a,e)&&e?e:""}}class ps extends Error{constructor(a){a="[Parchment] "+a,super(a),this.message=a,this.name=this.constructor.name}}const Ni=class Jn{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(a,e=!1){if(a==null)return null;if(this.blots.has(a))return this.blots.get(a)||null;if(e){let s=null;try{s=a.parentNode}catch{return null}return this.find(s,e)}return null}create(a,e,s){const l=this.query(e);if(l==null)throw new ps(`Unable to create ${e} blot`);const o=l,i=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:o.create(s),r=new o(a,i,s);return Jn.blots.set(r.domNode,r),r}find(a,e=!1){return Jn.find(a,e)}query(a,e=Ie.ANY){let s;return typeof a=="string"?s=this.types[a]||this.attributes[a]:a instanceof Text||a.nodeType===Node.TEXT_NODE?s=this.types.text:typeof a=="number"?a&Ie.LEVEL&Ie.BLOCK?s=this.types.block:a&Ie.LEVEL&Ie.INLINE&&(s=this.types.inline):a instanceof Element&&((a.getAttribute("class")||"").split(/\s+/).some(l=>(s=this.classes[l],!!s)),s=s||this.tags[a.tagName]),s==null?null:"scope"in s&&e&Ie.LEVEL&s.scope&&e&Ie.TYPE&s.scope?s:null}register(...a){return a.map(e=>{const s="blotName"in e,l="attrName"in e;if(!s&&!l)throw new ps("Invalid definition");if(s&&e.blotName==="abstract")throw new ps("Cannot register abstract class");const o=s?e.blotName:l?e.attrName:void 0;return this.types[o]=e,l?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):s&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(i=>i.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(i=>{(this.tags[i]==null||e.className==null)&&(this.tags[i]=e)}))),e})}};Ni.blots=new WeakMap;let Es=Ni;function Yo(n,a){return(n.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${a}-`)===0)}class Cx extends ca{static keys(a){return(a.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(a,e){return this.canAdd(a,e)?(this.remove(a),a.classList.add(`${this.keyName}-${e}`),!0):!1}remove(a){Yo(a,this.keyName).forEach(e=>{a.classList.remove(e)}),a.classList.length===0&&a.removeAttribute("class")}value(a){const e=(Yo(a,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(a,e)?e:""}}const sa=Cx;function On(n){const a=n.split("-"),e=a.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return a[0]+e}class yx extends ca{static keys(a){return(a.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(a,e){return this.canAdd(a,e)?(a.style[On(this.keyName)]=e,!0):!1}remove(a){a.style[On(this.keyName)]="",a.getAttribute("style")||a.removeAttribute("style")}value(a){const e=a.style[On(this.keyName)];return this.canAdd(a,e)?e:""}}const Ia=yx;class bx{constructor(a){this.attributes={},this.domNode=a,this.build()}attribute(a,e){e?a.add(this.domNode,e)&&(a.value(this.domNode)!=null?this.attributes[a.attrName]=a:delete this.attributes[a.attrName]):(a.remove(this.domNode),delete this.attributes[a.attrName])}build(){this.attributes={};const a=Es.find(this.domNode);if(a==null)return;const e=ca.keys(this.domNode),s=sa.keys(this.domNode),l=Ia.keys(this.domNode);e.concat(s).concat(l).forEach(o=>{const i=a.scroll.query(o,Ie.ATTRIBUTE);i instanceof ca&&(this.attributes[i.attrName]=i)})}copy(a){Object.keys(this.attributes).forEach(e=>{const s=this.attributes[e].value(this.domNode);a.format(e,s)})}move(a){this.copy(a),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((a,e)=>(a[e]=this.attributes[e].value(this.domNode),a),{})}}const ql=bx,Oi=class{constructor(a,e){this.scroll=a,this.domNode=e,Es.blots.set(e,this),this.prev=null,this.next=null}static create(a){if(this.tagName==null)throw new ps("Blot definition missing tagName");let e,s;return Array.isArray(this.tagName)?(typeof a=="string"?(s=a.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof a=="number"&&(s=a),typeof s=="number"?e=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?e=document.createElement(s):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const a=this.domNode.cloneNode(!1);return this.scroll.create(a)}detach(){this.parent!=null&&this.parent.removeChild(this),Es.blots.delete(this.domNode)}deleteAt(a,e){this.isolate(a,e).remove()}formatAt(a,e,s,l){const o=this.isolate(a,e);if(this.scroll.query(s,Ie.BLOT)!=null&&l)o.wrap(s,l);else if(this.scroll.query(s,Ie.ATTRIBUTE)!=null){const i=this.scroll.create(this.statics.scope);o.wrap(i),i.format(s,l)}}insertAt(a,e,s){const l=s==null?this.scroll.create("text",e):this.scroll.create(e,s),o=this.split(a);this.parent.insertBefore(l,o||void 0)}isolate(a,e){const s=this.split(a);if(s==null)throw new Error("Attempt to isolate at end");return s.split(e),s}length(){return 1}offset(a=this.parent){return this.parent==null||this===a?0:this.parent.children.offset(this)+this.parent.offset(a)}optimize(a){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(a,e){const s=typeof a=="string"?this.scroll.create(a,e):a;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(a,e){return a===0?this:this.next}update(a,e){}wrap(a,e){const s=typeof a=="string"?this.scroll.create(a,e):a;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new ps(`Cannot wrap ${a}`);return s.appendChild(this),s}};Oi.blotName="abstract";let Mi=Oi;const Vi=class extends Mi{static value(a){return!0}index(a,e){return this.domNode===a||this.domNode.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(a,e){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return a>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Vi.scope=Ie.INLINE_BLOT;let Bx=Vi;const Dt=Bx;class Ax{constructor(){this.head=null,this.tail=null,this.length=0}append(...a){if(this.insertBefore(a[0],null),a.length>1){const e=a.slice(1);this.append(...e)}}at(a){const e=this.iterator();let s=e();for(;s&&a>0;)a-=1,s=e();return s}contains(a){const e=this.iterator();let s=e();for(;s;){if(s===a)return!0;s=e()}return!1}indexOf(a){const e=this.iterator();let s=e(),l=0;for(;s;){if(s===a)return l;l+=1,s=e()}return-1}insertBefore(a,e){a!=null&&(this.remove(a),a.next=e,e!=null?(a.prev=e.prev,e.prev!=null&&(e.prev.next=a),e.prev=a,e===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)}offset(a){let e=0,s=this.head;for(;s!=null;){if(s===a)return e;e+=s.length(),s=s.next}return-1}remove(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)}iterator(a=this.head){return()=>{const e=a;return a!=null&&(a=a.next),e}}find(a,e=!1){const s=this.iterator();let l=s();for(;l;){const o=l.length();if(a<o||e&&a===o&&(l.next==null||l.next.length()!==0))return[l,a];a-=o,l=s()}return[null,0]}forEach(a){const e=this.iterator();let s=e();for(;s;)a(s),s=e()}forEachAt(a,e,s){if(e<=0)return;const[l,o]=this.find(a);let i=a-o;const r=this.iterator(l);let x=r();for(;x&&i<a+e;){const c=x.length();a>i?s(x,a-i,Math.min(e,i+c-a)):s(x,0,Math.min(c,a+e-i)),i+=c,x=r()}}map(a){return this.reduce((e,s)=>(e.push(a(s)),e),[])}reduce(a,e){const s=this.iterator();let l=s();for(;l;)e=a(e,l),l=s();return e}}function Wo(n,a){const e=a.find(n);if(e)return e;try{return a.create(n)}catch{const s=a.create(Ie.INLINE);return Array.from(n.childNodes).forEach(l=>{s.domNode.appendChild(l)}),n.parentNode&&n.parentNode.replaceChild(s.domNode,n),s.attach(),s}}const Ri=class ka extends Mi{constructor(a,e){super(a,e),this.uiNode=null,this.build()}appendChild(a){this.insertBefore(a)}attach(){super.attach(),this.children.forEach(a=>{a.attach()})}attachUI(a){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=a,ka.uiClass&&this.uiNode.classList.add(ka.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Ax,Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).reverse().forEach(a=>{try{const e=Wo(a,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof ps)return;throw e}})}deleteAt(a,e){if(a===0&&e===this.length())return this.remove();this.children.forEachAt(a,e,(s,l,o)=>{s.deleteAt(l,o)})}descendant(a,e=0){const[s,l]=this.children.find(e);return a.blotName==null&&a(s)||a.blotName!=null&&s instanceof a?[s,l]:s instanceof ka?s.descendant(a,l):[null,-1]}descendants(a,e=0,s=Number.MAX_VALUE){let l=[],o=s;return this.children.forEachAt(e,s,(i,r,x)=>{(a.blotName==null&&a(i)||a.blotName!=null&&i instanceof a)&&l.push(i),i instanceof ka&&(l=l.concat(i.descendants(a,r,o))),o-=x}),l}detach(){this.children.forEach(a=>{a.detach()}),super.detach()}enforceAllowedChildren(){let a=!1;this.children.forEach(e=>{a||this.statics.allowedChildren.some(s=>e instanceof s)||(e.statics.scope===Ie.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),a=!0):e instanceof ka?e.unwrap():e.remove())})}formatAt(a,e,s,l){this.children.forEachAt(a,e,(o,i,r)=>{o.formatAt(i,r,s,l)})}insertAt(a,e,s){const[l,o]=this.children.find(a);if(l)l.insertAt(o,e,s);else{const i=s==null?this.scroll.create("text",e):this.scroll.create(e,s);this.appendChild(i)}}insertBefore(a,e){a.parent!=null&&a.parent.children.remove(a);let s=null;this.children.insertBefore(a,e||null),a.parent=this,e!=null&&(s=e.domNode),(this.domNode.parentNode!==a.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(a.domNode,s),a.attach()}length(){return this.children.reduce((a,e)=>a+e.length(),0)}moveChildren(a,e){this.children.forEach(s=>{a.insertBefore(s,e)})}optimize(a){if(super.optimize(a),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(a,e=!1){const[s,l]=this.children.find(a,e),o=[[this,a]];return s instanceof ka?o.concat(s.path(l,e)):(s!=null&&o.push([s,l]),o)}removeChild(a){this.children.remove(a)}replaceWith(a,e){const s=typeof a=="string"?this.scroll.create(a,e):a;return s instanceof ka&&this.moveChildren(s),super.replaceWith(s)}split(a,e=!1){if(!e){if(a===0)return this;if(a===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(a,this.length(),(l,o,i)=>{const r=l.split(o,e);r!=null&&s.appendChild(r)}),s}splitAfter(a){const e=this.clone();for(;a.next!=null;)e.appendChild(a.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(a,e){const s=[],l=[];a.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(s.push(...o.addedNodes),l.push(...o.removedNodes))}),l.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const i=this.scroll.find(o);i!=null&&(i.domNode.parentNode==null||i.domNode.parentNode===this.domNode)&&i.detach()}),s.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,i)=>o===i?0:o.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let i=null;o.nextSibling!=null&&(i=this.scroll.find(o.nextSibling));const r=Wo(o,this.scroll);(r.next!==i||r.next==null)&&(r.parent!=null&&r.parent.removeChild(this),this.insertBefore(r,i||void 0))}),this.enforceAllowedChildren()}};Ri.uiClass="";let kx=Ri;const ta=kx;function Dx(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const e in n)if(n[e]!==a[e])return!1;return!0}const is=class rs extends ta{static create(a){return super.create(a)}static formats(a,e){const s=e.query(rs.blotName);if(!(s!=null&&a.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()}}constructor(a,e){super(a,e),this.attributes=new ql(this.domNode)}format(a,e){if(a===this.statics.blotName&&!e)this.children.forEach(s=>{s instanceof rs||(s=s.wrap(rs.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(a,Ie.INLINE);if(s==null)return;s instanceof ca?this.attributes.attribute(s,e):e&&(a!==this.statics.blotName||this.formats()[a]!==e)&&this.replaceWith(a,e)}}formats(){const a=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(a[this.statics.blotName]=e),a}formatAt(a,e,s,l){this.formats()[s]!=null||this.scroll.query(s,Ie.ATTRIBUTE)?this.isolate(a,e).format(s,l):super.formatAt(a,e,s,l)}optimize(a){super.optimize(a);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const s=this.next;s instanceof rs&&s.prev===this&&Dx(e,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(a,e){const s=super.replaceWith(a,e);return this.attributes.copy(s),s}update(a,e){super.update(a,e),a.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(a,e){const s=super.wrap(a,e);return s instanceof rs&&this.attributes.move(s),s}};is.allowedChildren=[is,Dt],is.blotName="inline",is.scope=Ie.INLINE_BLOT,is.tagName="SPAN";let Fx=is;const _o=Fx,cs=class Xn extends ta{static create(a){return super.create(a)}static formats(a,e){const s=e.query(Xn.blotName);if(!(s!=null&&a.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()}}constructor(a,e){super(a,e),this.attributes=new ql(this.domNode)}format(a,e){const s=this.scroll.query(a,Ie.BLOCK);s!=null&&(s instanceof ca?this.attributes.attribute(s,e):a===this.statics.blotName&&!e?this.replaceWith(Xn.blotName):e&&(a!==this.statics.blotName||this.formats()[a]!==e)&&this.replaceWith(a,e))}formats(){const a=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(a[this.statics.blotName]=e),a}formatAt(a,e,s,l){this.scroll.query(s,Ie.BLOCK)!=null?this.format(s,l):super.formatAt(a,e,s,l)}insertAt(a,e,s){if(s==null||this.scroll.query(e,Ie.INLINE)!=null)super.insertAt(a,e,s);else{const l=this.split(a);if(l!=null){const o=this.scroll.create(e,s);l.parent.insertBefore(o,l)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(a,e){const s=super.replaceWith(a,e);return this.attributes.copy(s),s}update(a,e){super.update(a,e),a.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};cs.blotName="block",cs.scope=Ie.BLOCK_BLOT,cs.tagName="P",cs.allowedChildren=[_o,cs,Dt];let wx=cs;const js=wx,Qn=class extends ta{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(a,e){super.deleteAt(a,e),this.enforceAllowedChildren()}formatAt(a,e,s,l){super.formatAt(a,e,s,l),this.enforceAllowedChildren()}insertAt(a,e,s){super.insertAt(a,e,s),this.enforceAllowedChildren()}optimize(a){super.optimize(a),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Qn.blotName="container",Qn.scope=Ie.BLOCK_BLOT;let Px=Qn;const Ul=Px;class Tx extends Dt{static formats(a,e){}format(a,e){super.formatAt(0,this.length(),a,e)}formatAt(a,e,s,l){a===0&&e===this.length()?this.format(s,l):super.formatAt(a,e,s,l)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Rt=Tx,Lx={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Sx=100,xs=class extends ta{constructor(a,e){super(null,e),this.registry=a,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,Lx),this.attach()}create(a,e){return this.registry.create(this,a,e)}find(a,e=!1){const s=this.registry.find(a,e);return s?s.scroll===this?s:e?this.find(s.scroll.domNode.parentNode,!0):null:null}query(a,e=Ie.ANY){return this.registry.query(a,e)}register(...a){return this.registry.register(...a)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(a,e){this.update(),a===0&&e===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(a,e)}formatAt(a,e,s,l){this.update(),super.formatAt(a,e,s,l)}insertAt(a,e,s){this.update(),super.insertAt(a,e,s)}optimize(a=[],e={}){super.optimize(e);const s=e.mutationsMap||new WeakMap;let l=Array.from(this.observer.takeRecords());for(;l.length>0;)a.push(l.pop());const o=(x,c=!0)=>{x==null||x===this||x.domNode.parentNode!=null&&(s.has(x.domNode)||s.set(x.domNode,[]),c&&o(x.parent))},i=x=>{s.has(x.domNode)&&(x instanceof ta&&x.children.forEach(i),s.delete(x.domNode),x.optimize(e))};let r=a;for(let x=0;r.length>0;x+=1){if(x>=Sx)throw new Error("[Parchment] Maximum optimize iterations reached");for(r.forEach(c=>{const f=this.find(c.target,!0);f!=null&&(f.domNode===c.target&&(c.type==="childList"?(o(this.find(c.previousSibling,!1)),Array.from(c.addedNodes).forEach(p=>{const d=this.find(p,!1);o(d,!1),d instanceof ta&&d.children.forEach(_=>{o(_,!1)})})):c.type==="attributes"&&o(f.prev)),o(f))}),this.children.forEach(i),r=Array.from(this.observer.takeRecords()),l=r.slice();l.length>0;)a.push(l.pop())}}update(a,e={}){a=a||this.observer.takeRecords();const s=new WeakMap;a.map(l=>{const o=this.find(l.target,!0);return o==null?null:s.has(o.domNode)?(s.get(o.domNode).push(l),null):(s.set(o.domNode,[l]),o)}).forEach(l=>{l!=null&&l!==this&&s.has(l.domNode)&&l.update(s.get(l.domNode)||[],e)}),e.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),e),this.optimize(a,e)}};xs.blotName="scroll",xs.defaultChild=js,xs.allowedChildren=[js,Ul],xs.scope=Ie.BLOCK_BLOT,xs.tagName="DIV";let Ix=xs;const Co=Ix,Kn=class qi extends Dt{static create(a){return document.createTextNode(a)}static value(a){return a.data}constructor(a,e){super(a,e),this.text=this.statics.value(this.domNode)}deleteAt(a,e){this.domNode.data=this.text=this.text.slice(0,a)+this.text.slice(a+e)}index(a,e){return this.domNode===a?e:-1}insertAt(a,e,s){s==null?(this.text=this.text.slice(0,a)+e+this.text.slice(a),this.domNode.data=this.text):super.insertAt(a,e,s)}length(){return this.text.length}optimize(a){super.optimize(a),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof qi&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(a,e=!1){return[this.domNode,a]}split(a,e=!1){if(!e){if(a===0)return this;if(a===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(a));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(a,e){a.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Kn.blotName="text",Kn.scope=Ie.INLINE_BLOT;let $x=Kn;const Tl=$x;var Nx=Object.freeze(Object.defineProperty({__proto__:null,Attributor:ca,AttributorStore:ql,BlockBlot:js,ClassAttributor:sa,ContainerBlot:Ul,EmbedBlot:Rt,InlineBlot:_o,LeafBlot:Dt,ParentBlot:ta,Registry:Es,Scope:Ie,ScrollBlot:Co,StyleAttributor:Ia,TextBlot:Tl},Symbol.toStringTag,{value:"Module"})),Nt={exports:{}},Vt=-1,Tt=1,pt=0;function Ys(n,a,e,s,l){if(n===a)return n?[[pt,n]]:[];if(e!=null){var o=Yx(n,a,e);if(o)return o}var i=yo(n,a),r=n.substring(0,i);n=n.substring(i),a=a.substring(i),i=zl(n,a);var x=n.substring(n.length-i);n=n.substring(0,n.length-i),a=a.substring(0,a.length-i);var c=Ox(n,a);return r&&c.unshift([pt,r]),x&&c.push([pt,x]),bo(c,l),s&&Rx(c),c}function Ox(n,a){var e;if(!n)return[[Tt,a]];if(!a)return[[Vt,n]];var s=n.length>a.length?n:a,l=n.length>a.length?a:n,o=s.indexOf(l);if(o!==-1)return e=[[Tt,s.substring(0,o)],[pt,l],[Tt,s.substring(o+l.length)]],n.length>a.length&&(e[0][0]=e[2][0]=Vt),e;if(l.length===1)return[[Vt,n],[Tt,a]];var i=Vx(n,a);if(i){var r=i[0],x=i[1],c=i[2],f=i[3],p=i[4],d=Ys(r,c),_=Ys(x,f);return d.concat([[pt,p]],_)}return Mx(n,a)}function Mx(n,a){for(var e=n.length,s=a.length,l=Math.ceil((e+s)/2),o=l,i=2*l,r=new Array(i),x=new Array(i),c=0;c<i;c++)r[c]=-1,x[c]=-1;r[o+1]=0,x[o+1]=0;for(var f=e-s,p=f%2!==0,d=0,_=0,T=0,A=0,E=0;E<l;E++){for(var P=-E+d;P<=E-_;P+=2){var L=o+P,D;P===-E||P!==E&&r[L-1]<r[L+1]?D=r[L+1]:D=r[L-1]+1;for(var h=D-P;D<e&&h<s&&n.charAt(D)===a.charAt(h);)D++,h++;if(r[L]=D,D>e)_+=2;else if(h>s)d+=2;else if(p){var g=o+f-P;if(g>=0&&g<i&&x[g]!==-1){var y=e-x[g];if(D>=y)return Ho(n,a,D,h)}}}for(var k=-E+T;k<=E-A;k+=2){var g=o+k,y;k===-E||k!==E&&x[g-1]<x[g+1]?y=x[g+1]:y=x[g-1]+1;for(var C=y-k;y<e&&C<s&&n.charAt(e-y-1)===a.charAt(s-C-1);)y++,C++;if(x[g]=y,y>e)A+=2;else if(C>s)T+=2;else if(!p){var L=o+f-k;if(L>=0&&L<i&&r[L]!==-1){var D=r[L],h=o+D-L;if(y=e-y,D>=y)return Ho(n,a,D,h)}}}}return[[Vt,n],[Tt,a]]}function Ho(n,a,e,s){var l=n.substring(0,e),o=a.substring(0,s),i=n.substring(e),r=a.substring(s),x=Ys(l,o),c=Ys(i,r);return x.concat(c)}function yo(n,a){if(!n||!a||n.charAt(0)!==a.charAt(0))return 0;for(var e=0,s=Math.min(n.length,a.length),l=s,o=0;e<l;)n.substring(o,l)==a.substring(o,l)?(e=l,o=e):s=l,l=Math.floor((s-e)/2+e);return Ui(n.charCodeAt(l-1))&&l--,l}function Zo(n,a){var e=n.length,s=a.length;if(e==0||s==0)return 0;e>s?n=n.substring(e-s):e<s&&(a=a.substring(0,e));var l=Math.min(e,s);if(n==a)return l;for(var o=0,i=1;;){var r=n.substring(l-i),x=a.indexOf(r);if(x==-1)return o;i+=x,(x==0||n.substring(l-i)==a.substring(0,i))&&(o=i,i++)}}function zl(n,a){if(!n||!a||n.slice(-1)!==a.slice(-1))return 0;for(var e=0,s=Math.min(n.length,a.length),l=s,o=0;e<l;)n.substring(n.length-l,n.length-o)==a.substring(a.length-l,a.length-o)?(e=l,o=e):s=l,l=Math.floor((s-e)/2+e);return zi(n.charCodeAt(n.length-l))&&l--,l}function Vx(n,a){var e=n.length>a.length?n:a,s=n.length>a.length?a:n;if(e.length<4||s.length*2<e.length)return null;function l(_,T,A){for(var E=_.substring(A,A+Math.floor(_.length/4)),P=-1,L="",D,h,g,y;(P=T.indexOf(E,P+1))!==-1;){var k=yo(_.substring(A),T.substring(P)),C=zl(_.substring(0,A),T.substring(0,P));L.length<C+k&&(L=T.substring(P-C,P)+T.substring(P,P+k),D=_.substring(0,A-C),h=_.substring(A+k),g=T.substring(0,P-C),y=T.substring(P+k))}return L.length*2>=_.length?[D,h,g,y,L]:null}var o=l(e,s,Math.ceil(e.length/4)),i=l(e,s,Math.ceil(e.length/2)),r;if(!o&&!i)return null;i?o?r=o[4].length>i[4].length?o:i:r=i:r=o;var x,c,f,p;n.length>a.length?(x=r[0],c=r[1],f=r[2],p=r[3]):(f=r[0],p=r[1],x=r[2],c=r[3]);var d=r[4];return[x,c,f,p,d]}function Rx(n){for(var a=!1,e=[],s=0,l=null,o=0,i=0,r=0,x=0,c=0;o<n.length;)n[o][0]==pt?(e[s++]=o,i=x,r=c,x=0,c=0,l=n[o][1]):(n[o][0]==Tt?x+=n[o][1].length:c+=n[o][1].length,l&&l.length<=Math.max(i,r)&&l.length<=Math.max(x,c)&&(n.splice(e[s-1],0,[Vt,l]),n[e[s-1]+1][0]=Tt,s--,s--,o=s>0?e[s-1]:-1,i=0,r=0,x=0,c=0,l=null,a=!0)),o++;for(a&&bo(n),zx(n),o=1;o<n.length;){if(n[o-1][0]==Vt&&n[o][0]==Tt){var f=n[o-1][1],p=n[o][1],d=Zo(f,p),_=Zo(p,f);d>=_?(d>=f.length/2||d>=p.length/2)&&(n.splice(o,0,[pt,p.substring(0,d)]),n[o-1][1]=f.substring(0,f.length-d),n[o+1][1]=p.substring(d),o++):(_>=f.length/2||_>=p.length/2)&&(n.splice(o,0,[pt,f.substring(0,_)]),n[o-1][0]=Tt,n[o-1][1]=p.substring(0,p.length-_),n[o+1][0]=Vt,n[o+1][1]=f.substring(_),o++),o++}o++}}var Go=/[^a-zA-Z0-9]/,Jo=/\s/,Xo=/[\r\n]/,qx=/\n\r?\n$/,Ux=/^\r?\n\r?\n/;function zx(n){function a(_,T){if(!_||!T)return 6;var A=_.charAt(_.length-1),E=T.charAt(0),P=A.match(Go),L=E.match(Go),D=P&&A.match(Jo),h=L&&E.match(Jo),g=D&&A.match(Xo),y=h&&E.match(Xo),k=g&&_.match(qx),C=y&&T.match(Ux);return k||C?5:g||y?4:P&&!D&&h?3:D||h?2:P||L?1:0}for(var e=1;e<n.length-1;){if(n[e-1][0]==pt&&n[e+1][0]==pt){var s=n[e-1][1],l=n[e][1],o=n[e+1][1],i=zl(s,l);if(i){var r=l.substring(l.length-i);s=s.substring(0,s.length-i),l=r+l.substring(0,l.length-i),o=r+o}for(var x=s,c=l,f=o,p=a(s,l)+a(l,o);l.charAt(0)===o.charAt(0);){s+=l.charAt(0),l=l.substring(1)+o.charAt(0),o=o.substring(1);var d=a(s,l)+a(l,o);d>=p&&(p=d,x=s,c=l,f=o)}n[e-1][1]!=x&&(x?n[e-1][1]=x:(n.splice(e-1,1),e--),n[e][1]=c,f?n[e+1][1]=f:(n.splice(e+1,1),e--))}e++}}function bo(n,a){n.push([pt,""]);for(var e=0,s=0,l=0,o="",i="",r;e<n.length;){if(e<n.length-1&&!n[e][1]){n.splice(e,1);continue}switch(n[e][0]){case Tt:l++,i+=n[e][1],e++;break;case Vt:s++,o+=n[e][1],e++;break;case pt:var x=e-l-s-1;if(a){if(x>=0&&Yi(n[x][1])){var c=n[x][1].slice(-1);if(n[x][1]=n[x][1].slice(0,-1),o=c+o,i=c+i,!n[x][1]){n.splice(x,1),e--;var f=x-1;n[f]&&n[f][0]===Tt&&(l++,i=n[f][1]+i,f--),n[f]&&n[f][0]===Vt&&(s++,o=n[f][1]+o,f--),x=f}}if(ji(n[e][1])){var c=n[e][1].charAt(0);n[e][1]=n[e][1].slice(1),o+=c,i+=c}}if(e<n.length-1&&!n[e][1]){n.splice(e,1);break}if(o.length>0||i.length>0){o.length>0&&i.length>0&&(r=yo(i,o),r!==0&&(x>=0?n[x][1]+=i.substring(0,r):(n.splice(0,0,[pt,i.substring(0,r)]),e++),i=i.substring(r),o=o.substring(r)),r=zl(i,o),r!==0&&(n[e][1]=i.substring(i.length-r)+n[e][1],i=i.substring(0,i.length-r),o=o.substring(0,o.length-r)));var p=l+s;o.length===0&&i.length===0?(n.splice(e-p,p),e=e-p):o.length===0?(n.splice(e-p,p,[Tt,i]),e=e-p+1):i.length===0?(n.splice(e-p,p,[Vt,o]),e=e-p+1):(n.splice(e-p,p,[Vt,o],[Tt,i]),e=e-p+2)}e!==0&&n[e-1][0]===pt?(n[e-1][1]+=n[e][1],n.splice(e,1)):e++,l=0,s=0,o="",i="";break}}n[n.length-1][1]===""&&n.pop();var d=!1;for(e=1;e<n.length-1;)n[e-1][0]===pt&&n[e+1][0]===pt&&(n[e][1].substring(n[e][1].length-n[e-1][1].length)===n[e-1][1]?(n[e][1]=n[e-1][1]+n[e][1].substring(0,n[e][1].length-n[e-1][1].length),n[e+1][1]=n[e-1][1]+n[e+1][1],n.splice(e-1,1),d=!0):n[e][1].substring(0,n[e+1][1].length)==n[e+1][1]&&(n[e-1][1]+=n[e+1][1],n[e][1]=n[e][1].substring(n[e+1][1].length)+n[e+1][1],n.splice(e+1,1),d=!0)),e++;d&&bo(n,a)}function Ui(n){return n>=55296&&n<=56319}function zi(n){return n>=56320&&n<=57343}function ji(n){return zi(n.charCodeAt(0))}function Yi(n){return Ui(n.charCodeAt(n.length-1))}function jx(n){for(var a=[],e=0;e<n.length;e++)n[e][1].length>0&&a.push(n[e]);return a}function Mn(n,a,e,s){return Yi(n)||ji(s)?null:jx([[pt,n],[Vt,a],[Tt,e],[pt,s]])}function Yx(n,a,e){var s=typeof e=="number"?{index:e,length:0}:e.oldRange,l=typeof e=="number"?null:e.newRange,o=n.length,i=a.length;if(s.length===0&&(l===null||l.length===0)){var r=s.index,x=n.slice(0,r),c=n.slice(r),f=l?l.index:null;e:{var p=r+i-o;if(f!==null&&f!==p||p<0||p>i)break e;var d=a.slice(0,p),_=a.slice(p);if(_!==c)break e;var T=Math.min(r,p),A=x.slice(0,T),E=d.slice(0,T);if(A!==E)break e;var P=x.slice(T),L=d.slice(T);return Mn(A,P,L,c)}e:{if(f!==null&&f!==r)break e;var D=r,d=a.slice(0,D),_=a.slice(D);if(d!==x)break e;var h=Math.min(o-D,i-D),g=c.slice(c.length-h),y=_.slice(_.length-h);if(g!==y)break e;var P=c.slice(0,c.length-h),L=_.slice(0,_.length-h);return Mn(x,P,L,g)}}if(s.length>0&&l&&l.length===0){e:{var A=n.slice(0,s.index),g=n.slice(s.index+s.length),T=A.length,h=g.length;if(i<T+h)break e;var E=a.slice(0,T),y=a.slice(i-h);if(A!==E||g!==y)break e;var P=n.slice(T,o-h),L=a.slice(T,i-h);return Mn(A,P,L,g)}}return null}function jl(n,a,e,s){return Ys(n,a,e,s,!0)}jl.INSERT=Tt;jl.DELETE=Vt;jl.EQUAL=pt;var Wx=jl,Ll={exports:{}};(function(n,a){var e=200,s="__lodash_hash_undefined__",l=9007199254740991,o="[object Arguments]",i="[object Array]",r="[object Boolean]",x="[object Date]",c="[object Error]",f="[object Function]",p="[object GeneratorFunction]",d="[object Map]",_="[object Number]",T="[object Object]",A="[object Promise]",E="[object RegExp]",P="[object Set]",L="[object String]",D="[object Symbol]",h="[object WeakMap]",g="[object ArrayBuffer]",y="[object DataView]",k="[object Float32Array]",C="[object Float64Array]",F="[object Int8Array]",R="[object Int16Array]",M="[object Int32Array]",O="[object Uint8Array]",H="[object Uint8ClampedArray]",z="[object Uint16Array]",X="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,Q=/\w*$/,ue=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,me={};me[o]=me[i]=me[g]=me[y]=me[r]=me[x]=me[k]=me[C]=me[F]=me[R]=me[M]=me[d]=me[_]=me[T]=me[E]=me[P]=me[L]=me[D]=me[O]=me[H]=me[z]=me[X]=!0,me[c]=me[f]=me[h]=!1;var se=typeof ha=="object"&&ha&&ha.Object===Object&&ha,_e=typeof self=="object"&&self&&self.Object===Object&&self,de=se||_e||Function("return this")(),oe=a&&!a.nodeType&&a,ye=oe&&!0&&n&&!n.nodeType&&n,$=ye&&ye.exports===oe;function W(v,q){return v.set(q[0],q[1]),v}function ae(v,q){return v.add(q),v}function J(v,q){for(var G=-1,fe=v?v.length:0;++G<fe&&q(v[G],G,v)!==!1;);return v}function Z(v,q){for(var G=-1,fe=q.length,qe=v.length;++G<fe;)v[qe+G]=q[G];return v}function xe(v,q,G,fe){var qe=-1,Ne=v?v.length:0;for(fe&&Ne&&(G=v[++qe]);++qe<Ne;)G=q(G,v[qe],qe,v);return G}function he(v,q){for(var G=-1,fe=Array(v);++G<v;)fe[G]=q(G);return fe}function re(v,q){return v?.[q]}function be(v){var q=!1;if(v!=null&&typeof v.toString!="function")try{q=!!(v+"")}catch{}return q}function te(v){var q=-1,G=Array(v.size);return v.forEach(function(fe,qe){G[++q]=[qe,fe]}),G}function Ae(v,q){return function(G){return v(q(G))}}function we(v){var q=-1,G=Array(v.size);return v.forEach(function(fe){G[++q]=fe}),G}var Me=Array.prototype,Le=Function.prototype,ke=Object.prototype,pe=de["__core-js_shared__"],ie=function(){var v=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),je=Le.toString,ve=ke.hasOwnProperty,Pe=ke.toString,Ve=RegExp("^"+je.call(ve).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=$?de.Buffer:void 0,Re=de.Symbol,$a=de.Uint8Array,ut=Ae(Object.getPrototypeOf,Object),tl=Object.create,al=ke.propertyIsEnumerable,Jl=Me.splice,As=Object.getOwnPropertySymbols,Qa=Ke?Ke.isBuffer:void 0,sl=Ae(Object.keys,Object),Ka=Zt(de,"DataView"),Na=Zt(de,"Map"),Ht=Zt(de,"Promise"),es=Zt(de,"Set"),ks=Zt(de,"WeakMap"),Oa=Zt(Object,"create"),Ds=wt(Ka),Ma=wt(Na),Fs=wt(Ht),ws=wt(es),Ps=wt(ks),ba=Re?Re.prototype:void 0,ll=ba?ba.valueOf:void 0;function ua(v){var q=-1,G=v?v.length:0;for(this.clear();++q<G;){var fe=v[q];this.set(fe[0],fe[1])}}function Xl(){this.__data__=Oa?Oa(null):{}}function Ql(v){return this.has(v)&&delete this.__data__[v]}function Kl(v){var q=this.__data__;if(Oa){var G=q[v];return G===s?void 0:G}return ve.call(q,v)?q[v]:void 0}function nl(v){var q=this.__data__;return Oa?q[v]!==void 0:ve.call(q,v)}function Ts(v,q){var G=this.__data__;return G[v]=Oa&&q===void 0?s:q,this}ua.prototype.clear=Xl,ua.prototype.delete=Ql,ua.prototype.get=Kl,ua.prototype.has=nl,ua.prototype.set=Ts;function Et(v){var q=-1,G=v?v.length:0;for(this.clear();++q<G;){var fe=v[q];this.set(fe[0],fe[1])}}function en(){this.__data__=[]}function tn(v){var q=this.__data__,G=as(q,v);if(G<0)return!1;var fe=q.length-1;return G==fe?q.pop():Jl.call(q,G,1),!0}function an(v){var q=this.__data__,G=as(q,v);return G<0?void 0:q[G][1]}function sn(v){return as(this.__data__,v)>-1}function ln(v,q){var G=this.__data__,fe=as(G,v);return fe<0?G.push([v,q]):G[fe][1]=q,this}Et.prototype.clear=en,Et.prototype.delete=tn,Et.prototype.get=an,Et.prototype.has=sn,Et.prototype.set=ln;function Bt(v){var q=-1,G=v?v.length:0;for(this.clear();++q<G;){var fe=v[q];this.set(fe[0],fe[1])}}function nn(){this.__data__={hash:new ua,map:new(Na||Et),string:new ua}}function on(v){return Ra(this,v).delete(v)}function rn(v){return Ra(this,v).get(v)}function cn(v){return Ra(this,v).has(v)}function xn(v,q){return Ra(this,v).set(v,q),this}Bt.prototype.clear=nn,Bt.prototype.delete=on,Bt.prototype.get=rn,Bt.prototype.has=cn,Bt.prototype.set=xn;function St(v){this.__data__=new Et(v)}function un(){this.__data__=new Et}function dn(v){return this.__data__.delete(v)}function mn(v){return this.__data__.get(v)}function pn(v){return this.__data__.has(v)}function fn(v,q){var G=this.__data__;if(G instanceof Et){var fe=G.__data__;if(!Na||fe.length<e-1)return fe.push([v,q]),this;G=this.__data__=new Bt(fe)}return G.set(v,q),this}St.prototype.clear=un,St.prototype.delete=dn,St.prototype.get=mn,St.prototype.has=pn,St.prototype.set=fn;function ts(v,q){var G=$s(v)||ls(v)?he(v.length,String):[],fe=G.length,qe=!!fe;for(var Ne in v)(q||ve.call(v,Ne))&&!(qe&&(Ne=="length"||wn(Ne,fe)))&&G.push(Ne);return G}function ol(v,q,G){var fe=v[q];(!(ve.call(v,q)&&ul(fe,G))||G===void 0&&!(q in v))&&(v[q]=G)}function as(v,q){for(var G=v.length;G--;)if(ul(v[G][0],q))return G;return-1}function na(v,q){return v&&Is(q,Os(q),v)}function Ls(v,q,G,fe,qe,Ne,He){var Xe;if(fe&&(Xe=Ne?fe(v,qe,Ne,He):fe(v)),Xe!==void 0)return Xe;if(!ia(v))return v;var dt=$s(v);if(dt){if(Xe=Dn(v),!q)return Bn(v,Xe)}else{var et=ma(v),At=et==f||et==p;if(dl(v))return ss(v,q);if(et==T||et==o||At&&!Ne){if(be(v))return Ne?v:{};if(Xe=oa(At?{}:v),!q)return An(v,na(Xe,v))}else{if(!me[et])return Ne?v:{};Xe=Fn(v,et,Ls,q)}}He||(He=new St);var It=He.get(v);if(It)return It;if(He.set(v,Xe),!dt)var mt=G?kn(v):Os(v);return J(mt||v,function(kt,_t){mt&&(_t=kt,kt=v[_t]),ol(Xe,_t,Ls(kt,q,G,fe,_t,v,He))}),Xe}function gn(v){return ia(v)?tl(v):{}}function hn(v,q,G){var fe=q(v);return $s(v)?fe:Z(fe,G(v))}function vn(v){return Pe.call(v)}function En(v){if(!ia(v)||Tn(v))return!1;var q=Ns(v)||be(v)?Ve:ue;return q.test(wt(v))}function _n(v){if(!cl(v))return sl(v);var q=[];for(var G in Object(v))ve.call(v,G)&&G!="constructor"&&q.push(G);return q}function ss(v,q){if(q)return v.slice();var G=new v.constructor(v.length);return v.copy(G),G}function Ss(v){var q=new v.constructor(v.byteLength);return new $a(q).set(new $a(v)),q}function Va(v,q){var G=q?Ss(v.buffer):v.buffer;return new v.constructor(G,v.byteOffset,v.byteLength)}function il(v,q,G){var fe=q?G(te(v),!0):te(v);return xe(fe,W,new v.constructor)}function rl(v){var q=new v.constructor(v.source,Q.exec(v));return q.lastIndex=v.lastIndex,q}function Cn(v,q,G){var fe=q?G(we(v),!0):we(v);return xe(fe,ae,new v.constructor)}function yn(v){return ll?Object(ll.call(v)):{}}function bn(v,q){var G=q?Ss(v.buffer):v.buffer;return new v.constructor(G,v.byteOffset,v.length)}function Bn(v,q){var G=-1,fe=v.length;for(q||(q=Array(fe));++G<fe;)q[G]=v[G];return q}function Is(v,q,G,fe){G||(G={});for(var qe=-1,Ne=q.length;++qe<Ne;){var He=q[qe],Xe=fe?fe(G[He],v[He],He,G,v):void 0;ol(G,He,Xe===void 0?v[He]:Xe)}return G}function An(v,q){return Is(v,da(v),q)}function kn(v){return hn(v,Os,da)}function Ra(v,q){var G=v.__data__;return Pn(q)?G[typeof q=="string"?"string":"hash"]:G.map}function Zt(v,q){var G=re(v,q);return En(G)?G:void 0}var da=As?Ae(As,Object):Sn,ma=vn;(Ka&&ma(new Ka(new ArrayBuffer(1)))!=y||Na&&ma(new Na)!=d||Ht&&ma(Ht.resolve())!=A||es&&ma(new es)!=P||ks&&ma(new ks)!=h)&&(ma=function(v){var q=Pe.call(v),G=q==T?v.constructor:void 0,fe=G?wt(G):void 0;if(fe)switch(fe){case Ds:return y;case Ma:return d;case Fs:return A;case ws:return P;case Ps:return h}return q});function Dn(v){var q=v.length,G=v.constructor(q);return q&&typeof v[0]=="string"&&ve.call(v,"index")&&(G.index=v.index,G.input=v.input),G}function oa(v){return typeof v.constructor=="function"&&!cl(v)?gn(ut(v)):{}}function Fn(v,q,G,fe){var qe=v.constructor;switch(q){case g:return Ss(v);case r:case x:return new qe(+v);case y:return Va(v,fe);case k:case C:case F:case R:case M:case O:case H:case z:case X:return bn(v,fe);case d:return il(v,fe,G);case _:case L:return new qe(v);case E:return rl(v);case P:return Cn(v,fe,G);case D:return yn(v)}}function wn(v,q){return q=q??l,!!q&&(typeof v=="number"||ee.test(v))&&v>-1&&v%1==0&&v<q}function Pn(v){var q=typeof v;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?v!=="__proto__":v===null}function Tn(v){return!!ie&&ie in v}function cl(v){var q=v&&v.constructor,G=typeof q=="function"&&q.prototype||ke;return v===G}function wt(v){if(v!=null){try{return je.call(v)}catch{}try{return v+""}catch{}}return""}function xl(v){return Ls(v,!0,!0)}function ul(v,q){return v===q||v!==v&&q!==q}function ls(v){return Ln(v)&&ve.call(v,"callee")&&(!al.call(v,"callee")||Pe.call(v)==o)}var $s=Array.isArray;function ns(v){return v!=null&&ml(v.length)&&!Ns(v)}function Ln(v){return pl(v)&&ns(v)}var dl=Qa||In;function Ns(v){var q=ia(v)?Pe.call(v):"";return q==f||q==p}function ml(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=l}function ia(v){var q=typeof v;return!!v&&(q=="object"||q=="function")}function pl(v){return!!v&&typeof v=="object"}function Os(v){return ns(v)?ts(v):_n(v)}function Sn(){return[]}function In(){return!1}n.exports=xl})(Ll,Ll.exports);var Sl={exports:{}};(function(n,a){var e=200,s="__lodash_hash_undefined__",l=1,o=2,i=9007199254740991,r="[object Arguments]",x="[object Array]",c="[object AsyncFunction]",f="[object Boolean]",p="[object Date]",d="[object Error]",_="[object Function]",T="[object GeneratorFunction]",A="[object Map]",E="[object Number]",P="[object Null]",L="[object Object]",D="[object Promise]",h="[object Proxy]",g="[object RegExp]",y="[object Set]",k="[object String]",C="[object Symbol]",F="[object Undefined]",R="[object WeakMap]",M="[object ArrayBuffer]",O="[object DataView]",H="[object Float32Array]",z="[object Float64Array]",X="[object Int8Array]",le="[object Int16Array]",Q="[object Int32Array]",ue="[object Uint8Array]",ee="[object Uint8ClampedArray]",me="[object Uint16Array]",se="[object Uint32Array]",_e=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,ye={};ye[H]=ye[z]=ye[X]=ye[le]=ye[Q]=ye[ue]=ye[ee]=ye[me]=ye[se]=!0,ye[r]=ye[x]=ye[M]=ye[f]=ye[O]=ye[p]=ye[d]=ye[_]=ye[A]=ye[E]=ye[L]=ye[g]=ye[y]=ye[k]=ye[R]=!1;var $=typeof ha=="object"&&ha&&ha.Object===Object&&ha,W=typeof self=="object"&&self&&self.Object===Object&&self,ae=$||W||Function("return this")(),J=a&&!a.nodeType&&a,Z=J&&!0&&n&&!n.nodeType&&n,xe=Z&&Z.exports===J,he=xe&&$.process,re=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),be=re&&re.isTypedArray;function te(v,q){for(var G=-1,fe=v==null?0:v.length,qe=0,Ne=[];++G<fe;){var He=v[G];q(He,G,v)&&(Ne[qe++]=He)}return Ne}function Ae(v,q){for(var G=-1,fe=q.length,qe=v.length;++G<fe;)v[qe+G]=q[G];return v}function we(v,q){for(var G=-1,fe=v==null?0:v.length;++G<fe;)if(q(v[G],G,v))return!0;return!1}function Me(v,q){for(var G=-1,fe=Array(v);++G<v;)fe[G]=q(G);return fe}function Le(v){return function(q){return v(q)}}function ke(v,q){return v.has(q)}function pe(v,q){return v?.[q]}function ie(v){var q=-1,G=Array(v.size);return v.forEach(function(fe,qe){G[++q]=[qe,fe]}),G}function je(v,q){return function(G){return v(q(G))}}function ve(v){var q=-1,G=Array(v.size);return v.forEach(function(fe){G[++q]=fe}),G}var Pe=Array.prototype,Ve=Function.prototype,Ke=Object.prototype,Re=ae["__core-js_shared__"],$a=Ve.toString,ut=Ke.hasOwnProperty,tl=function(){var v=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),al=Ke.toString,Jl=RegExp("^"+$a.call(ut).replace(_e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),As=xe?ae.Buffer:void 0,Qa=ae.Symbol,sl=ae.Uint8Array,Ka=Ke.propertyIsEnumerable,Na=Pe.splice,Ht=Qa?Qa.toStringTag:void 0,es=Object.getOwnPropertySymbols,ks=As?As.isBuffer:void 0,Oa=je(Object.keys,Object),Ds=da(ae,"DataView"),Ma=da(ae,"Map"),Fs=da(ae,"Promise"),ws=da(ae,"Set"),Ps=da(ae,"WeakMap"),ba=da(Object,"create"),ll=wt(Ds),ua=wt(Ma),Xl=wt(Fs),Ql=wt(ws),Kl=wt(Ps),nl=Qa?Qa.prototype:void 0,Ts=nl?nl.valueOf:void 0;function Et(v){var q=-1,G=v==null?0:v.length;for(this.clear();++q<G;){var fe=v[q];this.set(fe[0],fe[1])}}function en(){this.__data__=ba?ba(null):{},this.size=0}function tn(v){var q=this.has(v)&&delete this.__data__[v];return this.size-=q?1:0,q}function an(v){var q=this.__data__;if(ba){var G=q[v];return G===s?void 0:G}return ut.call(q,v)?q[v]:void 0}function sn(v){var q=this.__data__;return ba?q[v]!==void 0:ut.call(q,v)}function ln(v,q){var G=this.__data__;return this.size+=this.has(v)?0:1,G[v]=ba&&q===void 0?s:q,this}Et.prototype.clear=en,Et.prototype.delete=tn,Et.prototype.get=an,Et.prototype.has=sn,Et.prototype.set=ln;function Bt(v){var q=-1,G=v==null?0:v.length;for(this.clear();++q<G;){var fe=v[q];this.set(fe[0],fe[1])}}function nn(){this.__data__=[],this.size=0}function on(v){var q=this.__data__,G=ss(q,v);if(G<0)return!1;var fe=q.length-1;return G==fe?q.pop():Na.call(q,G,1),--this.size,!0}function rn(v){var q=this.__data__,G=ss(q,v);return G<0?void 0:q[G][1]}function cn(v){return ss(this.__data__,v)>-1}function xn(v,q){var G=this.__data__,fe=ss(G,v);return fe<0?(++this.size,G.push([v,q])):G[fe][1]=q,this}Bt.prototype.clear=nn,Bt.prototype.delete=on,Bt.prototype.get=rn,Bt.prototype.has=cn,Bt.prototype.set=xn;function St(v){var q=-1,G=v==null?0:v.length;for(this.clear();++q<G;){var fe=v[q];this.set(fe[0],fe[1])}}function un(){this.size=0,this.__data__={hash:new Et,map:new(Ma||Bt),string:new Et}}function dn(v){var q=Zt(this,v).delete(v);return this.size-=q?1:0,q}function mn(v){return Zt(this,v).get(v)}function pn(v){return Zt(this,v).has(v)}function fn(v,q){var G=Zt(this,v),fe=G.size;return G.set(v,q),this.size+=G.size==fe?0:1,this}St.prototype.clear=un,St.prototype.delete=dn,St.prototype.get=mn,St.prototype.has=pn,St.prototype.set=fn;function ts(v){var q=-1,G=v==null?0:v.length;for(this.__data__=new St;++q<G;)this.add(v[q])}function ol(v){return this.__data__.set(v,s),this}function as(v){return this.__data__.has(v)}ts.prototype.add=ts.prototype.push=ol,ts.prototype.has=as;function na(v){var q=this.__data__=new Bt(v);this.size=q.size}function Ls(){this.__data__=new Bt,this.size=0}function gn(v){var q=this.__data__,G=q.delete(v);return this.size=q.size,G}function hn(v){return this.__data__.get(v)}function vn(v){return this.__data__.has(v)}function En(v,q){var G=this.__data__;if(G instanceof Bt){var fe=G.__data__;if(!Ma||fe.length<e-1)return fe.push([v,q]),this.size=++G.size,this;G=this.__data__=new St(fe)}return G.set(v,q),this.size=G.size,this}na.prototype.clear=Ls,na.prototype.delete=gn,na.prototype.get=hn,na.prototype.has=vn,na.prototype.set=En;function _n(v,q){var G=ls(v),fe=!G&&ul(v),qe=!G&&!fe&&ns(v),Ne=!G&&!fe&&!qe&&pl(v),He=G||fe||qe||Ne,Xe=He?Me(v.length,String):[],dt=Xe.length;for(var et in v)(q||ut.call(v,et))&&!(He&&(et=="length"||qe&&(et=="offset"||et=="parent")||Ne&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||Fn(et,dt)))&&Xe.push(et);return Xe}function ss(v,q){for(var G=v.length;G--;)if(xl(v[G][0],q))return G;return-1}function Ss(v,q,G){var fe=q(v);return ls(v)?fe:Ae(fe,G(v))}function Va(v){return v==null?v===void 0?F:P:Ht&&Ht in Object(v)?ma(v):cl(v)}function il(v){return ia(v)&&Va(v)==r}function rl(v,q,G,fe,qe){return v===q?!0:v==null||q==null||!ia(v)&&!ia(q)?v!==v&&q!==q:Cn(v,q,G,fe,rl,qe)}function Cn(v,q,G,fe,qe,Ne){var He=ls(v),Xe=ls(q),dt=He?x:oa(v),et=Xe?x:oa(q);dt=dt==r?L:dt,et=et==r?L:et;var At=dt==L,It=et==L,mt=dt==et;if(mt&&ns(v)){if(!ns(q))return!1;He=!0,At=!1}if(mt&&!At)return Ne||(Ne=new na),He||pl(v)?Is(v,q,G,fe,qe,Ne):An(v,q,dt,G,fe,qe,Ne);if(!(G&l)){var kt=At&&ut.call(v,"__wrapped__"),_t=It&&ut.call(q,"__wrapped__");if(kt||_t){var Ba=kt?v.value():v,pa=_t?q.value():q;return Ne||(Ne=new na),qe(Ba,pa,G,fe,Ne)}}return mt?(Ne||(Ne=new na),kn(v,q,G,fe,qe,Ne)):!1}function yn(v){if(!ml(v)||Pn(v))return!1;var q=dl(v)?Jl:de;return q.test(wt(v))}function bn(v){return ia(v)&&Ns(v.length)&&!!ye[Va(v)]}function Bn(v){if(!Tn(v))return Oa(v);var q=[];for(var G in Object(v))ut.call(v,G)&&G!="constructor"&&q.push(G);return q}function Is(v,q,G,fe,qe,Ne){var He=G&l,Xe=v.length,dt=q.length;if(Xe!=dt&&!(He&&dt>Xe))return!1;var et=Ne.get(v);if(et&&Ne.get(q))return et==q;var At=-1,It=!0,mt=G&o?new ts:void 0;for(Ne.set(v,q),Ne.set(q,v);++At<Xe;){var kt=v[At],_t=q[At];if(fe)var Ba=He?fe(_t,kt,At,q,v,Ne):fe(kt,_t,At,v,q,Ne);if(Ba!==void 0){if(Ba)continue;It=!1;break}if(mt){if(!we(q,function(pa,qa){if(!ke(mt,qa)&&(kt===pa||qe(kt,pa,G,fe,Ne)))return mt.push(qa)})){It=!1;break}}else if(!(kt===_t||qe(kt,_t,G,fe,Ne))){It=!1;break}}return Ne.delete(v),Ne.delete(q),It}function An(v,q,G,fe,qe,Ne,He){switch(G){case O:if(v.byteLength!=q.byteLength||v.byteOffset!=q.byteOffset)return!1;v=v.buffer,q=q.buffer;case M:return!(v.byteLength!=q.byteLength||!Ne(new sl(v),new sl(q)));case f:case p:case E:return xl(+v,+q);case d:return v.name==q.name&&v.message==q.message;case g:case k:return v==q+"";case A:var Xe=ie;case y:var dt=fe&l;if(Xe||(Xe=ve),v.size!=q.size&&!dt)return!1;var et=He.get(v);if(et)return et==q;fe|=o,He.set(v,q);var At=Is(Xe(v),Xe(q),fe,qe,Ne,He);return He.delete(v),At;case C:if(Ts)return Ts.call(v)==Ts.call(q)}return!1}function kn(v,q,G,fe,qe,Ne){var He=G&l,Xe=Ra(v),dt=Xe.length,et=Ra(q),At=et.length;if(dt!=At&&!He)return!1;for(var It=dt;It--;){var mt=Xe[It];if(!(He?mt in q:ut.call(q,mt)))return!1}var kt=Ne.get(v);if(kt&&Ne.get(q))return kt==q;var _t=!0;Ne.set(v,q),Ne.set(q,v);for(var Ba=He;++It<dt;){mt=Xe[It];var pa=v[mt],qa=q[mt];if(fe)var Vo=He?fe(qa,pa,mt,q,v,Ne):fe(pa,qa,mt,v,q,Ne);if(!(Vo===void 0?pa===qa||qe(pa,qa,G,fe,Ne):Vo)){_t=!1;break}Ba||(Ba=mt=="constructor")}if(_t&&!Ba){var fl=v.constructor,gl=q.constructor;fl!=gl&&"constructor"in v&&"constructor"in q&&!(typeof fl=="function"&&fl instanceof fl&&typeof gl=="function"&&gl instanceof gl)&&(_t=!1)}return Ne.delete(v),Ne.delete(q),_t}function Ra(v){return Ss(v,Os,Dn)}function Zt(v,q){var G=v.__data__;return wn(q)?G[typeof q=="string"?"string":"hash"]:G.map}function da(v,q){var G=pe(v,q);return yn(G)?G:void 0}function ma(v){var q=ut.call(v,Ht),G=v[Ht];try{v[Ht]=void 0;var fe=!0}catch{}var qe=al.call(v);return fe&&(q?v[Ht]=G:delete v[Ht]),qe}var Dn=es?function(v){return v==null?[]:(v=Object(v),te(es(v),function(q){return Ka.call(v,q)}))}:Sn,oa=Va;(Ds&&oa(new Ds(new ArrayBuffer(1)))!=O||Ma&&oa(new Ma)!=A||Fs&&oa(Fs.resolve())!=D||ws&&oa(new ws)!=y||Ps&&oa(new Ps)!=R)&&(oa=function(v){var q=Va(v),G=q==L?v.constructor:void 0,fe=G?wt(G):"";if(fe)switch(fe){case ll:return O;case ua:return A;case Xl:return D;case Ql:return y;case Kl:return R}return q});function Fn(v,q){return q=q??i,!!q&&(typeof v=="number"||oe.test(v))&&v>-1&&v%1==0&&v<q}function wn(v){var q=typeof v;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?v!=="__proto__":v===null}function Pn(v){return!!tl&&tl in v}function Tn(v){var q=v&&v.constructor,G=typeof q=="function"&&q.prototype||Ke;return v===G}function cl(v){return al.call(v)}function wt(v){if(v!=null){try{return $a.call(v)}catch{}try{return v+""}catch{}}return""}function xl(v,q){return v===q||v!==v&&q!==q}var ul=il(function(){return arguments}())?il:function(v){return ia(v)&&ut.call(v,"callee")&&!Ka.call(v,"callee")},ls=Array.isArray;function $s(v){return v!=null&&Ns(v.length)&&!dl(v)}var ns=ks||In;function Ln(v,q){return rl(v,q)}function dl(v){if(!ml(v))return!1;var q=Va(v);return q==_||q==T||q==c||q==h}function Ns(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=i}function ml(v){var q=typeof v;return v!=null&&(q=="object"||q=="function")}function ia(v){return v!=null&&typeof v=="object"}var pl=be?Le(be):bn;function Os(v){return $s(v)?_n(v):Bn(v)}function Sn(){return[]}function In(){return!1}n.exports=Ln})(Sl,Sl.exports);var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});const Hx=Ll.exports,Zx=Sl.exports;var eo;(function(n){function a(o={},i={},r=!1){typeof o!="object"&&(o={}),typeof i!="object"&&(i={});let x=Hx(i);r||(x=Object.keys(x).reduce((c,f)=>(x[f]!=null&&(c[f]=x[f]),c),{}));for(const c in o)o[c]!==void 0&&i[c]===void 0&&(x[c]=o[c]);return Object.keys(x).length>0?x:void 0}n.compose=a;function e(o={},i={}){typeof o!="object"&&(o={}),typeof i!="object"&&(i={});const r=Object.keys(o).concat(Object.keys(i)).reduce((x,c)=>(Zx(o[c],i[c])||(x[c]=i[c]===void 0?null:i[c]),x),{});return Object.keys(r).length>0?r:void 0}n.diff=e;function s(o={},i={}){o=o||{};const r=Object.keys(i).reduce((x,c)=>(i[c]!==o[c]&&o[c]!==void 0&&(x[c]=i[c]),x),{});return Object.keys(o).reduce((x,c)=>(o[c]!==i[c]&&i[c]===void 0&&(x[c]=null),x),r)}n.invert=s;function l(o,i,r=!1){if(typeof o!="object")return i;if(typeof i!="object")return;if(!r)return i;const x=Object.keys(i).reduce((c,f)=>(o[f]===void 0&&(c[f]=i[f]),c),{});return Object.keys(x).length>0?x:void 0}n.transform=l})(eo||(eo={}));Bo.default=eo;var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});var to;(function(n){function a(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}n.length=a})(to||(to={}));Yl.default=to;var Ao={};Object.defineProperty(Ao,"__esModule",{value:!0});const Qo=Yl;class Gx{constructor(a){this.ops=a,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(a){a||(a=1/0);const e=this.ops[this.index];if(e){const s=this.offset,l=Qo.default.length(e);if(a>=l-s?(a=l-s,this.index+=1,this.offset=0):this.offset+=a,typeof e.delete=="number")return{delete:a};{const o={};return e.attributes&&(o.attributes=e.attributes),typeof e.retain=="number"?o.retain=a:typeof e.retain=="object"&&e.retain!==null?o.retain=e.retain:typeof e.insert=="string"?o.insert=e.insert.substr(s,a):o.insert=e.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Qo.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const a=this.ops[this.index];return a?typeof a.delete=="number"?"delete":typeof a.retain=="number"||typeof a.retain=="object"&&a.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const a=this.offset,e=this.index,s=this.next(),l=this.ops.slice(this.index);return this.offset=a,this.index=e,[s].concat(l)}}else return[]}}Ao.default=Gx;(function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.AttributeMap=a.OpIterator=a.Op=void 0;const e=Wx,s=Ll.exports,l=Sl.exports,o=Bo;a.AttributeMap=o.default;const i=Yl;a.Op=i.default;const r=Ao;a.OpIterator=r.default;const x=String.fromCharCode(0),c=(p,d)=>{if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);const _=Object.keys(p)[0];if(!_||_!==Object.keys(d)[0])throw new Error(`embed types not matched: ${_} != ${Object.keys(d)[0]}`);return[_,p[_],d[_]]};class f{constructor(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]}static registerEmbed(d,_){this.handlers[d]=_}static unregisterEmbed(d){delete this.handlers[d]}static getHandler(d){const _=this.handlers[d];if(!_)throw new Error(`no handlers for embed type "${d}"`);return _}insert(d,_){const T={};return typeof d=="string"&&d.length===0?this:(T.insert=d,_!=null&&typeof _=="object"&&Object.keys(_).length>0&&(T.attributes=_),this.push(T))}delete(d){return d<=0?this:this.push({delete:d})}retain(d,_){if(typeof d=="number"&&d<=0)return this;const T={retain:d};return _!=null&&typeof _=="object"&&Object.keys(_).length>0&&(T.attributes=_),this.push(T)}push(d){let _=this.ops.length,T=this.ops[_-1];if(d=s(d),typeof T=="object"){if(typeof d.delete=="number"&&typeof T.delete=="number")return this.ops[_-1]={delete:T.delete+d.delete},this;if(typeof T.delete=="number"&&d.insert!=null&&(_-=1,T=this.ops[_-1],typeof T!="object"))return this.ops.unshift(d),this;if(l(d.attributes,T.attributes)){if(typeof d.insert=="string"&&typeof T.insert=="string")return this.ops[_-1]={insert:T.insert+d.insert},typeof d.attributes=="object"&&(this.ops[_-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof T.retain=="number")return this.ops[_-1]={retain:T.retain+d.retain},typeof d.attributes=="object"&&(this.ops[_-1].attributes=d.attributes),this}}return _===this.ops.length?this.ops.push(d):this.ops.splice(_,0,d),this}chop(){const d=this.ops[this.ops.length-1];return d&&typeof d.retain=="number"&&!d.attributes&&this.ops.pop(),this}filter(d){return this.ops.filter(d)}forEach(d){this.ops.forEach(d)}map(d){return this.ops.map(d)}partition(d){const _=[],T=[];return this.forEach(A=>{(d(A)?_:T).push(A)}),[_,T]}reduce(d,_){return this.ops.reduce(d,_)}changeLength(){return this.reduce((d,_)=>_.insert?d+i.default.length(_):_.delete?d-_.delete:d,0)}length(){return this.reduce((d,_)=>d+i.default.length(_),0)}slice(d=0,_=1/0){const T=[],A=new r.default(this.ops);let E=0;for(;E<_&&A.hasNext();){let P;E<d?P=A.next(d-E):(P=A.next(_-E),T.push(P)),E+=i.default.length(P)}return new f(T)}compose(d){const _=new r.default(this.ops),T=new r.default(d.ops),A=[],E=T.peek();if(E!=null&&typeof E.retain=="number"&&E.attributes==null){let L=E.retain;for(;_.peekType()==="insert"&&_.peekLength()<=L;)L-=_.peekLength(),A.push(_.next());E.retain-L>0&&T.next(E.retain-L)}const P=new f(A);for(;_.hasNext()||T.hasNext();)if(T.peekType()==="insert")P.push(T.next());else if(_.peekType()==="delete")P.push(_.next());else{const L=Math.min(_.peekLength(),T.peekLength()),D=_.next(L),h=T.next(L);if(h.retain){const g={};if(typeof D.retain=="number")g.retain=typeof h.retain=="number"?L:h.retain;else if(typeof h.retain=="number")D.retain==null?g.insert=D.insert:g.retain=D.retain;else{const k=D.retain==null?"insert":"retain",[C,F,R]=c(D[k],h.retain),M=f.getHandler(C);g[k]={[C]:M.compose(F,R,k==="retain")}}const y=o.default.compose(D.attributes,h.attributes,typeof D.retain=="number");if(y&&(g.attributes=y),P.push(g),!T.hasNext()&&l(P.ops[P.ops.length-1],g)){const k=new f(_.rest());return P.concat(k).chop()}}else typeof h.delete=="number"&&(typeof D.retain=="number"||typeof D.retain=="object"&&D.retain!==null)&&P.push(h)}return P.chop()}concat(d){const _=new f(this.ops.slice());return d.ops.length>0&&(_.push(d.ops[0]),_.ops=_.ops.concat(d.ops.slice(1))),_}diff(d,_){if(this.ops===d.ops)return new f;const T=[this,d].map(D=>D.map(h=>{if(h.insert!=null)return typeof h.insert=="string"?h.insert:x;const g=D===d?"on":"with";throw new Error("diff() called "+g+" non-document")}).join("")),A=new f,E=e(T[0],T[1],_,!0),P=new r.default(this.ops),L=new r.default(d.ops);return E.forEach(D=>{let h=D[1].length;for(;h>0;){let g=0;switch(D[0]){case e.INSERT:g=Math.min(L.peekLength(),h),A.push(L.next(g));break;case e.DELETE:g=Math.min(h,P.peekLength()),P.next(g),A.delete(g);break;case e.EQUAL:g=Math.min(P.peekLength(),L.peekLength(),h);const y=P.next(g),k=L.next(g);l(y.insert,k.insert)?A.retain(g,o.default.diff(y.attributes,k.attributes)):A.push(k).delete(g);break}h-=g}}),A.chop()}eachLine(d,_=`
`){const T=new r.default(this.ops);let A=new f,E=0;for(;T.hasNext();){if(T.peekType()!=="insert")return;const P=T.peek(),L=i.default.length(P)-T.peekLength(),D=typeof P.insert=="string"?P.insert.indexOf(_,L)-L:-1;if(D<0)A.push(T.next());else if(D>0)A.push(T.next(D));else{if(d(A,T.next(1).attributes||{},E)===!1)return;E+=1,A=new f}}A.length()>0&&d(A,{},E)}invert(d){const _=new f;return this.reduce((T,A)=>{if(A.insert)_.delete(i.default.length(A));else{if(typeof A.retain=="number"&&A.attributes==null)return _.retain(A.retain),T+A.retain;if(A.delete||typeof A.retain=="number"){const E=A.delete||A.retain;return d.slice(T,T+E).forEach(L=>{A.delete?_.push(L):A.retain&&A.attributes&&_.retain(i.default.length(L),o.default.invert(A.attributes,L.attributes))}),T+E}else if(typeof A.retain=="object"&&A.retain!==null){const E=d.slice(T,T+1),P=new r.default(E.ops).next(),[L,D,h]=c(A.retain,P.insert),g=f.getHandler(L);return _.retain({[L]:g.invert(D,h)},o.default.invert(A.attributes,P.attributes)),T+1}}return T},0),_.chop()}transform(d,_=!1){if(_=!!_,typeof d=="number")return this.transformPosition(d,_);const T=d,A=new r.default(this.ops),E=new r.default(T.ops),P=new f;for(;A.hasNext()||E.hasNext();)if(A.peekType()==="insert"&&(_||E.peekType()!=="insert"))P.retain(i.default.length(A.next()));else if(E.peekType()==="insert")P.push(E.next());else{const L=Math.min(A.peekLength(),E.peekLength()),D=A.next(L),h=E.next(L);if(D.delete)continue;if(h.delete)P.push(h);else{const g=D.retain,y=h.retain;let k=typeof y=="object"&&y!==null?y:L;if(typeof g=="object"&&g!==null&&typeof y=="object"&&y!==null){const C=Object.keys(g)[0];if(C===Object.keys(y)[0]){const F=f.getHandler(C);F&&(k={[C]:F.transform(g[C],y[C],_)})}}P.retain(k,o.default.transform(D.attributes,h.attributes,_))}}return P.chop()}transformPosition(d,_=!1){_=!!_;const T=new r.default(this.ops);let A=0;for(;T.hasNext()&&A<=d;){const E=T.peekLength(),P=T.peekType();if(T.next(),P==="delete"){d-=Math.min(E,d-A);continue}else P==="insert"&&(A<d||!_)&&(d+=E);A+=E}return d}}f.Op=i.default,f.OpIterator=r.default,f.AttributeMap=o.default,f.handlers={},a.default=f,n.exports=f,n.exports.default=f})(Nt,Nt.exports);var Se=Fi(Nt.exports);class la extends Rt{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}la.blotName="break";la.tagName="BR";class aa extends Tl{}const Jx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Wl(n){return n.replace(/[&<>"']/g,a=>Jx[a])}class Pt extends _o{static allowedChildren=[Pt,la,Rt,aa];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(a,e){const s=Pt.order.indexOf(a),l=Pt.order.indexOf(e);return s>=0||l>=0?s-l:a===e?0:a<e?-1:1}formatAt(a,e,s,l){if(Pt.compare(this.statics.blotName,s)<0&&this.scroll.query(s,Ie.BLOT)){const o=this.isolate(a,e);l&&o.wrap(s,l)}else super.formatAt(a,e,s,l)}optimize(a){if(super.optimize(a),this.parent instanceof Pt&&Pt.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}const Ko=1;class yt extends js{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=Wi(this)),this.cache.delta}deleteAt(a,e){super.deleteAt(a,e),this.cache={}}formatAt(a,e,s,l){e<=0||(this.scroll.query(s,Ie.BLOCK)?a+e===this.length()&&this.format(s,l):super.formatAt(a,Math.min(e,this.length()-a-1),s,l),this.cache={})}insertAt(a,e,s){if(s!=null){super.insertAt(a,e,s),this.cache={};return}if(e.length===0)return;const l=e.split(`
`),o=l.shift();o.length>0&&(a<this.length()-1||this.children.tail==null?super.insertAt(Math.min(a,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let i=this;l.reduce((r,x)=>(i=i.split(r,!0),i.insertAt(0,x),x.length),a+o.length)}insertBefore(a,e){const{head:s}=this.children;super.insertBefore(a,e),s instanceof la&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Ko),this.cache.length}moveChildren(a,e){super.moveChildren(a,e),this.cache={}}optimize(a){super.optimize(a),this.cache={}}path(a){return super.path(a,!0)}removeChild(a){super.removeChild(a),this.cache={}}split(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e&&(a===0||a>=this.length()-Ko)){const l=this.clone();return a===0?(this.parent.insertBefore(l,this),this):(this.parent.insertBefore(l,this.next),l)}const s=super.split(a,e);return this.cache={},s}}yt.blotName="block";yt.tagName="P";yt.defaultChild=la;yt.allowedChildren=[la,Pt,Rt,aa];class Yt extends Rt{attach(){super.attach(),this.attributes=new ql(this.domNode)}delta(){return new Se().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(a,e){const s=this.scroll.query(a,Ie.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,e)}formatAt(a,e,s,l){this.format(s,l)}insertAt(a,e,s){if(s!=null){super.insertAt(a,e,s);return}const l=e.split(`
`),o=l.pop(),i=l.map(x=>{const c=this.scroll.create(yt.blotName);return c.insertAt(0,x),c}),r=this.split(a);i.forEach(x=>{this.parent.insertBefore(x,r)}),o&&this.parent.insertBefore(this.scroll.create("text",o),r)}}Yt.scope=Ie.BLOCK_BLOT;function Wi(n){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(Dt).reduce((e,s)=>s.length()===0?e:e.insert(s.value(),zt(s,{},a)),new Se).insert(`
`,zt(n))}function zt(n){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(a={...a,...n.formats()},e&&delete a["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?a:zt(n.parent,a,e)}class Jt extends Rt{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(a,e,s){super(a,e),this.selection=s,this.textNode=document.createTextNode(Jt.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(a,e){if(this.savedLength!==0){super.format(a,e);return}let s=this,l=0;for(;s!=null&&s.statics.scope!==Ie.BLOCK_BLOT;)l+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=Jt.CONTENTS.length,s.optimize(),s.formatAt(l,Jt.CONTENTS.length,a,e),this.savedLength=0)}index(a,e){return a===this.textNode?0:super.index(a,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const a=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof aa?this.prev:null,s=e?e.length():0,l=this.next instanceof aa?this.next:null,o=l?l.text:"",{textNode:i}=this,r=i.data.split(Jt.CONTENTS).join("");i.data=Jt.CONTENTS;let x;if(e)x=e,(r||l)&&(e.insertAt(e.length(),r+o),l&&l.remove());else if(l)x=l,l.insertAt(0,r);else{const c=document.createTextNode(r);x=this.scroll.create(c),this.parent.insertBefore(x,this)}if(this.remove(),a){const c=(d,_)=>e&&d===e.domNode?_:d===i?s+_-1:l&&d===l.domNode?s+r.length+_:null,f=c(a.start.node,a.start.offset),p=c(a.end.node,a.end.offset);if(f!==null&&p!==null)return{startNode:x.domNode,startOffset:f,endNode:x.domNode,endOffset:p}}return null}update(a,e){if(a.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(e.range=s)}}optimize(a){super.optimize(a);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=Jt.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}var Hi={exports:{}};(function(n){var a=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function l(x,c,f){this.fn=x,this.context=c,this.once=f||!1}function o(x,c,f,p,d){if(typeof f!="function")throw new TypeError("The listener must be a function");var _=new l(f,p||x,d),T=e?e+c:c;return x._events[T]?x._events[T].fn?x._events[T]=[x._events[T],_]:x._events[T].push(_):(x._events[T]=_,x._eventsCount++),x}function i(x,c){--x._eventsCount===0?x._events=new s:delete x._events[c]}function r(){this._events=new s,this._eventsCount=0}r.prototype.eventNames=function(){var c=[],f,p;if(this._eventsCount===0)return c;for(p in f=this._events)a.call(f,p)&&c.push(e?p.slice(1):p);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},r.prototype.listeners=function(c){var f=e?e+c:c,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var d=0,_=p.length,T=new Array(_);d<_;d++)T[d]=p[d].fn;return T},r.prototype.listenerCount=function(c){var f=e?e+c:c,p=this._events[f];return p?p.fn?1:p.length:0},r.prototype.emit=function(c,f,p,d,_,T){var A=e?e+c:c;if(!this._events[A])return!1;var E=this._events[A],P=arguments.length,L,D;if(E.fn){switch(E.once&&this.removeListener(c,E.fn,void 0,!0),P){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,f),!0;case 3:return E.fn.call(E.context,f,p),!0;case 4:return E.fn.call(E.context,f,p,d),!0;case 5:return E.fn.call(E.context,f,p,d,_),!0;case 6:return E.fn.call(E.context,f,p,d,_,T),!0}for(D=1,L=new Array(P-1);D<P;D++)L[D-1]=arguments[D];E.fn.apply(E.context,L)}else{var h=E.length,g;for(D=0;D<h;D++)switch(E[D].once&&this.removeListener(c,E[D].fn,void 0,!0),P){case 1:E[D].fn.call(E[D].context);break;case 2:E[D].fn.call(E[D].context,f);break;case 3:E[D].fn.call(E[D].context,f,p);break;case 4:E[D].fn.call(E[D].context,f,p,d);break;default:if(!L)for(g=1,L=new Array(P-1);g<P;g++)L[g-1]=arguments[g];E[D].fn.apply(E[D].context,L)}}return!0},r.prototype.on=function(c,f,p){return o(this,c,f,p,!1)},r.prototype.once=function(c,f,p){return o(this,c,f,p,!0)},r.prototype.removeListener=function(c,f,p,d){var _=e?e+c:c;if(!this._events[_])return this;if(!f)return i(this,_),this;var T=this._events[_];if(T.fn)T.fn===f&&(!d||T.once)&&(!p||T.context===p)&&i(this,_);else{for(var A=0,E=[],P=T.length;A<P;A++)(T[A].fn!==f||d&&!T[A].once||p&&T[A].context!==p)&&E.push(T[A]);E.length?this._events[_]=E.length===1?E[0]:E:i(this,_)}return this},r.prototype.removeAllListeners=function(c){var f;return c?(f=e?e+c:c,this._events[f]&&i(this,f)):(this._events=new s,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=e,r.EventEmitter=r,n.exports=r})(Hi);var Xx=Hi.exports,ao=new WeakMap;const so=["error","warn","log","info"];let lo="warn";function Zi(n){if(lo&&so.indexOf(n)<=so.indexOf(lo)){for(var a=arguments.length,e=new Array(a>1?a-1:0),s=1;s<a;s++)e[s-1]=arguments[s];console[n](...e)}}function ya(n){return so.reduce((a,e)=>(a[e]=Zi.bind(console,e,n),a),{})}ya.level=n=>{lo=n};Zi.level=ya.level;const Vn=ya("quill:events"),Qx=["selectionchange","mousedown","mouseup","click"];Qx.forEach(n=>{document.addEventListener(n,function(){for(var a=arguments.length,e=new Array(a),s=0;s<a;s++)e[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(l=>{const o=ao.get(l);o&&o.emitter&&o.emitter.handleDOM(...e)})})});class Te extends Xx{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Vn.error)}emit(){for(var a=arguments.length,e=new Array(a),s=0;s<a;s++)e[s]=arguments[s];return Vn.log.call(Vn,...e),super.emit(...e)}handleDOM(a){for(var e=arguments.length,s=new Array(e>1?e-1:0),l=1;l<e;l++)s[l-1]=arguments[l];(this.domListeners[a.type]||[]).forEach(o=>{let{node:i,handler:r}=o;(a.target===i||i.contains(a.target))&&r(a,...s)})}listenDOM(a,e,s){this.domListeners[a]||(this.domListeners[a]=[]),this.domListeners[a].push({node:e,handler:s})}}const Rn=ya("quill:selection");class Ya{constructor(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=a,this.length=e}}class Kx{constructor(a,e){this.emitter=e,this.scroll=a,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Ya(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Te.sources.USER),1)}),this.emitter.on(Te.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(Te.events.SCROLL_UPDATE,(l,o)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const i=o.some(r=>r.type==="characterData"||r.type==="childList"||r.type==="attributes"&&r.target===this.root);this.update(i?Te.sources.SILENT:l)}catch{}})}),this.emitter.on(Te.events.SCROLL_OPTIMIZE,(s,l)=>{if(l.range){const{startNode:o,startOffset:i,endNode:r,endOffset:x}=l.range;this.setNativeRange(o,i,r,x),this.update(Te.sources.SILENT)}}),this.update(Te.sources.SILENT)}handleComposition(){this.emitter.on(Te.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Te.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const a=this.cursor.restore();if(!a)return;setTimeout(()=>{this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Te.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(a,e){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(a,Ie.BLOCK))){if(s.start.node!==this.cursor.textNode){const l=this.scroll.find(s.start.node,!1);if(l==null)return;if(l instanceof Dt){const o=l.split(s.start.offset);l.parent.insertBefore(this.cursor,o)}else l.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(a,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();a=Math.min(a,s-1),e=Math.min(a+e,s-1)-a;let l,[o,i]=this.scroll.leaf(a);if(o==null)return null;if(e>0&&i===o.length()){const[f]=this.scroll.leaf(a+1);if(f){const[p]=this.scroll.line(a),[d]=this.scroll.line(a+1);p===d&&(o=f,i=0)}}[l,i]=o.position(i,!0);const r=document.createRange();if(e>0)return r.setStart(l,i),[o,i]=this.scroll.leaf(a+e),o==null?null:([l,i]=o.position(i,!0),r.setEnd(l,i),r.getBoundingClientRect());let x="left",c;if(l instanceof Text){if(!l.data.length)return null;i<l.data.length?(r.setStart(l,i),r.setEnd(l,i+1)):(r.setStart(l,i-1),r.setEnd(l,i),x="right"),c=r.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;c=o.domNode.getBoundingClientRect(),i>0&&(x="right")}return{bottom:c.top+c.height,height:c.height,left:c[x],right:c[x],top:c.top,width:0}}getNativeRange(){const a=document.getSelection();if(a==null||a.rangeCount<=0)return null;const e=a.getRangeAt(0);if(e==null)return null;const s=this.normalizeNative(e);return Rn.info("getNativeRange",s),s}getRange(){const a=this.scroll.domNode;if("isConnected"in a&&!a.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&qn(this.root,document.activeElement)}normalizedToRange(a){const e=[[a.start.node,a.start.offset]];a.native.collapsed||e.push([a.end.node,a.end.offset]);const s=e.map(i=>{const[r,x]=i,c=this.scroll.find(r,!0),f=c.offset(this.scroll);return x===0?f:c instanceof Dt?f+c.index(r,x):f+c.length()}),l=Math.min(Math.max(...s),this.scroll.length()-1),o=Math.min(l,...s);return new Ya(o,l-o)}normalizeNative(a){if(!qn(this.root,a.startContainer)||!a.collapsed&&!qn(this.root,a.endContainer))return null;const e={start:{node:a.startContainer,offset:a.startOffset},end:{node:a.endContainer,offset:a.endOffset},native:a};return[e.start,e.end].forEach(s=>{let{node:l,offset:o}=s;for(;!(l instanceof Text)&&l.childNodes.length>0;)if(l.childNodes.length>o)l=l.childNodes[o],o=0;else if(l.childNodes.length===o)l=l.lastChild,l instanceof Text?o=l.data.length:l.childNodes.length>0?o=l.childNodes.length:o=l.childNodes.length+1;else break;s.node=l,s.offset=o}),e}rangeToNative(a){const e=this.scroll.length(),s=(l,o)=>{l=Math.min(e-1,l);const[i,r]=this.scroll.leaf(l);return i?i.position(r,o):[null,-1]};return[...s(a.index,!1),...s(a.index+a.length,!0)]}setNativeRange(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Rn.info("setNativeRange",a,e,s,l),a!=null&&(this.root.parentNode==null||a.parentNode==null||s.parentNode==null))return;const i=document.getSelection();if(i!=null)if(a!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:r}=this.getNativeRange()||{};if(r==null||o||a!==r.startContainer||e!==r.startOffset||s!==r.endContainer||l!==r.endOffset){a instanceof Element&&a.tagName==="BR"&&(e=Array.from(a.parentNode.childNodes).indexOf(a),a=a.parentNode),s instanceof Element&&s.tagName==="BR"&&(l=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const x=document.createRange();x.setStart(a,e),x.setEnd(s,l),i.removeAllRanges(),i.addRange(x)}}else i.removeAllRanges(),this.root.blur()}setRange(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;if(typeof e=="string"&&(s=e,e=!1),Rn.info("setRange",a),a!=null){const l=this.rangeToNative(a);this.setNativeRange(...l,e)}else this.setNativeRange(null);this.update(s)}update(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER;const e=this.lastRange,[s,l]=this.getRange();if(this.lastRange=s,this.lastNative=l,this.lastRange!=null&&(this.savedRange=this.lastRange),!mo(e,this.lastRange)){if(!this.composing&&l!=null&&l.native.collapsed&&l.start.node!==this.cursor.textNode){const i=this.cursor.restore();i&&this.setNativeRange(i.startNode,i.startOffset,i.endNode,i.endOffset)}const o=[Te.events.SELECTION_CHANGE,ms(this.lastRange),ms(e),a];this.emitter.emit(Te.events.EDITOR_CHANGE,...o),a!==Te.sources.SILENT&&this.emitter.emit(...o)}}}function qn(n,a){try{a.parentNode}catch{return!1}return n.contains(a)}const eu=/^[ -~]*$/;class tu{constructor(a){this.scroll=a,this.delta=this.getDelta()}applyDelta(a){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const s=ei(a),l=new Se;return su(s.ops.slice()).reduce((i,r)=>{const x=Nt.exports.Op.length(r);let c=r.attributes||{},f=!1,p=!1;if(r.insert!=null){if(l.retain(x),typeof r.insert=="string"){const T=r.insert;p=!T.endsWith(`
`)&&(e<=i||!!this.scroll.descendant(Yt,i)[0]),this.scroll.insertAt(i,T);const[A,E]=this.scroll.line(i);let P=wa({},zt(A));if(A instanceof yt){const[L]=A.descendant(Dt,E);L&&(P=wa(P,zt(L)))}c=Nt.exports.AttributeMap.diff(P,c)||{}}else if(typeof r.insert=="object"){const T=Object.keys(r.insert)[0];if(T==null)return i;const A=this.scroll.query(T,Ie.INLINE)!=null;if(A)(e<=i||!!this.scroll.descendant(Yt,i)[0])&&(p=!0);else if(i>0){const[E,P]=this.scroll.descendant(Dt,i-1);E instanceof aa?E.value()[P]!==`
`&&(f=!0):E instanceof Rt&&E.statics.scope===Ie.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(i,T,r.insert[T]),A){const[E]=this.scroll.descendant(Dt,i);if(E){const P=wa({},zt(E));c=Nt.exports.AttributeMap.diff(P,c)||{}}}}e+=x}else if(l.push(r),r.retain!==null&&typeof r.retain=="object"){const T=Object.keys(r.retain)[0];if(T==null)return i;this.scroll.updateEmbedAt(i,T,r.retain[T])}Object.keys(c).forEach(T=>{this.scroll.formatAt(i,x,T,c[T])});const d=f?1:0,_=p?1:0;return e+=d+_,l.retain(d),l.delete(_),i+x+d+_},0),l.reduce((i,r)=>typeof r.delete=="number"?(this.scroll.deleteAt(i,r.delete),i):i+Nt.exports.Op.length(r),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(a,e){return this.scroll.deleteAt(a,e),this.update(new Se().retain(a).delete(e))}formatLine(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(o=>{this.scroll.lines(a,Math.max(e,1)).forEach(i=>{i.format(o,s[o])})}),this.scroll.optimize();const l=new Se().retain(a).retain(e,ms(s));return this.update(l)}formatText(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(o=>{this.scroll.formatAt(a,e,o,s[o])});const l=new Se().retain(a).retain(e,ms(s));return this.update(l)}getContents(a,e){return this.delta.slice(a,a+e)}getDelta(){return this.scroll.lines().reduce((a,e)=>a.concat(e.delta()),new Se)}getFormat(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],l=[];e===0?this.scroll.path(a).forEach(r=>{const[x]=r;x instanceof yt?s.push(x):x instanceof Dt&&l.push(x)}):(s=this.scroll.lines(a,e),l=this.scroll.descendants(Dt,a,e));const[o,i]=[s,l].map(r=>{const x=r.shift();if(x==null)return{};let c=zt(x);for(;Object.keys(c).length>0;){const f=r.shift();if(f==null)return c;c=au(zt(f),c)}return c});return{...o,...i}}getHTML(a,e){const[s,l]=this.scroll.line(a);if(s){const o=s.length();return s.length()>=l+e&&!(l===0&&e===o)?Ws(s,l,e,!0):Ws(this.scroll,a,e,!0)}return""}getText(a,e){return this.getContents(a,e).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(a,e){const s=ei(e),l=new Se().retain(a).concat(s);return this.scroll.insertContents(a,s),this.update(l)}insertEmbed(a,e,s){return this.scroll.insertAt(a,e,s),this.update(new Se().retain(a).insert({[e]:s}))}insertText(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(a,e),Object.keys(s).forEach(l=>{this.scroll.formatAt(a,e.length,l,s[l])}),this.update(new Se().retain(a).insert(e,ms(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const a=this.scroll.children.head;if(a?.statics.blotName!==yt.blotName)return!1;const e=a;return e.children.length>1?!1:e.children.head instanceof la}removeFormat(a,e){const s=this.getText(a,e),[l,o]=this.scroll.line(a+e);let i=0,r=new Se;l!=null&&(i=l.length()-o,r=l.delta().slice(o,o+i-1).insert(`
`));const c=this.getContents(a,e+i).diff(new Se().insert(s).concat(r)),f=new Se().retain(a).concat(c);return this.applyDelta(f)}update(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const l=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(eu)&&this.scroll.find(e[0].target)){const o=this.scroll.find(e[0].target),i=zt(o),r=o.offset(this.scroll),x=e[0].oldValue.replace(Jt.CONTENTS,""),c=new Se().insert(x),f=new Se().insert(o.value()),p=s&&{oldRange:ti(s.oldRange,-r),newRange:ti(s.newRange,-r)};a=new Se().retain(r).concat(c.diff(f,p)).reduce((_,T)=>T.insert?_.insert(T.insert,i):_.push(T),new Se),this.delta=l.compose(a)}else this.delta=this.getDelta(),(!a||!mo(l.compose(a),this.delta))&&(a=l.diff(this.delta,s));return a}}function us(n,a,e){if(n.length===0){const[_]=Un(e.pop());return a<=0?`</li></${_}>`:`</li></${_}>${us([],a-1,e)}`}const[{child:s,offset:l,length:o,indent:i,type:r},...x]=n,[c,f]=Un(r);if(i>a)return e.push(r),i===a+1?`<${c}><li${f}>${Ws(s,l,o)}${us(x,i,e)}`:`<${c}><li>${us(n,a+1,e)}`;const p=e[e.length-1];if(i===a&&r===p)return`</li><li${f}>${Ws(s,l,o)}${us(x,i,e)}`;const[d]=Un(e.pop());return`</li></${d}>${us(n,a-1,e)}`}function Ws(n,a,e){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(a,e);if(n instanceof aa)return Wl(n.value().slice(a,a+e)).replaceAll(" ","&nbsp;");if(n instanceof ta){if(n.statics.blotName==="list-container"){const c=[];return n.children.forEachAt(a,e,(f,p,d)=>{const _="formats"in f&&typeof f.formats=="function"?f.formats():{};c.push({child:f,offset:p,length:d,indent:_.indent||0,type:_.list})}),us(c,-1,[])}const l=[];if(n.children.forEachAt(a,e,(c,f,p)=>{l.push(Ws(c,f,p))}),s||n.statics.blotName==="list")return l.join("");const{outerHTML:o,innerHTML:i}=n.domNode,[r,x]=o.split(`>${i}<`);return r==="<table"?`<table style="border: 1px solid #000;">${l.join("")}<${x}`:`${r}>${l.join("")}<${x}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function au(n,a){return Object.keys(a).reduce((e,s)=>{if(n[s]==null)return e;const l=a[s];return l===n[s]?e[s]=l:Array.isArray(l)?l.indexOf(n[s])<0?e[s]=l.concat([n[s]]):e[s]=l:e[s]=[l,n[s]],e},{})}function Un(n){const a=n==="ordered"?"ol":"ul";switch(n){case"checked":return[a,' data-list="checked"'];case"unchecked":return[a,' data-list="unchecked"'];default:return[a,""]}}function ei(n){return n.reduce((a,e)=>{if(typeof e.insert=="string"){const s=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return a.insert(s,e.attributes)}return a.push(e)},new Se)}function ti(n,a){let{index:e,length:s}=n;return new Ya(e+a,s)}function su(n){const a=[];return n.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((l,o)=>{o&&a.push({insert:`
`,attributes:e.attributes}),l&&a.push({insert:l,attributes:e.attributes})}):a.push(e)}),a}class xa{static DEFAULTS={};constructor(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=a,this.options=e}}const hl="\uFEFF";class ko extends Rt{constructor(a,e){super(a,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(hl),this.rightGuard=document.createTextNode(hl),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(a,e){return a===this.leftGuard?0:a===this.rightGuard?1:super.index(a,e)}restore(a){let e=null,s;const l=a.data.split(hl).join("");if(a===this.leftGuard)if(this.prev instanceof aa){const o=this.prev.length();this.prev.insertAt(o,l),e={startNode:this.prev.domNode,startOffset:o+l.length}}else s=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(s),this),e={startNode:s,startOffset:l.length};else a===this.rightGuard&&(this.next instanceof aa?(this.next.insertAt(0,l),e={startNode:this.next.domNode,startOffset:l.length}):(s=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(s),this.next),e={startNode:s,startOffset:l.length}));return a.data=hl,e}update(a,e){a.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const l=this.restore(s.target);l&&(e.range=l)}})}}class lu{isComposing=!1;constructor(a,e){this.scroll=a,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",a=>{this.isComposing||this.handleCompositionStart(a)}),this.scroll.domNode.addEventListener("compositionend",a=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(a)})})}handleCompositionStart(a){const e=a.target instanceof Node?this.scroll.find(a.target,!0):null;e&&!(e instanceof ko)&&(this.emitter.emit(Te.events.COMPOSITION_BEFORE_START,a),this.scroll.batchStart(),this.emitter.emit(Te.events.COMPOSITION_START,a),this.isComposing=!0)}handleCompositionEnd(a){this.emitter.emit(Te.events.COMPOSITION_BEFORE_END,a),this.scroll.batchEnd(),this.emitter.emit(Te.events.COMPOSITION_END,a),this.isComposing=!1}}class Bs{static DEFAULTS={modules:{}};static themes={default:Bs};modules={};constructor(a,e){this.quill=a,this.options=e}init(){Object.keys(this.options.modules).forEach(a=>{this.modules[a]==null&&this.addModule(a)})}addModule(a){const e=this.quill.constructor.import(`modules/${a}`);return this.modules[a]=new e(this.quill,this.options.modules[a]||{}),this.modules[a]}}const nu=n=>n.parentElement||n.getRootNode().host||null,ou=n=>{const a=n.getBoundingClientRect(),e="offsetWidth"in n&&Math.abs(a.width)/n.offsetWidth||1,s="offsetHeight"in n&&Math.abs(a.height)/n.offsetHeight||1;return{top:a.top,right:a.left+n.clientWidth*e,bottom:a.top+n.clientHeight*s,left:a.left}},vl=n=>{const a=parseInt(n,10);return Number.isNaN(a)?0:a},ai=(n,a,e,s,l,o)=>n<e&&a>s?0:n<e?-(e-n+l):a>s?a-n>s-e?n+l-e:a-s+o:0,iu=(n,a)=>{const e=n.ownerDocument;let s=a,l=n;for(;l;){const o=l===e.body,i=o?{top:0,right:window.visualViewport?.width??e.documentElement.clientWidth,bottom:window.visualViewport?.height??e.documentElement.clientHeight,left:0}:ou(l),r=getComputedStyle(l),x=ai(s.left,s.right,i.left,i.right,vl(r.scrollPaddingLeft),vl(r.scrollPaddingRight)),c=ai(s.top,s.bottom,i.top,i.bottom,vl(r.scrollPaddingTop),vl(r.scrollPaddingBottom));if(x||c)if(o)e.defaultView?.scrollBy(x,c);else{const{scrollLeft:f,scrollTop:p}=l;c&&(l.scrollTop+=c),x&&(l.scrollLeft+=x);const d=l.scrollLeft-f,_=l.scrollTop-p;s={left:s.left-d,top:s.top-_,right:s.right-d,bottom:s.bottom-_}}l=o||r.position==="fixed"?null:nu(l)}},ru=100,cu=["block","break","cursor","inline","scroll","text"],xu=(n,a,e)=>{const s=new Es;return cu.forEach(l=>{const o=a.query(l);o&&s.register(o)}),n.forEach(l=>{let o=a.query(l);o||e.error(`Cannot register "${l}" specified in "formats" config. Are you sure it was registered?`);let i=0;for(;o;)if(s.register(o),o="blotName"in o?o.requiredContainer??null:null,i+=1,i>ru){e.error(`Cycle detected in registering blot requiredContainer: "${l}"`);break}}),s},fs=ya("quill"),El=new Es;ta.uiClass="ql-ui";class ge{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:El,theme:"default"};static events=Te.events;static sources=Te.sources;static version="2.0.3";static imports={delta:Se,parchment:Nx,"core/module":xa,"core/theme":Bs};static debug(a){a===!0&&(a="log"),ya.level(a)}static find(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ao.get(a)||El.find(a,e)}static import(a){return this.imports[a]==null&&fs.error(`Cannot import ${a}. Are you sure it was registered?`),this.imports[a]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const a=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in a?a.attrName:a.blotName;typeof s=="string"?this.register(`formats/${s}`,a,e):Object.keys(a).forEach(l=>{this.register(l,a[l],e)})}else{const a=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[a]!=null&&!s&&fs.warn(`Overwriting ${a} with`,e),this.imports[a]=e,(a.startsWith("blots/")||a.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&El.register(e),typeof e.register=="function"&&e.register(El)}}constructor(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=uu(a,e),this.container=this.options.container,this.container==null){fs.error("Invalid Quill container",a);return}this.options.debug&&ge.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",ao.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Te;const l=Co.blotName,o=this.options.registry.query(l);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${l}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new tu(this.scroll),this.selection=new Kx(this.scroll,this.emitter),this.composition=new lu(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Te.events.EDITOR_CHANGE,i=>{i===Te.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Te.events.SCROLL_UPDATE,(i,r)=>{const x=this.selection.lastRange,[c]=this.selection.getRange(),f=x&&c?{oldRange:x,newRange:c}:void 0;Gt.call(this,()=>this.editor.update(null,r,f),i)}),this.emitter.on(Te.events.SCROLL_EMBED_UPDATE,(i,r)=>{const x=this.selection.lastRange,[c]=this.selection.getRange(),f=x&&c?{oldRange:x,newRange:c}:void 0;Gt.call(this,()=>{const p=new Se().retain(i.offset(this)).retain({[i.statics.blotName]:r});return this.editor.update(p,[],f)},ge.sources.USER)}),s){const i=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(i)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof a=="string"){const s=a;a=document.createElement("div"),a.classList.add(s)}return this.container.insertBefore(a,e),a}blur(){this.selection.setRange(null)}deleteText(a,e,s){return[a,e,,s]=fa(a,e,s),Gt.call(this,()=>this.editor.deleteText(a,e),s,a,-1*e)}disable(){this.enable(!1)}editReadOnly(a){this.allowReadOnlyEdits=!0;const e=a();return this.allowReadOnlyEdits=!1,e}enable(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(a),this.container.classList.toggle("ql-disabled",!a)}focus(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),a.preventScroll||this.scrollSelectionIntoView()}format(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;return Gt.call(this,()=>{const l=this.getSelection(!0);let o=new Se;if(l==null)return o;if(this.scroll.query(a,Ie.BLOCK))o=this.editor.formatLine(l.index,l.length,{[a]:e});else{if(l.length===0)return this.selection.format(a,e),o;o=this.editor.formatText(l.index,l.length,{[a]:e})}return this.setSelection(l,Te.sources.SILENT),o},s)}formatLine(a,e,s,l,o){let i;return[a,e,i,o]=fa(a,e,s,l,o),Gt.call(this,()=>this.editor.formatLine(a,e,i),o,a,0)}formatText(a,e,s,l,o){let i;return[a,e,i,o]=fa(a,e,s,l,o),Gt.call(this,()=>this.editor.formatText(a,e,i),o,a,0)}getBounds(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof a=="number"?s=this.selection.getBounds(a,e):s=this.selection.getBounds(a.index,a.length),!s)return null;const l=this.container.getBoundingClientRect();return{bottom:s.bottom-l.top,height:s.height,left:s.left-l.left,right:s.right-l.left,top:s.top-l.top,width:s.width}}getContents(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-a;return[a,e]=fa(a,e),this.editor.getContents(a,e)}getFormat(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof a=="number"?this.editor.getFormat(a,e):this.editor.getFormat(a.index,a.length)}getIndex(a){return a.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(a){return this.scroll.leaf(a)}getLine(a){return this.scroll.line(a)}getLines(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof a!="number"?this.scroll.lines(a.index,a.length):this.scroll.lines(a,e)}getModule(a){return this.theme.modules[a]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof a=="number"&&(e=e??this.getLength()-a),[a,e]=fa(a,e),this.editor.getHTML(a,e)}getText(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof a=="number"&&(e=e??this.getLength()-a),[a,e]=fa(a,e),this.editor.getText(a,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(a,e,s){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ge.sources.API;return Gt.call(this,()=>this.editor.insertEmbed(a,e,s),l,a)}insertText(a,e,s,l,o){let i;return[a,,i,o]=fa(a,0,s,l,o),Gt.call(this,()=>this.editor.insertText(a,e,i),o,a,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(a,e,s){return[a,e,,s]=fa(a,e,s),Gt.call(this,()=>this.editor.removeFormat(a,e),s,a)}scrollRectIntoView(a){iu(this.root,a)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const a=this.selection.lastRange,e=a&&this.selection.getBounds(a.index,a.length);e&&this.scrollRectIntoView(e)}setContents(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return Gt.call(this,()=>{a=new Se(a);const s=this.getLength(),l=this.editor.deleteText(0,s),o=this.editor.insertContents(0,a),i=this.editor.deleteText(this.getLength()-1,1);return l.compose(o).compose(i)},e)}setSelection(a,e,s){a==null?this.selection.setRange(null,e||ge.sources.API):([a,e,,s]=fa(a,e,s),this.selection.setRange(new Ya(Math.max(0,a),e),s),s!==Te.sources.SILENT&&this.scrollSelectionIntoView())}setText(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;const s=new Se().insert(a);return this.setContents(s,e)}update(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER;const e=this.scroll.update(a);return this.selection.update(a),e}updateContents(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return Gt.call(this,()=>(a=new Se(a),this.editor.applyDelta(a)),e,!0)}}function si(n){return typeof n=="string"?document.querySelector(n):n}function zn(n){return Object.entries(n??{}).reduce((a,e)=>{let[s,l]=e;return{...a,[s]:l===!0?{}:l}},{})}function li(n){return Object.fromEntries(Object.entries(n).filter(a=>a[1]!==void 0))}function uu(n,a){const e=si(n);if(!e)throw new Error("Invalid Quill container");const l=!a.theme||a.theme===ge.DEFAULTS.theme?Bs:ge.import(`themes/${a.theme}`);if(!l)throw new Error(`Invalid theme ${a.theme}. Did you register it?`);const{modules:o,...i}=ge.DEFAULTS,{modules:r,...x}=l.DEFAULTS;let c=zn(a.modules);c!=null&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});const f=wa({},zn(o),zn(r),c),p={...i,...li(x),...li(a)};let d=a.registry;return d?a.formats&&fs.warn('Ignoring "formats" option because "registry" is specified'):d=a.formats?xu(a.formats,p.registry,fs):p.registry,{...p,registry:d,container:e,theme:l,modules:Object.entries(f).reduce((_,T)=>{let[A,E]=T;if(!E)return _;const P=ge.import(`modules/${A}`);return P==null?(fs.error(`Cannot load ${A} module. Are you sure you registered it?`),_):{..._,[A]:wa({},P.DEFAULTS||{},E)}},{}),bounds:si(p.bounds)}}function Gt(n,a,e,s){if(!this.isEnabled()&&a===Te.sources.USER&&!this.allowReadOnlyEdits)return new Se;let l=e==null?null:this.getSelection();const o=this.editor.delta,i=n();if(l!=null&&(e===!0&&(e=l.index),s==null?l=ni(l,i,a):s!==0&&(l=ni(l,e,s,a)),this.setSelection(l,Te.sources.SILENT)),i.length()>0){const r=[Te.events.TEXT_CHANGE,i,o,a];this.emitter.emit(Te.events.EDITOR_CHANGE,...r),a!==Te.sources.SILENT&&this.emitter.emit(...r)}return i}function fa(n,a,e,s,l){let o={};return typeof n.index=="number"&&typeof n.length=="number"?typeof a!="number"?(l=s,s=e,e=a,a=n.length,n=n.index):(a=n.length,n=n.index):typeof a!="number"&&(l=s,s=e,e=a,a=0),typeof e=="object"?(o=e,l=s):typeof e=="string"&&(s!=null?o[e]=s:l=e),l=l||Te.sources.API,[n,a,o,l]}function ni(n,a,e,s){const l=typeof e=="number"?e:0;if(n==null)return null;let o,i;return a&&typeof a.transformPosition=="function"?[o,i]=[n.index,n.index+n.length].map(r=>a.transformPosition(r,s!==Te.sources.USER)):[o,i]=[n.index,n.index+n.length].map(r=>r<a||r===a&&s===Te.sources.USER?r:l>=0?r+l:Math.max(a,r+l)),new Ya(o,i-o)}class Ga extends Ul{}function oi(n){return n instanceof yt||n instanceof Yt}function ii(n){return typeof n.updateContent=="function"}class du extends Co{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=yt;static allowedChildren=[yt,Yt,Ga];constructor(a,e,s){let{emitter:l}=s;super(a,e),this.emitter=l,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const a=this.batch;this.batch=!1,this.update(a)}emitMount(a){this.emitter.emit(Te.events.SCROLL_BLOT_MOUNT,a)}emitUnmount(a){this.emitter.emit(Te.events.SCROLL_BLOT_UNMOUNT,a)}emitEmbedUpdate(a,e){this.emitter.emit(Te.events.SCROLL_EMBED_UPDATE,a,e)}deleteAt(a,e){const[s,l]=this.line(a),[o]=this.line(a+e);if(super.deleteAt(a,e),o!=null&&s!==o&&l>0){if(s instanceof Yt||o instanceof Yt){this.optimize();return}const i=o.children.head instanceof la?null:o.children.head;s.moveChildren(o,i),s.remove()}this.optimize()}enable(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",a?"true":"false")}formatAt(a,e,s,l){super.formatAt(a,e,s,l),this.optimize()}insertAt(a,e,s){if(a>=this.length())if(s==null||this.scroll.query(e,Ie.BLOCK)==null){const l=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(l),s==null&&e.endsWith(`
`)?l.insertAt(0,e.slice(0,-1),s):l.insertAt(0,e,s)}else{const l=this.scroll.create(e,s);this.appendChild(l)}else super.insertAt(a,e,s);this.optimize()}insertBefore(a,e){if(a.statics.scope===Ie.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(a),super.insertBefore(s,e)}else super.insertBefore(a,e)}insertContents(a,e){const s=this.deltaToRenderBlocks(e.concat(new Se().insert(`
`))),l=s.pop();if(l==null)return;this.batchStart();const o=s.shift();if(o){const x=o.type==="block"&&(o.delta.length()===0||!this.descendant(Yt,a)[0]&&a<this.length()),c=o.type==="block"?o.delta:new Se().insert({[o.key]:o.value});jn(this,a,c);const f=o.type==="block"?1:0,p=a+c.length()+f;x&&this.insertAt(p-1,`
`);const d=zt(this.line(a)[0]),_=Nt.exports.AttributeMap.diff(d,o.attributes)||{};Object.keys(_).forEach(T=>{this.formatAt(p-1,1,T,_[T])}),a=p}let[i,r]=this.children.find(a);if(s.length&&(i&&(i=i.split(r),r=0),s.forEach(x=>{if(x.type==="block"){const c=this.createBlock(x.attributes,i||void 0);jn(c,0,x.delta)}else{const c=this.create(x.key,x.value);this.insertBefore(c,i||void 0),Object.keys(x.attributes).forEach(f=>{c.format(f,x.attributes[f])})}})),l.type==="block"&&l.delta.length()){const x=i?i.offset(i.scroll)+r:this.length();jn(this,x,l.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(a){const e=this.path(a).pop();if(!e)return[null,-1];const[s,l]=e;return s instanceof Dt?[s,l]:[null,-1]}line(a){return a===this.length()?this.line(a-1):this.descendant(oi,a)}lines(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(l,o,i)=>{let r=[],x=i;return l.children.forEachAt(o,i,(c,f,p)=>{oi(c)?r.push(c):c instanceof Ul&&(r=r.concat(s(c,f,x))),x-=p}),r};return s(this,a,e)}optimize(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(a,e),a.length>0&&this.emitter.emit(Te.events.SCROLL_OPTIMIZE,a,e))}path(a){return super.path(a).slice(1)}remove(){}update(a){if(this.batch){Array.isArray(a)&&(this.batch=this.batch.concat(a));return}let e=Te.sources.USER;typeof a=="string"&&(e=a),Array.isArray(a)||(a=this.observer.takeRecords()),a=a.filter(s=>{let{target:l}=s;const o=this.find(l,!0);return o&&!ii(o)}),a.length>0&&this.emitter.emit(Te.events.SCROLL_BEFORE_UPDATE,e,a),super.update(a.concat([])),a.length>0&&this.emitter.emit(Te.events.SCROLL_UPDATE,e,a)}updateEmbedAt(a,e,s){const[l]=this.descendant(o=>o instanceof Yt,a);l&&l.statics.blotName===e&&ii(l)&&l.updateContent(s)}handleDragStart(a){a.preventDefault()}deltaToRenderBlocks(a){const e=[];let s=new Se;return a.forEach(l=>{const o=l?.insert;if(!!o)if(typeof o=="string"){const i=o.split(`
`);i.slice(0,-1).forEach(x=>{s.insert(x,l.attributes),e.push({type:"block",delta:s,attributes:l.attributes??{}}),s=new Se});const r=i[i.length-1];r&&s.insert(r,l.attributes)}else{const i=Object.keys(o)[0];if(!i)return;this.query(i,Ie.INLINE)?s.push(l):(s.length()&&e.push({type:"block",delta:s,attributes:{}}),s=new Se,e.push({type:"blockEmbed",key:i,value:o[i],attributes:l.attributes??{}}))}}),s.length()&&e.push({type:"block",delta:s,attributes:{}}),e}createBlock(a,e){let s;const l={};Object.entries(a).forEach(r=>{let[x,c]=r;this.query(x,Ie.BLOCK&Ie.BLOT)!=null?s=x:l[x]=c});const o=this.create(s||this.statics.defaultChild.blotName,s?a[s]:void 0);this.insertBefore(o,e||void 0);const i=o.length();return Object.entries(l).forEach(r=>{let[x,c]=r;o.formatAt(0,i,x,c)}),o}}function jn(n,a,e){e.reduce((s,l)=>{const o=Nt.exports.Op.length(l);let i=l.attributes||{};if(l.insert!=null){if(typeof l.insert=="string"){const r=l.insert;n.insertAt(s,r);const[x]=n.descendant(Dt,s),c=zt(x);i=Nt.exports.AttributeMap.diff(c,i)||{}}else if(typeof l.insert=="object"){const r=Object.keys(l.insert)[0];if(r==null)return s;if(n.insertAt(s,r,l.insert[r]),n.scroll.query(r,Ie.INLINE)!=null){const[c]=n.descendant(Dt,s),f=zt(c);i=Nt.exports.AttributeMap.diff(f,i)||{}}}}return Object.keys(i).forEach(r=>{n.formatAt(s,o,r,i[r])}),s+o},a)}const Do={scope:Ie.BLOCK,whitelist:["right","center","justify"]},mu=new ca("align","align",Do),Gi=new sa("align","ql-align",Do),Ji=new Ia("align","text-align",Do);class Xi extends Ia{value(a){let e=super.value(a);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(l=>`00${parseInt(l,10).toString(16)}`.slice(-2)).join("")}`):e}}const pu=new sa("color","ql-color",{scope:Ie.INLINE}),Fo=new Xi("color","color",{scope:Ie.INLINE}),fu=new sa("background","ql-bg",{scope:Ie.INLINE}),wo=new Xi("background","background-color",{scope:Ie.INLINE});class Ja extends Ga{static create(a){const e=super.create(a);return e.setAttribute("spellcheck","false"),e}code(a,e){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(a,a+e)}html(a,e){return`<pre>
${Wl(this.code(a,e))}
</pre>`}}class Lt extends yt{static TAB="  ";static register(){ge.register(Ja)}}class Po extends Pt{}Po.blotName="code";Po.tagName="CODE";Lt.blotName="code-block";Lt.className="ql-code-block";Lt.tagName="DIV";Ja.blotName="code-block-container";Ja.className="ql-code-block-container";Ja.tagName="DIV";Ja.allowedChildren=[Lt];Lt.allowedChildren=[aa,la,Jt];Lt.requiredContainer=Ja;const To={scope:Ie.BLOCK,whitelist:["rtl"]},Qi=new ca("direction","dir",To),Ki=new sa("direction","ql-direction",To),er=new Ia("direction","direction",To),tr={scope:Ie.INLINE,whitelist:["serif","monospace"]},ar=new sa("font","ql-font",tr);class gu extends Ia{value(a){return super.value(a).replace(/["']/g,"")}}const sr=new gu("font","font-family",tr),lr=new sa("size","ql-size",{scope:Ie.INLINE,whitelist:["small","large","huge"]}),nr=new Ia("size","font-size",{scope:Ie.INLINE,whitelist:["10px","18px","32px"]}),hu=ya("quill:keyboard"),vu=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Hl extends xa{static match(a,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!e[s]!==a[s]&&e[s]!==null)?!1:e.key===a.key||e.key===a.which}constructor(a,e){super(a,e),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const l=_u(a);if(l==null){hu.warn("Attempted to add invalid keyboard binding",l);return}typeof e=="function"&&(e={handler:e}),typeof s=="function"&&(s={handler:s}),(Array.isArray(l.key)?l.key:[l.key]).forEach(i=>{const r={...l,key:i,...e,...s};this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)})}listen(){this.quill.root.addEventListener("keydown",a=>{if(a.defaultPrevented||a.isComposing||a.keyCode===229&&(a.key==="Enter"||a.key==="Backspace"))return;const l=(this.bindings[a.key]||[]).concat(this.bindings[a.which]||[]).filter(P=>Hl.match(a,P));if(l.length===0)return;const o=ge.find(a.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const i=this.quill.getSelection();if(i==null||!this.quill.hasFocus())return;const[r,x]=this.quill.getLine(i.index),[c,f]=this.quill.getLeaf(i.index),[p,d]=i.length===0?[c,f]:this.quill.getLeaf(i.index+i.length),_=c instanceof Tl?c.value().slice(0,f):"",T=p instanceof Tl?p.value().slice(d):"",A={collapsed:i.length===0,empty:i.length===0&&r.length()<=1,format:this.quill.getFormat(i),line:r,offset:x,prefix:_,suffix:T,event:a};l.some(P=>{if(P.collapsed!=null&&P.collapsed!==A.collapsed||P.empty!=null&&P.empty!==A.empty||P.offset!=null&&P.offset!==A.offset)return!1;if(Array.isArray(P.format)){if(P.format.every(L=>A.format[L]==null))return!1}else if(typeof P.format=="object"&&!Object.keys(P.format).every(L=>P.format[L]===!0?A.format[L]!=null:P.format[L]===!1?A.format[L]==null:mo(P.format[L],A.format[L])))return!1;return P.prefix!=null&&!P.prefix.test(A.prefix)||P.suffix!=null&&!P.suffix.test(A.suffix)?!1:P.handler.call(this,i,A,P)!==!0})&&a.preventDefault()})}handleBackspace(a,e){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(a.index===0||this.quill.getLength()<=1)return;let l={};const[o]=this.quill.getLine(a.index);let i=new Se().retain(a.index-s).delete(s);if(e.offset===0){const[r]=this.quill.getLine(a.index-1);if(r&&!(r.statics.blotName==="block"&&r.length()<=1)){const c=o.formats(),f=this.quill.getFormat(a.index-1,1);if(l=Nt.exports.AttributeMap.diff(c,f)||{},Object.keys(l).length>0){const p=new Se().retain(a.index+o.length()-2).retain(1,l);i=i.compose(p)}}}this.quill.updateContents(i,ge.sources.USER),this.quill.focus()}handleDelete(a,e){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(a.index>=this.quill.getLength()-s)return;let l={};const[o]=this.quill.getLine(a.index);let i=new Se().retain(a.index).delete(s);if(e.offset>=o.length()-1){const[r]=this.quill.getLine(a.index+1);if(r){const x=o.formats(),c=this.quill.getFormat(a.index,1);l=Nt.exports.AttributeMap.diff(x,c)||{},Object.keys(l).length>0&&(i=i.retain(r.length()-1).retain(1,l))}}this.quill.updateContents(i,ge.sources.USER),this.quill.focus()}handleDeleteRange(a){Lo({range:a,quill:this.quill}),this.quill.focus()}handleEnter(a,e){const s=Object.keys(e.format).reduce((o,i)=>(this.quill.scroll.query(i,Ie.BLOCK)&&!Array.isArray(e.format[i])&&(o[i]=e.format[i]),o),{}),l=new Se().retain(a.index).delete(a.length).insert(`
`,s);this.quill.updateContents(l,ge.sources.USER),this.quill.setSelection(a.index+1,ge.sources.SILENT),this.quill.focus()}}const Eu={bindings:{bold:Yn("bold"),italic:Yn("italic"),underline:Yn("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,a){return a.collapsed&&a.offset!==0?!0:(this.quill.format("indent","+1",ge.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,a){return a.collapsed&&a.offset!==0?!0:(this.quill.format("indent","-1",ge.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,a){a.format.indent!=null?this.quill.format("indent","-1",ge.sources.USER):a.format.list!=null&&this.quill.format("list",!1,ge.sources.USER)}},"indent code-block":ri(!0),"outdent code-block":ri(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,ge.sources.USER)}},tab:{key:"Tab",handler(n,a){if(a.format.table)return!0;this.quill.history.cutoff();const e=new Se().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(e,ge.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,ge.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,ge.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,a){const e={list:!1};a.format.indent&&(e.indent=!1),this.quill.formatLine(n.index,n.length,e,ge.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[a,e]=this.quill.getLine(n.index),s={...a.formats(),list:"checked"},l=new Se().retain(n.index).insert(`
`,s).retain(a.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(l,ge.sources.USER),this.quill.setSelection(n.index+1,ge.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,a){const[e,s]=this.quill.getLine(n.index),l=new Se().retain(n.index).insert(`
`,a.format).retain(e.length()-s-1).retain(1,{header:null});this.quill.updateContents(l,ge.sources.USER),this.quill.setSelection(n.index+1,ge.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const a=this.quill.getModule("table");if(a){const[e,s,l,o]=a.getTable(n),i=Cu(e,s,l,o);if(i==null)return;let r=e.offset();if(i<0){const x=new Se().retain(r).insert(`
`);this.quill.updateContents(x,ge.sources.USER),this.quill.setSelection(n.index+1,n.length,ge.sources.SILENT)}else if(i>0){r+=e.length();const x=new Se().retain(r).insert(`
`);this.quill.updateContents(x,ge.sources.USER),this.quill.setSelection(r,ge.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,a){const{event:e,line:s}=a,l=s.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(l-1,ge.sources.USER):this.quill.setSelection(l+s.length(),ge.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,a){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=a.prefix,[s,l]=this.quill.getLine(n.index);if(l>e)return!0;let o;switch(a.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(n.index," ",ge.sources.USER),this.quill.history.cutoff();const i=new Se().retain(n.index-l).delete(e+1).retain(s.length()-2-l).retain(1,{list:o});return this.quill.updateContents(i,ge.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-e,ge.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[a,e]=this.quill.getLine(n.index);let s=2,l=a;for(;l!=null&&l.length()<=1&&l.formats()["code-block"];)if(l=l.prev,s-=1,s<=0){const o=new Se().retain(n.index+a.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,ge.sources.USER),this.quill.setSelection(n.index-1,ge.sources.SILENT),!1}return!0}},"embed left":_l("ArrowLeft",!1),"embed left shift":_l("ArrowLeft",!0),"embed right":_l("ArrowRight",!1),"embed right shift":_l("ArrowRight",!0),"table down":ci(!1),"table up":ci(!0)}};Hl.DEFAULTS=Eu;function ri(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(a,e){let{event:s}=e;const l=this.quill.scroll.query("code-block"),{TAB:o}=l;if(a.length===0&&!s.shiftKey){this.quill.insertText(a.index,o,ge.sources.USER),this.quill.setSelection(a.index+o.length,ge.sources.SILENT);return}const i=a.length===0?this.quill.getLines(a.index,1):this.quill.getLines(a);let{index:r,length:x}=a;i.forEach((c,f)=>{n?(c.insertAt(0,o),f===0?r+=o.length:x+=o.length):c.domNode.textContent.startsWith(o)&&(c.deleteAt(0,o.length),f===0?r-=o.length:x-=o.length)}),this.quill.update(ge.sources.USER),this.quill.setSelection(r,x,ge.sources.SILENT)}}}function _l(n,a){return{key:n,shiftKey:a,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:l}=s;n==="ArrowRight"&&(l+=s.length+1);const[o]=this.quill.getLeaf(l);return o instanceof Rt?(n==="ArrowLeft"?a?this.quill.setSelection(s.index-1,s.length+1,ge.sources.USER):this.quill.setSelection(s.index-1,ge.sources.USER):a?this.quill.setSelection(s.index,s.length+1,ge.sources.USER):this.quill.setSelection(s.index+s.length+1,ge.sources.USER),!1):!0}}}function Yn(n){return{key:n[0],shortKey:!0,handler(a,e){this.quill.format(n,!e.format[n],ge.sources.USER)}}}function ci(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(a,e){const s=n?"prev":"next",l=e.line,o=l.parent[s];if(o!=null){if(o.statics.blotName==="table-row"){let i=o.children.head,r=l;for(;r.prev!=null;)r=r.prev,i=i.next;const x=i.offset(this.quill.scroll)+Math.min(e.offset,i.length()-1);this.quill.setSelection(x,0,ge.sources.USER)}}else{const i=l.table()[s];i!=null&&(n?this.quill.setSelection(i.offset(this.quill.scroll)+i.length()-1,0,ge.sources.USER):this.quill.setSelection(i.offset(this.quill.scroll),0,ge.sources.USER))}return!1}}}function _u(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=ms(n);else return null;return n.shortKey&&(n[vu]=n.shortKey,delete n.shortKey),n}function Lo(n){let{quill:a,range:e}=n;const s=a.getLines(e);let l={};if(s.length>1){const o=s[0].formats(),i=s[s.length-1].formats();l=Nt.exports.AttributeMap.diff(i,o)||{}}a.deleteText(e,ge.sources.USER),Object.keys(l).length>0&&a.formatLine(e.index,1,l,ge.sources.USER),a.setSelection(e.index,ge.sources.SILENT)}function Cu(n,a,e,s){return a.prev==null&&a.next==null?e.prev==null&&e.next==null?s===0?-1:1:e.prev==null?-1:1:a.prev==null?-1:a.next==null?1:null}const yu=/font-weight:\s*normal/,bu=["P","OL","UL"],xi=n=>n&&bu.includes(n.tagName),Bu=n=>{Array.from(n.querySelectorAll("br")).filter(a=>xi(a.previousElementSibling)&&xi(a.nextElementSibling)).forEach(a=>{a.parentNode?.removeChild(a)})},Au=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(a=>a.getAttribute("style")?.match(yu)).forEach(a=>{const e=n.createDocumentFragment();e.append(...a.childNodes),a.parentNode?.replaceChild(e,a)})};function ku(n){n.querySelector('[id^="docs-internal-guid-"]')&&(Au(n),Bu(n))}const Du=/\bmso-list:[^;]*ignore/i,Fu=/\bmso-list:[^;]*\bl(\d+)/i,wu=/\bmso-list:[^;]*\blevel(\d+)/i,Pu=(n,a)=>{const e=n.getAttribute("style"),s=e?.match(Fu);if(!s)return null;const l=Number(s[1]),o=e?.match(wu),i=o?Number(o[1]):1,r=new RegExp(`@list l${l}:level${i}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),x=a.match(r),c=x&&x[1]==="bullet"?"bullet":"ordered";return{id:l,indent:i,type:c,element:n}},Tu=n=>{const a=Array.from(n.querySelectorAll("[style*=mso-list]")),e=[],s=[];a.forEach(i=>{(i.getAttribute("style")||"").match(Du)?e.push(i):s.push(i)}),e.forEach(i=>i.parentNode?.removeChild(i));const l=n.documentElement.innerHTML,o=s.map(i=>Pu(i,l)).filter(i=>i);for(;o.length;){const i=[];let r=o.shift();for(;r;)i.push(r),r=o.length&&o[0]?.element===r.element.nextElementSibling&&o[0].id===r.id?o.shift():null;const x=document.createElement("ul");i.forEach(p=>{const d=document.createElement("li");d.setAttribute("data-list",p.type),p.indent>1&&d.setAttribute("class",`ql-indent-${p.indent-1}`),d.innerHTML=p.element.innerHTML,x.appendChild(d)});const c=i[0]?.element,{parentNode:f}=c??{};c&&f?.replaceChild(x,c),i.slice(1).forEach(p=>{let{element:d}=p;f?.removeChild(d)})}};function Lu(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Tu(n)}const Su=[Lu,ku],Iu=n=>{n.documentElement&&Su.forEach(a=>{a(n)})},$u=ya("quill:clipboard"),Nu=[[Node.TEXT_NODE,Gu],[Node.TEXT_NODE,di],["br",Uu],[Node.ELEMENT_NODE,di],[Node.ELEMENT_NODE,qu],[Node.ELEMENT_NODE,Ru],[Node.ELEMENT_NODE,Hu],["li",Yu],["ol, ul",Wu],["pre",zu],["tr",Zu],["b",Wn("bold")],["i",Wn("italic")],["strike",Wn("strike")],["style",ju]],Ou=[mu,Qi].reduce((n,a)=>(n[a.keyName]=a,n),{}),ui=[Ji,wo,Fo,er,sr,nr].reduce((n,a)=>(n[a.keyName]=a,n),{});class Mu extends xa{static DEFAULTS={matchers:[]};constructor(a,e){super(a,e),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Nu.concat(this.options.matchers??[]).forEach(s=>{let[l,o]=s;this.addMatcher(l,o)})}addMatcher(a,e){this.matchers.push([a,e])}convert(a){let{html:e,text:s}=a,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(l[Lt.blotName])return new Se().insert(s||"",{[Lt.blotName]:l[Lt.blotName]});if(!e)return new Se().insert(s||"",l);const o=this.convertHTML(e);return Xs(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||l.table)?o.compose(new Se().retain(o.length()-1).delete(1)):o}normalizeHTML(a){Iu(a)}convertHTML(a){const e=new DOMParser().parseFromString(a,"text/html");this.normalizeHTML(e);const s=e.body,l=new WeakMap,[o,i]=this.prepareMatching(s,l);return So(this.quill.scroll,s,o,i,l)}dangerouslyPasteHTML(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ge.sources.API;if(typeof a=="string"){const l=this.convert({html:a,text:""});this.quill.setContents(l,e),this.quill.setSelection(0,ge.sources.SILENT)}else{const l=this.convert({html:e,text:""});this.quill.updateContents(new Se().retain(a).concat(l),s),this.quill.setSelection(a+l.length(),ge.sources.SILENT)}}onCaptureCopy(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(a.defaultPrevented)return;a.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:l,text:o}=this.onCopy(s,e);a.clipboardData?.setData("text/plain",o),a.clipboardData?.setData("text/html",l),e&&Lo({range:s,quill:this.quill})}normalizeURIList(a){return a.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(a){if(a.defaultPrevented||!this.quill.isEnabled())return;a.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const s=a.clipboardData?.getData("text/html");let l=a.clipboardData?.getData("text/plain");if(!s&&!l){const i=a.clipboardData?.getData("text/uri-list");i&&(l=this.normalizeURIList(i))}const o=Array.from(a.clipboardData?.files||[]);if(!s&&o.length>0){this.quill.uploader.upload(e,o);return}if(s&&o.length>0){const i=new DOMParser().parseFromString(s,"text/html");if(i.body.childElementCount===1&&i.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(e,o);return}}this.onPaste(e,{html:s,text:l})}onCopy(a){const e=this.quill.getText(a);return{html:this.quill.getSemanticHTML(a),text:e}}onPaste(a,e){let{text:s,html:l}=e;const o=this.quill.getFormat(a.index),i=this.convert({text:s,html:l},o);$u.log("onPaste",i,{text:s,html:l});const r=new Se().retain(a.index).delete(a.length).concat(i);this.quill.updateContents(r,ge.sources.USER),this.quill.setSelection(r.length()-a.length,ge.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(a,e){const s=[],l=[];return this.matchers.forEach(o=>{const[i,r]=o;switch(i){case Node.TEXT_NODE:l.push(r);break;case Node.ELEMENT_NODE:s.push(r);break;default:Array.from(a.querySelectorAll(i)).forEach(x=>{e.has(x)?e.get(x)?.push(r):e.set(x,[r])});break}}),[s,l]}}function Xa(n,a,e,s){return s.query(a)?n.reduce((l,o)=>{if(!o.insert)return l;if(o.attributes&&o.attributes[a])return l.push(o);const i=e?{[a]:e}:{};return l.insert(o.insert,{...i,...o.attributes})},new Se):n}function Xs(n,a){let e="";for(let s=n.ops.length-1;s>=0&&e.length<a.length;--s){const l=n.ops[s];if(typeof l.insert!="string")break;e=l.insert+e}return e.slice(-1*a.length)===a}function Da(n,a){if(!(n instanceof Element))return!1;const e=a.query(n);return e&&e.prototype instanceof Rt?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function Vu(n,a){return n.previousElementSibling&&n.nextElementSibling&&!Da(n.previousElementSibling,a)&&!Da(n.nextElementSibling,a)}const Cl=new WeakMap;function or(n){return n==null?!1:(Cl.has(n)||(n.tagName==="PRE"?Cl.set(n,!0):Cl.set(n,or(n.parentNode))),Cl.get(n))}function So(n,a,e,s,l){return a.nodeType===a.TEXT_NODE?s.reduce((o,i)=>i(a,o,n),new Se):a.nodeType===a.ELEMENT_NODE?Array.from(a.childNodes||[]).reduce((o,i)=>{let r=So(n,i,e,s,l);return i.nodeType===a.ELEMENT_NODE&&(r=e.reduce((x,c)=>c(i,x,n),r),r=(l.get(i)||[]).reduce((x,c)=>c(i,x,n),r)),o.concat(r)},new Se):new Se}function Wn(n){return(a,e,s)=>Xa(e,n,!0,s)}function Ru(n,a,e){const s=ca.keys(n),l=sa.keys(n),o=Ia.keys(n),i={};return s.concat(l).concat(o).forEach(r=>{let x=e.query(r,Ie.ATTRIBUTE);x!=null&&(i[x.attrName]=x.value(n),i[x.attrName])||(x=Ou[r],x!=null&&(x.attrName===r||x.keyName===r)&&(i[x.attrName]=x.value(n)||void 0),x=ui[r],x!=null&&(x.attrName===r||x.keyName===r)&&(x=ui[r],i[x.attrName]=x.value(n)||void 0))}),Object.entries(i).reduce((r,x)=>{let[c,f]=x;return Xa(r,c,f,e)},a)}function qu(n,a,e){const s=e.query(n);if(s==null)return a;if(s.prototype instanceof Rt){const l={},o=s.value(n);if(o!=null)return l[s.blotName]=o,new Se().insert(l,s.formats(n,e))}else if(s.prototype instanceof js&&!Xs(a,`
`)&&a.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return Xa(a,s.blotName,s.formats(n,e),e);return a}function Uu(n,a){return Xs(a,`
`)||a.insert(`
`),a}function zu(n,a,e){const s=e.query("code-block"),l=s&&"formats"in s&&typeof s.formats=="function"?s.formats(n,e):!0;return Xa(a,"code-block",l,e)}function ju(){return new Se}function Yu(n,a,e){const s=e.query(n);if(s==null||s.blotName!=="list"||!Xs(a,`
`))return a;let l=-1,o=n.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(l+=1),o=o.parentNode;return l<=0?a:a.reduce((i,r)=>r.insert?r.attributes&&typeof r.attributes.indent=="number"?i.push(r):i.insert(r.insert,{indent:l,...r.attributes||{}}):i,new Se)}function Wu(n,a,e){const s=n;let l=s.tagName==="OL"?"ordered":"bullet";const o=s.getAttribute("data-checked");return o&&(l=o==="true"?"checked":"unchecked"),Xa(a,"list",l,e)}function di(n,a,e){if(!Xs(a,`
`)){if(Da(n,e)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return a.insert(`
`);if(a.length()>0&&n.nextSibling){let s=n.nextSibling;for(;s!=null;){if(Da(s,e))return a.insert(`
`);const l=e.query(s);if(l&&l.prototype instanceof Yt)return a.insert(`
`);s=s.firstChild}}}return a}function Hu(n,a,e){const s={},l=n.style||{};return l.fontStyle==="italic"&&(s.italic=!0),l.textDecoration==="underline"&&(s.underline=!0),l.textDecoration==="line-through"&&(s.strike=!0),(l.fontWeight?.startsWith("bold")||parseInt(l.fontWeight,10)>=700)&&(s.bold=!0),a=Object.entries(s).reduce((o,i)=>{let[r,x]=i;return Xa(o,r,x,e)},a),parseFloat(l.textIndent||0)>0?new Se().insert("	").concat(a):a}function Zu(n,a,e){const s=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(s!=null){const o=Array.from(s.querySelectorAll("tr")).indexOf(n)+1;return Xa(a,"table",o,e)}return a}function Gu(n,a,e){let s=n.data;if(n.parentElement?.tagName==="O:P")return a.insert(s.trim());if(!or(n)){if(s.trim().length===0&&s.includes(`
`)&&!Vu(n,e))return a;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&Da(n.parentElement,e)||n.previousSibling instanceof Element&&Da(n.previousSibling,e))&&(s=s.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&Da(n.parentElement,e)||n.nextSibling instanceof Element&&Da(n.nextSibling,e))&&(s=s.replace(/ $/,"")),s=s.replaceAll("\xA0"," ")}return a.insert(s)}class Ju extends xa{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(a,e){super(a,e),this.quill.on(ge.events.EDITOR_CHANGE,(s,l,o,i)=>{s===ge.events.SELECTION_CHANGE?l&&i!==ge.sources.SILENT&&(this.currentRange=l):s===ge.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||i===ge.sources.USER?this.record(l,o):this.transform(l)),this.currentRange=no(this.currentRange,l))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(a,e){if(this.stack[a].length===0)return;const s=this.stack[a].pop();if(!s)return;const l=this.quill.getContents(),o=s.delta.invert(l);this.stack[e].push({delta:o,range:no(s.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,ge.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(a,e){if(a.ops.length===0)return;this.stack.redo=[];let s=a.invert(e),l=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const i=this.stack.undo.pop();i&&(s=s.compose(i.delta),l=i.range)}else this.lastRecorded=o;s.length()!==0&&(this.stack.undo.push({delta:s,range:l}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(a){mi(this.stack.undo,a),mi(this.stack.redo,a)}undo(){this.change("undo","redo")}restoreSelection(a){if(a.range)this.quill.setSelection(a.range,ge.sources.USER);else{const e=Qu(this.quill.scroll,a.delta);this.quill.setSelection(e,ge.sources.USER)}}}function mi(n,a){let e=a;for(let s=n.length-1;s>=0;s-=1){const l=n[s];n[s]={delta:e.transform(l.delta,!0),range:l.range&&no(l.range,e)},e=l.delta.transform(e),n[s].delta.length()===0&&n.splice(s,1)}}function Xu(n,a){const e=a.ops[a.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(s=>n.query(s,Ie.BLOCK)!=null):!1}function Qu(n,a){const e=a.reduce((l,o)=>l+(o.delete||0),0);let s=a.length()-e;return Xu(n,a)&&(s-=1),s}function no(n,a){if(!n)return n;const e=a.transformPosition(n.index),s=a.transformPosition(n.index+n.length);return{index:e,length:s-e}}class ir extends xa{constructor(a,e){super(a,e),a.root.addEventListener("drop",s=>{s.preventDefault();let l=null;if(document.caretRangeFromPoint)l=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const i=document.caretPositionFromPoint(s.clientX,s.clientY);l=document.createRange(),l.setStart(i.offsetNode,i.offset),l.setEnd(i.offsetNode,i.offset)}const o=l&&a.selection.normalizeNative(l);if(o){const i=a.selection.normalizedToRange(o);s.dataTransfer?.files&&this.upload(i,s.dataTransfer.files)}})}upload(a,e){const s=[];Array.from(e).forEach(l=>{l&&this.options.mimetypes?.includes(l.type)&&s.push(l)}),s.length>0&&this.options.handler.call(this,a,s)}}ir.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,a){if(!this.quill.scroll.query("image"))return;const e=a.map(s=>new Promise(l=>{const o=new FileReader;o.onload=()=>{l(o.result)},o.readAsDataURL(s)}));Promise.all(e).then(s=>{const l=s.reduce((o,i)=>o.insert({image:i}),new Se().retain(n.index).delete(n.length));this.quill.updateContents(l,Te.sources.USER),this.quill.setSelection(n.index+s.length,Te.sources.SILENT)})}};const Ku=["insertText","insertReplacementText"];class ed extends xa{constructor(a,e){super(a,e),a.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||a.on(ge.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(a){Lo({range:a,quill:this.quill})}replaceText(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(a.length===0)return!1;if(e){const s=this.quill.getFormat(a.index,1);this.deleteRange(a),this.quill.updateContents(new Se().retain(a.index).insert(e,s),ge.sources.USER)}else this.deleteRange(a);return this.quill.setSelection(a.index+e.length,0,ge.sources.SILENT),!0}handleBeforeInput(a){if(this.quill.composition.isComposing||a.defaultPrevented||!Ku.includes(a.inputType))return;const e=a.getTargetRanges?a.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const s=td(a);if(s==null)return;const l=this.quill.selection.normalizeNative(e),o=l?this.quill.selection.normalizedToRange(l):null;o&&this.replaceText(o,s)&&a.preventDefault()}handleCompositionStart(){const a=this.quill.getSelection();a&&this.replaceText(a)}}function td(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const ad=/Mac/i.test(navigator.platform),sd=100,ld=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||ad&&n.key==="a"&&n.ctrlKey===!0);class nd extends xa{isListening=!1;selectionChangeDeadline=0;constructor(a,e){super(a,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(a,e){let{line:s,event:l}=e;if(!(s instanceof ta)||!s.uiNode)return!0;const o=getComputedStyle(s.domNode).direction==="rtl";return o&&l.key!=="ArrowRight"||!o&&l.key!=="ArrowLeft"?!0:(this.quill.setSelection(a.index-1,a.length+(l.shiftKey?1:0),ge.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",a=>{!a.defaultPrevented&&ld(a)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+sd,this.isListening)return;this.isListening=!0;const a=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",a,{once:!0})}handleSelectionChange(){const a=document.getSelection();if(!a)return;const e=a.getRangeAt(0);if(e.collapsed!==!0||e.startOffset!==0)return;const s=this.quill.scroll.find(e.startContainer);if(!(s instanceof ta)||!s.uiNode)return;const l=document.createRange();l.setStartAfter(s.uiNode),l.setEndAfter(s.uiNode),a.removeAllRanges(),a.addRange(l)}}ge.register({"blots/block":yt,"blots/block/embed":Yt,"blots/break":la,"blots/container":Ga,"blots/cursor":Jt,"blots/embed":ko,"blots/inline":Pt,"blots/scroll":du,"blots/text":aa,"modules/clipboard":Mu,"modules/history":Ju,"modules/keyboard":Hl,"modules/uploader":ir,"modules/input":ed,"modules/uiNode":nd});class od extends sa{add(a,e){let s=0;if(e==="+1"||e==="-1"){const l=this.value(a)||0;s=e==="+1"?l+1:l-1}else typeof e=="number"&&(s=e);return s===0?(this.remove(a),!0):super.add(a,s.toString())}canAdd(a,e){return super.canAdd(a,e)||super.canAdd(a,parseInt(e,10))}value(a){return parseInt(super.value(a),10)||void 0}}const id=new od("indent","ql-indent",{scope:Ie.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class rd extends yt{static blotName="blockquote";static tagName="blockquote"}class cd extends yt{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(a){return this.tagName.indexOf(a.tagName)+1}}class Qs extends Ga{}Qs.blotName="list-container";Qs.tagName="OL";class Ks extends yt{static create(a){const e=super.create();return e.setAttribute("data-list",a),e}static formats(a){return a.getAttribute("data-list")||void 0}static register(){ge.register(Qs)}constructor(a,e){super(a,e);const s=e.ownerDocument.createElement("span"),l=o=>{if(!a.isEnabled())return;const i=this.statics.formats(e,a);i==="checked"?(this.format("list","unchecked"),o.preventDefault()):i==="unchecked"&&(this.format("list","checked"),o.preventDefault())};s.addEventListener("mousedown",l),s.addEventListener("touchstart",l),this.attachUI(s)}format(a,e){a===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(a,e)}}Ks.blotName="list";Ks.tagName="LI";Qs.allowedChildren=[Ks];Ks.requiredContainer=Qs;class Io extends Pt{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(a){super.optimize(a),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class xd extends Io{static blotName="italic";static tagName=["EM","I"]}class Il extends Pt{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(a){const e=super.create(a);return e.setAttribute("href",this.sanitize(a)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(a){return a.getAttribute("href")}static sanitize(a){return rr(a,this.PROTOCOL_WHITELIST)?a:this.SANITIZED_URL}format(a,e){a!==this.statics.blotName||!e?super.format(a,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}function rr(n,a){const e=document.createElement("a");e.href=n;const s=e.href.slice(0,e.href.indexOf(":"));return a.indexOf(s)>-1}class ud extends Pt{static blotName="script";static tagName=["SUB","SUP"];static create(a){return a==="super"?document.createElement("sup"):a==="sub"?document.createElement("sub"):super.create(a)}static formats(a){if(a.tagName==="SUB")return"sub";if(a.tagName==="SUP")return"super"}}class dd extends Io{static blotName="strike";static tagName=["S","STRIKE"]}class md extends Pt{static blotName="underline";static tagName="U"}class pd extends ko{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(a){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(a);return typeof a=="string"&&(window.katex.render(a,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",a)),e}static value(a){return a.getAttribute("data-value")}html(){const{formula:a}=this.value();return`<span>${a}</span>`}}const pi=["alt","height","width"];class fd extends Rt{static blotName="image";static tagName="IMG";static create(a){const e=super.create(a);return typeof a=="string"&&e.setAttribute("src",this.sanitize(a)),e}static formats(a){return pi.reduce((e,s)=>(a.hasAttribute(s)&&(e[s]=a.getAttribute(s)),e),{})}static match(a){return/\.(jpe?g|gif|png)$/.test(a)||/^data:image\/.+;base64/.test(a)}static sanitize(a){return rr(a,["http","https","data"])?a:"//:0"}static value(a){return a.getAttribute("src")}format(a,e){pi.indexOf(a)>-1?e?this.domNode.setAttribute(a,e):this.domNode.removeAttribute(a):super.format(a,e)}}const fi=["height","width"];class gd extends Yt{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(a){const e=super.create(a);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(a)),e}static formats(a){return fi.reduce((e,s)=>(a.hasAttribute(s)&&(e[s]=a.getAttribute(s)),e),{})}static sanitize(a){return Il.sanitize(a)}static value(a){return a.getAttribute("src")}format(a,e){fi.indexOf(a)>-1?e?this.domNode.setAttribute(a,e):this.domNode.removeAttribute(a):super.format(a,e)}html(){const{video:a}=this.value();return`<a href="${a}">${a}</a>`}}const Vs=new sa("code-token","hljs",{scope:Ie.INLINE});class va extends Pt{static formats(a,e){for(;a!=null&&a!==e.domNode;){if(a.classList&&a.classList.contains(Lt.className))return super.formats(a,e);a=a.parentNode}}constructor(a,e,s){super(a,e,s),Vs.add(this.domNode,s)}format(a,e){a!==va.blotName?super.format(a,e):e?Vs.add(this.domNode,e):(Vs.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Vs.value(this.domNode)||this.unwrap()}}va.blotName="code-token";va.className="ql-token";class jt extends Lt{static create(a){const e=super.create(a);return typeof a=="string"&&e.setAttribute("data-language",a),e}static formats(a){return a.getAttribute("data-language")||"plain"}static register(){}format(a,e){a===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(a,e)}replaceWith(a,e){return this.formatAt(0,this.length(),va.blotName,!1),super.replaceWith(a,e)}}class Us extends Ja{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(a,e){a===jt.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(a,e)}))}formatAt(a,e,s,l){s===jt.blotName&&(this.forceNext=!0),super.formatAt(a,e,s,l)}highlight(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const l=`${Array.from(this.domNode.childNodes).filter(i=>i!==this.uiNode).map(i=>i.textContent).join(`
`)}
`,o=jt.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==l){if(l.trim().length>0||this.cachedText==null){const i=this.children.reduce((x,c)=>x.concat(Wi(c,!1)),new Se),r=a(l,o);i.diff(r).reduce((x,c)=>{let{retain:f,attributes:p}=c;return f?(p&&Object.keys(p).forEach(d=>{[jt.blotName,va.blotName].includes(d)&&this.formatAt(x,f,d,p[d])}),x+f):x},0)}this.cachedText=l,this.forceNext=!1}}html(a,e){const[s]=this.children.find(a);return`<pre data-language="${s?jt.formats(s.domNode):"plain"}">
${Wl(this.code(a,e))}
</pre>`}optimize(a){if(super.optimize(a),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=jt.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}Us.allowedChildren=[jt];jt.requiredContainer=Us;jt.allowedChildren=[va,Jt,aa,la];const hd=(n,a,e)=>{if(typeof n.versionString=="string"){const s=n.versionString.split(".")[0];if(parseInt(s,10)>=11)return n.highlight(e,{language:a}).value}return n.highlight(a,e).value};class cr extends xa{static register(){ge.register(va,!0),ge.register(jt,!0),ge.register(Us,!0)}constructor(a,e){if(super(a,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,l)=>{let{key:o}=l;return s[o]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(ge.events.SCROLL_BLOT_MOUNT,a=>{if(!(a instanceof Us))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:l,label:o}=s;const i=e.ownerDocument.createElement("option");i.textContent=o,i.setAttribute("value",l),e.appendChild(i)}),e.addEventListener("change",()=>{a.format(jt.blotName,e.value),this.quill.root.focus(),this.highlight(a,!0)}),a.uiNode==null&&(a.attachUI(e),a.children.head&&(e.value=jt.formats(a.children.head.domNode)))})}initTimer(){let a=null;this.quill.on(ge.events.SCROLL_OPTIMIZE,()=>{a&&clearTimeout(a),a=setTimeout(()=>{this.highlight(),a=null},this.options.interval)})}highlight(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(ge.sources.USER);const s=this.quill.getSelection();(a==null?this.quill.scroll.descendants(Us):[a]).forEach(o=>{o.highlight(this.highlightBlot,e)}),this.quill.update(ge.sources.SILENT),s!=null&&this.quill.setSelection(s,ge.sources.SILENT)}highlightBlot(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Wl(a).split(`
`).reduce((l,o,i)=>(i!==0&&l.insert(`
`,{[Lt.blotName]:e}),l.insert(o)),new Se);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(Lt.className),s.innerHTML=hd(this.options.hljs,e,a),So(this.quill.scroll,s,[(l,o)=>{const i=Vs.value(l);return i?o.compose(new Se().retain(o.length(),{[va.blotName]:i})):o}],[(l,o)=>l.data.split(`
`).reduce((i,r,x)=>(x!==0&&i.insert(`
`,{[Lt.blotName]:e}),i.insert(r)),o)],new WeakMap)}}cr.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Xt extends yt{static blotName="table";static tagName="TD";static create(a){const e=super.create();return a?e.setAttribute("data-row",a):e.setAttribute("data-row",$o()),e}static formats(a){if(a.hasAttribute("data-row"))return a.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(a,e){a===Xt.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(a,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class Wa extends Ga{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const a=this.children.head.formats(),e=this.children.tail.formats(),s=this.next.children.head.formats(),l=this.next.children.tail.formats();return a.table===e.table&&a.table===s.table&&a.table===l.table}return!1}optimize(a){super.optimize(a),this.children.forEach(e=>{if(e.next==null)return;const s=e.formats(),l=e.next.formats();if(s.table!==l.table){const o=this.splitAfter(e);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Pa extends Ga{static blotName="table-body";static tagName="TBODY"}class $l extends Ga{static blotName="table-container";static tagName="TABLE";balanceCells(){const a=this.descendants(Wa),e=a.reduce((s,l)=>Math.max(l.children.length,s),0);a.forEach(s=>{new Array(e-s.children.length).fill(0).forEach(()=>{let l;s.children.head!=null&&(l=Xt.formats(s.children.head.domNode));const o=this.scroll.create(Xt.blotName,l);s.appendChild(o),o.optimize()})})}cells(a){return this.rows().map(e=>e.children.at(a))}deleteColumn(a){const[e]=this.descendant(Pa);e==null||e.children.head==null||e.children.forEach(s=>{const l=s.children.at(a);l?.remove()})}insertColumn(a){const[e]=this.descendant(Pa);e==null||e.children.head==null||e.children.forEach(s=>{const l=s.children.at(a),o=Xt.formats(s.children.head.domNode),i=this.scroll.create(Xt.blotName,o);s.insertBefore(i,l)})}insertRow(a){const[e]=this.descendant(Pa);if(e==null||e.children.head==null)return;const s=$o(),l=this.scroll.create(Wa.blotName);e.children.head.children.forEach(()=>{const i=this.scroll.create(Xt.blotName,s);l.appendChild(i)});const o=e.children.at(a);e.insertBefore(l,o)}rows(){const a=this.children.head;return a==null?[]:a.children.map(e=>e)}}$l.allowedChildren=[Pa];Pa.requiredContainer=$l;Pa.allowedChildren=[Wa];Wa.requiredContainer=Pa;Wa.allowedChildren=[Xt];Xt.requiredContainer=Wa;function $o(){return`row-${Math.random().toString(36).slice(2,6)}`}class vd extends xa{static register(){ge.register(Xt),ge.register(Wa),ge.register(Pa),ge.register($l)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants($l).forEach(a=>{a.balanceCells()})}deleteColumn(){const[a,,e]=this.getTable();e!=null&&(a.deleteColumn(e.cellOffset()),this.quill.update(ge.sources.USER))}deleteRow(){const[,a]=this.getTable();a!=null&&(a.remove(),this.quill.update(ge.sources.USER))}deleteTable(){const[a]=this.getTable();if(a==null)return;const e=a.offset();a.remove(),this.quill.update(ge.sources.USER),this.quill.setSelection(e,ge.sources.SILENT)}getTable(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(a==null)return[null,null,null,-1];const[e,s]=this.quill.getLine(a.index);if(e==null||e.statics.blotName!==Xt.blotName)return[null,null,null,-1];const l=e.parent;return[l.parent.parent,l,e,s]}insertColumn(a){const e=this.quill.getSelection();if(!e)return;const[s,l,o]=this.getTable(e);if(o==null)return;const i=o.cellOffset();s.insertColumn(i+a),this.quill.update(ge.sources.USER);let r=l.rowOffset();a===0&&(r+=1),this.quill.setSelection(e.index+r,e.length,ge.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(a){const e=this.quill.getSelection();if(!e)return;const[s,l,o]=this.getTable(e);if(o==null)return;const i=l.rowOffset();s.insertRow(i+a),this.quill.update(ge.sources.USER),a>0?this.quill.setSelection(e,ge.sources.SILENT):this.quill.setSelection(e.index+l.children.length,e.length,ge.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(a,e){const s=this.quill.getSelection();if(s==null)return;const l=new Array(a).fill(0).reduce(o=>{const i=new Array(e).fill(`
`).join("");return o.insert(i,{table:$o()})},new Se().retain(s.index));this.quill.updateContents(l,ge.sources.USER),this.quill.setSelection(s.index,ge.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(ge.events.SCROLL_OPTIMIZE,a=>{a.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(ge.events.TEXT_CHANGE,(s,l,o)=>{o===ge.sources.USER&&this.balanceTables()}),!0):!1)})}}const gi=ya("quill:toolbar");class No extends xa{constructor(a,e){if(super(a,e),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),Ed(s,this.options.container),a.container?.parentNode?.insertBefore(s,a.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){gi.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const l=this.options.handlers?.[s];l&&this.addHandler(s,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(ge.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(a,e){this.handlers[a]=e}attach(a){let e=Array.from(a.classList).find(l=>l.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),a.tagName==="BUTTON"&&a.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){gi.warn("ignoring attaching to nonexistent format",e,a);return}const s=a.tagName==="SELECT"?"change":"click";a.addEventListener(s,l=>{let o;if(a.tagName==="SELECT"){if(a.selectedIndex<0)return;const r=a.options[a.selectedIndex];r.hasAttribute("selected")?o=!1:o=r.value||!1}else a.classList.contains("ql-active")?o=!1:o=a.value||!a.hasAttribute("value"),l.preventDefault();this.quill.focus();const[i]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,o);else if(this.quill.scroll.query(e).prototype instanceof Rt){if(o=prompt(`Enter ${e}`),!o)return;this.quill.updateContents(new Se().retain(i.index).delete(i.length).insert({[e]:o}),ge.sources.USER)}else this.quill.format(e,o,ge.sources.USER);this.update(i)}),this.controls.push([e,a])}update(a){const e=a==null?{}:this.quill.getFormat(a);this.controls.forEach(s=>{const[l,o]=s;if(o.tagName==="SELECT"){let i=null;if(a==null)i=null;else if(e[l]==null)i=o.querySelector("option[selected]");else if(!Array.isArray(e[l])){let r=e[l];typeof r=="string"&&(r=r.replace(/"/g,'\\"')),i=o.querySelector(`option[value="${r}"]`)}i==null?(o.value="",o.selectedIndex=-1):i.selected=!0}else if(a==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const i=e[l],r=i===o.getAttribute("value")||i!=null&&i.toString()===o.getAttribute("value")||i==null&&!o.getAttribute("value");o.classList.toggle("ql-active",r),o.setAttribute("aria-pressed",r.toString())}else{const i=e[l]!=null;o.classList.toggle("ql-active",i),o.setAttribute("aria-pressed",i.toString())}})}}No.DEFAULTS={};function hi(n,a,e){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${a}`),s.setAttribute("aria-pressed","false"),e!=null?(s.value=e,s.setAttribute("aria-label",`${a}: ${e}`)):s.setAttribute("aria-label",a),n.appendChild(s)}function Ed(n,a){Array.isArray(a[0])||(a=[a]),a.forEach(e=>{const s=document.createElement("span");s.classList.add("ql-formats"),e.forEach(l=>{if(typeof l=="string")hi(s,l);else{const o=Object.keys(l)[0],i=l[o];Array.isArray(i)?_d(s,o,i):hi(s,o,i)}}),n.appendChild(s)})}function _d(n,a,e){const s=document.createElement("select");s.classList.add(`ql-${a}`),e.forEach(l=>{const o=document.createElement("option");l!==!1?o.setAttribute("value",String(l)):o.setAttribute("selected","selected"),s.appendChild(o)}),n.appendChild(s)}No.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const a=this.quill.getFormat();Object.keys(a).forEach(e=>{this.quill.scroll.query(e,Ie.INLINE)!=null&&this.quill.format(e,!1,ge.sources.USER)})}else this.quill.removeFormat(n.index,n.length,ge.sources.USER)},direction(n){const{align:a}=this.quill.getFormat();n==="rtl"&&a==null?this.quill.format("align","right",ge.sources.USER):!n&&a==="right"&&this.quill.format("align",!1,ge.sources.USER),this.quill.format("direction",n,ge.sources.USER)},indent(n){const a=this.quill.getSelection(),e=this.quill.getFormat(a),s=parseInt(e.indent||0,10);if(n==="+1"||n==="-1"){let l=n==="+1"?1:-1;e.direction==="rtl"&&(l*=-1),this.quill.format("indent",s+l,ge.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,ge.sources.USER)},list(n){const a=this.quill.getSelection(),e=this.quill.getFormat(a);n==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,ge.sources.USER):this.quill.format("list","unchecked",ge.sources.USER):this.quill.format("list",n,ge.sources.USER)}}};const Cd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',yd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',bd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',Bd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',Ad='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',kd='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',Dd='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',Fd='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',vi='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',wd='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',Pd='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',Td='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',Ld='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',Sd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',Id='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',$d='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Nd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Od='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Md='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',Vd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Rd='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',qd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Ud='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',zd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',jd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Yd='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Wd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Hd='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Zd='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Gd='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Jd='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Xd='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Qd='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>';var Hs={align:{"":Cd,center:yd,right:bd,justify:Bd},background:Ad,blockquote:kd,bold:Dd,clean:Fd,code:vi,"code-block":vi,color:wd,direction:{"":Pd,rtl:Td},formula:Ld,header:{"1":Sd,"2":Id,"3":$d,"4":Nd,"5":Od,"6":Md},italic:Vd,image:Rd,indent:{"+1":qd,"-1":Ud},link:zd,list:{bullet:jd,check:Yd,ordered:Wd},script:{sub:Hd,super:Zd},strike:Gd,table:Jd,underline:Xd,video:Qd};const Kd='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Ei=0;function _i(n,a){n.setAttribute(a,`${n.getAttribute(a)!=="true"}`)}class Zl{constructor(a){this.select=a,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),_i(this.label,"aria-expanded"),_i(this.options,"aria-hidden")}buildItem(a){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const s=a.getAttribute("value");return s&&e.setAttribute("data-value",s),a.textContent&&e.setAttribute("data-label",a.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",l=>{switch(l.key){case"Enter":this.selectItem(e,!0),l.preventDefault();break;case"Escape":this.escape(),l.preventDefault();break}}),e}buildLabel(){const a=document.createElement("span");return a.classList.add("ql-picker-label"),a.innerHTML=Kd,a.tabIndex="0",a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),this.container.appendChild(a),a}buildOptions(){const a=document.createElement("span");a.classList.add("ql-picker-options"),a.setAttribute("aria-hidden","true"),a.tabIndex="-1",a.id=`ql-picker-options-${Ei}`,Ei+=1,this.label.setAttribute("aria-controls",a.id),this.options=a,Array.from(this.select.options).forEach(e=>{const s=this.buildItem(e);a.appendChild(s),e.selected===!0&&this.selectItem(s)}),this.container.appendChild(a)}buildPicker(){Array.from(this.select.attributes).forEach(a=>{this.container.setAttribute(a.name,a.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");a!==s&&(s?.classList.remove("ql-selected"),a!=null&&(a.classList.add("ql-selected"),this.select.selectedIndex=Array.from(a.parentNode.children).indexOf(a),a.hasAttribute("data-value")?this.label.setAttribute("data-value",a.getAttribute("data-value")):this.label.removeAttribute("data-value"),a.hasAttribute("data-label")?this.label.setAttribute("data-label",a.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let a;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];a=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const e=a!=null&&a!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class xr extends Zl{constructor(a,e){super(a),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(a){const e=super.buildItem(a);return e.style.backgroundColor=a.getAttribute("value")||"",e}selectItem(a,e){super.selectItem(a,e);const s=this.label.querySelector(".ql-color-label"),l=a&&a.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=l:s.style.fill=l)}}class ur extends Zl{constructor(a,e){super(a),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=e[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(a,e){super.selectItem(a,e);const s=a||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const em=n=>{const{overflowY:a}=getComputedStyle(n,null);return a!=="visible"&&a!=="clip"};class dr{constructor(a,e){this.quill=a,this.boundsContainer=e||document.body,this.root=a.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,em(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(a){const e=a.left+a.width/2-this.root.offsetWidth/2,s=a.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const l=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let i=0;if(o.right>l.right&&(i=l.right-o.right,this.root.style.left=`${e+i}px`),o.left<l.left&&(i=l.left-o.left,this.root.style.left=`${e+i}px`),o.bottom>l.bottom){const r=o.bottom-o.top,x=a.bottom-a.top+r;this.root.style.top=`${s-x}px`,this.root.classList.add("ql-flip")}return i}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const tm=[!1,"center","right","justify"],am=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],sm=[!1,"serif","monospace"],lm=["1","2","3",!1],nm=["small",!1,"large","huge"];class el extends Bs{constructor(a,e){super(a,e);const s=l=>{if(!document.body.contains(a.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(l.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(l.target)||o.close()})};a.emitter.listenDOM("click",document.body,s)}addModule(a){const e=super.addModule(a);return a==="toolbar"&&this.extendToolbar(e),e}buildButtons(a,e){Array.from(a).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(!!o.startsWith("ql-")&&(o=o.slice(3),e[o]!=null))if(o==="direction")s.innerHTML=e[o][""]+e[o].rtl;else if(typeof e[o]=="string")s.innerHTML=e[o];else{const i=s.value||"";i!=null&&e[o][i]&&(s.innerHTML=e[o][i])}})})}buildPickers(a,e){this.pickers=Array.from(a).map(l=>{if(l.classList.contains("ql-align")&&(l.querySelector("option")==null&&Ms(l,tm),typeof e.align=="object"))return new ur(l,e.align);if(l.classList.contains("ql-background")||l.classList.contains("ql-color")){const o=l.classList.contains("ql-background")?"background":"color";return l.querySelector("option")==null&&Ms(l,am,o==="background"?"#ffffff":"#000000"),new xr(l,e[o])}return l.querySelector("option")==null&&(l.classList.contains("ql-font")?Ms(l,sm):l.classList.contains("ql-header")?Ms(l,lm):l.classList.contains("ql-size")&&Ms(l,nm)),new Zl(l)});const s=()=>{this.pickers.forEach(l=>{l.update()})};this.quill.on(Te.events.EDITOR_CHANGE,s)}}el.DEFAULTS=wa({},Bs.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const a=this.quill.getSelection(!0);this.quill.uploader.upload(a,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class mr extends dr{constructor(a,e){super(a,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",a=>{a.key==="Enter"?(this.save(),a.preventDefault()):a.key==="Escape"&&(this.cancel(),a.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:a!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${a}`)||""),this.root.setAttribute("data-mode",a)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:a}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",a,Te.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",a,Te.sources.USER)),this.quill.root.scrollTop=e;break}case"video":a=om(a);case"formula":{if(!a)break;const e=this.quill.getSelection(!0);if(e!=null){const s=e.index+e.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),a,Te.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",Te.sources.USER),this.quill.setSelection(s+2,Te.sources.USER)}break}}this.textbox.value="",this.hide()}}function om(n){let a=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return a?`${a[1]||"https"}://www.youtube.com/embed/${a[2]}?showinfo=0`:(a=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${a[1]||"https"}://player.vimeo.com/video/${a[2]}/`:n}function Ms(n,a){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;a.forEach(s=>{const l=document.createElement("option");s===e?l.setAttribute("selected","selected"):l.setAttribute("value",String(s)),n.appendChild(l)})}const im=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class rm extends mr{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(a,e){super(a,e),this.quill.on(Te.events.EDITOR_CHANGE,(s,l,o,i)=>{if(s===Te.events.SELECTION_CHANGE)if(l!=null&&l.length>0&&i===Te.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const r=this.quill.getLines(l.index,l.length);if(r.length===1){const x=this.quill.getBounds(l);x!=null&&this.position(x)}else{const x=r[r.length-1],c=this.quill.getIndex(x),f=Math.min(x.length()-1,l.index+l.length-c),p=this.quill.getBounds(new Ya(c,f));p!=null&&this.position(p)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Te.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const a=this.quill.getSelection();if(a!=null){const e=this.quill.getBounds(a);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(a){const e=super.position(a),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",e!==0&&(s.style.marginLeft=`${-1*e-s.offsetWidth/2}px`),e}}class pr extends el{constructor(a,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=im),super(a,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(a){this.tooltip=new rm(this.quill,this.options.bounds),a.container!=null&&(this.tooltip.root.appendChild(a.container),this.buildButtons(a.container.querySelectorAll("button"),Hs),this.buildPickers(a.container.querySelectorAll("select"),Hs))}}pr.DEFAULTS=wa({},el.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,ge.sources.USER)}}}}});const cm=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class xm extends mr{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",a=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),a.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",a=>{if(this.linkRange!=null){const e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,Te.sources.USER),delete this.linkRange}a.preventDefault(),this.hide()}),this.quill.on(Te.events.SELECTION_CHANGE,(a,e,s)=>{if(a!=null){if(a.length===0&&s===Te.sources.USER){const[l,o]=this.quill.scroll.descendant(Il,a.index);if(l!=null){this.linkRange=new Ya(a.index-o,l.length());const i=Il.formats(l.domNode);this.preview.textContent=i,this.preview.setAttribute("href",i),this.show();const r=this.quill.getBounds(this.linkRange);r!=null&&this.position(r);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class fr extends el{constructor(a,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=cm),super(a,e),this.quill.container.classList.add("ql-snow")}extendToolbar(a){a.container!=null&&(a.container.classList.add("ql-snow"),this.buildButtons(a.container.querySelectorAll("button"),Hs),this.buildPickers(a.container.querySelectorAll("select"),Hs),this.tooltip=new xm(this.quill,this.options.bounds),a.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,s)=>{a.handlers.link.call(a,!s.format.link)}))}}fr.DEFAULTS=wa({},el.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const a=this.quill.getSelection();if(a==null||a.length===0)return;let e=this.quill.getText(a);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:s}=this.quill.theme;s.edit("link",e)}else this.quill.format("link",!1,ge.sources.USER)}}}}});ge.register({"attributors/attribute/direction":Qi,"attributors/class/align":Gi,"attributors/class/background":fu,"attributors/class/color":pu,"attributors/class/direction":Ki,"attributors/class/font":ar,"attributors/class/size":lr,"attributors/style/align":Ji,"attributors/style/background":wo,"attributors/style/color":Fo,"attributors/style/direction":er,"attributors/style/font":sr,"attributors/style/size":nr},!0);ge.register({"formats/align":Gi,"formats/direction":Ki,"formats/indent":id,"formats/background":wo,"formats/color":Fo,"formats/font":ar,"formats/size":lr,"formats/blockquote":rd,"formats/code-block":Lt,"formats/header":cd,"formats/list":Ks,"formats/bold":Io,"formats/code":Po,"formats/italic":xd,"formats/link":Il,"formats/script":ud,"formats/strike":dd,"formats/underline":md,"formats/formula":pd,"formats/image":fd,"formats/video":gd,"modules/syntax":cr,"modules/table":vd,"modules/toolbar":No,"themes/bubble":pr,"themes/snow":fr,"ui/icons":Hs,"ui/picker":Zl,"ui/icon-picker":ur,"ui/color-picker":xr,"ui/tooltip":dr},!0);const um={props:{content:String,value:String,disabled:{type:Boolean,default:!1},options:{type:Object,default:()=>({})}},emits:["ready","change","input","blur","focus","update:value"],setup(n,{emit:a}){const e=n,s={theme:"snow",boundary:document.body,modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},placeholder:"Insert content here ...",readOnly:!1},l=f=>{const p=new MutationObserver(d=>{d.forEach(()=>{})});return p.observe(f,{childList:!0,subtree:!0}),p},o=V(null);let i=null,r="";const x=(f,p)=>{for(const d in p)!f[d]||d!=="modules"?f[d]=p[d]:x(f[d],p[d]);return f},c=()=>{if(o.value){const f=x(s,e.options);f.readOnly=!!e.disabled,i=new ge(o.value,f),e.value&&i.clipboard.dangerouslyPasteHTML(e.value),i.on("selection-change",p=>{a(p?"focus":"blur",i)}),i.on("text-change",()=>{e.disabled&&i.enable(!1);let p=o.value.children[0].innerHTML;const d=i.getText();p==="<p><br></p>"&&(p=""),r=p,a("update:value",r),a("change",{html:p,text:d,quill:i})}),a("ready",i)}};return xt(()=>e.value,f=>{i&&f!==r?(r=f,i.clipboard.dangerouslyPasteHTML(f)):f||i.setText("")}),xt(()=>e.disabled,f=>{i&&i.enable(!f)}),Ze(()=>{if(c(),o.value){const f=l(o.value);Hn(()=>{f.disconnect()})}}),Wr(()=>{const f=o.value.previousSibling;f&&f.nodeType===1&&f.className.indexOf("ql-toolbar")>-1&&f.parentNode.removeChild(f)}),Hn(()=>{i=null}),(f,p)=>(u(),B("section",{ref_key:"editor",ref:o},null,512))}};const dm={class:"am-desc-editor__header"},mm={class:"am-desc-editor__header-warning"},pm=m("span",{class:"am-icon-triangle-info"},null,-1),fm={key:1,class:"am-quill-wrapper"},gr={props:{modelValue:{type:String,default:""},mode:{type:String,default:"html"}},emits:["update:modelValue","setMode"],setup(n,{emit:a}){const e=n;let s=U("amLabels"),l=V(e.mode),o=b({get:()=>e.modelValue,set:p=>{a("update:modelValue",p)}});function i(){l.value="text",a("setMode","text")}function r(){l.value="html",a("setMode","html")}const x={theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]},readOnly:!1};let c=U("amColors",V({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#808A90",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),f=b(()=>({"--am-c-desce-text-op03":K(c.value.colorMainText,.03),"--am-c-desce-warn-op10":K(c.value.colorWarning,.1)}));return(p,d)=>t(l)?(u(),B("div",{key:0,class:"am-desc-editor",style:Be(t(f))},[m("div",dm,[N(Hr,null,{default:S(()=>[N(Fe,{category:t(l)==="text"?"primary":"secondary",type:t(l)==="text"?"filled":"plain",size:"small",onClick:i},{default:S(()=>[ce(w(t(s).text_mode),1)]),_:1},8,["category","type"]),N(Fe,{category:t(l)==="html"?"primary":"secondary",type:t(l)==="html"?"filled":"plain",size:"small",onClick:r},{default:S(()=>[ce(w(t(s).html_mode),1)]),_:1},8,["category","type"])]),_:1}),m("div",mm,[pm,ce(" "+w(t(s).content_mode_tooltip),1)])]),t(l)==="html"?(u(),Y(ct,{key:0,modelValue:t(o),"onUpdate:modelValue":d[0]||(d[0]=_=>De(o)?o.value=_:o=_),type:"textarea",rows:3,style:{width:"100%"}},null,8,["modelValue"])):I("",!0),t(l)==="text"?(u(),B("div",fm,[N(um,{value:t(o),"onUpdate:value":d[1]||(d[1]=_=>De(o)?o.value=_:o=_),options:x},null,8,["value"])])):I("",!0)],4)):I("",!0)}};const gm=["innerHTML"],hm={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n,s=Oe(),l=U("settings");let o=U("amLabels"),i=b(()=>s.getters["entities/getEmployee"](s.getters["employee/getId"])),r=b(()=>s.getters["entities/getLocations"]),x=b(()=>r.value.map(A=>({value:A.id,label:A.name}))),c=V(null),f=V(!1),p=V({firstName:b({get:()=>s.getters["employee/getFirstName"],set:A=>{s.commit("employee/setFirstName",A||"")}}),lastName:b({get:()=>s.getters["employee/getLastName"],set:A=>{s.commit("employee/setLastName",A||"")}}),email:b({get:()=>s.getters["employee/getEmail"],set:A=>{s.commit("employee/setEmail",A||"")}}),phone:b({get:()=>s.getters["employee/getPhone"],set:A=>{s.commit("employee/setPhone",A||"")}}),locationId:b({get:()=>s.getters["employee/getLocationId"],set:A=>{s.commit("employee/setLocationId",A||"")}}),description:b({get:()=>s.getters["employee/getDescription"],set:A=>{s.commit("employee/setDescription",A||"")}})}),d=b(()=>({firstName:[{required:!0,message:o.enter_first_name_warning,trigger:["submit","change"]}],lastName:[{required:!0,message:o.enter_last_name_warning,trigger:["submit","change"]}],email:[{required:!0,message:o.enter_email_warning,trigger:["submit","change"]}],locationId:[{required:r.value.filter(A=>A.status==="visible").length>0,message:o.enter_location_warning,trigger:["submit","change"]}]})),_=V({firstName:{template:We.text,props:{itemName:"firstName",label:o.first_name_colon,placeholder:o.enter_first_name,class:b(()=>`am-caepif__item ${e.responsiveClass}`)}},lastName:{template:We.text,props:{itemName:"lastName",label:o.last_name_colon,placeholder:o.enter_last_name,class:b(()=>`am-caepif__item ${e.responsiveClass}`)}},email:{template:We.text,props:{itemName:"email",label:o.email_colon,placeholder:o.enter_email,class:b(()=>`am-caepif__item ${e.responsiveClass}`)}},phone:{countryPhoneIso:b({get:()=>s.getters["auth/getProfile"].countryPhoneIso?s.getters["auth/getProfile"].countryPhoneIso:"",set:A=>{s.commit("auth/setProfileCountryPhoneIso",A?A.toLowerCase():"")}}),template:We.phone,props:{itemName:"phone",label:o.phone_colon,placeholder:o.enter_phone,defaultCode:b(()=>s.getters["auth/getProfile"].countryPhoneIso?s.getters["auth/getProfile"].countryPhoneIso:""),phoneError:b(()=>f.value),whatsAppLabel:o.whatsapp_opt_in_text,isWhatsApp:l.notifications.whatsAppEnabled&&l.notifications.whatsAppAccessToken&&l.notifications.whatsAppBusinessID&&l.notifications.whatsAppPhoneID,class:b(()=>`am-caepif__item ${e.responsiveClass}`)}}}),T=V({locationId:{template:We.select,props:{itemName:"locationId",label:`${o.location}:`,placeholder:o.select_location,class:b(()=>`am-caepif__item ${e.responsiveClass} ${l.zoom.enabled||"am-w-100"}`),options:x.value}}});return Gs(()=>{r.value.length||delete T.value.locationId}),a({employeeFormRef:c}),(A,E)=>{const P=vt,L=st;return u(),Y(L,{ref_key:"employeeFormRef",ref:c,model:t(p),rules:t(d),"label-position":"top",class:j(["am-caepif",e.responsiveClass])},{default:S(()=>[m("div",{class:j(["am-caepif__block",[{"am-w-70":t(i).pictureFullPath},e.responsiveClass]])},[(u(!0),B(ne,null,Ee(t(_),(D,h)=>(u(),Y(ft(D.template),Ft({key:h,ref_for:!0,ref:"customerCollectorRef",modelValue:t(p)[h],"onUpdate:modelValue":g=>t(p)[h]=g,countryPhoneIso:D.countryPhoneIso,"onUpdate:countryPhoneIso":g=>D.countryPhoneIso=g},D.props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"]))),128))],2),t(i).pictureFullPath?(u(),B("div",{key:0,class:j(["am-caepif__block am-w-30",e.responsiveClass])},[m("div",{class:"am-caepif__img",style:Be({backgroundImage:`url(${t(i).pictureFullPath})`})},null,4)],2)):I("",!0),m("div",{class:j(["am-caepif__block",e.responsiveClass])},[(u(!0),B(ne,null,Ee(t(T),(D,h)=>(u(),Y(ft(D.template),Ft({key:h,ref_for:!0,ref:"customerCollectorRef",modelValue:t(p)[h],"onUpdate:modelValue":g=>t(p)[h]=g},D.props,po(D.handlers?D.handlers:{})),{default:S(()=>[D.slots&&D.slots.default?(u(),B("div",{key:0,innerHTML:D.slots.default},null,8,gm)):I("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128)),N(P,{label:t(o).description_colon},{default:S(()=>[N(gr,{modelValue:t(p).description,"onUpdate:modelValue":E[0]||(E[0]=D=>t(p).description=D),mode:t(s).getters["employee/getDescriptionMode"],onSetMode:E[1]||(E[1]=D=>t(s).commit("employee/setDescriptionMode",D))},null,8,["modelValue","mode"])]),_:1},8,["label"])],2)]),_:1},8,["model","rules","class"])}}};const vm={class:"am-caes__category-header"},Em={class:"am-caes__category-header__text"},_m={class:"am-caes__service-header"},Cm={class:"am-caes__service-header__text"},ym={class:"am-caes__service-content"},bm={class:"am-caes__service-content__text"},Bm={class:"am-caes__service-content__text"},Am={class:"am-caes__service-content__text"},km={class:"am-caes__service-content__inner am-caes__service-content__disabled"},Dm={class:"am-caes__service-content__text"},Fm={class:"am-caes__service-content__text"},wm={class:"am-caes__service-content__inner am-caes__service-content__disabled"},Pm={class:"am-caes__service-content__text"},Tm={class:"am-caes__service-content__text"},Lm={class:"am-caes__service-content__inner am-caes__service-content__disabled"},Sm={class:"am-caes__service-content__text"},Im={class:"am-caes__service__week-days"},$m={class:"am-caes__service__week-periods"},Nm={class:"am-caes__service__week-periods-item-range"},Om=ce(" - "),Mm={class:"am-caes__service__date"},Vm=m("span",{class:"am-icon-calendar"},null,-1),Rm={class:"am-caes__service__week-periods"},qm={class:"am-caes__service__week-periods-item-range"},Um=ce(" - "),zm={name:"CabinetEmployeeProfileServices"},jm=Object.assign(zm,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=U("licence"),s=Oe(),l=U("amLabels"),o=V(""),i={components:{IconComponent:Ge},template:'<IconComponent icon="search"/>'},r=V([{label:"Mon",labelFull:"Monday",value:0},{label:"Tue",labelFull:"Tuesday",value:1},{label:"Wed",labelFull:"Wednesday",value:2},{label:"Thu",labelFull:"Thursday",value:3},{label:"Fri",labelFull:"Friday",value:4},{label:"Sat",labelFull:"Saturday",value:5},{label:"Sun",labelFull:"Sunday",value:6}]),x=V({}),c=b(()=>s.getters["employee/getEmployee"]),f=b(()=>s.getters["entities/getCategories"].filter(L=>L.status==="visible"&&L.serviceList.length>0&&(!o.value.trim()||L.serviceList.filter(D=>D.name.toLowerCase().includes(o.value.toLowerCase().trim())).length))),p=V(f.value.length===1?"category_"+f.value[0].id:null),d=V(0);function _(L){const D=L.serviceList.filter(h=>c.value.serviceList[L.id][h.id].enabled);return D.length>0&&D.length<L.serviceList.length}function T(L){const D=L.serviceList.filter(h=>c.value.serviceList[L.id][h.id].enabled);x.value[L.id]=D.length!==0}function A(L,D){D.serviceList.forEach(h=>{s.commit("employee/setServiceEnabled",{categoryId:D.id,serviceId:h.id,value:L})})}Ze(()=>{qs&&(r.value=r.value.map((L,D)=>({...L,label:wi[D],labelFull:Pi[D]}))),f.value.forEach(L=>{x.value[L.id]=L.serviceList.filter(D=>c.value.serviceList[L.id][D.id].enabled).length!==0})});let E=U("amColors"),P=b(()=>({"--am-c-caes-primary":E.value.colorPrimary,"--am-c-caes-primary-op03":K(E.value.colorPrimary,.3),"--am-c-caes-text":E.value.colorMainText,"--am-c-caes-text-op03":K(E.value.colorMainText,.03),"--am-c-caes-text-op50":K(E.value.colorMainText,.5),"--am-c-caes-inp-bgr-op03":K(E.value.colorInpBgr,.03),"--am-c-caes-border":E.value.colorInpBorder}));return(L,D)=>{const h=_a,g=Ca,y=Cs,k=ys;return u(),B("div",null,[m("div",null,[N(ct,{modelValue:t(o),"onUpdate:modelValue":D[0]||(D[0]=C=>De(o)?o.value=C:o=C),"prefix-icon":t(i),"aria-label":"Search"},null,8,["modelValue","prefix-icon"])]),N(k,{modelValue:t(p),"onUpdate:modelValue":D[2]||(D[2]=C=>De(p)?p.value=C:p=C),class:"am-caes",style:Be(t(P))},{default:S(()=>[(u(!0),B(ne,null,Ee(t(f),C=>(u(),Y(y,{key:"category_"+C.id,name:"category_"+C.id,class:"am-caes__category"},{title:S(()=>[m("div",vm,[N(ht,{modelValue:t(x)[C.id],"onUpdate:modelValue":F=>t(x)[C.id]=F,indeterminate:_(C),onClick:F=>{F.stopPropagation(),De(p)?p.value=`category_${C.id}`:p=`category_${C.id}`},onChange:F=>A(F,C),onKeydown:qo(F=>{F.stopPropagation(),De(p)?p.value=`category_${C.id}`:p=`category_${C.id}`,t(x)[C.id]=!t(x)[C.id],A(t(x)[C.id],C)},["enter"])},null,8,["modelValue","onUpdate:modelValue","indeterminate","onClick","onChange","onKeydown"]),m("div",Em,w(C.name),1)])]),default:S(()=>[N(k,{modelValue:t(d),"onUpdate:modelValue":D[1]||(D[1]=F=>De(d)?d.value=F:d=F),class:"am-caes__inner"},{default:S(()=>[(u(!0),B(ne,null,Ee(t(f).find(F=>F.id===C.id).serviceList.filter(F=>!t(o).trim()||F.name.toLowerCase().includes(t(o).toLowerCase())),F=>(u(),Y(y,{key:`service_${F.id}`,name:`service_${F.id}`,class:"am-caes__service"},{title:S(()=>[m("div",_m,[N(ht,{modelValue:t(c).serviceList[C.id][F.id].enabled,"onUpdate:modelValue":R=>t(c).serviceList[C.id][F.id].enabled=R,onClick:R=>{R.stopPropagation(),De(d)?d.value=`service_${F.id}`:d=`service_${F.id}`},onChange:R=>T(C),onKeydown:qo(R=>{R.stopPropagation(),De(d)?d.value=`service_${F.id}`:d=`service_${F.id}`,t(c).serviceList[C.id][F.id].enabled=!t(c).serviceList[C.id][F.id].enabled,T(C)},["enter"])},null,8,["modelValue","onUpdate:modelValue","onClick","onChange","onKeydown"]),m("div",Cm,w(F.name),1)])]),default:S(()=>[m("div",ym,[m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",bm,w(t(l).minimum_capacity),1),N(Ct,{modelValue:t(c).serviceList[C.id][F.id].minCapacity,"onUpdate:modelValue":R=>t(c).serviceList[C.id][F.id].minCapacity=R,class:"am-caes__service-content__inner",min:1,size:"small"},null,8,["modelValue","onUpdate:modelValue"])],2),m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",Bm,w(t(l).maximum_capacity),1),N(Ct,{modelValue:t(c).serviceList[C.id][F.id].maxCapacity,"onUpdate:modelValue":R=>t(c).serviceList[C.id][F.id].maxCapacity=R,class:"am-caes__service-content__inner",min:t(c).serviceList[C.id][F.id].minCapacity,size:"small","aria-label":t(l).maximum_capacity},null,8,["modelValue","onUpdate:modelValue","min","aria-label"])],2),(u(!0),B(ne,null,Ee(t(c).serviceList[C.id][F.id].customPricing.enabled==="duration"?t(c).serviceList[C.id][F.id].customPricing.durations:[],(R,M)=>(u(),B(ne,{key:M},[t(c).serviceList[C.id][F.id].customPricing.enabled==="duration"?(u(),B("div",{key:0,class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",Am,w(t(l).duration),1),m("div",km,w(t(hs)(M,t(l).h,t(l).min)),1)],2)):I("",!0),m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",Dm,w(t(l).price),1),N(ct,{modelValue:R.price,"onUpdate:modelValue":O=>R.price=O,class:"am-caes__service-content__inner",placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)],64))),128)),t(c).serviceList[C.id][F.id].customPricing.enabled==="period"||t(c).serviceList[C.id][F.id].customPricing.enabled===null?(u(),B("div",{key:0,class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",Fm,w(t(l).duration),1),m("div",wm,w(t(hs)(F.duration,t(l).h,t(l).min)),1)],2)):I("",!0),t(c).serviceList[C.id][F.id].customPricing.enabled==="period"||t(c).serviceList[C.id][F.id].customPricing.enabled===null?(u(),B("div",{key:1,class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",Pm,w(t(l).price),1),N(ct,{modelValue:t(c).serviceList[C.id][F.id].price,"onUpdate:modelValue":R=>t(c).serviceList[C.id][F.id].price=R,class:"am-caes__service-content__inner",placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)):I("",!0),(u(!0),B(ne,null,Ee(t(c).serviceList[C.id][F.id].customPricing.enabled==="person"?t(c).serviceList[C.id][F.id].customPricing.persons:[],(R,M)=>(u(),B(ne,{key:M},[m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",Tm,w(t(l).capacity),1),m("div",Lm,w(R.from)+" - "+w(M),1)],2),m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",Sm,w(t(l).price),1),N(ct,{modelValue:R.price,"onUpdate:modelValue":O=>R.price=O,class:"am-caes__service-content__inner",placeholder:"",size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue"])],2)],64))),128))]),t(c).serviceList[C.id][F.id].customPricing.enabled==="period"&&!t(e).isLite&&!t(e).isStarter&&!t(e).isBasic?(u(),Y(g,{key:0,class:"am-caes__service-tabs",stretch:!0},{default:S(()=>[t(c).serviceList[C.id][F.id].customPricing.periods.default.length?(u(),Y(h,{key:0,label:t(l).week_days},{default:S(()=>[(u(!0),B(ne,null,Ee(t(c).serviceList[C.id][F.id].customPricing.periods.default,(R,M)=>(u(),B("div",{key:M,class:"am-caes__service__week"},[m("div",Im,[(u(!0),B(ne,null,Ee(t(r),(O,H)=>(u(),B("div",{key:H,class:j(["am-caes__service__week-day",{"am-caes__service__week-day-selected":R.days.indexOf(O.value)!==-1}])},[m("span",null,w(O.label),1)],2))),128))]),m("div",$m,[(u(!0),B(ne,null,Ee(R.ranges,(O,H)=>(u(),B("div",{key:H,class:"am-caes__service__week-periods-item"},[m("div",Nm,[m("span",null,w(O.from),1),Om,m("span",null,w(O.to),1)]),m("div",{class:j([a.responsiveClass,"am-caes__service__week-periods-item-price"])},[N(ct,{modelValue:O.price,"onUpdate:modelValue":z=>O.price=z,placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)]))),128))])]))),128))]),_:2},1032,["label"])):I("",!0),t(c).serviceList[C.id][F.id].customPricing.periods.custom.length?(u(),Y(h,{key:1,label:t(l).custom_days},{default:S(()=>[(u(!0),B(ne,null,Ee(t(c).serviceList[C.id][F.id].customPricing.periods.custom,(R,M)=>(u(),B("div",{key:M,class:"am-caes__service__week"},[m("div",Mm,[Vm,ce(w(t(rt)(R.dates.start))+" - "+w(t(rt)(R.dates.end)),1)]),m("div",Rm,[(u(!0),B(ne,null,Ee(R.ranges,(O,H)=>(u(),B("div",{key:H,class:"am-caes__service__week-periods-item"},[m("div",qm,[m("span",null,w(O.from),1),Um,m("span",null,w(O.to),1)]),m("div",{class:j([a.responsiveClass,"am-caes__service__week-periods-item-price"])},[N(ct,{modelValue:O.price,"onUpdate:modelValue":z=>O.price=z,placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)]))),128))])]))),128))]),_:2},1032,["label"])):I("",!0)]),_:2},1024)):I("",!0)]),_:2},1032,["name"]))),128))]),_:2},1032,["modelValue"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])])}}});const it={props:{modelValue:{type:[Boolean,String,Number],default:!1},id:{type:String},name:{type:String},width:{type:[Number,String]},size:{type:String,default:"default",validator(n){return["large","default","small"].includes(n)}},validateEvent:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},activeText:{type:String},inactiveText:{type:String},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeIconClass:{type:String},inactiveIconClass:{type:String},activeIcon:{type:String},inactiveIcon:{type:String},beforeChange:{type:[Function,Boolean],default:()=>{}},borderColor:{type:String},inlinePrompt:{type:Boolean,default:!1},parentClass:{type:String},class:{type:String},ariaLabel:{type:String}},emits:["update:modelValue","change"],setup(n,{emit:a}){const e=n,{modelValue:s}=co(e),l=b({get:()=>s.value,set:x=>a("update:modelValue",x)}),o=V(null),i=U("amColors",V({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF",colorBtnWaiting:"#CCA20C",colorBtnWaitingText:"#FFFFFF",colorBtnDanger:"#B4190F",colorBtnDangerText:"#FFFFFF"})),r=b(()=>({"--am-c-switch-bgr-active":i.value.colorPrimary,"--am-c-switch-bgr-inactive":i.value.colorInpBorder,"--am-c-switch-action":i.value.colorMainBgr,"--am-c-switch-text":i.value.colorMainText}));return(x,c)=>{const f=Zr;return u(),B("div",{class:j(["am-switch-wrapper",n.parentClass]),style:Be(t(r))},[N(f,{id:n.id,ref_key:"amSwitch",ref:o,modelValue:t(l),"onUpdate:modelValue":c[0]||(c[0]=p=>De(l)?l.value=p:null),class:j(["am-switch",e.class]),name:n.name,width:n.width,size:n.size,"validate-event":n.validateEvent,loading:n.loading,disabled:n.disabled,"active-color":n.activeColor,"inactive-color":n.inactiveColor,"active-text":n.activeText,"inactive-text":n.inactiveText,"active-value":n.activeValue,"inactive-value":n.inactiveValue,"active-icon-class":n.activeIconClass,"inactive-icon-class":n.inactiveIconClass,"active-icon":n.activeIcon,"inactive-icon":n.inactiveIcon,"before-change":n.beforeChange,"border-color":n.borderColor,"inline-prompt":n.inlinePrompt,"aria-label":n.ariaLabel,onChange:c[1]||(c[1]=p=>a("change",p))},null,8,["id","modelValue","class","name","width","size","validate-event","loading","disabled","active-color","inactive-color","active-text","inactive-text","active-value","inactive-value","active-icon-class","inactive-icon-class","active-icon","inactive-icon","before-change","border-color","inline-prompt","aria-label"])],6)}}};const Fa={props:{modelValue:{type:String},id:{type:String,default:""},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},includeEndTime:{type:Boolean,default:!1},size:{type:String,default:"default",validator(n){return["default","medium","small","mini","micro"].includes(n)}},placeholder:{type:String,default:""},name:{type:String},effect:{type:String,default:"light",validator(n){return["dark","light"].includes(n)}},prefixIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="clock"/>'})},suffixIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="arrow-up"/>'})},clearIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="close"/>'})},start:{type:String,default:""},end:{type:String,default:""},step:{type:String,default:""},minTime:{type:String,default:""},maxTime:{type:String,default:""},format:{type:String,default:"HH:mm"},popperClass:{type:String,default:""},class:{type:String,default:""},parentClass:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:a}){const e=n,{modelValue:s}=co(e),l=b({get:()=>s.value,set:c=>{a("update:modelValue",c)}}),o=V(null);let i=U("amFonts",V({fontFamily:"Amelia Roboto, sans-serif",fontUrl:"",customFontFamily:"",fontFormat:"",customFontSelected:!1})),r=U("amColors",V({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#808A90",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),x=b(()=>({"--am-c-timeselect-shadow":K(r.value.colorInpText,.05),"--am-c-timeselect-text-op60":K(r.value.colorInpText,.6),"--am-c-timeselect-text-op40":K(r.value.colorInpText,.4),"--am-c-timeselect-text-op10":K(r.value.colorInpText,.03),"--am-font-family":i.value.fontFamily}));return Ze(()=>{const c=document.querySelector("[id^='el-popper-container']");c.style.setProperty("--am-c-option-bgr",r.value.colorDropBgr),c.style.setProperty("--am-c-option-border",r.value.colorDropBorder),c.style.setProperty("--am-c-option-text",r.value.colorDropText),c.style.setProperty("--am-c-option-text-op65",K(r.value.colorDropText,.65)),c.style.setProperty("--am-c-option-text-op50",K(r.value.colorDropText,.5)),c.style.setProperty("--am-c-option-hover",K(r.value.colorDropText,.1)),c.style.setProperty("--am-c-option-selected",r.value.colorPrimary),c.style.setProperty("--am-c-option-selected-op10",K(r.value.colorPrimary,.1)),c.style.setProperty("--am-c-option-img-bgr",r.value.colorSuccess),c.style.setProperty("--am-c-option-img-text",r.value.colorMainBgr),c.style.setProperty("--am-font-family",i.value.fontFamily)}),(c,f)=>{const p=Gr;return u(),B("div",{class:j(["am-time-select__wrapper",n.parentClass]),style:Be(t(x))},[N(p,{id:e.id,ref_key:"amTimeSelect",ref:o,modelValue:t(l),"onUpdate:modelValue":f[0]||(f[0]=d=>De(l)?l.value=d:null),class:j(["am-time-select",[`am-time-select--${n.size}`,{"am-time-select--disabled":n.disabled},{"am-time-select--prefix":e.prefixIcon},{"am-time-select--suffix":e.suffixIcon||e.clearIcon&&c.pross.clearable},e.class]]),disabled:e.disabled,placeholder:e.placeholder,"clear-icon":e.clearIcon,clearable:e.clearable,editable:e.editable,name:e.name,"popper-class":`am-time-select__popper${e.popperClass?" "+e.popperClass:e.popperClass}`,"prefix-icon":e.prefixIcon,"suffix-icon":e.suffixIcon,end:e.end,"max-time":e.maxTime,"min-time":e.minTime,start:e.start,step:e.step,format:e.format,"include-end-time":e.includeEndTime,effect:e.effect},null,8,["id","modelValue","class","disabled","placeholder","clear-icon","clearable","editable","name","popper-class","prefix-icon","suffix-icon","end","max-time","min-time","start","step","format","include-end-time","effect"])],6)}}};const Ym={class:"am-csd__period-header"},Wm={class:"am-csd__period-content__inner"},Hm=m("span",{class:"am-icon-clearable"},null,-1),Zm={name:"WorkPeriod"},Gm=Object.assign(Zm,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},origin:{type:String,default:""},periodIndex:{type:Number,default:0},originIndex:{type:Number,default:0},isNew:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("settings");let o=U("amLabels"),i=U("pageWidth"),r=V(null),x=b(()=>e.visibility);const{width:c}=Za(r),f=b(()=>ot(c.value));xt(x,X=>{X&&setTimeout(()=>{A.value=JSON.parse(JSON.stringify(y.value[e.periodIndex]))},300)});let p=V(!1),d=V(null),_=V("");function T(){p.value=!1,_.value=""}let A=V(null),E=V({startTime:b({get:()=>k.value.startTime,set:X=>{k.value.startTime=X}}),endTime:b({get:()=>k.value.endTime,set:X=>{k.value.endTime=X}}),periodServiceList:b({get:()=>k.value.periodServiceList,set:X=>{k.value.periodServiceList=X}}),periodLocationList:b({get:()=>k.value.periodLocationList,set:X=>{k.value.periodLocationList=X}})}),P=V(null),L=b(()=>({startTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}],endTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}]})),D=V();ze("formWrapper",D);let h=V(s.getters["entities/getLocations"]),g=b(()=>{let X=Ti(s),le=k.value.periodServiceList.filter(Q=>X.map(ue=>ue.id).indexOf(Q)===-1);return X.concat(s.getters["entities/getServices"].filter(Q=>le.indexOf(Q.id)!==-1))}),y=b(()=>s.getters["employee/getEmployee"][e.origin][e.originIndex].periodList),k=b(()=>e.periodIndex!==null?y.value[e.periodIndex]:null);function C(X){return Mt(Ut(X)-l.general.timeSlotLength)}function F(X){let le=Mt(Ut(X)+l.general.timeSlotLength);return le==="00:00"?null:le}function R(){P.value.validate(X=>{X&&a("close")})}function M(){e.isNew?y.value.pop():y.value[e.periodIndex]=A.value,a("close")}let O=U("amFonts"),H=U("amColors"),z=b(()=>({"--am-c-csd-text":H.value.colorMainText,"--am-c-csd-bgr":H.value.colorMainBgr,"--am-c-csd-text-op10":K(H.value.colorMainText,.1),"--am-c-scroll-op30":K(H.value.colorPrimary,.3),"--am-c-scroll-op10":K(H.value.colorPrimary,.1),"--am-font-family":O.value.fontFamily}));return(X,le)=>{const Q=vt,ue=st;return u(),Y(Sa,{visibility:t(e).visibility,style:Be(t(z)),"custom-class":`am-csd am-csd__period${t(i)<=400?" am-w-100":""}`,position:"center","onUpdate:visibility":M},Li({footer:S(()=>[m("div",{class:j(["am-csd__period-footer",t(f)])},[N(Fe,{category:"secondary",type:"plain",size:t(i)>430?"default":"small",onClick:M},{default:S(()=>[ce(w(t(o).cancel),1)]),_:1},8,["size"]),N(Fe,{size:t(i)>430?"default":"small",onClick:R},{default:S(()=>[ce(w(t(o).save),1)]),_:1},8,["size"])],2)]),default:S(()=>[t(k)?(u(),B("div",{key:0,ref_key:"popupPeriodRef",ref:r,class:"am-csd__period-content"},[m("div",Wm,[t(p)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:d,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:T,onTriggerClose:T},{title:S(()=>[Hm,ce(" "+w(t(_)),1)]),_:1},512)):I("",!0),N(ue,{ref_key:"periodFormRef",ref:P,class:"am-csd__period-form",rules:t(L),model:t(E),"label-position":"top"},{default:S(()=>[N(Q,{label:`${t(o).time}:`,prop:"startTime",class:j(["am-csd__period-form__item am-w-50",t(f)])},{default:S(()=>[N(Fa,{modelValue:t(k).startTime,"onUpdate:modelValue":le[0]||(le[0]=ee=>t(k).startTime=ee),placeholder:t(o).from,start:"00:00",end:C("24:00"),"min-time":t(e).periodIndex===0?null:C(t(y)[t(e).periodIndex-1].endTime),"max-time":t(e).periodIndex===t(y).length-1?null:t(k).endTime,step:t(Mt)(t(l).general.timeSlotLength)},null,8,["modelValue","placeholder","end","min-time","max-time","step"])]),_:1},8,["label","class"]),N(Q,{label:`${t(o).time}:`,prop:"endTime",class:j(["am-csd__period-form__item am-w-50",t(f)])},{default:S(()=>[N(Fa,{modelValue:t(k).endTime,"onUpdate:modelValue":le[1]||(le[1]=ee=>t(k).endTime=ee),placeholder:t(o).to_upper,disabled:!t(k).startTime,start:F("00:00"),end:"24:00","min-time":t(k).startTime,"max-time":t(e).periodIndex===t(y).length-1?null:F(t(y)[t(e).periodIndex+1].startTime),step:t(Mt)(t(l).general.timeSlotLength)},null,8,["modelValue","placeholder","disabled","start","min-time","max-time","step"])]),_:1},8,["label","class"]),N(Q,{label:`${t(o).heading_services}:`,prop:"periodServiceList",class:"am-csd__period-form__item"},{default:S(()=>[N(Je,{modelValue:t(k).periodServiceList,"onUpdate:modelValue":le[2]||(le[2]=ee=>t(k).periodServiceList=ee),placeholder:`${t(o).all_services}`,multiple:"",clearable:""},{default:S(()=>[(u(!0),B(ne,null,Ee(t(g),ee=>(u(),Y(Ye,{key:ee.id,value:ee.id,label:ee.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(h).length>0?(u(),Y(Q,{key:0,label:`${t(o).location}:`,prop:"periodLocationList",class:"am-csd__period-form__item"},{default:S(()=>[N(Je,{modelValue:t(k).periodLocationList,"onUpdate:modelValue":le[3]||(le[3]=ee=>t(k).periodLocationList=ee),placeholder:`${t(o).all_locations}`,multiple:"",clearable:""},{default:S(()=>[(u(!0),B(ne,null,Ee(t(h),ee=>(u(),Y(Ye,{key:ee.id,value:ee.id,label:ee.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):I("",!0)]),_:1},8,["rules","model"])])],512)):I("",!0)]),_:2},[t(e).title?{name:"header",fn:S(()=>[m("div",Ym,w(t(e).title),1)])}:void 0]),1032,["visibility","style","custom-class"])}}});const Jm={class:"am-csd__timeOut-header"},Xm={class:"am-csd__timeOut-content__inner"},Qm=m("span",{class:"am-icon-clearable"},null,-1),Km={name:"WorkTimeOut"},ep=Object.assign(Km,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},origin:{type:String,default:""},timeOutIndex:{type:Number,default:0},originIndex:{type:Number,default:0},isNew:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("settings");let o=U("amLabels"),i=U("pageWidth"),r=V(null),x=b(()=>e.visibility);const{width:c}=Za(r),f=b(()=>ot(c.value));xt(x,z=>{z&&setTimeout(()=>{A.value=JSON.parse(JSON.stringify(h.value[e.timeOutIndex]))},300)});let p=V(!1),d=V(null),_=V("");function T(){p.value=!1,_.value=""}let A=V(null),E=V({startTime:b({get:()=>y.value.startTime,set:z=>{y.value.startTime=z}}),endTime:b({get:()=>y.value.endTime,set:z=>{y.value.endTime=z}})}),P=V(null),L=b(()=>({startTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}],endTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}]})),D=V();ze("formWrapper",D);let h=b(()=>s.getters["employee/getEmployee"][e.origin][e.originIndex].timeOutList),g=b(()=>s.getters["employee/getEmployee"][e.origin][e.originIndex].periodList),y=b(()=>e.timeOutIndex!==null?h.value[e.timeOutIndex]:null);b(()=>g.value.length?C(g.value[0].startTime):"00:00"),b(()=>g.value.length?k(g.value[g.value.length-1].endTime):"00:00");function k(z){return Mt(Ut(z)-l.general.timeSlotLength)}function C(z){let X=Mt(Ut(z)+l.general.timeSlotLength);return X==="00:00"?null:X}function F(){P.value.validate(z=>{z&&a("close")})}function R(){e.isNew?h.value.pop():h.value[e.timeOutIndex]=A.value,a("close")}let M=U("amFonts"),O=U("amColors"),H=b(()=>({"--am-c-csd-text":O.value.colorMainText,"--am-c-csd-bgr":O.value.colorMainBgr,"--am-c-csd-text-op10":K(O.value.colorMainText,.1),"--am-c-scroll-op30":K(O.value.colorPrimary,.3),"--am-c-scroll-op10":K(O.value.colorPrimary,.1),"--am-font-family":M.value.fontFamily}));return(z,X)=>{const le=vt,Q=st;return u(),Y(Sa,{visibility:t(e).visibility,style:Be(t(H)),"custom-class":`am-csd am-csd__timeOut${t(i)<=400?" am-w-100":""}`,position:"center","onUpdate:visibility":R},Li({footer:S(()=>[m("div",{class:j(["am-csd__timeOut-footer",t(f)])},[N(Fe,{category:"secondary",type:"plain",size:t(i)>430?"default":"small",onClick:R},{default:S(()=>[ce(w(t(o).cancel),1)]),_:1},8,["size"]),N(Fe,{size:t(i)>430?"default":"small",onClick:F},{default:S(()=>[ce(w(t(o).save),1)]),_:1},8,["size"])],2)]),default:S(()=>[t(y)?(u(),B("div",{key:0,ref_key:"popupTimeOutRef",ref:r,class:"am-csd__timeOut-content"},[m("div",Xm,[t(p)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:d,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:T,onTriggerClose:T},{title:S(()=>[Qm,ce(" "+w(t(_)),1)]),_:1},512)):I("",!0),N(Q,{ref_key:"timeOutFormRef",ref:P,class:"am-csd__timeOut-form",rules:t(L),model:t(E),"label-position":"top"},{default:S(()=>[N(le,{label:`${t(o).time}:`,prop:"startTime",class:j(["am-csd__timeOut-form__item am-w-50",t(f)])},{default:S(()=>[N(Fa,{modelValue:t(y).startTime,"onUpdate:modelValue":X[0]||(X[0]=ue=>t(y).startTime=ue),placeholder:t(o).from,start:C(t(g)[0].startTime),end:k(t(g)[t(g).length-1].endTime),step:t(Mt)(t(l).general.timeSlotLength),"max-time":t(h)[t(e).timeOutIndex].endTime},null,8,["modelValue","placeholder","start","end","step","max-time"])]),_:1},8,["label","class"]),N(le,{label:`${t(o).time}:`,prop:"endTime",class:j(["am-csd__timeOut-form__item am-w-50",t(f)])},{default:S(()=>[N(Fa,{modelValue:t(y).endTime,"onUpdate:modelValue":X[1]||(X[1]=ue=>t(y).endTime=ue),placeholder:t(o).to_upper,disabled:!t(y).startTime,start:C(t(g)[0].startTime),end:k(t(g)[t(g).length-1].endTime),"min-time":t(h)[t(e).timeOutIndex].startTime,step:t(Mt)(t(l).general.timeSlotLength)},null,8,["modelValue","placeholder","disabled","start","end","min-time","step"])]),_:1},8,["label","class"])]),_:1},8,["rules","model"])])],512)):I("",!0)]),_:2},[t(e).title?{name:"header",fn:S(()=>[m("div",Jm,w(t(e).title),1)])}:void 0]),1032,["visibility","style","custom-class"])}}});const tp={class:"am-cc__edit"},ap=m("span",{class:"am-icon-edit"},null,-1),sp={class:"am-cc__edit-text"},lp=m("span",{class:"am-icon-search"},null,-1),np={class:"am-cc__edit-text"},op=m("span",{class:"am-icon-clearable"},null,-1),ip={class:"am-cc__edit-text"},rp=m("span",{class:"am-icon-clearable"},null,-1),cp={class:"am-cc__edit-text"},xp={name:"DotsPopup"},Ea=Object.assign(xp,{props:{index:{type:Number,default:0},referenceClass:{type:String,default:""},haveDuplicate:{type:Boolean,default:!1},haveDelete:{type:Boolean,default:!0},haveEdit:{type:Boolean,default:!0},haveView:{type:Boolean,default:!1}},emits:["remove","edit","duplicate"],setup(n,{emit:a}){const e=n;let s=U("amLabels"),l=V(!1);function o(){l.value=!0}function i(){a("edit",e.index),c()}function r(){a("remove",e.index),c()}function x(){a("duplicate",e.index),c()}function c(){l.value=!1}let f=U("amFonts"),p=U("amColors"),d=b(()=>({"--am-c-cc-error":p.value.colorError,"--am-c-cc-error-op15":K(p.value.colorError,.15),"--am-c-cc-bgr":p.value.colorMainBgr,"--am-c-cc-text":p.value.colorMainText,"--am-c-cc-text-op10":K(p.value.colorMainText,.1),"--am-c-cc-text-op15":K(p.value.colorMainText,.15),"--am-font-family":f.value.fontFamily}));return(_,T)=>{const A=bs;return u(),Y(A,{ref:"editRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(d),trigger:"click"},{reference:S(()=>[m("span",{class:j(["am-cc__edit-btn am-icon-dots-vertical",t(e).referenceClass]),onClick:o},null,2)]),default:S(()=>[$t((u(),B("div",tp,[t(e).haveEdit?(u(),B("div",{key:0,class:"am-cc__edit-item",onClick:i},[ap,m("span",sp,w(t(s).edit),1)])):I("",!0),t(e).haveView?(u(),B("div",{key:1,class:"am-cc__edit-item",onClick:i},[lp,m("span",np,w(t(s).view),1)])):I("",!0),t(e).haveDelete?(u(),B("div",{key:2,class:"am-cc__edit-item am-delete",onClick:r},[op,m("span",ip,w(t(s).delete),1)])):I("",!0),t(e).haveDuplicate?(u(),B("div",{key:3,class:"am-cc__edit-item am-clone",onClick:x},[rp,m("span",cp,w(t(s).duplicate),1)])):I("",!0)])),[[t(Qt),c]])]),_:1},8,["visible","popper-style"])}}});const up={class:"am-caeper__heading-item am-w-20"},dp={class:"am-caeper__heading-item am-w-40"},mp={class:"am-caeper__heading-item am-w-40"},pp={key:1},fp={class:"am-caeper__heading-item am-w-20"},gp={key:0,class:"am-caeper__error"},hp={name:"WorkPeriods"},hr=Object.assign(hp,{props:{title:{type:String,default:""},type:{type:String,default:""},index:{type:Number,default:0},enabled:{type:Boolean,default:!1},headerVisible:{type:Boolean,default:!0},applyToAllDaysVisible:{type:Boolean,default:!0},footerVisible:{type:Boolean,default:!0},editVisible:{type:Boolean,default:!0},error:{type:String,default:""},responsiveClass:{type:String,default:""}},emits:["addPeriod"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels"),o=b(()=>s.getters["entities/getLocations"]),i=b(()=>s.getters["entities/getServices"]),r=b(()=>Ti(s)),x=b(()=>{let L=s.getters["employee/getEmployee"];switch(e.type){case"weekDayList":return L.weekDayList[e.index].periodList;case"specialDayList":return L.specialDayList[e.index].periodList}return[]}),c=b(()=>{let L=s.getters["employee/getEmployee"];return e.type==="weekDayList"?L.weekDayList[e.index].timeOutList:[]}),f=V(null),p=V(null),d=V(null);function _(){x.value.push({id:null,locationId:null,startTime:"",endTime:"",periodLocationList:[],periodServiceList:[],editing:!0}),d.value=!0,f.value=x.value.length-1,a("addPeriod")}function T(){let L=[];s.getters["employee/getEmployee"].weekDayList[e.index].periodList.forEach(D=>{L.push({id:null,locationId:null,startTime:D.startTime,endTime:D.endTime,periodLocationList:[...D.periodLocationList],periodServiceList:[...D.periodServiceList],editing:!1})}),s.getters["employee/getEmployee"].weekDayList.forEach((D,h)=>{h!==e.index&&(D.periodList=JSON.parse(JSON.stringify(L)))})}function A(){return!x.value.length||!x.value.filter(L=>L.startTime&&L.endTime).length||x.value[x.value.length-1].endTime!=="00:00"}let E=U("amColors"),P=b(()=>({"--am-c-caeper-bgr":E.value.colorMainBgr,"--am-c-caeper-text":E.value.colorMainText,"--am-c-caeper-text-op80":K(E.value.colorMainText,.8)}));return(L,D)=>$t((u(),B("div",{class:"am-caeper",style:Be(t(P))},[t(e).headerVisible&&t(x).length?(u(),B("div",{key:0,class:j(["am-caeper__heading",t(e).responsiveClass])},[m("div",up,w(t(l).time),1),m("div",dp,w(t(l).service_colon),1),m("div",mp,w(t(l).location),1)],2)):I("",!0),(u(!0),B(ne,null,Ee(t(x),(h,g)=>(u(),B("div",{key:g,class:"am-caeper__content"},[m("div",{class:j(["am-caeper__content-item am-w-20",t(e).responsiveClass])},w(h.startTime?h.startTime.substring(0,5):"")+" - "+w(h.endTime?h.endTime.substring(0,5):""),3),m("div",{class:j(["am-caeper__content-item am-w-40",[t(e).responsiveClass,{"am-cabinet-empty":!h.periodServiceList.length}]])},w(h.periodServiceList.filter(y=>t(r).map(k=>k.id).indexOf(y)!==-1).map(y=>t(i).find(k=>k.id===y).name).join(", ")),3),m("div",{class:j(["am-caeper__content-item am-w-40",[t(e).responsiveClass,{"am-cabinet-empty":!h.periodLocationList.length}]])},w(h.periodLocationList.map(y=>t(o).find(k=>k.id===y).name).join(", ")),3),t(e).editVisible?(u(),Y(Ea,{key:0,index:g,onRemove:y=>t(x).splice(g,1),onEdit:y=>De(f)?f.value=g:f=g},null,8,["index","onRemove","onEdit"])):I("",!0)]))),128)),t(c).length?(u(),B("span",pp,w(t(l).breaks),1)):I("",!0),t(e).headerVisible&&t(c).length?(u(),B("div",{key:2,class:j(["am-caeper__heading",t(e).responsiveClass])},[m("div",fp,w(t(l).time),1)],2)):I("",!0),(u(!0),B(ne,null,Ee(t(c),(h,g)=>(u(),B("div",{key:g,class:"am-caeper__content"},[m("div",{class:j(["am-caeper__content-item am-w-20",t(e).responsiveClass])},w(h.startTime?h.startTime.substring(0,5):"")+" - "+w(h.endTime?h.endTime.substring(0,5):""),3),t(e).editVisible?(u(),Y(Ea,{key:0,index:g,onRemove:y=>t(c).splice(g,1),onEdit:y=>De(p)?p.value=g:p=g},null,8,["index","onRemove","onEdit"])):I("",!0)]))),128)),t(e).footerVisible?(u(),B("div",{key:3,class:j(["am-caeper__footer",[{"am-error":t(e).error},t(e).responsiveClass]])},[t(e).error?(u(),B("div",gp,w(t(e).error),1)):I("",!0),A()?(u(),Y(Fe,{key:1,prefix:"plus",size:"small",onClick:D[0]||(D[0]=h=>_())},{default:S(()=>[ce(w(t(l).add_period),1)]),_:1})):I("",!0),t(e).applyToAllDaysVisible?(u(),Y(Fe,{key:2,size:"small",category:"secondary",type:"plain",onClick:T},{default:S(()=>[ce(w(t(l).apply_to_all_days),1)]),_:1})):I("",!0)],2)):I("",!0),N(Gm,{title:t(e).title,visibility:t(f)!==null,origin:t(e).type,"period-index":t(f),"origin-index":n.index,"is-new":t(d),onClose:D[1]||(D[1]=()=>{De(f)?f.value=null:f=null,De(d)?d.value=null:d=null})},null,8,["title","visibility","origin","period-index","origin-index","is-new"]),N(ep,{title:t(l).break_hours,visibility:t(p)!==null,origin:t(e).type,"time-out-index":t(p),"origin-index":n.index,"is-new":!1,"is-break":!0,onClose:D[2]||(D[2]=()=>{De(p)?p.value=null:p=null})},null,8,["title","visibility","origin","time-out-index","origin-index"])],4)),[[fo,t(e).enabled]])}});const vp={class:"am-caewh__header"},Ep={class:"am-caewh__header-text"},_p={class:"am-caewh__content"},Cp={name:"WeekDays"},yp=Object.assign(Cp,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=Oe(),s=U("amLabels"),l=b(()=>e.getters["employee/getEmployee"]),o=V([{label:s.weekday_monday,value:"monday"},{label:s.weekday_tuesday,value:"tuesday"},{label:s.weekday_wednesday,value:"wednesday"},{label:s.weekday_thursday,value:"thursday"},{label:s.weekday_friday,value:"friday"},{label:s.weekday_saturday,value:"saturday"},{label:s.weekday_sunday,value:"sunday"}]),i=U("amColors"),r=b(()=>({"--am-c-caewh-primary":i.value.colorPrimary,"--am-c-caewh-bgr":i.value.colorMainBgr,"--am-c-caewh-text":i.value.colorMainText,"--am-c-caewh-text-op03":K(i.value.colorMainText,.03),"--am-c-caewh-bgr-op03":K(i.value.colorInpBgr,.03)}));return(x,c)=>(u(),B("div",{class:"am-caewh",style:Be(t(r))},[(u(!0),B(ne,null,Ee(t(l).weekDayList,(f,p)=>(u(),B("div",{key:p,class:"am-caewh__item"},[m("div",vp,[m("div",Ep,w(t(o)[p].label),1),N(it,{modelValue:f.enabled,"onUpdate:modelValue":d=>f.enabled=d,size:"small","aria-label":t(o)[p].label},null,8,["modelValue","onUpdate:modelValue","aria-label"])]),m("div",_p,[N(hr,{title:t(s).working_hours,enabled:f.enabled,index:p,type:"weekDayList","responsive-class":t(a).responsiveClass},null,8,["title","enabled","index","responsive-class"])])]))),128))],4))}});const bp={class:"am-caesd__item"},Bp={class:"am-caesd__item-header"},Ap={key:2},kp={key:0,class:"am-caesd__footer"},Dp={name:"SpecialDays"},Fp=Object.assign(Dp,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=Oe(),s=U("amLabels"),l=U("localLanguage"),o=b(()=>e.getters["employee/getEmployee"].specialDayList),i=tt({data:null,index:null}),r=V({range:b({get:()=>e.getters["employee/getEmployee"].specialDayList[i.index].range,set:h=>{e.getters["employee/getEmployee"].specialDayList[i.index].range=h}})}),x=V([]),c=b(()=>({range:[{required:!0,message:s.select_date_warning,trigger:["submit","change"]}]}));function f(h){o.value.splice(h,1)}function p(h){i.index=h,i.data=JSON.parse(JSON.stringify(o.value[h]))}function d(h){let g=[];o.value[h].periodList.forEach(y=>{g.push({id:null,locationId:null,startTime:y.startTime,endTime:y.endTime,periodLocationList:[...y.periodLocationList],periodServiceList:[...y.periodServiceList],editing:!1})}),e.getters["employee/getEmployee"].specialDayList.push({id:null,range:[],periodList:g}),i.index=o.value.length-1,i.data={}}let _=V("");function T(h){let g=e.getters["employee/getEmployee"].specialDayList[h].periodList;x.value[h].validate(y=>{y&&g.length>0?(_.value="",i.index=null,i.data=null):_.value="Please add period to special day"})}function A(h){Object.keys(i.data).length===0?o.value.pop():o.value[h]=i.data,i.index=null,i.data=null,_.value=""}function E(){o.value.push({id:null,range:[],periodList:[]}),i.index=o.value.length-1,i.data={}}function P(h,g){h?x.value[g]=h:x.value.splice(g,1)}let L=U("amColors"),D=b(()=>({"--am-c-caesd-bgr":L.value.colorMainBgr,"--am-c-caesd-text":L.value.colorMainText,"--am-c-caesd-text-op03":K(L.value.colorMainText,.03),"--am-c-caesd-text-op80":K(L.value.colorMainText,.8)}));return(h,g)=>{const y=vt,k=st;return u(),B("div",{class:"am-caesd",style:Be(t(D))},[(u(!0),B(ne,null,Ee(t(o),(C,F)=>(u(),B("div",{key:F,class:"am-caesd__content"},[m("div",bp,[m("div",Bp,[t(i).index!==F?(u(),B(ne,{key:0},[m("div",null,w(C.range[0]?t(rt)(t(Ce)(C.range[0]).format("YYYY-MM-DD")):"")+" - "+w(C.range[1]?t(rt)(t(Ce)(C.range[1]).format("YYYY-MM-DD")):""),1),N(Ea,{index:F,"have-duplicate":!0,onRemove:R=>f(F),onEdit:R=>p(F),onDuplicate:R=>d(F)},null,8,["index","onRemove","onEdit","onDuplicate"])],64)):I("",!0),t(i).index===F?(u(),Y(k,{key:1,ref_for:!0,ref:R=>P(R,F),class:"am-caesd__form",rules:t(c),model:t(r),"label-position":"top"},{default:S(()=>[N(y,{prop:"range"},{default:S(()=>[N(ea,{modelValue:t(r).range,"onUpdate:modelValue":g[0]||(g[0]=R=>t(r).range=R),type:"daterange",size:"small","popper-class":"am-cap__datepicker-popper","prefix-icon":Qe({components:{IconComponent:Ge},template:"<IconComponent icon='calendar'/>"}),format:t(Kt)(),placeholder:t(s).select_date,lang:t(l)},null,8,["modelValue","prefix-icon","format","placeholder","lang"])]),_:1})]),_:2},1032,["rules","model"])):I("",!0),t(_)?(u(),B("div",Ap)):I("",!0)]),m("div",{class:j(["am-caesd__item-inner",{"am-editable":t(i).index===F}])},[N(hr,{title:t(s).special_days,enabled:!0,index:F,type:"specialDayList","apply-to-all-days-visible":!1,"header-visible":t(i).index===F,"edit-visible":t(i).index===F,"footer-visible":t(i).index===F,error:t(i).index===F?t(_):"","responsive-class":t(a).responsiveClass,onAddPeriod:g[1]||(g[1]=()=>{De(_)?_.value="":_=""})},null,8,["title","index","header-visible","edit-visible","footer-visible","error","responsive-class"])],2)]),t(i).index===F?(u(),B("div",kp,[N(Fe,{category:"secondary",type:"plain",size:"small",onClick:R=>A(F)},{default:S(()=>[ce(w(t(s).cancel),1)]),_:2},1032,["onClick"]),N(Fe,{size:"small",onClick:R=>T(F)},{default:S(()=>[ce(w(t(s).save),1)]),_:2},1032,["onClick"])])):I("",!0)]))),128)),t(o).length===0?(u(),Y(Ta,{key:0,heading:t(s).no_special_days_yet},null,8,["heading"])):I("",!0),t(i).index===null?(u(),B("div",{key:1,class:j(t(o).length===0?"add-btn":"")},[N(Fe,{size:"small",onClick:g[2]||(g[2]=C=>E())},{default:S(()=>[ce(w(t(s).add_special_day),1)]),_:1})],2)):I("",!0)],4)}}});const wp={key:0,class:"am-caedo__title_emp"},Pp={class:"am-caedo__heading-item am-w-50"},Tp={class:"am-caedo__heading-item am-w-30"},Lp={class:"am-caedo__heading-item am-w-20"},Sp={class:"am-caedo__content-item"},Ip={key:0,class:"am-caedo__wrapper"},$p={class:"am-caedo__footer"},Np={key:4,class:"am-caedo__title_global"},Op={class:"am-caedo__heading-item am-w-50"},Mp={class:"am-caedo__heading-item am-w-30"},Vp={class:"am-caedo__heading-item am-w-20"},Rp={class:"am-caedo__content-item"},qp={name:"DaysOff"},Up=Object.assign(qp,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=Oe(),s=U("amLabels"),l=U("localLanguage");const o=U("settings");let i=b(()=>e.getters["employee/getEmployee"].dayOffList),r=V([]),x=tt({data:null,index:null}),c=V({range:b({get:()=>e.getters["employee/getEmployee"].dayOffList[x.index].range,set:g=>{e.getters["employee/getEmployee"].dayOffList[x.index].range=g}}),name:b({get:()=>e.getters["employee/getEmployee"].dayOffList[x.index].name,set:g=>{e.getters["employee/getEmployee"].dayOffList[x.index].name=g}}),repeat:b({get:()=>e.getters["employee/getEmployee"].dayOffList[x.index].repeat,set:g=>{e.getters["employee/getEmployee"].dayOffList[x.index].repeat=g}})}),f=V([]),p=b(()=>({range:[{required:!0,message:s.select_date_warning,trigger:["submit","change"]}],name:[{required:!0,message:s.days_off_name_warning,trigger:["submit","change"]}]}));function d(g){i.value.splice(g,1)}function _(g){x.index=g,x.data=JSON.parse(JSON.stringify(i.value[g]))}function T(g){f.value[g].validate(y=>{y&&(x.index=null,x.data=null)})}function A(g){Object.keys(x.data).length===0?i.value.pop():i.value[g]=x.data,x.index=null,x.data=null}function E(){i.value.push({id:null,name:"",repeat:!1,range:[]}),x.index=i.value.length-1,x.data={}}function P(g){let y=g.range[0]?rt(Ce(g.range[0]).format("YYYY-MM-DD")):"",k=g.range[1]?rt(Ce(g.range[1]).format("YYYY-MM-DD")):"";return`${y} - ${k}`}function L(g,y){g?f.value[y]=g:f.value.splice(y,1)}Ze(()=>{r.value=o.daysOff.map(g=>new Object({range:[g.startDate,g.endDate],name:g.name,repeat:g.repeat}))});let D=U("amColors"),h=b(()=>({"--am-c-caedo-bgr":D.value.colorMainBgr,"--am-c-caedo-text":D.value.colorMainText,"--am-c-caedo-text-op80":K(D.value.colorMainText,.8),"--am-c-caedo-text-op03":K(D.value.colorMainText,.03)}));return(g,y)=>{const k=vt,C=st;return u(),B("div",{class:"am-caedo",style:Be(t(h))},[t(r).length?(u(),B("span",wp,w(t(s).employee_days_off),1)):I("",!0),t(i).length||t(r).length?(u(),B("div",{key:1,class:j(["am-caedo__heading",t(a).responsiveClass])},[m("div",Pp,w(t(s).date),1),m("div",Tp,w(t(s).name),1),m("div",Lp,w(t(s).days_off_repeat_yearly),1)],2)):I("",!0),(u(!0),B(ne,null,Ee(t(i),(F,R)=>(u(),B("div",{key:R,class:"am-caedo__content"},[m("div",Sp,[m("div",{class:j(["am-caedo__content-item__inner am-w-50",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).date),3),ce(" "+w(P(F)),1)],2),m("div",{class:j(["am-caedo__content-item__inner am-w-30",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).name),3),ce(" "+w(F.name),1)],2),m("div",{class:j(["am-caedo__content-item__inner am-w-20",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).days_off_repeat_yearly),3),ce(" "+w(F.repeat?t(s).yes:t(s).no),1)],2),t(x).index===null?(u(),Y(Ea,{key:0,index:R,onRemove:M=>d(R),onEdit:M=>_(R)},null,8,["index","onRemove","onEdit"])):I("",!0)]),t(x).index===R?(u(),B("div",Ip,[N(C,{ref_for:!0,ref:M=>L(M,R),class:"am-caedo__form",rules:t(p),model:t(c),"label-position":"top"},{default:S(()=>[N(k,{label:`${t(s).date}:`,prop:"range"},{default:S(()=>[N(ea,{modelValue:t(c).range,"onUpdate:modelValue":y[0]||(y[0]=M=>t(c).range=M),type:"daterange","popper-class":"am-cap__datepicker-popper",format:t(Kt)(),placeholder:t(s).select_date,lang:t(l)},null,8,["modelValue","format","placeholder","lang"])]),_:1},8,["label"]),N(k,{label:`${t(s).name}:`,prop:"name"},{default:S(()=>[N(ct,{modelValue:t(c).name,"onUpdate:modelValue":y[1]||(y[1]=M=>t(c).name=M)},null,8,["modelValue"])]),_:1},8,["label"]),N(k,{prop:"repeat"},{default:S(()=>[N(ht,{modelValue:t(c).repeat,"onUpdate:modelValue":y[2]||(y[2]=M=>t(c).repeat=M),label:t(s).days_off_repeat_yearly},null,8,["modelValue","label"])]),_:1})]),_:2},1032,["rules","model"]),m("div",$p,[N(Fe,{category:"secondary",size:"small",type:"plain",onClick:M=>A(R)},{default:S(()=>[ce(w(t(s).cancel),1)]),_:2},1032,["onClick"]),N(Fe,{size:"small",onClick:M=>T(R)},{default:S(()=>[ce(w(t(s).save),1)]),_:2},1032,["onClick"])])])):I("",!0)]))),128)),t(i).length===0&&t(r).length===0?(u(),Y(Ta,{key:2,heading:t(s).no_days_off_yet},null,8,["heading"])):I("",!0),t(x).index===null?(u(),B("div",{key:3,class:j(t(i).length===0&&t(r).length===0?"add-btn":"")},[N(Fe,{size:"small",onClick:y[3]||(y[3]=F=>E())},{default:S(()=>[ce(w(t(s).add_day_off),1)]),_:1})],2)):I("",!0),t(r).length?(u(),B("span",Np,w(t(s).company_days_off),1)):I("",!0),t(r).length?(u(),B("div",{key:5,class:j(["am-caedo__heading",t(a).responsiveClass])},[m("div",Op,w(t(s).date),1),m("div",Mp,w(t(s).name),1),m("div",Vp,w(t(s).days_off_repeat_yearly),1)],2)):I("",!0),(u(!0),B(ne,null,Ee(t(r),(F,R)=>(u(),B("div",{key:R,class:"am-caedo__content"},[m("div",Rp,[m("div",{class:j(["am-caedo__content-item__inner am-w-50",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).date),3),ce(" "+w(P(F)),1)],2),m("div",{class:j(["am-caedo__content-item__inner am-w-30",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).name),3),ce(" "+w(F.name),1)],2),m("div",{class:j(["am-caedo__content-item__inner am-w-20",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).days_off_repeat_yearly),3),ce(" "+w(F.repeat?t(s).yes:t(s).no),1)],2)])]))),128))],4)}}});const zp={class:"am-cc__edit"},jp={class:"am-cc__edit-text"},Yp={class:"am-cc__edit-text"},Wp={class:"am-cc__edit"},Hp={class:"am-cc__edit-text"},Zp={class:"am-cc__edit-text"},Gp={class:"am-cc__edit"},Jp={class:"am-cc__edit-text"},Xp={class:"am-cc__edit-text"},Qp={name:"StripeConnect"},Kp=Object.assign(Qp,{setup(n){let a=Oe(),e=U("amLabels"),s=b(()=>a.getters["auth/getStripeProvider"]),l=V(!1);function o(_){_.stopPropagation(),l.value=!l.value}function i(_){Cc(a,_),c()}function r(){bc(a),c()}function x(){yc(a),c()}function c(){l.value=!1}let f=U("amFonts"),p=U("amColors"),d=b(()=>({"--am-c-cc-error":p.value.colorError,"--am-c-cc-error-op15":K(p.value.colorError,.15),"--am-c-cc-bgr":p.value.colorMainBgr,"--am-c-cc-text":p.value.colorMainText,"--am-c-cc-text-op10":K(p.value.colorMainText,.1),"--am-c-cc-text-op15":K(p.value.colorMainText,.15),"--am-font-family":f.value.fontFamily}));return(_,T)=>{const A=bs;return t(s)&&t(s).id&&t(s).completed?(u(),Y(A,{key:0,ref:"stripeConnectRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(d),trigger:"click"},{reference:S(()=>[N(Fe,{onClick:o},{default:S(()=>[ce(w(t(e).stripe_connect)+" "+w("("+(t(s).email?t(s).email:t(s).id)+")"),1)]),_:1})]),default:S(()=>[$t((u(),B("div",zp,[m("div",{class:"am-cc__edit-item",onClick:T[0]||(T[0]=E=>r())},[m("span",jp,w(t(e).stripe_preview),1)]),m("div",{class:"am-cc__edit-item",onClick:T[1]||(T[1]=E=>x())},[m("span",Yp,w(t(e).disconnect),1)])])),[[t(Qt),c]])]),_:1},8,["visible","popper-style"])):t(s)&&t(s).id&&!t(s).completed?(u(),Y(A,{key:1,ref:"stripeConnectRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(d),trigger:"click"},{reference:S(()=>[N(Fe,{onClick:o},{default:S(()=>[ce(w(t(e).stripe_connect)+" "+w("("+(t(s).email?t(s).email:t(s).id)+")"),1)]),_:1})]),default:S(()=>[$t((u(),B("div",Wp,[m("div",{class:"am-cc__edit-item",onClick:T[2]||(T[2]=E=>i(t(s).type))},[m("span",Hp,w(t(e).stripe_onboard),1)]),m("div",{class:"am-cc__edit-item",onClick:T[3]||(T[3]=E=>x())},[m("span",Zp,w(t(e).disconnect),1)])])),[[t(Qt),c]])]),_:1},8,["visible","popper-style"])):(u(),Y(A,{key:2,ref:"stripeConnectRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(d),trigger:"click"},{reference:S(()=>[N(Fe,{onClick:o},{default:S(()=>[ce(w(t(e).stripe_connect),1)]),_:1})]),default:S(()=>[$t((u(),B("div",Gp,[m("div",{class:"am-cc__edit-item",onClick:T[4]||(T[4]=E=>i("standard"))},[m("span",Jp,w(t(e).stripe_account_standard),1)]),m("div",{class:"am-cc__edit-item",onClick:T[5]||(T[5]=E=>i("express"))},[m("span",Xp,w(t(e).stripe_account_express),1)])])),[[t(Qt),c]])]),_:1},8,["visible","popper-style"]))}}});const ef=["innerHTML"],tf={key:2,class:"am-caedo__apple"},af={class:"am-caedo__apple__connect"},sf={props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=V(""),s=V("error"),l=V(!1);function o(){l.value=!1,e.value=""}const i=Oe(),r=U("baseUrls"),x=U("settings");let c=U("amLabels"),f=b(()=>i.getters["auth/getGoogleLoading"]||i.getters["auth/getOutlookLoading"]||i.getters["auth/getAppleLoading"]||i.getters["auth/getStripeLoading"]||i.getters["auth/getZoomLoading"]),p=b(()=>{let k=i.getters["auth/getZoomUsers"];return k.length?k.map(C=>({value:C.id,label:`${C.first_name} ${C.last_name} (${C.email})`})):[]}),d=b(()=>{let k=i.getters["auth/getGoogleCalendars"];return k.length?k.map(C=>({value:C.calendarId?C.calendarId:C.id,label:C.summary})):[]}),_=b(()=>{let k=i.getters["auth/getOutlookCalendars"];return k.length?k.map(C=>({value:C.id,label:C.name})):[]}),T=b(()=>{let k=i.getters["auth/getAppleCalendars"];return k.length?k.map(C=>({value:C.id,label:C.name})):[]}),A=V(null),E=V({iCloudId:b({get:()=>i.getters["employee/getEmployeeAppleCalendarICloudId"],set:k=>{i.commit("employee/setEmployeeAppleCalendarICloudId",k||"")}}),appSpecificPassword:b({get:()=>i.getters["employee/getEmployeeAppleCalendarAppSpecificPassword"],set:k=>{i.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",k||null)}})}),P=b(()=>i.getters["employee/getGoogleToken"]?c.google_sign_out:c.google_sign_in),L=b(()=>i.getters["employee/getOutlookToken"]?c.outlook_sign_out:c.outlook_sign_in),D=V({googleId:b({get:()=>i.getters["employee/getGoogleToken"]?i.getters["employee/getGoogleCalendarId"]:i.getters["employee/getUserTableGoogleCalendarId"],set:k=>{i.getters["employee/getGoogleToken"]?i.commit("employee/setGoogleCalendarId",k||""):i.commit("employee/setEmployeeGoogleCalendarId",k||"")}}),googleBtn:"",outlookId:b({get:()=>i.getters["employee/getOutlookToken"]?i.getters["employee/getOutlookCalendarId"]:i.getters["employee/getUserTableOutlookCalendarId"],set:k=>{i.getters["employee/getOutlookToken"]?i.commit("employee/setOutlookCalendarId",k||""):i.commit("employee/setEmployeeOutlookCalendarId",k||"")}}),outlookBtn:"",zoomUserId:b({get:()=>i.getters["employee/getZoomUserId"],set:k=>{i.commit("employee/setZoomUserId",k||"")}}),appleId:b({get:()=>i.getters["employee/getAppleCalendarId"],set:k=>{i.commit("employee/setAppleCalendarId",k||"")}})}),h=V({googleId:{template:We.select,props:{itemName:"googleId",label:c.google_calendar,placeholder:"",class:b(()=>`am-caepif__item ${a.responsiveClass}`),disabled:b(()=>!i.getters["employee/getGoogleToken"]),clearable:!1,options:d.value,loading:b(()=>i.getters["auth/getGoogleLoading"]),loadingIcon:"loading"}},googleBtn:{template:Qe(Fe),props:{class:b(()=>`am-caepif__item am-google-calendar-button ${a.responsiveClass}`),category:b(()=>"primary"),disabled:b(()=>!!i.getters["employee/getUserTableGoogleCalendarId"])},slots:{default:b(()=>`<img src="${r.wpAmeliaPluginURL}/v3/src/assets/img/cabinet/google-button.svg" alt="Google" />${P.value}`)},handlers:{click:()=>{i.getters["employee/getGoogleToken"]?fc(i):pc(i)}}},outlookId:{template:We.select,props:{itemName:"outlookId",label:c.outlook_calendar,placeholder:"",class:b(()=>`am-caepif__item ${a.responsiveClass}`),disabled:b(()=>!i.getters["employee/getOutlookToken"]),clearable:!1,options:_.value,loading:b(()=>i.getters["auth/getOutlookLoading"]),loadingIcon:"loading"}},outlookBtn:{template:Qe(Fe),props:{class:b(()=>`am-caepif__item am-outlook-button ${a.responsiveClass}`),category:b(()=>"primary"),disabled:b(()=>!!i.getters["employee/getUserTableOutlookCalendarId"])},slots:{default:b(()=>`<div class="am-outlook-img"><img src="${r.wpAmeliaPluginURL}/v3/src/assets/img/cabinet/outlook-calendar.png" alt="Outlook"/></div>${L.value}`)},handlers:{click:()=>{i.getters["employee/getOutlookToken"]?vc(i):hc(i)}}},zoomUserId:{template:We.select,props:{itemName:"zoomUserId",label:c.zoom_user,placeholder:c.zoom_user_placeholder,class:b(()=>`am-caepif__item ${a.responsiveClass}`),options:p.value}},appleId:{template:We.select,props:{itemName:"appleId",label:c.apple_calendar,placeholder:c.apple_calendar_placeholder,class:b(()=>`am-caepif__item ${a.responsiveClass}`),disabled:!1,clearable:b(()=>!Aa.value),options:b(()=>T.value),loading:b(()=>i.getters["auth/getAppleLoading"]),loadingText:"Loading..."}}});Ze(()=>{x.appleCalendar&&A.value&&(A.value.contentVisibility=Aa.value)}),Gs(()=>{x.zoom.enabled||delete h.value.zoomUserId,x.googleCalendar.enabled||delete h.value.googleId,x.googleCalendar.enabled||delete h.value.googleBtn,x.outlookCalendar.enabled||delete h.value.outlookId,x.outlookCalendar.enabled||delete h.value.outlookBtn,x.appleCalendar||delete h.value.appleId});function g(k){const C={iCloudId:k.getters["employee/getEmployeeAppleCalendarICloudId"],appSpecificPassword:k.getters["employee/getEmployeeAppleCalendarAppSpecificPassword"]};$e.post("/apple/connect/"+k.getters["employee/getId"],{employeeAppleCalendar:C}).then(()=>{k.commit("employee/setEmployeeAppleCalendarICloudId",C.iCloudId),k.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",C.appSpecificPassword),Gn(k)}).catch(F=>{l.value=!0,e.value=F.response.data.message,s.value="error"}).finally(()=>{l.value=!0})}function y(k){k.commit("auth/setAppleLoading",!0),$e.post("/apple/disconnect-employee/"+k.getters["employee/getId"]).then(()=>{k.commit("employee/setEmployeeAppleCalendarICloudId",null),k.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",null),Aa.value=!1,Gn(k),T.value=k.getters["auth/getAppleCalendars"]}).catch(C=>{console.log(C)}).finally(()=>{k.commit("auth/setAppleLoading",!1)})}return(k,C)=>{const F=vt,R=st;return t(f)?(u(),Y(Wt,{key:1})):(u(),Y(R,{key:0,ref:"employeeFormRef",model:t(D),"label-position":"top",class:j(["am-caedo",a.responsiveClass])},{default:S(()=>[t(x).payments.stripe.enabled&&t(x).payments.stripe.connect.enabled?(u(),Y(Kp,{key:0})):I("",!0),m("div",{class:j(["am-caepif__block",a.responsiveClass])},[(u(!0),B(ne,null,Ee(t(h),(M,O)=>(u(),Y(ft(M.template),Ft({key:O,ref_for:!0,ref:"customerCollectorRef",modelValue:t(D)[O],"onUpdate:modelValue":H=>t(D)[O]=H},M.props,po(M.handlers?M.handlers:{})),{default:S(()=>[M.slots&&M.slots.default?(u(),B("div",{key:0,innerHTML:M.slots.default},null,8,ef)):I("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128))],2),t(l)?(u(),Y(bt,{key:1,type:"error","show-border":!0,"close-after":5e3,onClose:o,onTriggerClose:o},{default:S(()=>[ce(w(t(e)),1)]),_:1})):I("",!0),t(x).appleCalendar?(u(),B("div",tf,[N(ho,null,{default:S(()=>[N(go,{ref_key:"appleVisibility",ref:A,side:!0,delay:500},{heading:S(()=>[ce(w(t(c).apple_calendar_personal),1)]),default:S(()=>[m("div",af,[N(F,{label:t(c).apple_icloud_id,class:"am-caedo__apple__connect__item"},{default:S(()=>[N(ct,{modelValue:t(E).iCloudId,"onUpdate:modelValue":C[0]||(C[0]=M=>t(E).iCloudId=M),disabled:t(Aa),placeholder:t(c).apple_icloud_id},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),N(F,{label:t(c).apple_app_specific_password,class:"am-caedo__apple__connect__item"},{default:S(()=>[N(ct,{modelValue:t(E).appSpecificPassword,"onUpdate:modelValue":C[1]||(C[1]=M=>t(E).appSpecificPassword=M),type:"password","show-password":!0,disabled:t(Aa),placeholder:t(c).apple_app_specific_password},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),N(Fe,{onClick:C[2]||(C[2]=M=>t(Aa)?y(t(i)):g(t(i)))},{default:S(()=>[ce(w(t(Aa)?t(c).apple_disconnect:t(c).apple_connect),1)]),_:1})])]),_:1},512)]),_:1})])):I("",!0)]),_:1},8,["model","class"]))}}};const lf={props:{tabActive:{type:String,required:!0},passwordActive:{type:Boolean,default:!1}},emits:["changePassword","savePassword","saveChanges"],setup(n,{emit:a}){const e=n;let s=U("amLabels");function l(){e.tabActive==="password"?a("savePassword"):a("saveChanges")}let o=U("amColors"),i=b(()=>({"--am-c-caepf-text-op15":K(o.value.colorMainText,.15)}));return(r,x)=>(u(),B("div",{class:j(["am-caepf",{"am-single-btn":e.tabActive!=="details"||e.passwordActive}]),style:Be(t(i))},[e.tabActive==="details"&&!e.passwordActive?(u(),Y(Fe,{key:0,size:"medium",category:"secondary",type:"plain",onClick:x[0]||(x[0]=c=>a("changePassword"))},{default:S(()=>[ce(w(t(s).change_password),1)]),_:1})):I("",!0),N(Fe,{size:"medium",onClick:l},{default:S(()=>[ce(w(e.tabActive!=="password"?t(s).save:t(s).change_password),1)]),_:1})],6))}},nf={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n,s=Oe();let l=U("amLabels"),o=V(null),i=V({newPass:b({get:()=>s.getters["auth/getNewPassword"],set:c=>{s.commit("auth/setNewPassword",c||"")}}),confirmPass:b({get:()=>s.getters["auth/getConfirmPassword"],set:c=>{s.commit("auth/setConfirmPassword",c||"")}})}),r=V({newPass:{template:We.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:l.new_password_colon,placeholder:"",minLength:3,class:b(()=>`am-capp__item ${e.responsiveClass}`)}},confirmPass:{template:We.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:l.new_password_colon_retype,placeholder:"",minLength:3,class:b(()=>`am-capp__item ${e.responsiveClass}`)}}}),x=V({newPass:[{required:!0,message:l.new_password_required,trigger:"submit"},{min:4,message:l.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:l.new_password_required,trigger:"submit"},{min:4,message:l.new_password_length,trigger:"submit"},{validator:()=>s.getters["auth/getNewPassword"]===s.getters["auth/getConfirmPassword"],message:l.passwords_not_match,trigger:"submit"}]});return a({passFormRef:o}),(c,f)=>{const p=st;return u(),Y(p,{ref_key:"passFormRef",ref:o,model:t(i),rules:t(x),"label-position":"top",class:j(["am-capi__form",n.responsiveClass])},{default:S(()=>[(u(!0),B(ne,null,Ee(t(r),(d,_)=>(u(),Y(ft(d.template),Ft({key:d.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:t(i)[_],"onUpdate:modelValue":T=>t(i)[_]=T},d.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"])}}};const of=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),rf={name:"CabinetEmployeeProfile"},cf=Object.assign(rf,{setup(n){let a=Oe();const e=U("settings");let s=U("amLabels"),l=V(null);const{width:o}=Za(l);let i=b(()=>ot(o.value));ze("pageWidth",o);let r=b(()=>a.getters["entities/getReady"]);const x=V("details");let c=V(""),f=V("success"),p=V(!1);function d(){p.value=!1}function _(){p.value=!1,c.value=""}let T=V(null),A=b(()=>a.getters["employee/getEmployee"]),E=b(()=>a.getters["auth/getGoogleLoading"]||a.getters["auth/getOutlookLoading"]||a.getters["auth/getAppleLoading"]||a.getters["auth/getStripeLoading"]||a.getters["auth/getZoomLoading"]),P=V(!1),L=U("timeZone");function D(){T.value.employeeFormRef.validate(R=>{!R||(P.value=!0,$e.post("/users/providers/"+A.value.id,Jr(a,L.value),Object.assign(Ue(a),{params:{source:"cabinet-provider"}})).then(()=>{c.value=s.profile_data_success,f.value="success"}).catch(M=>{c.value=M.response.data.message,f.value="error"}).finally(()=>{p.value=!0,P.value=!1}))})}let h=V(null),g=V(!1);function y(){g.value=!0,x.value="password"}function k(){h.value.passFormRef.validate(R=>{if(R){let M=a.getters["auth/getProfile"];P.value=!0,$e.post("/users/providers/"+M.id,{password:a.getters["auth/getNewPassword"]},Ue(a)).then(()=>{c.value=s.password_success,g.value=!1,x.value="details",a.commit("auth/setNewPassword",""),a.commit("auth/setConfirmPassword","")}).catch(()=>{p.value=!0}).finally(()=>{P.value=!1})}})}let C=U("amColors"),F=b(()=>({"--am-c-caep-primary":C.value.colorPrimary,"--am-c-caep-text":C.value.colorMainText,"--am-c-caep-text-op10":K(C.value.colorMainText,.1)}));return(R,M)=>{const O=_a,H=Ca;return u(),B("div",{ref_key:"pageContainer",ref:l,class:"am-caep",style:Be(t(F))},[t(r)&&!t(P)&&!t(E)?(u(),B("div",{key:0,class:j(["am-caep__inner",t(i)])},[t(p)?(u(),Y(bt,{key:0,type:t(f),"show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:_,onTriggerClose:_},{title:S(()=>[of,ce(" "+w(t(c)),1)]),_:1},8,["type"])):I("",!0),N(H,{modelValue:x.value,"onUpdate:modelValue":M[0]||(M[0]=z=>x.value=z)},{default:S(()=>[N(O,{label:t(s).details,name:"details",onClick:d},{default:S(()=>[N(hm,{ref_key:"detailsRef",ref:T,"responsive-class":t(i)},null,8,["responsive-class"])]),_:1},8,["label"]),t(e).roles.allowConfigureServices?(u(),Y(O,{key:0,label:t(s).heading_services,name:"services"},{default:S(()=>[N(jm,{"responsive-class":t(i)},null,8,["responsive-class"])]),_:1},8,["label"])):I("",!0),t(e).roles.allowConfigureSchedule?(u(),Y(O,{key:1,label:t(s).working_hours,name:"workingHours"},{default:S(()=>[N(yp,{"responsive-class":t(i)},null,8,["responsive-class"])]),_:1},8,["label"])):I("",!0),t(e).roles.allowConfigureSpecialDays?(u(),Y(O,{key:2,label:t(s).special_days,name:"specialDays"},{default:S(()=>[N(Fp,{"responsive-class":t(i)},null,8,["responsive-class"])]),_:1},8,["label"])):I("",!0),t(e).roles.allowConfigureDaysOff?(u(),Y(O,{key:3,label:t(s).days_off,name:"daysOff"},{default:S(()=>[N(Up,{"responsive-class":t(i)},null,8,["responsive-class"])]),_:1},8,["label"])):I("",!0),t(g)?(u(),Y(O,{key:4,label:t(s).password,name:"password"},{default:S(()=>[t(P)?(u(),Y(Bl,{key:1,"item-direction":"column",count:2})):(u(),Y(nf,{key:0,ref_key:"changePassRef",ref:h},null,512))]),_:1},8,["label"])):I("",!0),t(e).zoom.enabled||t(e).googleCalendar.enabled||t(e).outlookCalendar.enabled||t(e).appleCalendar||t(e).payments.stripe.enabled&&t(e).payments.stripe.connect.enabled?(u(),Y(O,{key:5,label:t(s).integrations_settings,name:"integrations"},{default:S(()=>[N(sf,{"responsive-class":t(i)},null,8,["responsive-class"])]),_:1},8,["label"])):I("",!0)]),_:1},8,["modelValue"]),N(lf,{"tab-active":x.value,"password-active":t(g),onChangePassword:y,onSavePassword:k,onSaveChanges:D},null,8,["tab-active","password-active"])],2)):(u(),Y(Wt,{key:1}))],4)}}});function vr(n,a){$e.get("/users/customers",{params:Js(n)}).then(e=>{a(e.data.data.users)}).catch(()=>{a([])})}function Zs(n,a="",e={},s=()=>{}){n.commit("customerInfo/setLoading",!0),setTimeout(()=>{vr(Object.assign({search:a,page:1,limit:lt.general.customersFilterLimit,skipCount:1},e),l=>{n.commit("customerInfo/setCustomers",l),n.commit("customerInfo/setLoading",!1),s()})},500)}function Oo(n){n.getters["customerInfo/getCustomers"].length||Zs(n)}const xf={key:0,class:"am-capf__zone"},uf={class:"am-capf__menu"},df=m("span",{class:"am-icon-filter"},null,-1),mf={key:0},pf={key:0,class:"am-capf__list"},ff={name:"CabinetFilters"},Mo=Object.assign(ff,{props:{paramList:{type:[Object,Array],default:()=>[]},stepKey:{type:String,default:""},responsiveClass:{type:String,default:""},empty:{type:Boolean,default:!1}},emits:["changeFilters","addAppointment"],setup(n,{emit:a}){const e=n;let s=Oe(),l=b(()=>s.getters["entities/getReady"]),o=b(()=>s.getters.getLoading),i=V({customers:!1,events:!1}),r=b(()=>e.stepKey==="packages"?"packagesList":e.stepKey);const x=U("shortcodeData"),c=U("settings");let f=U("amCustomize");const p=U("labels"),d=U("localLanguage");let _=b(()=>c.general.usedLanguages.includes(d.value)),T=b(()=>{let Q=tt({...p});if(e.stepKey){let ue=f.value[r.value].translations;ue&&Object.keys(ue).forEach(ee=>{ue[ee][d.value]&&_.value?Q[ee]=ue[ee][d.value]:ue[ee].default&&(Q[ee]=ue[ee].default)})}return Q});function A(Q){return Q==="customers"?"user":Q==="services"?"service":Q==="providers"?"employee":Q==="locations"?"locations":Q==="packages"?"shipment":Q==="events"?"star-outline":""}function E(){a("changeFilters")}let P=U("containerWidth"),L={components:{IconComponent:Ge},template:'<IconComponent icon="filter"/>'},D=V(!1),h=V({dates:b({get:()=>s.getters["cabinetFilters/getDates"],set:Q=>{Xr(Q[0],Q[1]),s.commit("cabinetFilters/setDates",Q),a("changeFilters")}}),customers:b({get:()=>s.getters["cabinetFilters/getCustomers"],set:Q=>{s.commit("cabinetFilters/setCustomers",Q||[])}}),services:b({get:()=>s.getters["cabinetFilters/getServices"],set:Q=>{s.commit("cabinetFilters/setServices",Q)}}),providers:b({get:()=>s.getters["cabinetFilters/getProviders"],set:Q=>{s.commit("cabinetFilters/setProviders",Q)}}),locations:b({get:()=>s.getters["cabinetFilters/getLocations"],set:Q=>{s.commit("cabinetFilters/setLocations",Q)}}),packages:b({get:()=>s.getters["cabinetFilters/getPackages"],set:Q=>{s.commit("cabinetFilters/setPackages",Q)}}),events:b({get:()=>s.getters["cabinetFilters/getEvents"],set:Q=>{s.commit("cabinetFilters/setEvents",Q||[])}})}),g=b(()=>e.stepKey==="events"?s.getters["cabinetFilters/getEventFiltersOption"](x.value.cabinetType):e.stepKey==="packages"?s.getters["cabinetFilters/getPackageFilterOptions"]:s.getters["cabinetFilters/getAppointmentFilterOptions"](x.value.cabinetType)),y=b(()=>{let Q=0;return Object.keys(g.value).forEach(ue=>{f.value[r.value].options[`${ue}Filter`].visibility&&(ue==="customers"||ue==="events"||g.value[ue].length>0)&&Q++}),Q});function k(Q,ue){switch(Q){case"customers":F(ue);break;case"events":M(ue);break}}function C(){x.value.cabinetType==="employee"&&F("",s.getters["auth/getPreloadedCustomers"])}function F(Q="",ue=[]){if(i.value.customers=!0,ue.length){s.dispatch("cabinetFilters/injectCustomerOptions",ue),i.value.customers=!1;return}setTimeout(()=>{vr({search:Q,page:1,limit:lt.general.customersFilterLimit,skipCount:1},ee=>{s.dispatch("cabinetFilters/injectCustomerOptions",ee),s.getters["auth/getPreloadedCustomers"].length===0&&s.commit("auth/setPreloadedCustomers",ee),i.value.customers=!1})},500)}const R=U("cabinetType");function M(Q="",ue=[]){if(i.value.events=!0,ue.length){s.dispatch("cabinetFilters/injectEventsOptions",ue),i.value.events=!1;return}setTimeout(()=>{p0({dates:[Ce().format("YYYY-MM-DD")],timeZone:s.getters["cabinet/getTimeZone"],group:!0,page:1,limit:c.general.itemsPerPage,search:Q,source:"cabinet-"+R.value},ee=>{s.dispatch("cabinetFilters/injectEventsOptions",ee),i.value.events=!1})},500)}let O=b(()=>f.value[r.value].options),H=b(()=>e.stepKey==="appointments"?x.value.cabinetType==="employee"?O.value.servicesFilter.visibility||O.value.customersFilter.visibility||O.value.locationsFilter.visibility:O.value.servicesFilter.visibility||O.value.providersFilter.visibility||O.value.locationsFilter.visibility:e.stepKey==="events"?x.value.cabinetType==="employee"?O.value.eventsFilter.visibility||O.value.customersFilter.visibility||O.value.locationsFilter.visibility:O.value.eventsFilter.visibility||O.value.providersFilter.visibility||O.value.locationsFilter.visibility:O.value.packagesFilter.visibility||O.value.servicesFilter.visibility||O.value.providersFilter.visibility||O.value.locationsFilter.visibility),z=b(()=>e.stepKey==="appointments"?x.value.cabinetType==="employee"?!!(g.value.services.length||g.value.customers.length||g.value.locations.length):!!(g.value.services.length||g.value.providers.length||g.value.locations.length):e.stepKey==="events"?x.value.cabinetType==="employee"?!!(g.value.events.length||g.value.customers.length||g.value.locations.length):!!(g.value.events.length||g.value.providers.length||g.value.locations.length):!!(g.value.packages.length||g.value.services.length||g.value.providers.length||g.value.locations.length));Ze(()=>{C()});let X=U("amColors"),le=b(()=>({"--am-c-capf-heading-text":X.value.colorMainText,"--am-c-capf-text":X.value.colorInpText,"--am-c-capf-text-op10":K(X.value.colorInpText,.1),"--am-c-select-border":X.value.colorInpBorder,"--am-c-select-bgr":X.value.colorInpBgr}));return(Q,ue)=>!t(o)&&t(l)?(u(),B("div",{key:0,class:"am-capf",style:Be(t(le))},[t(P)<=480&&t(O).timeZone.visibility&&t(e).stepKey!=="packages"?(u(),B("div",xf,[t(c).featuresIntegrations.timezones.enabled?(u(),Y(Zn,{key:0,size:"small"})):I("",!0)])):I("",!0),m("div",uf,[t(c).featuresIntegrations.timezones.enabled&&t(P)<=480&&t(O).timeZone.visibility&&t(e).stepKey==="packages"?(u(),Y(Zn,{key:0,size:"small"})):I("",!0),t(e).stepKey!=="packages"?(u(),Y(ea,{key:1,modelValue:t(h).dates,"onUpdate:modelValue":ue[0]||(ue[0]=ee=>t(h).dates=ee),type:"daterange",editable:!1,size:"small",clearable:!1,format:t(Kt)(),style:Be(t(le)),lang:t(d),class:j(["am-capf__menu-datepicker",t(e).responsiveClass]),"popper-class":"am-capf__menu-datepicker-popper","start-placeholder":t(T).start_date,"end-placeholder":t(T).end_date},null,8,["modelValue","format","style","lang","class","start-placeholder","end-placeholder"])):I("",!0),!t(e).empty&&t(H)&&t(z)?(u(),Y(Fe,{key:2,icon:t(L),"icon-only":t(P)<=700,"custom-class":"am-capf__menu-btn",size:"small",category:"primary","aria-label":t(T).filters,type:t(O).filterBtn?t(O).filterBtn.buttonType:"filled",onClick:ue[1]||(ue[1]=ee=>De(D)?D.value=!t(D):D=!t(D))},{default:S(()=>[df,t(P)>700?(u(),B("span",mf,w(t(T).filters),1)):I("",!0)]),_:1},8,["icon","icon-only","aria-label","type"])):I("",!0)]),N(ga,{name:"am-slide-fade"},{default:S(()=>[t(D)&&!t(e).empty?(u(),B("div",pf,[(u(!0),B(ne,null,Ee(Object.keys(t(g)),ee=>(u(),B(ne,{key:ee},[(t(g)[ee].length>0||ee==="customers"||ee==="events")&&t(f)[t(r)].options[`${ee}Filter`].visibility?(u(),B("span",{key:0,class:j(["am-capf__list-item",[{"am-selected":t(h)[ee].length>0},`am-capf__list-item-${t(y)}`,t(e).responsiveClass]])},[N(Je,{id:`am-select-${ee}`,modelValue:t(h)[ee],"onUpdate:modelValue":me=>t(h)[ee]=me,multiple:ee!=="customers"&&ee!=="events",loading:ee!=="customers"&&ee!=="events"?!1:t(i)[ee],remote:"",clearable:"",filterable:ee==="customers"||ee==="events",placeholder:t(T)[ee+(ee==="customers"?"":"_dropdown")],"prefix-icon":A(ee),"collapse-tags":!0,size:"small","popper-class":"am-filter-select-popper","remote-method":me=>{k(ee,me)},onChange:E,onClear:C},{default:S(()=>[(u(!0),B(ne,null,Ee(t(g)[ee],me=>(u(),Y(Ye,{key:me.id,value:me.id,label:me.firstName?me.firstName+" "+me.lastName:me.name},null,8,["value","label"]))),128))]),_:2},1032,["id","modelValue","onUpdate:modelValue","multiple","loading","filterable","placeholder","prefix-icon","remote-method"])],2)):I("",!0)],64))),128))])):I("",!0)]),_:1})],4)):I("",!0)}});function gf(n,a){let e=n.getters["entities/getService"](a.serviceId),s=0,l=0;return a.bookings.forEach(o=>{if(["approved","pending"].includes(o.status)){let i=o.duration?o.duration:e.duration;i>s&&(s=i);let r=0;o.extras.forEach(x=>{r+=e.extras.find(f=>f.id===x.extraId).duration*x.quantity}),r>l&&(l=r)}}),s+l}function Er(n,a,e){for(let s in n)n[s].appointments.forEach(l=>{let o={};l.bookings.forEach(r=>{r.customerId in o||(o[r.customerId]=[]),o[r.customerId][r.id]=r.status});let i={};for(let r in o)for(let x in o[r])(!(r in i)||o[r][x]==="approved"||o[r][x]==="pending")&&(i[r]=x);l.bookings.forEach(r=>{r.customerId in i&&parseInt(r.id)!==parseInt(i[r.customerId])||(a===""&&(l.bookingStart=Al(l.bookingStart),l.bookingEnd=Al(l.bookingEnd)),e||(l.bookings=[r]))})});if(a===""){let s={};for(let l in n)n[l].appointments.forEach(o=>{let i=o.bookingStart.split(" ")[0];i in s?s[i].appointments.push(o):s[i]={appointments:[o],date:i}});return s}return n}function _r(n,a){let e=[];if(n.forEach(l=>{if(["approved","pending"].includes(l.status)&&l.customFields){let o=JSON.parse(l.customFields);Object.keys(o).forEach(i=>{if(o[i]){let r=o[i].type==="file"?o[i]?.value?o[i].value:"":o[i].value;(Array.isArray(r)?r.length:r)&&e.push({label:o[i].label,value:r})}})}}),a==="customer")return e;const s=new Map;return e.filter(l=>l.value).forEach(l=>{s.has(l.label)||s.set(l.label,l)}),Array.from(s.values())}function hf(n,a){let e={};return n.forEach(s=>{["approved","pending"].includes(s.status)&&s.extras.forEach(l=>{l.extraId in e||(e[l.extraId]={quantity:0,price:l.price,name:a.extras.find(o=>o.id===l.extraId).name}),e[l.extraId].quantity=e[l.extraId].quantity+l.quantity})}),e}const vf={class:"am-cc__periods-date"},Ef={class:"am-cc__periods-time"},_f={key:0,class:"am-cc__periods-link__list"},Cf=["href"],yf=m("span",{class:"am-icon-link"},null,-1),bf=["href"],Bf=m("span",{class:"am-icon-link"},null,-1),Af=["href"],kf=m("span",{class:"am-icon-link"},null,-1),Df=["href"],Ff=m("span",{class:"am-icon-link"},null,-1),wf={name:"TemplatePeriods"},Pf=Object.assign(wf,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n,e=U("amLabels"),s=U("settings");let l=U("containerWidth"),o=b(()=>ot(l.value));return(i,r)=>(u(),B("div",{class:j(["am-cc__periods",t(o)])},[(u(!0),B(ne,null,Ee(t(a).data,(x,c)=>(u(),B("div",{key:c,class:"am-cc__periods-item"},[m("span",vf,w(t(rt)(x.date)),1),m("span",Ef,w(`${t(vs)(x.startTime)} - ${t(vs)(x.endTime)}`),1),t(s).featuresIntegrations.googleCalendar.enabled&&x.googleMeetLink||t(s).featuresIntegrations.zoom.enabled&&x.zoomLink||t(s).featuresIntegrations.lessonSpace.enabled&&x.lessonSpaceLink||t(s).featuresIntegrations.outlookCalendar.enabled&&x.microsoftTeamsLink?(u(),B("div",_f,[t(s).featuresIntegrations.googleCalendar.enabled&&x.googleMeetLink?(u(),B("a",{key:0,class:"am-cc__periods-link",href:x.googleMeetLink,target:"_blank"},[yf,ce(" "+w(t(e).google_meet_link),1)],8,Cf)):I("",!0),t(s).featuresIntegrations.outlookCalendar.enabled&&x.microsoftTeamsLink?(u(),B("a",{key:1,class:"am-cc__periods-link",href:x.microsoftTeamsLink,target:"_blank"},[Bf,ce(" "+w(t(e).microsoft_teams_link),1)],8,bf)):I("",!0),t(s).featuresIntegrations.zoom.enabled&&x.zoomLink?(u(),B("a",{key:2,class:"am-cc__periods-link",href:x.zoomLink,target:"_blank"},[kf,ce(" "+w(t(e).zoom_link),1)],8,Af)):I("",!0),t(s).featuresIntegrations.lessonSpace.enabled&&x.lessonSpaceLink?(u(),B("a",{key:3,class:"am-cc__periods-link",href:x.lessonSpaceLink,target:"_blank"},[Ff,ce(" "+w(t(e).lesson_space_link),1)],8,Df)):I("",!0)])):I("",!0)]))),128))],2))}});const Tf={class:"am-cc__extras-name"},Lf={key:0,class:"am-cc__extras-duration"},Sf={key:1,class:"am-cc__extras-price"},If={key:2,class:"am-cc__extras-quantity"},$f={name:"TemplateExtras"},Nf=Object.assign($f,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n,e=U("amLabels"),s=U("shortcodeData");let l=U("containerWidth"),o=b(()=>ot(l.value));return(i,r)=>(u(),B("div",{class:j(["am-cc__extras",t(o)])},[(u(!0),B(ne,null,Ee(t(a).data,(x,c)=>(u(),B("div",{key:c,class:"am-cc__extras-item"},[m("span",Tf,w(x.name),1),x.duration||x.price||x.quantity?(u(),B("div",{key:0,class:j(["am-cc__extras-item__inner",[{"am-flex-space":!x.price&&x.duration},{"am-flex-end":!x.duration}]])},[x.duration?(u(),B("span",Lf,w(t(hs)(x.duration,t(e).h,t(e).min)),1)):I("",!0),t(s).cabinetType==="customer"&&x.price?(u(),B("span",Sf,w(t(nt)(x.price)),1)):I("",!0),x.quantity?(u(),B("span",If," x"+w(x.quantity),1)):I("",!0)],2)):I("",!0)]))),128))],2))}});const Of={class:"am-cc__tickets-item_inner"},Mf={class:"am-cc__tickets-name"},Vf={class:"am-cc__tickets-calc"},Rf={key:0,class:"am-cc__tickets-price"},qf={name:"TemplateTickets"},Uf=Object.assign(qf,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n,e=U("amLabels"),s=U("shortcodeData");let l=U("containerWidth"),o=b(()=>ot(l.value));return(i,r)=>(u(),B("div",{class:j(["am-cc__tickets",t(o)])},[(u(!0),B(ne,null,Ee(t(a).data,(x,c)=>(u(),B("div",{key:c,class:"am-cc__tickets-item"},[m("div",Of,[m("span",Mf,w(x.name),1),m("span",Vf,w(`${x.persons} ${x.persons>1?t(e).event_tickets:t(e).event_ticket}${t(s).cabinetType==="customer"?" x "+t(nt)(x.price):""}`),1)]),t(s).cabinetType==="customer"?(u(),B("div",Rf,w(t(nt)(x.persons*x.price)),1)):I("",!0)]))),128))],2))}});const zf=["innerHTML"],jf={key:0,class:"am-cc__cf-value"},Yf={class:"am-cc__cf-value__inner"},Wf={name:"TemplateCustomFields"},Hf=Object.assign(Wf,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n;let e=U("containerWidth"),s=b(()=>ot(e.value));function l(o){return o?Array.isArray(o)?o.length===0?"/":o.map(i=>typeof i=="object"&&i!==null&&!Array.isArray(i)?i.name||"/":i||"/").join(", "):o:"/"}return(o,i)=>(u(),B("div",{class:j(["am-cc__cf",t(s)])},[(u(!0),B(ne,null,Ee(t(a).data,(r,x)=>(u(),B("div",{key:x,class:"am-cc__cf-item"},[m("span",{class:"am-cc__cf-name",innerHTML:r.label},null,8,zf),"value"in r?(u(),B("div",jf,[m("span",Yf,w(l(r.value)),1)])):I("",!0)]))),128))],2))}});const Zf={class:"am-cc__employee-heading"},Gf={class:"am-cc__employee-heading__inner"},Jf={class:"am-cc__employee-name"},Xf=["innerHTML"],Qf={key:1,class:"am-cc__employee-wrapper"},Kf={class:"am-cc__employee-heading"},eg={class:"am-cc__employee-heading__inner"},tg={class:"am-cc__employee-name"},ag=["innerHTML"],sg={name:"TemplateEmployee"},lg=Object.assign(sg,{props:{data:{type:[Object,Array]}},setup(n){const a=n;let e=b(()=>!Array.isArray(a.data)),s=U("containerWidth"),l=b(()=>ot(s.value));function o(x){let c=x.firstName.charAt(0).toUpperCase(),f=x.lastName.charAt(0).toUpperCase();return`${c}${f}`}function i(x){return x.pictureThumbPath?{backgroundImage:`url(${x.pictureThumbPath})`}:{}}function r(x){return x&&x.includes("<!-- Content -->")?x.slice(16).length:x?x.length:!1}return(x,c)=>(u(),B("div",{class:j(["am-cc__employee",t(l)])},[t(e)?(u(),B(ne,{key:0},[m("div",Zf,[m("span",{class:"am-cc__employee-img",style:Be(i(t(a).data))},[t(a).data.pictureThumbPath?I("",!0):(u(),B(ne,{key:0},[ce(w(o(t(a).data)),1)],64))],4),m("div",Gf,[m("span",Jf,w(`${t(a).data.firstName} ${t(a).data.lastName}`),1),t(a).data.badge?(u(),B("span",{key:0,class:"am-cc__employee-badge",style:Be({background:t(a).data.badge.color})},w(t(a).data.badge.content),5)):I("",!0)])]),t(a).data.description?(u(),B("div",{key:0,class:"am-cc__employee-desc ql-description",innerHTML:t(a).data.description},null,8,Xf)):I("",!0)],64)):(u(),B("div",Qf,[(u(!0),B(ne,null,Ee(t(a).data,f=>(u(),B(ne,{key:f.id},[m("div",Kf,[m("span",{class:"am-cc__employee-img",style:Be(i(f))},[f.pictureThumbPath?I("",!0):(u(),B(ne,{key:0},[ce(w(o(f)),1)],64))],4),m("div",eg,[m("span",tg,w(`${f.firstName} ${f.lastName}`),1),f.badge?(u(),B("span",{key:0,class:"am-cc__employee-badge",style:Be({background:f.badge.color})},w(f.badge.content),5)):I("",!0)])]),r(f.description)?(u(),B("div",{key:0,class:"am-cc__employee-desc ql-description",innerHTML:f.description},null,8,ag)):I("",!0)],64))),128))]))],2))}});const ng={class:"am-cc__customers-item_inner"},og={class:"am-cc__customers-name"},ig={key:0,class:"am-icon-clock am-cc__customers-waiting"},rg={class:"am-cc__customers-info"},cg={class:"am-cc__customers-info"},xg={name:"TemplateCustomers"},ug=Object.assign(xg,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n;let e=U("containerWidth"),s=b(()=>ot(e.value));return(l,o)=>(u(),B("div",{class:j(["am-cc__customers",t(s)])},[(u(!0),B(ne,null,Ee(t(a).data,(i,r)=>(u(),B("div",{key:r,class:"am-cc__customers-item"},[m("div",ng,[m("span",og,[i.bookingStatus==="waiting"?(u(),B("span",ig)):I("",!0),ce(" "+w(i.firstName)+" "+w(i.lastName),1)]),m("span",rg,w(i.email),1),m("span",cg,w(i.phone),1)])]))),128))],2))}});const dg={class:"am-cc__qr-codes"},mg={key:0,class:"am-cc__qr-codes__message"},pg=m("span",{class:"am-icon-info-reverse"},null,-1),fg=["onClick"],gg={props:{data:{type:[Array]}},setup(n){const a=n,e=Oe();let s=V("");function l(i){$e.get("/etickets",Object.assign({params:{source:"cabinet-customer",timeZone:e.getters["cabinet/getTimeZone"],eventId:i.eventId,bookingId:i.bookingId,ticketManualCode:i.ticketManualCode}},Ue(e))).then(r=>{s.value="",window.open(o(r.data))}).catch(r=>{r.response&&r.response.data&&r.response.data.message?s.value=r.response.data.message:s.value="An error occurred while fetching the QR code."})}function o(i){const r=atob(i),x=new Array(r.length);for(let p=0;p<r.length;p++)x[p]=r.charCodeAt(p);const c=new Uint8Array(x),f=new Blob([c],{type:"application/pdf;base64"});return URL.createObjectURL(f)}return Ze(()=>{s.value=""}),(i,r)=>(u(),B("div",dg,[t(s)?(u(),B("div",mg,[pg,ce(" "+w(t(s)),1)])):I("",!0),(u(!0),B(ne,null,Ee(t(a).data,(x,c)=>(u(),B("div",{key:c,class:"am-cc__qr-codes__item",onClick:f=>l(x)},w(`${x.eventName} - ${x.type==="ticket"?"Single Ticket.pdf":"Group Ticket.pdf"}`),9,fg))),128))]))}};const hg={class:"am-cc__popover-inner"},vg={key:0,class:"am-cc__popover-heading"},Eg={name:"CollapseCardPopoverTemplate"},Ua=Object.assign(Eg,{props:{headerText:{type:String,default:""},type:{type:String,required:!0},contentData:{type:[Array,Object,String],default:""}},setup(n){const a=n;let e=V({period:Qe(Pf),extras:Qe(Nf),ticket:Qe(Uf),customField:Qe(Hf),employee:Qe(lg),customers:Qe(ug),qrCode:Qe(gg)}),s=U("amFonts"),l=U("amColors"),o=b(()=>({"--am-c-cc-primary":l.value.colorPrimary,"--am-c-cc-primary-op70":K(l.value.colorPrimary,.7),"--am-c-cc-success":l.value.colorSuccess,"--am-c-cc-success-op15":K(l.value.colorSuccess,.15),"--am-c-cc-error":l.value.colorError,"--am-c-cc-error-op15":K(l.value.colorError,.15),"--am-c-cc-bgr":l.value.colorMainBgr,"--am-c-cc-text":l.value.colorMainText,"--am-c-cc-text-op10":K(l.value.colorMainText,.1),"--am-c-cc-text-op15":K(l.value.colorMainText,.15),"--am-c-cc-text-op70":K(l.value.colorMainText,.7),"--am-c-cc-text-op80":K(l.value.colorMainText,.8),"--am-c-cc-text-op90":K(l.value.colorMainText,.9),"--am-c-scroll-op30":K(l.value.colorPrimary,.3),"--am-c-scroll-op10":K(l.value.colorPrimary,.1),"--am-font-family":s.value.fontFamily,"--am-rad-inp":"6px","--am-fs-inp":"15px"}));return(i,r)=>{const x=bs;return u(),Y(x,{"show-arrow":!1,persistent:!1,width:"auto","popper-class":"am-cc__popover","popper-style":t(o),trigger:"click"},{reference:S(()=>[Ai(i.$slots,"default")]),default:S(()=>[m("div",hg,[t(a).headerText?(u(),B("div",vg,w(t(a).headerText),1)):I("",!0),(u(),Y(ft(t(e)[t(a).type]),{class:"am-cc__popover-content",data:t(a).contentData},null,8,["data"]))])]),_:3},8,["popper-style"])}}});function _g(n){let a=xo(null,n.coupon,n.tax?n.tax[0]:null,n.price-n.price/100*n.discount,!1);return a.price-a.discount+a.tax}const za=tt(window.wpAmeliaLabels);function Ci(n,a,e){e.type==="package"&&n.commit("cabinet/setPackageLoading",!0),e.type==="appointment"&&n.commit("cabinet/setAppointmentsLoading",!0),e.type==="event"&&n.commit("cabinet/setEventsLoading",!0),n.commit("cabinet/setPaymentLinkLoader",e.bookings?e.bookings[0].id:e.id);let s=JSON.parse(JSON.stringify(e)),l=JSON.parse(JSON.stringify(n.getters["auth/getProfile"]));l.birthday=null,s.customer=l,s.type!=="package"?(s[s.type]=e,s.booking=e.bookings[0],s.paymentId=e.bookings[0].payments[0].id):s=Object.assign(s,s.package),$e.post("/payments/link",{data:s,paymentMethod:a}).then(o=>{!o.data.data.error&&o.data.data.paymentLink?window.location.href=o.data.data.paymentLink:n.commit("cabinet/setPaymentLinkError",{value:!0,type:e.type})}).catch(o=>{n.commit("cabinet/setPaymentLinkError",{value:!0,type:e.type})}).finally(()=>{n.commit("cabinet/setPaymentLinkLoader",null),e.type==="package"&&n.commit("cabinet/setPackageLoading",!1),e.type==="appointment"&&n.commit("cabinet/setAppointmentsLoading",!1),e.type==="event"&&n.commit("cabinet/setEventsLoading",!1)})}function oo(n,a){if(n.type!=="package"&&(!n.bookings||n.bookings.length===0))return!1;typeof a=="string"?a=JSON.parse(a):a||(a={});let e=a&&"payments"in a&&a.payments&&"paymentLinks"in a.payments&&a.payments.paymentLinks&&"enabled"in a.payments.paymentLinks?a.payments.paymentLinks:lt.payments.paymentLinks;return io(lt).length&&lt&&e&&e.enabled}function io(n){typeof n=="string"?n=JSON.parse(n):n||(n={});let a=[];return n=n.payments,lt.payments.wc.enabled?a.push({value:"wc",label:za.wc}):lt.payments.mollie.enabled&&(!("mollie"in n)||n.mollie.enabled)?a.push({value:"mollie",label:za.on_line}):(lt.payments.payPal.enabled&&(!("payPal"in n)||n.payPal.enabled)&&a.push({value:"payPal",label:za.pay_pal}),lt.payments.stripe.enabled&&(!("stripe"in n)||n.stripe.enabled)&&a.push({value:"stripe",label:za.credit_card}),lt.payments.razorpay.enabled&&(!("razorpay"in n)||n.razorpay.enabled)&&a.push({value:"razorpay",label:za.razorpay}),lt.payments.square.enabled&&(!("square"in n)||n.square.enabled)&&a.push({value:"square",label:za.square}),lt.payments.barion.enabled&&(!("barion"in n)||n.barion.enabled)&&a.push({value:"barion",label:za.barion})),a}function yl(n,a){switch(a.type){case"appointment":{let e=vo(n,{price:a.bookings[0].price,persons:a.bookings[0].persons,aggregatedPrice:a.bookings[0].aggregatedPrice,extras:a.bookings[0].extras,serviceId:null,tax:a.bookings[0].tax,coupon:a.bookings[0].coupon},!1);return e.total-e.discount+e.tax>a.bookings[0].payments.filter(s=>s.status!=="refunded"&&s.status!=="pending").reduce((s,l)=>s+l.amount,0)}case"event":return Ii(a)>a.bookings[0].payments.filter(e=>e.status!=="refunded"&&e.status!=="pending").reduce((e,s)=>e+s.amount,0);case"package":return _g(a)>a.payments.filter(e=>e.status!=="refunded"&&e.status!=="pending").reduce((e,s)=>e+s.amount,0)}}const Cg={class:"am-cc__edit"},yg=["onClick"],bg={class:"am-cc__edit-text"},Bg={name:"PaymentButton"},Cr=Object.assign(Bg,{props:{reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},type:{type:String},btnSize:{type:String,default:"mini"},class:{type:String,default:""}},setup(n){const a=n;let e=Oe();const s=U("amLabels");let l=b(()=>io(a.bookable.settings)),o=b(()=>e.getters["cabinet/getPaymentLinkLoader"]),i={components:{IconComponent:Ge},template:'<IconComponent icon="arrow-down"></IconComponent>'},r=V(!1);function x(A){A.stopPropagation(),l.value.length===1?Ci(e,l.value[0].value,a.reservation):r.value=!r.value}function c(){r.value=!1}let f=V(!1);function p(){f.value=!1}let d=U("amFonts"),_=U("amColors"),T=b(()=>({"--am-c-cc-primary":_.value.colorPrimary,"--am-c-cc-primary-op70":K(_.value.colorPrimary,.7),"--am-c-cc-error":_.value.colorError,"--am-c-cc-error-op15":K(_.value.colorError,.15),"--am-c-cc-warning":_.value.colorWarning,"--am-c-cc-warning-op15":K(_.value.colorWarning,.15),"--am-c-cc-success":_.value.colorSuccess,"--am-c-cc-success-op15":K(_.value.colorSuccess,.15),"--am-c-cc-bgr":_.value.colorMainBgr,"--am-c-cc-text":_.value.colorMainText,"--am-c-cc-text-op10":K(_.value.colorMainText,.1),"--am-c-cc-text-op15":K(_.value.colorMainText,.15),"--am-c-cc-text-op70":K(_.value.colorMainText,.7),"--am-c-cc-text-op90":K(_.value.colorMainText,.9),"--am-font-family":d.value.fontFamily,"--am-rad-inp":"6px","--am-fs-inp":"15px"}));return(A,E)=>{const P=bs;return t(oo)(t(a).reservation,t(a).bookable.settings)?(u(),Y(P,{key:0,ref:"payRef",visible:t(r),persistent:!1,"show-arrow":!1,"popper-class":"am-cc__popper","popper-style":t(T),trigger:"click"},{reference:S(()=>[N(Fe,{size:t(a).btnSize,type:t(a).type,suffix:t(l).length>1&&t(yl)(t(e),t(a).reservation)?t(i):"",class:j([{"am-button-single":t(l).length===1||!t(yl)(t(e),t(a).reservation)},t(a).class]),loading:!!t(o),"loading-icon":"loading",disabled:!t(yl)(t(e),t(a).reservation),onClick:x},{default:S(()=>[ce(w(t(yl)(t(e),t(a).reservation)?t(s).pay_now_btn:t(s).paid),1)]),_:1},8,["size","type","suffix","class","loading","disabled"])]),default:S(()=>[$t((u(),B("div",Cg,[(u(!0),B(ne,null,Ee(t(io)(t(a).bookable.settings),L=>$t((u(),B("div",{key:L.value,class:"am-cc__edit-item",onClick:D=>t(Ci)(t(e),L.value,t(a).reservation)},[m("span",bg,w(L.label),1)],8,yg)),[[t(Qt),c]])),128))])),[[t(Qt),p]])]),_:1},8,["visible","popper-style"])):I("",!0)}}}),os=tt(window.wpAmeliaLabels);function yr(){return[{value:"approved",label:os.approved,icon:"check",color:"var(--am-c-success)"},{value:"pending",label:os.pending,icon:"refresh",color:"var(--am-c-warning)"},{value:"canceled",label:os.canceled,icon:"close",color:"var(--am-c-error)"},{value:"rejected",label:os.rejected,icon:"info-reverse",color:"var(--am-c-main-text)"},{value:"waiting",label:os.waiting,icon:"clock",color:"var(--am-c-warning)"},{value:"no-show",label:os["no-show"],icon:"no-show",color:"#808A90"}]}const Ag={name:"CollapseCard"},yi=Object.assign(Ag,{props:{id:{type:[Number],default:0},status:{type:String,default:""}},emits:["statusChange"],setup(n,{emit:a}){const e=n,s=U("shortcodeData");let l=U("amLabels"),o=Oe(),i=b(()=>yr().filter(f=>f.value!=="waiting"));function r(){x.value=!0,$e.post("/appointments/status/"+e.id,{status:c.value},Object.assign(Ue(o),{params:{source:"cabinet-provider"}})).then(f=>{let p=l.value.appointment_status_changed+l.value[f.data.data.status].toLowerCase(),d="success";"maximumCapacityReached"in f.data.data&&f.data.data.maximumCapacityReached===!0&&(p=l.value.maximum_capacity_reached,d="error",c.value=e.status),a("statusChange",p,d),x.value=!1}).catch(f=>{let p=l.value.error,d="error";"response"in f&&"data"in f.response&&"data"in f.response.data&&"timeSlotUnavailable"in f.response.data.data&&f.response.data.data.timeSlotUnavailable===!0&&(p=l.value.time_slot_unavailable),c.value=e.status,a("statusChange",p,d),x.value=!1})}let x=V(!1),c=V("");return Ze(()=>{c.value=e.status}),(f,p)=>(u(),B("div",null,[t(c)&&t(s).cabinetType==="employee"?(u(),Y(Je,{key:0,modelValue:t(c),"onUpdate:modelValue":p[0]||(p[0]=d=>De(c)?c.value=d:c=d),"prefix-icon":t(i).find(d=>d.value===t(c)).icon,"prefix-icon-color":t(i).find(d=>d.value===t(c)).color,disabled:t(x),size:"small",onClick:p[1]||(p[1]=d=>d.stopPropagation()),onChange:r},{default:S(()=>[(u(!0),B(ne,null,Ee(t(i),d=>(u(),Y(Ye,{key:d.value,value:d.value,label:d.label},{default:S(()=>[m("span",{class:j(`am-icon-${d.icon}`),style:Be(`color: ${d.color}`)},null,6),ce(" "+w(d.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","prefix-icon","prefix-icon-color","disabled"])):I("",!0)]))}});const kg={class:"am-cc__time"},Dg={key:0,class:"am-cc__name"},Fg={key:0,class:"am-icon-clock am-cc__customer-waiting"},wg={key:0,class:"am-cc__name"},Pg={key:1,class:"am-cc__places"},Tg={key:2,class:"am-cc__customer"},Lg={key:0,class:"am-icon-clock am-cc__customer-waiting"},Sg={key:0,class:"am-cc__edit"},Ig=m("span",{class:"am-icon-edit"},null,-1),$g={class:"am-cc__edit-text"},Ng={key:0,class:"am-cc__edit"},Og=m("span",{class:"am-icon-users-plus"},null,-1),Mg={class:"am-cc__edit-text"},Vg={class:"am-cc__edit"},Rg=m("span",{class:"am-icon-user"},null,-1),qg={class:"am-cc__edit-text"},Ug={class:"am-cc__edit"},zg=m("span",{class:"am-icon-date-time"},null,-1),jg={class:"am-cc__edit-text"},Yg=m("span",{class:"am-icon-eye"},null,-1),Wg={class:"am-cc__edit-text"},Hg=m("span",{class:"am-icon-download"},null,-1),Zg={class:"am-cc__edit-text"},Gg=m("span",{class:"am-icon-clearable"},null,-1),Jg={class:"am-cc__edit-text"},Xg={class:"am-cc__content-inner"},Qg={class:"am-cc__data"},Kg=m("span",{class:"am-icon-user"},null,-1),e9={class:"am-cc__data-text"},t9={class:"am-cc__data"},a9=m("span",{class:"am-icon-user"},null,-1),s9={class:"am-cc__data-text"},l9={key:2,class:"am-cc__data"},n9=m("span",{class:"am-icon-payments"},null,-1),o9={class:"am-cc__data-text"},i9={key:3,class:"am-cc__data"},r9=m("span",{class:"am-icon-clock"},null,-1),c9={class:"am-cc__data-text"},x9={class:"am-cc__data"},u9=m("span",{class:"am-icon-clock"},null,-1),d9={class:"am-cc__data-text"},m9={key:5,class:"am-cc__data link"},p9=m("span",{class:"am-icon-link"},null,-1),f9=["href"],g9={key:6,class:"am-cc__data link"},h9=m("span",{class:"am-icon-link"},null,-1),v9=["href"],E9={key:7,class:"am-cc__data link"},_9=m("span",{class:"am-icon-link"},null,-1),C9=["href"],y9={key:8,class:"am-cc__data link"},b9=m("span",{class:"am-icon-link"},null,-1),B9=["href"],A9={class:"am-cc__data"},k9=m("span",{class:"am-icon-border-plus"},null,-1),D9={class:"am-cc__data-text"},F9={class:"am-cc__data"},w9=m("span",{class:"am-icon-file-text"},null,-1),P9={class:"am-cc__data-text"},T9={class:"am-cc__data"},L9=m("span",{class:"am-icon-tickets"},null,-1),S9={class:"am-cc__data-text"},I9=m("span",{class:"am-icon-locations"},null,-1),$9=["href"],N9={key:1,class:"am-cc__data-text"},O9={class:"am-cc__data"},M9=m("span",{class:"am-icon-tickets"},null,-1),V9={class:"am-cc__data-text"},R9={name:"CollapseCard"},br=Object.assign(R9,{props:{id:{type:Number,default:0},start:{type:[String,Object,Array,Function],required:!0},name:{type:String,default:""},employee:{type:[Object,Array],default:()=>{}},customers:{type:[Array],default:()=>{}},location:{type:[String,Object],default:""},qrCodes:{type:Array,default:()=>[]},price:{type:Number,default:0},duration:{type:Number,default:0},periods:{type:Array,default:()=>{}},extras:{type:Object,default:()=>{}},tickets:{type:Object,default:()=>{}},customFields:{type:Array,default:()=>[]},googleMeetLink:{type:String,default:""},microsoftTeamsLink:{type:String,default:""},zoomLink:{type:String,default:""},lessonSpaceLink:{type:String,default:""},reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},booking:{type:Object,default:()=>{}},isPackageBooking:{type:Boolean,default:!1},responsiveClass:{type:String,default:""},parentWidth:{type:Number,default:1200},customizedOptions:{type:Object,required:!0}},emits:["cancelBooking","rescheduling","editAppointment","editEvent","addEventAttendee","listEventAttendees","statusChange","showQrCodes"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("shortcodeData"),o=U("settings");let i=U("originKey");const r=U("amLabels");let x=U("licence"),c=V(!1);function f(O){O.stopPropagation(),c.value=!c.value}function p(){return d()&&(!e.isPackageBooking&&e.booking.price>0&&oo(e.reservation,e.bookable.settings)||!!(e.reservation.cancelable||o.roles.allowCustomerReschedule&&e.reservation.reschedulable))}function d(){return e.booking&&e.booking.status==="approved"||e.booking.status==="pending"||e.booking.status==="waiting"}function _(){e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!0),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!0),$e.post("/invoices/"+e.reservation.bookings[0].payments[0].id,{format:"pdf"},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(O=>{window.open(Fl(O))}).catch(O=>{console.log(O.message)}).finally(()=>{e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!1),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!1)})}function T(){e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!0),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!0);const O=o.notifications.invoiceFormat||"pdf";$e.post("/invoices/"+e.reservation.bookings[0].payments[0].id,{format:O},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(H=>{let z=Fl(H,O);const X=document.createElement("a");X.href=z,X.download=`Invoice.${O}`,document.body.appendChild(X),X.click(),document.body.removeChild(X)}).catch(H=>{console.log(H.message)}).finally(()=>{e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!1),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!1)})}function A(){c.value=!1}function E(){a("cancelBooking",e.booking),c.value=!1}function P(O){a("edit"+O.charAt(0).toUpperCase()+O.slice(1),e.reservation),c.value=!1}function L(O){a("addEventAttendee",O),c.value=!1}function D(O){a("listEventAttendees",O),c.value=!1}function h(){a("rescheduling",e.reservation,e.booking),c.value=!1}function g(O){return Array.isArray(O)?r.value.event_staff:!Array.isArray(O)&&O.rank&&O.rank==="organizer"?r.value.event_organizer:`${e.employee.firstName} ${e.employee.lastName}`}let y=b(()=>e.reservation.type==="event"?e.reservation.maxCapacity-e.reservation.places+"/"+e.reservation.maxCapacity:""),k=b(()=>{if(e.reservation.type==="appointment")return{label:r.value[l.value.cabinetType==="employee"||e.booking.status==="approved"?e.reservation.status:e.booking.status],class:l.value.cabinetType==="employee"||e.booking.status==="approved"?e.reservation.status:e.booking.status};if(e.reservation.type==="event"){if(l.value.cabinetType==="customer")return e.reservation.status==="rejected"||e.reservation.status==="canceled"?{label:r.value.canceled,class:"canceled"}:{label:r.value[e.booking.status],class:e.booking.status};switch(e.reservation.status){case"rejected":case"canceled":return{label:r.value.canceled,class:"canceled"};case"full":return{label:r.value.full,class:"full"};case"waiting":return{label:r.value.waiting_list,class:"waiting"};case"upcoming":return{label:r.value.upcoming,class:"upcoming"};case"approved":if(e.reservation.closed)return{label:r.value.closed,class:"closed"};if(e.reservation.opened&&e.reservation.places>0)return{label:r.value.opened,class:"opened"}}}return{label:"",class:""}}),C=b(()=>e.reservation&&e.reservation.type==="appointment"&&l.value.cabinetType==="employee"&&o.roles.allowWriteAppointments?e.parentWidth<=440?"70px":e.parentWidth<=690?"130px":"160px":"auto"),F=U("amFonts"),R=U("amColors"),M=b(()=>({"--am-c-cc-primary":R.value.colorPrimary,"--am-c-cc-primary-op15":K(R.value.colorPrimary,.15),"--am-c-cc-primary-op70":K(R.value.colorPrimary,.7),"--am-c-cc-error":R.value.colorError,"--am-c-cc-error-op15":K(R.value.colorError,.15),"--am-c-cc-warning":R.value.colorWarning,"--am-c-cc-warning-op15":K(R.value.colorWarning,.15),"--am-c-cc-success":R.value.colorSuccess,"--am-c-cc-success-op15":K(R.value.colorSuccess,.15),"--am-c-cc-bgr":R.value.colorMainBgr,"--am-c-cc-text":R.value.colorMainText,"--am-c-cc-text-op03":K(R.value.colorMainText,.03),"--am-c-cc-text-op10":K(R.value.colorMainText,.1),"--am-c-cc-text-op15":K(R.value.colorMainText,.15),"--am-c-cc-text-op70":K(R.value.colorMainText,.7),"--am-c-cc-text-op90":K(R.value.colorMainText,.9),"--am-font-family":F.value.fontFamily,"--am-status-width":C.value,"--am-rad-inp":"6px","--am-fs-inp":"15px"}));return(O,H)=>{const z=bs;return u(),B("div",{class:"am-cc",style:Be(t(M))},[N(ho,null,{default:S(()=>[N(go,{"heading-class":"am-cc__heading-wrapper",side:t(e).parentWidth>500},{heading:S(()=>[m("div",{class:j(["am-cc__heading",t(e).responsiveClass])},[m("div",{class:j(["am-cc__heading-info",t(e).responsiveClass])},[m("div",{class:j(["am-cc__heading-info__part",t(e).responsiveClass])},[m("div",kg,w(t(e).start),1),t(e).parentWidth>650?(u(),B("div",Dg,w(t(e).name),1)):I("",!0),t(e).reservation.type==="event"&&t(l).cabinetType==="employee"&&t(e).parentWidth<=650?(u(),B("div",{key:1,class:j(["am-cc__places",t(e).responsiveClass])},w(t(y)),3)):I("",!0),t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(e).customers.length===1&&t(e).customizedOptions.customer.visibility&&t(e).parentWidth<=650?(u(),B("div",{key:2,class:j(["am-cc__customer",t(e).responsiveClass])},[t(e).customers[0].bookingStatus==="waiting"?(u(),B("span",Fg)):I("",!0),ce(" "+w(`${t(e).customers[0].firstName} ${t(e).customers[0].lastName}`),1)],2)):I("",!0),t(e).reservation&&t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(o).roles.allowWriteAppointments&&t(e).parentWidth<=650?(u(),Y(yi,{key:3,id:t(e).reservation.id,status:t(e).reservation.status,class:"am-cc__status am-cc__status--dropdown",onStatusChange:H[0]||(H[0]=(X,le)=>t(a)("statusChange",X,le))},null,8,["id","status"])):t(e).booking&&t(e).parentWidth<=650?(u(),B("div",{key:4,class:j(["am-cc__status",`am-cc__status-${t(k).class}`])},w(t(k).label),3)):I("",!0)],2),m("div",{class:j(["am-cc__heading-info__part",t(e).responsiveClass])},[t(e).parentWidth<=650?(u(),B("div",wg,w(t(e).name),1)):I("",!0),t(e).reservation.type==="event"&&t(l).cabinetType==="employee"&&t(e).parentWidth>650?(u(),B("div",Pg,w(t(y)),1)):I("",!0),t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(e).customers.length===1&&t(e).customizedOptions.customer.visibility&&t(e).parentWidth>650?(u(),B("div",Tg,[t(e).customers[0].bookingStatus==="waiting"?(u(),B("span",Lg)):I("",!0),ce(" "+w(`${t(e).customers[0].firstName} ${t(e).customers[0].lastName}`),1)])):I("",!0),t(e).reservation&&t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(o).roles.allowWriteAppointments&&t(e).parentWidth>650?(u(),Y(yi,{key:3,id:t(e).reservation.id,status:t(e).reservation.status,class:"am-cc__status am-cc__status--dropdown",onStatusChange:H[1]||(H[1]=(X,le)=>t(a)("statusChange",X,le))},null,8,["id","status"])):t(e).booking&&t(e).parentWidth>650?(u(),B("div",{key:4,class:j(["am-cc__status",`am-cc__status-${t(k).class}`])},w(t(k).label),3)):I("",!0)],2)],2),t(l).cabinetType==="employee"?(u(),B("div",{key:0,class:j(["am-cc__heading-actions",t(e).responsiveClass])},[t(e).reservation.type!=="appointment"||t(o).roles.allowWriteAppointments?(u(),Y(z,{key:0,ref:"editRef",visible:t(c),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(M),trigger:"click"},{reference:S(()=>[t(e).reservation?(u(),B("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:f})):I("",!0)]),default:S(()=>[t(e).reservation.type==="appointment"&&t(o).roles.allowWriteAppointments||t(e).reservation.type==="event"&&t(o).roles.allowWriteEvents?$t((u(),B("div",Sg,[m("div",{class:"am-cc__edit-item am-edit",onClick:H[2]||(H[2]=X=>P(t(e).reservation.type))},[Ig,m("span",$g,w(t(r).edit),1)])])),[[t(Qt),A]]):I("",!0),t(e).reservation.type==="event"?(u(),B(ne,{key:1},[t(o).roles.allowWriteEvents?$t((u(),B("div",Ng,[m("div",{class:"am-cc__edit-item am-edit",onClick:H[3]||(H[3]=X=>L(t(e).reservation))},[Og,m("span",Mg,w(t(r).event_add_attendee),1)])])),[[t(Qt),A]]):I("",!0),$t((u(),B("div",Vg,[m("div",{class:"am-cc__edit-item am-edit",onClick:H[4]||(H[4]=X=>D(t(e).reservation))},[Rg,m("span",qg,w(t(r).attendees),1)])])),[[t(Qt),A]])],64)):I("",!0)]),_:1},8,["visible","popper-style"])):I("",!0)],2)):!t(x).isStarter||p()?(u(),B("div",{key:1,class:j(["am-cc__heading-actions",t(e).responsiveClass])},[d()&&t(e).booking.status!=="waiting"&&!t(e).isPackageBooking&&!t(e).booking.packageCustomerService&&t(e).booking.price>0&&t(oo)(t(e).reservation,t(e).bookable.settings)?(u(),Y(Cr,{key:0,reservation:t(e).reservation,bookable:t(e).bookable},null,8,["reservation","bookable"])):I("",!0),!t(x).isStarter||d()&&(t(e).reservation.cancelable||t(o).roles.allowCustomerReschedule&&t(e).reservation.reschedulable)?(u(),Y(z,{key:1,ref:"editRef",visible:t(c),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(M),trigger:"click"},{reference:S(()=>[t(e).booking?(u(),B("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:f})):I("",!0)]),default:S(()=>[$t((u(),B("div",Ug,[t(e).reservation.type==="appointment"&&d()&&t(o).roles.allowCustomerReschedule&&t(e).reservation.reschedulable?(u(),B("div",{key:0,class:"am-cc__edit-item",onClick:h},[zg,m("span",jg,w(t(r).reschedule),1)])):I("",!0),!t(x).isStarter&&t(e).booking.status!=="waiting"&&t(o).featuresIntegrations.invoices.enabled?(u(),B("div",{key:1,class:"am-cc__edit-item",onClick:_},[Yg,m("span",Wg,w(t(r).preview_invoice),1)])):I("",!0),!t(x).isStarter&&t(e).booking.status!=="waiting"&&t(o).featuresIntegrations.invoices.enabled?(u(),B("div",{key:2,class:"am-cc__edit-item",onClick:T},[Hg,m("span",Zg,w(t(r).download_invoice),1)])):I("",!0),t(e).reservation.cancelable&&d()?(u(),B("div",{key:3,class:"am-cc__edit-item am-delete",onClick:E},[Gg,m("span",Jg,w(t(r).cancel),1)])):I("",!0)])),[[t(Qt),A]])]),_:1},8,["visible","popper-style"])):I("",!0)],2)):I("",!0)],2)]),default:S(()=>[m("div",{class:j(["am-cc__content",t(e).responsiveClass])},[m("div",Xg,[t(i)==="capc"&&n.customizedOptions.employee.visibility?(u(),B(ne,{key:0},[(Array.isArray(t(e).employee)?t(e).employee.length:Object.keys(t(e).employee).length)?(u(),Y(Ua,{key:0,"header-text":Array.isArray(t(e).employee)?t(r).view_employees:t(r).provider_profile,type:"employee","content-data":t(e).employee},{default:S(()=>[m("div",Qg,[Kg,m("span",e9,w(g(t(e).employee)),1)])]),_:1},8,["header-text","content-data"])):I("",!0)],64)):I("",!0),t(i)==="cape"&&t(e).reservation.type==="appointment"&&t(e).customizedOptions.customer.visibility?(u(),B(ne,{key:1},[t(e).customers.length?(u(),Y(Ua,{key:0,"header-text":t(e).customers.length>1?t(r).customers:t(r).customer,type:"customers","content-data":t(e).customers},{default:S(()=>[m("div",t9,[a9,m("span",s9,w(t(e).customers.length>1?t(r).customers:t(r).customer),1)])]),_:1},8,["header-text","content-data"])):I("",!0)],64)):I("",!0),t(e).price&&t(e).customizedOptions.price.visibility?(u(),B("div",l9,[n9,m("span",o9,w(t(nt)(t(e).price)),1)])):I("",!0),t(e).duration?(u(),B("div",i9,[r9,m("span",c9,w(t(hs)(t(e).duration,t(r).h,t(r).min)),1)])):I("",!0),n.periods.length?(u(),Y(Ua,{key:4,"header-text":t(r).event_timetable,type:"period","content-data":t(e).periods},{default:S(()=>[m("div",x9,[u9,m("span",d9,w(t(r).event_timetable),1)])]),_:1},8,["header-text","content-data"])):I("",!0),t(o).featuresIntegrations.googleCalendar.enabled&&t(e).googleMeetLink?(u(),B("div",m9,[p9,m("a",{class:"am-cc__data-text link",href:t(e).googleMeetLink,target:"_blank",tabindex:"-1"},w(t(r).google_meet_link),9,f9)])):I("",!0),t(o).featuresIntegrations.outlookCalendar.enabled&&t(e).microsoftTeamsLink?(u(),B("div",g9,[h9,m("a",{class:"am-cc__data-text link",href:t(e).microsoftTeamsLink,target:"_blank",tabindex:"-1"},w(t(r).microsoft_teams_link),9,v9)])):I("",!0),t(o).featuresIntegrations.zoom.enabled&&t(e).zoomLink?(u(),B("div",E9,[_9,m("a",{class:"am-cc__data-text link",href:t(e).zoomLink,target:"_blank",tabindex:"-1"},w(t(r).zoom_link),9,C9)])):I("",!0),t(o).featuresIntegrations.lessonSpace.enabled&&t(e).lessonSpaceLink?(u(),B("div",y9,[b9,m("a",{class:"am-cc__data-text link",href:t(e).lessonSpaceLink,target:"_blank",tabindex:"-1"},w(t(r).lesson_space_link),9,B9)])):I("",!0),Object.keys(t(e).extras).length?(u(),Y(Ua,{key:9,"header-text":`${Object.keys(t(e).extras).length} ${t(r).extras}`,type:"extras","content-data":t(e).extras},{default:S(()=>[m("div",A9,[k9,m("span",D9,w(`${Object.keys(t(e).extras).length} ${t(r).extras}`),1)])]),_:1},8,["header-text","content-data"])):I("",!0),t(e).customFields.length&&t(o).featuresIntegrations.customFields.enabled?(u(),Y(Ua,{key:10,"header-text":t(r).custom_fields,type:"customField","content-data":t(e).customFields},{default:S(()=>[m("div",F9,[w9,m("span",P9,w(t(r).custom_fields),1)])]),_:1},8,["header-text","content-data"])):I("",!0),Object.keys(t(e).tickets).length?(u(),Y(Ua,{key:11,"header-text":t(r).event_tickets,type:"ticket","content-data":t(e).tickets},{default:S(()=>[m("div",T9,[L9,m("span",S9,w(t(r).event_tickets),1)])]),_:1},8,["header-text","content-data"])):I("",!0),t(e).location?(u(),B("div",{key:12,class:j(["am-cc__data",{link:t(e).location.address}])},[I9,t(e).location.address?(u(),B("a",{key:0,class:"am-cc__data-text",href:`https://maps.google.com/?q=${t(e).location.address}`,target:"_blank",tabindex:"-1"},w(t(e).location.name),9,$9)):(u(),B("span",N9,w(t(e).location.name),1))],2)):I("",!0),t(e).qrCodes.length?(u(),Y(Ua,{key:13,type:"qrCode","header-text":t(r).e_tickets,"content-data":t(e).qrCodes},{default:S(()=>[m("div",O9,[M9,m("span",V9,w(t(r).e_tickets),1)])]),_:1},8,["header-text","content-data"])):I("",!0)])],2)]),_:1},8,["side"])]),_:1})],4)}}});const q9={class:"am-csd__header"},U9={class:"am-csd__header-text"},z9=m("span",{class:"am-icon-clearable"},null,-1),j9={class:"am-csd__footer"},Y9={name:"AppointmentBooking"},Br=Object.assign(Y9,{props:{visibility:{type:Boolean,default:!1},appointment:{type:Object,default:null},employees:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},slotsParams:{type:Object,default:()=>{}},isPackage:{type:Boolean,default:!1},labels:{type:Object,required:!0},customizedOptions:{type:Object,required:!0}},emits:["close","success","error","employee-selection","location-selection"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("settings");let o=V("");function i(pe){o.value=pe.toLowerCase()}let r=b(()=>o.value?e.employees.filter(pe=>`${pe.firstName} ${pe.lastName}`.toLowerCase().includes(o.value)&&pe.show):e.employees.filter(pe=>pe.show)),x=V("");function c(pe){x.value=pe.toLowerCase()}let f=b(()=>x.value?e.locations.filter(pe=>pe.name.toLowerCase().includes(x.value)):e.locations),p=U("amLabels"),d=V(null),_=V(null);xt(()=>e.appointment,pe=>{setTimeout(()=>{O.value++},200);let ie=JSON.parse(JSON.stringify(pe));ie&&ie.bookingStart&&(d.value=ie.bookingStart.split(" ")[0],_.value=ie.bookingStart.split(" ")[1].substring(0,5))});let T=V(null),A=V(0),E=U("sidebarCollapsed");window.addEventListener("resize",P);function P(){T.value&&(A.value=T.value.offsetWidth)}xt(E,pe=>{pe?setTimeout(()=>{L()},1500):setTimeout(()=>{L()},500)});function L(){A.value=T.value.offsetWidth}Ze(()=>{uo(()=>{A.value=T.value.offsetWidth})});let D=b(()=>e.visibility);xt(D,pe=>{pe&&setTimeout(()=>{A.value=T.value.offsetWidth},300)});let h=b(()=>ot(A.value)),g=V(!1),y=V(null),k=V("");function C(){g.value=!1,k.value=""}let F=V(null),R=b(()=>F.value?F.value.calendarSlotsLoading:!0),M=U("cabinetType"),O=V(0),H=V(!1),z=V({employee:null,location:null}),X=V(!0),le=V(!0),Q=b(()=>e.appointment&&!e.appointment.id&&(e.employees.length||e.locations.length)&&(e.customizedOptions.employee.visibility||e.customizedOptions.location.visibility)&&(X.value||le.value)),ue=V(null),ee=b(()=>Q.value?{employee:[{required:"employee"in e.customizedOptions?e.customizedOptions.employee.required:!1,message:e.labels.please_select_employee,trigger:"submit"}],location:[{required:"location"in e.customizedOptions?e.customizedOptions.location.required:!1,message:e.labels.please_select_location,trigger:"submit"}]}:{}),me=b(()=>{let pe={};return z.value.employee?pe.providerIds=[z.value.employee]:"providerIds"in e.slotsParams&&e.slotsParams.providerIds.length&&(pe.providerIds=e.slotsParams.providerIds),z.value.location?pe.locationId=z.value.location:"locationId"in e.slotsParams&&e.slotsParams.locationId?pe.locationId=e.slotsParams.locationId:pe.locationId=null,Object.assign({},e.slotsParams,pe)});function se(){ue.value&&ue.value.clearValidate(),H.value=!0,O.value++,a("employee-selection",z.value.employee),a("location-selection",z.value.location)}function _e(pe){z.value.employee=pe,se()}function de(){Q.value&&(z.value.employee=null,z.value.location=null,X.value=!0,le.value=!0,se()),a("close")}xt(D,pe=>{pe&&e.employees.length===1&&(z.value.employee=e.employees[0].id,X.value=!1),pe&&e.locations.length===1&&(z.value.location=e.locations[0].id,le.value=!1),pe&&(e.locations.length===1||e.employees.length===1)&&se()});let oe=V();ze("formWrapper",oe);let ye=b(()=>s.getters["entities/getService"](e.appointment.serviceId).duration);ze("calendarSlotDuration",ye);let $=V(!0);ze("calendarChangeSideBar",$);let W=V(0);ze("calendarServiceDuration",W);function ae(){"id"in e.appointment?Z():he()}function J(pe){let ie=pe?"UTC":s.getters["cabinet/getTimeZone"],je=d.value+" "+_.value,ve=null,Pe=null;if(pe){let Ve=zo(je);Pe=Uo(Ve),ve=Ve}else ve=je;return{utcOffset:Pe,bookingStart:ve,timeZone:ie}}function Z(){F.value.calendarSlotsLoading=!0;let pe=J(!1);zs()===s.getters["cabinet/getTimeZone"]&&l.general.showClientTimeZone&&(pe.utcOffset=Uo(zo(d.value+" "+_.value))),$e.post("/bookings/reassign/"+e.appointment.bookings.filter(ie=>ie.status==="approved"||ie.status==="pending"||ie.status==="waiting")[0].id,pe,Object.assign(Ue(s),{params:{source:"cabinet-"+M.value}})).then(()=>{F.value.calendarSlotsLoading=!1,a("success",{message:p.value.appointment_rescheduled})}).catch(ie=>{F.value.calendarSlotsLoading=!1,ie.response&&(!("data"in ie.response.data)&&"message"in ie.response.data&&(g.value=!0,k.value=ie.response.data.message,setTimeout(function(){gt(oe.value,y.value.$el,0,300)},500)),"data"in ie.response&&"data"in ie.response.data&&"customerAlreadyBooked"in ie.response.data.data&&(g.value=!0,k.value=e.labels.customer_already_booked_app,setTimeout(function(){gt(oe.value,y.value.$el,0,300)},500)),"data"in ie.response&&"data"in ie.response.data&&"cancelBookingUnavailable"in ie.response.data.data&&(g.value=!0,k.value=e.labels.booking_cancel_exception,setTimeout(function(){gt(oe.value,y.value.$el,0,300)},500)),"data"in ie.response&&"data"in ie.response.data&&"timeSlotUnavailable"in ie.response.data.data&&ie.response.data.data.timeSlotUnavailable===!0&&(g.value=!0,k.value=e.labels.time_slot_unavailable,setTimeout(function(){gt(oe.value,y.value.$el,0,300)},500)),"data"in ie.response&&"data"in ie.response.data&&"rescheduleBookingUnavailable"in ie.response.data.data&&ie.response.data.data.rescheduleBookingUnavailable===!0&&(g.value=!0,k.value=e.labels.booking_reschedule_exception,setTimeout(function(){gt(oe.value,y.value.$el,0,300)},500))),a("error")})}function xe(){F.value.calendarSlotsLoading=!0;let pe=J(l.general.showClientTimeZone&&s.getters["cabinet/getTimeZone"]===zs()),ie=JSON.parse(JSON.stringify(e.appointment));ie.bookingStart=pe.bookingStart,ie.bookings[0].utcOffset=pe.utcOffset,ie.bookings[0].timeZone=pe.timeZone,ie.providerId=parseInt(re.value),ie.locationId=parseInt(be.value),$e.post("/bookings",ie,Ue(s)).then(je=>{F.value.calendarSlotsLoading=!1,Kr(s,je),a("success",{message:p.value.booking_added_success})}).catch(je=>{F.value.calendarSlotsLoading=!1,je.response&&("customerAlreadyBooked"in je.response.data.data&&je.response.data.data.customerAlreadyBooked===!0&&(g.value=!0,k.value=e.labels.customer_already_booked_app,setTimeout(function(){gt(oe.value,y.value.$el,0,300)},500)),"timeSlotUnavailable"in je.response.data.data&&je.response.data.data.timeSlotUnavailable===!0&&(g.value=!0,k.value=e.labels.time_slot_unavailable,setTimeout(function(){gt(oe.value,y.value.$el,0,300)},500)),"packageBookingUnavailable"in je.response.data.data&&je.response.data.data.packageBookingUnavailable===!0&&(g.value=!0,k.value=e.labels.package_booking_unavailable,setTimeout(function(){gt(oe.value,y.value.$el,0,300)},500)),"customerBlocked"in je.response.data.data&&je.response.data.data.customerBlocked===!0&&(g.value=!0,k.value=e.labels.customer_blocked,setTimeout(function(){gt(oe.value,y.value.$el,0,300)},500))),a("error",je)})}function he(){Q.value?ue.value.validate(pe=>{pe?xe():setTimeout(()=>{gt(oe.value,ue.value.$el,0,300)},200)}):xe()}let re=V(null),be=V(null),te=V(null);function Ae(pe,ie){if(te.value=ie,H.value=!1,!e.appointment.bookingStart){let ve=wl(Object.keys(ie));return{calendarStartDate:ve[0],calendarEventSlots:[],calendarEventDate:ve[0],calendarEventSlot:null}}let je=e.appointment.bookingStart.split(" ");return{calendarStartDate:je[0],calendarEventSlots:je[0]in ie?Object.keys(ie[je[0]]):[],calendarEventDate:je[0],calendarEventSlot:je[1].slice(0,5)}}ze("useSlotsCallback",Ae),ze("useRange",()=>{if(!e.appointment.bookingStart)return{start:null,end:null};let pe=e.appointment.bookingStart.split(" ")[0];return{start:Ce(pe,"YYYY-MM-DD").startOf("month").subtract(6,"days").format("YYYY-MM-DD"),end:Ce(pe,"YYYY-MM-DD").endOf("month").add(12,"days").format("YYYY-MM-DD")}}),ze("useSelectedDuration",()=>{});function we(){let pe=Object.keys(te.value[d.value]);pe.length&&(re.value=_.value&&te.value[d.value][_.value]?te.value[d.value][_.value][0].e:te.value[d.value][pe[0]][0].e,be.value=_.value&&te.value[d.value][_.value]?te.value[d.value][_.value][0].l:te.value[d.value][pe[0]][0].l)}ze("useBusySlots",()=>[]),ze("useSelectedDate",(pe,ie)=>(d.value=ie,e.appointment&&e.appointment.bookingStart&&(_.value=e.appointment.bookingStart.split(" ")[1].substring(0,5)),we(),Object.keys(te.value[ie]))),ze("useSelectedTime",(pe,ie)=>{_.value=ie.substring(0,5),d.value?we():e.appointment&&(d.value=e.appointment.bookingStart.split(" ")[0],we())}),ze("useDeselectedDate",()=>{d.value="",_.value="",re.value=null,be.value=null});let Me=U("amFonts"),Le=U("amColors"),ke=b(()=>({"--am-c-csd-text":Le.value.colorMainText,"--am-c-csd-bgr":Le.value.colorMainBgr,"--am-c-csd-text-op10":K(Le.value.colorMainText,.1),"--am-c-scroll-op30":K(Le.value.colorPrimary,.3),"--am-c-scroll-op10":K(Le.value.colorPrimary,.1),"--am-font-family":Me.value.fontFamily}));return(pe,ie)=>{const je=vt,ve=st;return u(),Y(Sa,{visibility:t(e).visibility,"custom-class":"am-csd am-csd__reschedule",style:Be(t(ke)),position:"center"},{footer:S(()=>[m("div",j9,[N(Fe,{category:"secondary",size:t(A)<=360?"small":"default",type:t(e).customizedOptions.cancelBtn.buttonType,disabled:t(H)||t(R),onClick:de},{default:S(()=>[ce(w(n.labels.cancel),1)]),_:1},8,["size","type","disabled"]),N(Fe,{size:t(A)<=360?"small":"default",type:t(e).customizedOptions.continueBtn.buttonType,disabled:!!(t(H)||t(R)||!t(d)||!t(_)),onClick:ae},{default:S(()=>[ce(w(n.labels.continue),1)]),_:1},8,["size","type","disabled"])])]),default:S(()=>[m("div",{ref_key:"popupInnerRef",ref:T,class:"am-csd__inner"},[m("div",q9,[m("div",U9,w(n.labels.no_selected_slot_requirements),1),m("div",{class:"am-csd__header-btn",onClick:de},[N(Ge,{icon:"close"})])]),m("div",{ref_key:"rescheduleRef",ref:oe,class:"am-csd__content"},[t(g)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:y,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:C,onTriggerClose:C},{title:S(()=>[z9,ce(" "+w(t(k)),1)]),_:1},512)):I("",!0),t(Q)?(u(),Y(ve,{key:1,ref_key:"packageFormRef",ref:ue,class:"am-csd__filter-wrapper",rules:t(ee),model:t(z),"label-position":"top"},{default:S(()=>[m("div",{class:j(["am-csd__filter am-csd__filter-employee",t(h)])},[t(e).employees.length&&t(X)&&t(e).customizedOptions.employee.visibility?(u(),Y(je,{key:0,class:j([{"am-csd__filter-full":!(t(e).locations.length&&t(le)&&t(e).customizedOptions.location.visibility)},t(h)]),label:`${n.labels.package_appointment_employee}:`,prop:"employee"},{default:S(()=>[N(Je,{modelValue:t(z).employee,"onUpdate:modelValue":ie[0]||(ie[0]=Pe=>t(z).employee=Pe),clearable:"",filterable:t(e).customizedOptions.employee.filterable,placeholder:`${n.labels.package_select_employee}...`,"fit-input-width":!0,"popper-class":"am-csd__filter-employees",disabled:t(H),"filter-method":i,onChange:se},{default:S(()=>[(u(!0),B(ne,null,Ee(t(r),Pe=>(u(),Y(Ye,{key:Pe.id,value:Pe.id,label:`${Pe.firstName} ${Pe.lastName}`},{default:S(()=>[N(Z0,{identifier:Pe.id,label:`${Pe.firstName} ${Pe.lastName}`,price:0,"image-thumb":Pe.pictureThumbPath,description:Pe.description,"dialog-title":n.labels.employee_information_package,"dialog-button-text":n.labels.select_this_employee_package,badge:Pe.badge,onClick:_e},null,8,["identifier","label","image-thumb","description","dialog-title","dialog-button-text","badge"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):I("",!0),t(e).locations.length&&t(le)&&t(e).customizedOptions.location.visibility?(u(),Y(je,{key:1,class:j([{"am-csd__filter-full":!(t(e).employees.length&&t(X)&&t(e).customizedOptions.employee.visibility)},t(h)]),label:`${n.labels.package_appointment_location}:`,prop:"location"},{default:S(()=>[N(Je,{modelValue:t(z).location,"onUpdate:modelValue":ie[1]||(ie[1]=Pe=>t(z).location=Pe),clearable:"",filterable:t(e).customizedOptions.location.filterable,placeholder:`${n.labels.package_select_location}...`,"fit-input-width":!0,disabled:t(H),"filter-method":c,onChange:se},{default:S(()=>[(u(!0),B(ne,null,Ee(t(f),Pe=>(u(),Y(Ye,{key:Pe.id,value:Pe.id,label:Pe.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):I("",!0)],2)]),_:1},8,["rules","model"])):I("",!0),t(e).appointment!==null?(u(),Y(Qr,{key:2,id:0,ref_key:"calendarRef",ref:F,"preselect-slot":!1,"load-counter":t(O),"end-time":t(e).customizedOptions.endTimeVisibility.visibility,"time-zone":t(e).customizedOptions.timeZoneVisibility.visibility,"show-estimated-pricing":t(e).appointment.id&&"estimatedPricingVisibility"in t(e).customizedOptions?t(e).customizedOptions.estimatedPricingVisibility.visibility:!1,"show-indicator-pricing":t(e).appointment.id&&"indicatorPricingVisibility"in t(e).customizedOptions?t(e).customizedOptions.indicatorPricingVisibility.visibility:!1,"show-slot-pricing":t(e).appointment.id&&"slotPricingVisibility"in t(e).customizedOptions?t(e).customizedOptions.slotPricingVisibility.visibility:!1,"label-slots-selected":n.labels.date_time_slots_selected,"fetched-slots":null,"service-id":parseInt(t(e).appointment.serviceId),"is-package":t(e).appointment.bookings[0].packageCustomerService!==null,date:t(e).appointment&&t(e).appointment.bookingStart?t(e).appointment.bookingStart.split(" ")[0]:"","slots-params":t(me)},null,8,["load-counter","end-time","time-zone","show-estimated-pricing","show-indicator-pricing","show-slot-pricing","label-slots-selected","service-id","is-package","date","slots-params"])):I("",!0)],512)],512)]),_:1},8,["visibility","style"])}}});const W9={class:"am-csd__inner"},H9={class:"am-csd__header"},Z9={class:"am-csd__header-text"},G9={class:"am-csd__content"},J9={class:"am-ccpss__heading"},X9={class:"am-csd__footer"},Q9={name:"CancelBooking"},Ha=Object.assign(Q9,{props:{visibility:{type:Boolean,required:!0},title:{type:String,default:""},description:{type:String,default:""},closeBtnText:{type:String,required:!0},confirmBtnText:{type:String,required:!0},loading:{type:Boolean,default:!1},count:{type:Number,default:1},customizedOptions:{type:Object,required:!0}},emits:["close","confirm","decline"],setup(n,{emit:a}){const e=n;let s=U("containerWidth"),l=U("amFonts"),o=U("amColors"),i=b(()=>({"--am-c-csd-text":o.value.colorMainText,"--am-c-csd-bgr":o.value.colorMainBgr,"--am-font-family":l.value.fontFamily}));return(r,x)=>{const c=Ol,f=Ml;return u(),Y(Sa,{visibility:t(e).visibility,"custom-class":"am-csd am-csd__cancel",style:Be(t(i)),position:"center"},{footer:S(()=>[m("div",X9,[N(Fe,{category:"secondary",size:t(s)<=360?"small":"default",type:n.customizedOptions.cancelBtn.buttonType,disabled:n.loading,onClick:x[1]||(x[1]=()=>{a("decline")})},{default:S(()=>[ce(w(t(e).closeBtnText),1)]),_:1},8,["size","type","disabled"]),N(Fe,{category:"danger",size:t(s)<=360?"small":"default",type:n.customizedOptions.confirmBtn.buttonType,disabled:n.loading,onClick:x[2]||(x[2]=()=>{a("confirm")})},{default:S(()=>[ce(w(t(e).confirmBtnText),1)]),_:1},8,["size","type","disabled"])])]),default:S(()=>[m("div",W9,[n.loading?(u(),Y(f,{key:1,animated:"",class:"am-ccpss"},{template:S(()=>[m("div",J9,[N(c,{variant:"rect"})]),(u(!0),B(ne,null,Ee(new Array(t(e).count),p=>(u(),B("div",{key:p,class:"am-ccpss__text"},[N(c,{variant:"rect"})]))),128))]),_:1})):(u(),B(ne,{key:0},[m("div",H9,[m("div",Z9,w(t(e).title),1),m("div",{class:"am-csd__header-btn",onClick:x[0]||(x[0]=()=>{a("close")})},[N(Ge,{icon:"close"})])]),m("div",G9,[m("p",null,w(t(e).description),1)])],64))])]),_:1},8,["visibility","style"])}}});const K9={name:"CabinetAppointmentsList"},Ar=Object.assign(K9,{props:{groupedAppointments:{type:Object,default:null},responsiveClass:{type:String,default:""},pageWidth:{type:Number},isPackageBooking:{type:Boolean,default:!1},stepKey:{type:String,required:!0}},emits:["booked","canceled","editAppointment","statusChange"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("originKey");const o=U("settings");let i=U("amLabels"),r=U("cabinetType"),x=V(null),c=V(null),f=V(null);function p(R=null){c.value=null,a("booked",R)}let d=V(!1);function _(){d.value=!0,$e.post("/bookings/cancel/"+x.value.id,{type:"appointment"},Object.assign(Ue(s),{params:{source:"cabinet-"+r.value}})).then(()=>{x.value=null,a("canceled",{message:i.value.appointment_canceled})}).catch(R=>{console.log(R)}).finally(()=>{d.value=!1})}function T(R){let M={total:0,bookable:0,discount:0,tax:0};return R.bookings.forEach(O=>{if(O.status==="approved"||O.status==="pending"){let H=vo(s,{price:O.price,persons:O.persons,aggregatedPrice:O.aggregatedPrice,extras:O.extras,tax:O.tax,coupon:O.coupon},!1);M.total+=H.total,M.bookable+=H.bookable,M.discount+=H.discount,M.tax+=H.tax}}),M.total-M.discount+M.tax}function A(R){let M=[],O=0,H=R;H.bookings.forEach(X=>{X.extras.forEach(le=>{M.push({id:le.extraId,quantity:le.quantity})}),"duration"in X&&X.duration&&X.duration>O&&(X.status==="approved"||X.status==="pending")&&(O=X.duration)});let z={serviceId:H.serviceId,serviceDuration:O||null,locationId:H.locationId,providerIds:[H.providerId],extras:JSON.stringify(M),excludeAppointmentId:H.isGroup?null:H.id,group:1,timeZone:s.getters["cabinet/getTimeZone"],page:"cabinet",structured:!0};c.value=R,f.value=z}function E(R){return s.getters["entities/getEmployee"](R)}function P(R){return R.bookings.filter(M=>M.status!=="rejected"&&M.status!=="canceled").map(M=>{let O;return"info"in M&&M.info?(O="customer"in M?M.customer:{},O=Object.assign(O,JSON.parse(M.info))):O=M.customer,O.bookingStatus=M.status,O})}let L=U("amCustomize");const D=U("labels"),h=U("localLanguage");let g=b(()=>o.general.usedLanguages.includes(h.value));function y(R){let M=tt({...D}),O=L.value[R].translations;return O&&Object.keys(O).forEach(H=>{O[H][h.value]&&g.value?M[H]=O[H][h.value]:O[H].default&&(M[H]=O[H].default)}),M}function k(R){return L.value[R].options}let C=U("amColors"),F=b(()=>({"--am-c-capa-bgr":C.value.colorMainBgr,"--am-c-capa-text":C.value.colorMainText,"--am-c-capa-text-op70":K(C.value.colorMainText,.7),"--am-c-capa-text-op25":K(C.value.colorMainText,.25),"--am-c-capa-primary":C.value.colorPrimary}));return(R,M)=>(u(),B(ne,null,[m("div",{class:j(["am-capa__wrapper",[{"am-no-border":t(e).groupedAppointments&&Object.keys(t(e).groupedAppointments).length===1},t(e).responsiveClass]]),style:Be(t(F))},[(u(!0),B(ne,null,Ee(t(e).groupedAppointments,(O,H)=>(u(),B("div",{key:H,class:"am-capa"},[m("div",{class:j(["am-capa__date",[{"am-today":t(rt)(H)===t(rt)(t(at)().format("YYYY-MM-DD"))},{"am-no-flag":t(e).groupedAppointments&&Object.keys(t(e).groupedAppointments).length===1},t(e).responsiveClass]])},w(t(rt)(H)),3),(u(!0),B(ne,null,Ee(O.appointments,(z,X)=>(u(),B(ne,{key:X},[t(s).getters["entities/getService"](z.serviceId)?(u(),Y(br,{key:0,start:t(vs)(z.bookingStart.split(" ")[1].slice(0,5)),name:t(s).getters["entities/getService"](z.serviceId).name,employee:E(z.provider.id),customers:P(z),price:T(z),duration:t(gf)(t(s),z),periods:[],extras:t(hf)(z.bookings,t(s).getters["entities/getService"](z.serviceId)),tickets:[],"custom-fields":t(_r)(z.bookings,t(r)),location:z.locationId?t(s).getters["entities/getLocation"](z.locationId):null,"google-meet-link":z.googleMeetUrl,"microsoft-teams-link":z.microsoftTeamsUrl,"zoom-link":z.zoomMeeting?z.zoomMeeting.joinUrl:"","lesson-space-link":z.lessonSpace,bookable:z.service,reservation:z,booking:z.bookings[0],"is-package-booking":t(e).isPackageBooking,"responsive-class":t(e).responsiveClass,"parent-width":t(e).pageWidth,"customized-options":k(t(e).stepKey),onCancelBooking:M[0]||(M[0]=le=>{De(x)?x.value=le:x=le}),onRescheduling:A,onEditAppointment:M[1]||(M[1]=le=>{t(a)("editAppointment",le)}),onStatusChange:M[2]||(M[2]=(le,Q)=>t(a)("statusChange",le,Q))},null,8,["start","name","employee","customers","price","duration","extras","custom-fields","location","google-meet-link","microsoft-teams-link","zoom-link","lesson-space-link","bookable","reservation","booking","is-package-booking","responsive-class","parent-width","customized-options"])):I("",!0)],64))),128))]))),128))],6),t(l)==="capc"?(u(),Y(Ha,{key:0,visibility:t(x)!==null,title:y("cancelAppointment").cancel_appointment,description:y("cancelAppointment").confirm_cancel_appointment,"close-btn-text":y("cancelAppointment").close,"confirm-btn-text":y("cancelAppointment").confirm,"customized-options":k("cancelAppointment"),loading:t(d),onClose:M[3]||(M[3]=O=>De(x)?x.value=null:x=null),onDecline:M[4]||(M[4]=O=>De(x)?x.value=null:x=null),onConfirm:_},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])):I("",!0),t(l)==="capc"?(u(),Y(Br,{key:1,visibility:t(c)!==null,appointment:t(c),"slots-params":t(f),labels:y("rescheduleAppointment"),"customized-options":k("rescheduleAppointment"),onClose:M[5]||(M[5]=O=>De(c)?c.value=null:c=null),onSuccess:p,onError:M[6]||(M[6]=()=>{})},null,8,["visibility","appointment","slots-params","labels","customized-options"])):I("",!0)],64))}});const e8={style:{float:"right"}},t8={class:"am-capai-def__notify"},a8=["innerHTML"],s8={class:"am-capai-def__notify"},l8=["innerHTML"],n8={props:{slotsProps:{type:Object,required:!0},slotsLoading:{type:Boolean,required:!0},isDisabledDate:{type:Function,required:!0},freeSlots:{type:Object,required:!0},times:{type:Array,required:!0},getFreeTimes:{type:Function,required:!0}},emits:["removeSlots","fetchSlots","changedSlotCondition","getSelectedDatesTimes","filterOut","getFreeTimes","selectDate","selectTime"],setup(n,{expose:a,emit:e}){const s=n;let l=Oe(),o=U("amLabels"),i=U("localLanguage");const r=U("settings");let x=U("licence"),c=U("slotsPricing");function f($){return""}let p=$=>{let W=Ce($).format("YYYY-MM-DD");return W in c.value?"am-slots-"+c.value[W].type:""};const d=V(null);let{width:_}=Za(d),T=b(()=>ot(_.value)),A=V({categoryId:b({get:()=>l.getters["appointment/getCategoryId"],set:$=>{l.commit("appointment/setCategoryId",$||null)}}),serviceId:b({get:()=>l.getters["appointment/getServiceId"],set:$=>{l.commit("appointment/setServiceId",$||null)}}),providerId:b({get:()=>l.getters["appointment/getProviderId"],set:$=>{l.commit("appointment/setProviderId",$||null)}}),locationId:b({get:()=>l.getters["appointment/getLocationId"],set:$=>{l.commit("appointment/setLocationId",$||null)}}),lessonSpace:b({get:()=>l.getters["appointment/getLessonSpace"],set:$=>{l.commit("appointment/setLessonSpace",$||"")}}),startDate:b({get:()=>l.getters["appointment/getStartDate"],set:$=>{l.commit("appointment/setStartDate",$||"")}}),startTime:b({get:()=>l.getters["appointment/getStartTime"],set:$=>{l.commit("appointment/setStartTime",$||"")}}),notifyParticipants:b({get:()=>l.getters["appointment/getNotifyParticipants"],set:$=>{l.commit("appointment/setNotifyParticipants",$)}}),createPaymentLinks:b({get:()=>l.getters["appointment/getCreatePaymentLinks"],set:$=>{l.commit("appointment/setCreatePaymentLinks",$)}}),internalNotes:b({get:()=>l.getters["appointment/getInternalNotes"],set:$=>{l.commit("appointment/setInternalNotes",$||"")}})}),E=b(()=>({serviceId:[{required:!0,message:o.value.please_select_service,trigger:["submit","change"]}],startDate:[{required:!0,message:o.value.select_date_warning,trigger:["submit","change"]}],startTime:[{required:!0,message:o.value.select_time_warning,trigger:["submit","change"]}]})),P=b(()=>l.getters["entities/filteredCategories"](l.getters["appointment/getSelection"])),L=V(l.getters["entities/filteredCategories"]({categoryId:null,serviceId:null,providerId:l.getters["appointment/getProviderId"],locationId:null})),D=V("");function h($){D.value=$.toLowerCase()}let g=b(()=>D.value?L.value.filter($=>$.name.toLowerCase().includes(D.value)):L.value),y=b(()=>l.getters["entities/filteredServices"](l.getters["appointment/getSelection"])),k=V(l.getters["entities/filteredServices"]({categoryId:null,serviceId:null,providerId:l.getters["appointment/getProviderId"],locationId:null}));function C($){let W=l.getters["entities/getService"]($),ae=W&&W.settings?JSON.parse(W.settings):null,J=ae&&"payments"in ae&&ae.payments&&"paymentLinks"in ae.payments&&ae.payments.paymentLinks&&"enabled"in ae.payments.paymentLinks?ae.payments.paymentLinks:r.payments.paymentLinks;return J&&J.enabled}let F=V("");function R($){F.value=$.toLowerCase()}let M=b(()=>F.value?k.value.filter($=>$.name.toLowerCase().includes(F.value)):k.value),O=b(()=>l.getters["appointment/getId"]&&l.getters["appointment/getServiceId"]&&k.value.map($=>$.id).indexOf(l.getters["appointment/getServiceId"])===-1?l.getters["entities/getService"](l.getters["appointment/getServiceId"]):null),H=b(()=>l.getters["entities/filteredLocations"](l.getters["appointment/getSelection"])),z=V(l.getters["entities/filteredLocations"]({categoryId:null,serviceId:null,providerId:l.getters["appointment/getProviderId"],locationId:null})),X=V("");function le($){X.value=$.toLowerCase()}let Q=b(()=>X.value?z.value.filter($=>$.name.toLowerCase().includes(X.value)):z.value),ue=b(()=>l.getters["appointment/getId"]&&l.getters["appointment/getLocationId"]&&z.value.map($=>$.id).indexOf(l.getters["appointment/getLocationId"])===-1?l.getters["entities/getLocation"](l.getters["appointment/getLocationId"]):null),ee=V(l.getters["entities/getSpaces"]);function me(){l.commit("appointment/setTargetedDate",null),l.commit("appointment/setStartDate",null),l.commit("appointment/setStartTime",null),e("removeSlots")}function se($,W=null,ae=!1){let J=l.getters["appointment/getTargetedDate"];!$&&!J?$=Ce().toDate():!$&&J&&($=J),l.commit("appointment/setTargetedDate",$&&ae?$:J),A.value.serviceId&&e("fetchSlots",$,W,ae)}function _e(){A.value.startDate&&se(A.value.startDate)}function de($){e("selectTime",$)}function oe($){$?e("selectDate",$):me()}function ye($){$?(clearTimeout(this.searchSpacesTimer),l.commit("auth/setSpacesLoading",!0),$e.get("/entities",{params:{types:["spaces"],lessonSpaceSearch:$}}).then(W=>{ee.value=W.data.data.spaces}).catch(W=>{console.log(W)}).finally(()=>{l.commit("auth/setSpacesLoading",!1)})):ee.value=l.getters["entities/getSpaces"]}return xt(()=>A.value.serviceId,$=>{l.dispatch("appointment/updateEmployeeService",$||null),$&&(l.dispatch("appointment/recreateAllBookingCustomFields",{label:o.value.required_field}),_e())}),Ze(()=>{k.value.length===1&&!l.getters["appointment/getId"]&&l.commit("appointment/setServiceId",k.value[0].id),z.value.length===1&&!l.getters["appointment/getId"]&&l.commit("appointment/setLocationId",z.value[0].id)}),a({detailsFormRef:d}),($,W)=>{const ae=vt,J=Vl,Z=st;return u(),Y(Z,{ref_key:"detailsFormRef",ref:d,model:t(A),rules:t(E),class:"am-capai-def"},{default:S(()=>[t(L).length>1?(u(),Y(ae,{key:0,label:`${t(o).category}`,class:"am-capai-def__item"},{default:S(()=>[N(Je,{modelValue:t(A).categoryId,"onUpdate:modelValue":W[0]||(W[0]=xe=>t(A).categoryId=xe),clearable:"",filterable:"",placeholder:`${t(o).select_service_category}`,"filter-method":h},{default:S(()=>[(u(!0),B(ne,null,Ee(t(g),xe=>(u(),Y(Ye,{key:xe.id,value:xe.id,label:xe.name,disabled:t(A).serviceId&&typeof t(P).find(he=>he.id===xe.id)>"u"},null,8,["value","label","disabled"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):I("",!0),N(ae,{label:`${t(o).services_dropdown}`,prop:"serviceId",class:"am-capai-def__item"},{default:S(()=>[N(Je,{modelValue:t(A).serviceId,"onUpdate:modelValue":W[1]||(W[1]=xe=>t(A).serviceId=xe),disabled:t(k).length===1,clearable:"",filterable:"",placeholder:`${t(o).select_service}`,"filter-method":R},{default:S(()=>[(u(!0),B(ne,null,Ee(t(M),xe=>(u(),Y(Ye,{key:xe.id,value:xe.id,label:xe.name,disabled:typeof t(y).find(he=>he.id===xe.id)>"u"},null,8,["value","label","disabled"]))),128)),t(O)?(u(),Y(Ye,{key:t(O).id,value:t(O).id,label:t(O).name},null,8,["value","label"])):I("",!0)]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),!t(x).isStarter&&t(z).length>1?(u(),Y(ae,{key:1,label:`${t(o).location}`,class:"am-capai-def__item"},{default:S(()=>[N(Je,{modelValue:t(A).locationId,"onUpdate:modelValue":W[2]||(W[2]=xe=>t(A).locationId=xe),disabled:t(z).length===1,clearable:"",filterable:"",placeholder:`${t(o).select_location}`,"filter-method":le,onChange:_e},{default:S(()=>[(u(!0),B(ne,null,Ee(t(Q),xe=>(u(),Y(Ye,{key:xe.id,value:xe.id,label:xe.name,disabled:t(ue)===null&&typeof t(H).find(he=>he.id===xe.id)>"u"},null,8,["value","label","disabled"]))),128)),t(ue)?(u(),Y(Ye,{key:t(ue).id,value:t(ue).id,label:t(ue).name},null,8,["value","label"])):I("",!0)]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])):I("",!0),t(r).lessonSpace.enabled?(u(),Y(ae,{key:2,label:`${t(o).lesson_space}`,class:"am-capai-def__item"},{default:S(()=>[N(Je,{modelValue:t(A).lessonSpace,"onUpdate:modelValue":W[3]||(W[3]=xe=>t(A).lessonSpace=xe),filterable:"",clearable:"",remote:"","remote-method":ye,placeholder:`${t(o).select}`},{default:S(()=>[(u(),Y(Ye,{key:0,value:0,label:t(o).lesson_space_new_space},null,8,["label"])),(u(!0),B(ne,null,Ee(t(ee),xe=>(u(),Y(Ye,{key:xe.id,value:xe.id,label:xe.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):I("",!0),N(ae,{label:`${t(o).date}`,prop:"startDate",class:j(["am-capai-def__item am-w-50",t(T)])},{default:S(()=>[N(ea,{modelValue:t(A).startDate,"onUpdate:modelValue":W[4]||(W[4]=xe=>t(A).startDate=xe),type:"date",format:t(Kt)(),placeholder:t(o).select_date,clearable:!0,lang:t(i),disabled:!t(A).serviceId,"disabled-date":(xe,he)=>t(s).isDisabledDate(xe,null,!0,he),"popper-class":n.slotsLoading?"am-slots-loader":"","cell-class-name":t(p),onPanelChange:W[5]||(W[5]=xe=>{se(xe,null,!0)}),onChange:oe,onFocus:W[6]||(W[6]=xe=>t(A).serviceId&&!t(A).startDate?se(null,null,!0):!1)},null,8,["modelValue","format","placeholder","lang","disabled","disabled-date","popper-class","cell-class-name"])]),_:1},8,["label","class"]),N(ae,{label:`${t(o).time}`,prop:"startTime",class:j(["am-capai-def__item am-w-50",t(T)])},{default:S(()=>[N(Je,{modelValue:t(A).startTime,"onUpdate:modelValue":W[7]||(W[7]=xe=>t(A).startTime=xe),placeholder:`${t(o).select_time}`,disabled:!t(A).startDate,"prefix-icon":"clock",onChange:de},{default:S(()=>[(u(!0),B(ne,null,Ee(t(s).getFreeTimes(null,{date:t(A).startDate,times:t(s).times,time:t(A).startTime},!0),xe=>(u(),Y(Ye,{key:xe,value:xe,label:xe},{default:S(()=>[ce(w(t(vs)(xe))+" ",1),m("span",e8,w(f()),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label","class"]),N(ae,{class:"am-capai-def__item"},{default:S(()=>[m("div",t8,[N(ht,{modelValue:t(A).notifyParticipants,"onUpdate:modelValue":W[8]||(W[8]=xe=>t(A).notifyParticipants=xe),label:t(o).notify_customers},null,8,["modelValue","label"]),N(J,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(o).notify_customers_tooltip},null,8,a8)]),default:S(()=>[N(Ge,{icon:"info-reverse"})]),_:1})])]),_:1}),t(A).notifyParticipants&&t(A).serviceId&&C(t(A).serviceId)?(u(),Y(ae,{key:3,class:"am-capai-def__item"},{default:S(()=>[m("div",s8,[N(ht,{modelValue:t(A).createPaymentLinks,"onUpdate:modelValue":W[9]||(W[9]=xe=>t(A).createPaymentLinks=xe),label:t(o).generate_payment_links},null,8,["modelValue","label"]),N(J,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(o).generate_payment_links_tooltip},null,8,l8)]),default:S(()=>[N(Ge,{icon:"info-reverse"})]),_:1})])]),_:1})):I("",!0),N(ae,{label:`${t(o).note_internal}`,class:"am-capai-def__item"},{default:S(()=>[N(ct,{modelValue:t(A).internalNotes,"onUpdate:modelValue":W[10]||(W[10]=xe=>t(A).internalNotes=xe),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}};function kr(n,a){return Object.assign({},a,{gender:a.gender?a.gender:"",note:a.note?a.note:"",phone:a.phone?a.phone:"",birthday:a.birthday?Ce(a.birthday.date.split(" ")[0]).toDate():null,translations:a.translations?JSON.parse(a.translations):{defaultLanguage:""}})}function o8(n){let a=n.getters["customerInfo/getCustomer"];return Object.assign({},a,{birthday:a.birthday?Ce(a.birthday).format("YYYY-MM-DD"):null,translations:a.translations.defaultLanguage?JSON.stringify(a.translations):null})}const i8=m("span",{class:"am-icon-triangle-info"},null,-1),r8={key:0,class:"am-capai-warn__content"},c8={key:0,class:"am-capai-warn__heading"},x8={key:1,class:"am-capai-warn__text"},Dr={props:{heading:{type:String,default:""},text:{type:String,default:""}},setup(n){const a=n;let e=U("amColors"),s=b(()=>({"--am-c-warning":e.value.colorWarning,"--am-c-warning-op10":K(e.value.colorWarning,.1),"--am-c-main-text":e.value.colorMainText,"--am-c-main-text-op10":K(e.value.colorMainText,.1)}));return(l,o)=>(u(),B("div",{class:"am-capai-warn",style:Be(t(s))},[i8,a.heading||a.text?(u(),B("div",r8,[a.heading?(u(),B("div",c8,w(a.heading),1)):I("",!0),a.text?(u(),B("div",x8,w(a.text),1)):I("",!0)])):I("",!0)],4))}};const u8={class:"am-cap-aec__header"},d8=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),Fr={props:{visibility:{type:Boolean,required:!0},customCss:{type:Object,default:()=>{}},responsiveClass:{type:String,default:""}},emits:["update:visibility","addedCustomer"],setup(n,{emit:a}){const e=n,s=U("settings");let l=U("amLabels");const o=Oe();let i=V("details"),r=V(null),x=V(!1),c=V("success"),f=V("");function p(){x.value=!1,o.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}let d=b(()=>o.getters["customerInfo/getCustomerId"]),_=b(()=>{let z=[];return s.wordpress.locale in o.getters["entities/getSettings"].languages&&z.push({value:o.getters["entities/getSettings"].languages[s.wordpress.locale].wp_locale,label:o.getters["entities/getSettings"].languages[s.wordpress.locale].name}),s.general.usedLanguages.forEach(X=>{X in o.getters["entities/getSettings"].languages&&z.push({value:o.getters["entities/getSettings"].languages[X].wp_locale,label:o.getters["entities/getSettings"].languages[X].name})}),z}),T=V(null),A=V(!1),E=V({firstName:b({get:()=>o.getters["customerInfo/getCustomerFirstName"],set:z=>{o.commit("customerInfo/setCustomerFirstName",z||"")}}),lastName:b({get:()=>o.getters["customerInfo/getCustomerLastName"],set:z=>{o.commit("customerInfo/setCustomerLastName",z||"")}}),email:b({get:()=>o.getters["customerInfo/getCustomerEmail"],set:z=>{o.commit("customerInfo/setCustomerEmail",z||"")}}),phone:b({get:()=>o.getters["customerInfo/getCustomerPhone"],set:z=>{o.commit("customerInfo/setCustomerPhone",z||"")}}),language:b({get:()=>o.getters["customerInfo/getCustomerLanguage"],set:z=>{o.commit("customerInfo/setCustomerLanguage",z||"")}}),gender:b({get:()=>o.getters["customerInfo/getCustomerGender"],set:z=>{o.commit("customerInfo/setCustomerGender",z||"")}}),birthday:b({get:()=>o.getters["customerInfo/getCustomerBirthday"]||"",set:z=>{o.commit("customerInfo/setCustomerBirthday",z?Ce(z).format("YYYY-MM-DD"):"")}}),note:b({get:()=>o.getters["customerInfo/getCustomerNote"],set:z=>{o.commit("customerInfo/setCustomerNote",z||"")}})}),P=V({firstName:[{required:!0,message:l.value.enter_first_name_warning,trigger:["submit","blur"]}],lastName:[{required:!0,message:l.value.enter_last_name_warning,trigger:["submit","blur"]}]}),L=V({firstName:{template:We.text,props:{itemName:"firstName",label:l.value.first_name_colon,placeholder:l.value.enter_first_name,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="user"/>'})}},lastName:{template:We.text,props:{itemName:"lastName",label:l.value.last_name_colon,placeholder:l.value.enter_last_name,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="user"/>'})}},email:{template:We.text,props:{itemName:"email",label:l.value.email_colon,placeholder:l.value.enter_email,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="email"/>'})}},phone:{countryPhoneIso:b({get:()=>o.getters["customerInfo/getCustomerCountryPhoneIso"]||"",set:z=>{o.commit("customerInfo/setCustomerCountryPhoneIso",z?z.toLowerCase():"")}}),template:We.phone,props:{itemName:"phone",label:l.value.phone_colon,placeholder:l.value.enter_phone,defaultCode:b(()=>o.getters["customerInfo/getCustomerCountryPhoneIso"]?o.getters["customerInfo/getCustomerCountryPhoneIso"]:s.general.phoneDefaultCountryCode&&s.general.phoneDefaultCountryCode!=="auto"?s.general.phoneDefaultCountryCode:""),phoneError:b(()=>A.value),whatsAppLabel:l.value.whatsapp_opt_in_text,isWhatsApp:s.notifications.whatsAppEnabled&&s.notifications.whatsAppAccessToken&&s.notifications.whatsAppBusinessID&&s.notifications.whatsAppPhoneID,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`)}},language:{template:We.select,props:{itemName:"language",label:l.value.notification_language,placeholder:l.value.language,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:`
          <IconComponent icon="pennant"/>`}),options:_.value}},gender:{template:We.select,props:{itemName:"gender",label:l.value.gender,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:`
          <IconComponent icon="gender"/>`}),options:[{label:l.value.female,value:"female"},{label:l.value.male,value:"male"}]}},birthday:{template:We.datepicker,props:{itemName:"birthday",label:l.value.date_of_birth,placeholder:l.value.enter_date_of_birth,clearable:!0,readonly:!1,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`)}},note:{template:We["text-area"],props:{itemName:"note",label:l.value.note_internal,itemType:"textarea",class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`)}}});function D(){o.dispatch("customerInfo/resetCustomer"),a("update:visibility",!1)}let h=b(()=>o.getters["customerInfo/getLoading"]);function g(){T.value.validate(z=>{if(!z){i.value="details";return}o.commit("customerInfo/setLoading",!0);let X=o8(o);const le={};for(const Q in F){const ue=F[Q],ee=k[Q];le[Q]={label:ue.label,type:ue.type,value:typeof ee=="string"?ee.trim():ee}}X.customFields=JSON.stringify(le),$e.post("/users/customers"+(X.id?"/"+X.id:""),X,Object.assign(Ue(o),{params:{source:"cabinet-provider"}})).then(Q=>{o.commit("auth/setPreloadedCustomers",o.getters["auth/getPreloadedCustomers"].concat([Q.data.data.user]).sort((ue,ee)=>ue.id-ee.id)),a("addedCustomer",Q.data.data.user),D()}).catch(Q=>{"response"in Q&&Q.response&&(f.value=Q.response.data.message,x.value=!0)}).finally(()=>{o.commit("customerInfo/setLoading",!1)})})}e0(()=>{d.value!==null&&M()});const y=V(null),k=tt({}),C=tt({}),F=tt({});function R(z,X){if(C[X]={template:We[z.type],props:{id:X,itemName:X.toString(),label:z.label,options:z.options,class:`am-cap-aec-cf__item am-cf-width-${z.width}`}},z.type==="text-area"&&(C[X].props.itemType="textarea"),z.type==="datepicker"&&(C[X].props.weekStartsFromDay=s.wordpress.startOfWeek),z.type==="file"){let le=o.getters["auth/getProfile"]?o.getters["auth/getProfile"].id:null;C[X].props={...C[X].props,btnLabel:l.value.upload_file_here,isUpload:!0,bookingId:le,source:"cabinet-customer"}}}function M(){const z=o.getters["entities/getCustomFields"],X=b(()=>{const le=o.getters["customerInfo/getCustomerCustomFields"];return le?JSON.parse(le):null});z.filter(le=>le.saveType==="customer"&&le.type!=="content").forEach(le=>{const{id:Q}=le,ue=d.value&&X.value?X.value[Q]?.value:null;F[Q]={...le,value:ue??(le.type==="checkbox"||le.type==="file"?[]:"")},k[Q]=F[Q].value??"",R(le,Q)})}let O=U("amColors"),H=b(()=>({"--am-c-aec-text":O.value.colorMainText}));return(z,X)=>{const le=st,Q=_a,ue=Ca;return u(),Y(Sa,{visibility:e.visibility,position:"center","custom-class":"am-slide-popup-aec","custom-css":{...n.customCss,...t(H)},"onUpdate:visibility":D},{header:S(()=>[m("div",u8,[t(d)?(u(),B(ne,{key:0},[ce(w(t(l).edit_customer),1)],64)):(u(),B(ne,{key:1},[ce(w(t(l).add_customer),1)],64))])]),footer:S(()=>[N(Fe,{type:"plain",category:"secondary",onClick:D},{default:S(()=>[ce(w(t(l).cancel),1)]),_:1}),N(Fe,{onClick:g},{default:S(()=>[ce(w(t(l).save),1)]),_:1})]),default:S(()=>[t(x)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:r,type:t(c),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:p,onTriggerClose:p},{title:S(()=>[d8,ce(" "+w(t(f)),1)]),_:1},8,["type"])):I("",!0),t(h)?(u(),Y(Wt,{key:2})):(u(),Y(ue,{key:1,modelValue:t(i),"onUpdate:modelValue":X[0]||(X[0]=ee=>De(i)?i.value=ee:i=ee)},{default:S(()=>[N(Q,{class:"am-cap__tabs-item",label:t(l).details,name:"details"},{default:S(()=>[N(le,{ref_key:"customerFormRef",ref:T,model:t(E),rules:t(P),"label-position":"top",class:"am-cap-aec__form"},{default:S(()=>[(u(!0),B(ne,null,Ee(t(L),(ee,me)=>(u(),Y(ft(ee.template),Ft({key:me},ee.props,{modelValue:t(E)[me],"onUpdate:modelValue":se=>t(E)[me]=se,countryPhoneIso:ee.countryPhoneIso,"onUpdate:countryPhoneIso":se=>ee.countryPhoneIso=se}),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["label"]),Object.keys(t(F)).length?(u(),Y(Q,{key:0,class:"am-cap__tabs-item",label:t(l).custom_fields,name:"customFields"},{default:S(()=>[t(h)?I("",!0):(u(),Y(le,{key:0,ref_key:"customFieldsFormRef",ref:y,model:t(k),"label-position":"top",class:j(["am-cap-aec__form",n.responsiveClass])},{default:S(()=>[(u(!0),B(ne,null,Ee(Object.keys(t(F)),ee=>(u(),B(ne,{key:ee},[ee in t(k)?(u(),Y(ft(t(C)[ee]?.template),Ft({key:0,modelValue:t(k)[ee],"onUpdate:modelValue":me=>t(k)[ee]=me},t(C)[ee]?.props),null,16,["modelValue","onUpdate:modelValue"])):I("",!0)],64))),128))]),_:1},8,["model","class"]))]),_:1},8,["label"])):I("",!0)]),_:1},8,["modelValue"]))]),_:1},8,["visibility","custom-css"])}}};const m8={class:"am-cap__cust-option"},p8={class:"am-cap__cust-option__heading"},f8={key:0,class:"am-cap__cust-option__inner"},g8={key:1,class:"am-cap__cust-option__inner"},h8={class:"am-capai-cuf__content"},v8={class:"am-capai-cuf__bulk-label"},E8={key:0,class:"am-capai-customer__data"},_8=m("span",{class:"am-icon-phone"},null,-1),C8=["href"],y8={key:1,class:"am-capai-customer__data"},b8=m("span",{class:"am-icon-email"},null,-1),B8=["href"],A8={props:{responsiveClass:{type:String,default:""},capacityWarning:{type:String,default:""},appointmentCapacity:{type:Number,default:0},savedAppointment:{type:Object,default:()=>{}}},emits:["changedSlotCondition"],setup(n,{expose:a,emit:e}){const s=n;let l=Oe();const o=U("shortcodeData"),i=U("settings");let r=U("amCustomize"),x=U("amLabels"),c=U("pageWidth"),f=b(()=>l.getters["appointment/getEmployeeService"]),p=V(null),d=V({customersIds:b({get:()=>l.getters["customerInfo/getCustomersIds"],set:J=>l.commit("customerInfo/setCustomersIds",J)})}),_=V({customersIds:[{required:!0,message:x.value.select_customers,trigger:["submit","change"]}]}),T=b(()=>l.getters["customerInfo/getLoading"]),A=b(()=>l.getters["customerInfo/getCustomers"]),E=V(i.general.defaultAppointmentStatus);const P=b(()=>{try{return f.value?.settings?JSON.parse(f.value.settings):null}catch{return null}}),L=b(()=>!!(i.featuresIntegrations?.waitingListAppointments?.enabled&&P.value?.waitingList?.enabled)),D=b(()=>f.value?.maxCapacity||0),h=b(()=>L.value&&P.value?.waitingList?.maxCapacity||0),g=b(()=>(l.getters["appointment/getBookings"]||[]).filter(J=>J.status==="approved"||J.status==="pending").reduce((J,Z)=>J+(Z.persons||1),0)),y=b(()=>(l.getters["appointment/getBookings"]||[]).filter(J=>J.status==="waiting").reduce((J,Z)=>J+(Z.persons||1),0));function k(J){return d.value.customersIds.indexOf(J)!==-1||g.value<D.value?!1:!C()}function C(){return L.value?y.value<h.value:!1}function F(J){const Z=!!l.getters["appointment/getId"],xe=yr(),he=["approved","pending"].concat(L.value?["waiting"]:[]);let re=xe;return Z||(re=xe.filter(be=>he.includes(be.value))),(J||!L.value)&&(re=re.filter(be=>be.value!=="waiting")),re}let R=b(()=>l.getters["appointment/getBookings"]?l.getters["appointment/getBookings"]:[]),M=V(!1);function O(J){l.commit("customerInfo/setCustomersIds",[J.id].concat(l.getters["customerInfo/getCustomersIds"])),l.commit("customerInfo/setCustomers",[J].concat(l.getters["customerInfo/getCustomers"])),H()}function H(){let J=l.getters["appointment/getBookings"].map(te=>parseInt(te.customer.id)),Z=!1,xe=f.value.settings?JSON.parse(f.value.settings):null;d.value.customersIds.filter(te=>!J.includes(te)).forEach(te=>{let Ae={};s.savedAppointment&&s.savedAppointment.bookings.forEach(pe=>{parseInt(pe.customer.id)===parseInt(te)&&(Ae=pe)}),Z=l.getters["appointment/getBookings"].length>1;let we=xe&&"general"in xe&&"defaultAppointmentStatus"in xe.general?xe.general.defaultAppointmentStatus:i.general.defaultAppointmentStatus,Me=(l.getters["appointment/getBookings"]||[]).filter(pe=>pe.status==="approved"||pe.status==="pending").reduce((pe,ie)=>pe+(ie.persons||1),0),Le=(l.getters["appointment/getBookings"]||[]).filter(pe=>pe.status==="waiting").reduce((pe,ie)=>pe+(ie.persons||1),0),ke=we;Me>=D.value&&L.value&&Le<h.value&&(ke="waiting"),l.getters["appointment/getBookings"].push(Object.assign({id:null,customer:A.value.find(pe=>pe.id===parseInt(te)),persons:1,status:ke,duration:Object.keys(f.value.customPricing.durations)[0],extras:f.value.extras.map(pe=>new Object({extraId:pe.id,quantity:0})),customFields:{}},Ae)),l.dispatch("appointment/resetBookingCustomFields",l.getters["appointment/getBookings"].length-1),l.dispatch("appointment/addCustomFieldsFormRules",{key:l.getters["appointment/getBookings"].length-1,label:x.value.required_field}),l.commit("appointment/setBooking",{index:l.getters["appointment/getBookings"].length-1,value:l.getters["appointment/getBookings"][l.getters["appointment/getBookings"].length-1]})});let he=J.filter(te=>!d.value.customersIds.includes(te)),re=[];l.getters["appointment/getBookings"].forEach((te,Ae)=>{he.indexOf(te.customer.id)!==-1&&re.push(Ae)});let be=l.getters["appointment/getBookings"].length;for(let te=be-1;te>=0;te--)re.indexOf(te)!==-1&&(Z=!0,l.dispatch("appointment/removeBooking",te));Z&&e("changedSlotCondition")}function z(){l.dispatch("customerInfo/resetCustomer"),M.value=!0}function X(J){l.dispatch("customerInfo/resetCustomer"),l.commit("customerInfo/setLoading",!0),M.value=!0,$e.get("/users/customers/"+J,Object.assign({params:{source:"cabinet-provider"}},Ue(l))).then(Z=>{l.commit("customerInfo/setCustomer",kr(l,Z.data.data.user))}).catch(Z=>{console.log(Z)}).finally(()=>{l.commit("customerInfo/setLoading",!1)})}function le(J){l.dispatch("appointment/removeBooking",J),l.dispatch("appointment/deleteAllCustomFieldsFormRules"),l.dispatch("appointment/addAllCustomFieldsFormRules",{label:x.value.required_field}),e("changedSlotCondition")}const{noShowData:Q}=U("noShowData");function ue(J,Z){return J&&Z?"am-w-50":""}function ee(J){J&&l.commit("appointment/setAllBookingsStatus",J)}function me(J,Z){const xe=l.getters["appointment/getBookings"][J];if(!xe)return;if(Z==="waiting"){L.value&&y.value-(xe.status==="waiting"?xe.persons||1:0)+(xe.persons||1)<=h.value&&l.commit("appointment/setBookingStatus",{index:J,value:Z});return}g.value-(xe.status==="approved"||xe.status==="pending"?xe.persons||1:0)+(xe.persons||1)<=D.value&&l.commit("appointment/setBookingStatus",{index:J,value:Z})}function se(J,Z){const xe=l.getters["appointment/getBookings"][J];if(!xe)return;const he=xe.persons||1,re=Z-he;if(re!==0){if(xe.status==="waiting"){y.value+re<=h.value&&(l.commit("appointment/setBookingPersons",{index:J,value:Z}),e("changedSlotCondition"));return}g.value+re<=D.value&&(l.commit("appointment/setBookingPersons",{index:J,value:Z}),e("changedSlotCondition"))}}function _e(J){if(J.status==="waiting"&&L.value){const Z=P.value?.waitingList||{};return Z.maxExtraPeopleEnabled?Array.from({length:Z.maxExtraPeople},(xe,he)=>he+1):[1]}return Array.from({length:D.value},(Z,xe)=>xe+1)}function de(J,Z){return J.status==="waiting"?(l.getters["appointment/getBookings"]||[]).filter(te=>te!==J&&te.status==="waiting").reduce((te,Ae)=>te+(Ae.persons||1),0)+Z>h.value:(l.getters["appointment/getBookings"]||[]).filter(re=>re!==J&&(re.status==="approved"||re.status==="pending")).reduce((re,be)=>re+(be.persons||1),0)+Z>D.value}function oe(J,Z){l.commit("appointment/setBookingDuration",{index:J,value:Z}),e("changedSlotCondition")}let ye=b(()=>o.value.cabinetType==="employee"?r.value.appointments.options.customerPhone.visibility:!0),$=b(()=>o.value.cabinetType==="employee"?r.value.appointments.options.customerEmail.visibility:!0),W=U("amColors"),ae=b(()=>({"--am-c-card-text":W.value.colorMainText}));return Ze(()=>{if(l.getters["appointment/getId"]){let J=l.getters["appointment/getBookings"].map(Z=>Z.customer.id);l.commit("customerInfo/setCustomersIds",J),Zs(l,"",{limit:J.length,customers:J},()=>{l.commit("customerInfo/setCustomers",l.getters["customerInfo/getCustomers"].concat(l.getters["auth/getPreloadedCustomers"].filter(Z=>l.getters["customerInfo/getCustomers"].map(xe=>xe.id).indexOf(Z.id)===-1)).sort((Z,xe)=>Z.id-xe.id))})}else l.commit("customerInfo/setCustomers",l.getters["auth/getPreloadedCustomers"])}),a({customersFormRef:p}),(J,Z)=>{const xe=vt,he=st;return u(),B("div",{class:"am-capai-cuf",style:Be(t(ae))},[s.capacityWarning?(u(),Y(Dr,{key:0,heading:s.capacityWarning},null,8,["heading"])):I("",!0),m("div",{class:j(["am-capai-cuf__heading",s.responsiveClass])},[N(he,{ref_key:"customersFormRef",ref:p,model:t(d),rules:t(_),class:j(["am-capai-cuf__heading-form",s.responsiveClass])},{default:S(()=>[N(xe,{prop:"customersIds",class:"am-capai-cuf__heading-form__item"},{default:S(()=>[N(Je,{modelValue:t(d).customersIds,"onUpdate:modelValue":Z[0]||(Z[0]=re=>t(d).customersIds=re),filterable:"",clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","popper-class":"am-capai-cuf__popper-customer",placeholder:`${t(x).select_customers}`,"remote-method":re=>{t(Zs)(t(l),re)},loading:t(T),onChange:H,onFocus:Z[1]||(Z[1]=re=>t(Oo)(t(l)))},{default:S(()=>[(u(!0),B(ne,null,Ee(t(A),re=>(u(),Y(Ye,{key:re.id,disabled:k(re.id),value:re.id,label:re.email&&t($)?re.email:re.firstName+" "+re.lastName},{default:S(()=>[m("div",m8,[m("div",p8,w(re.firstName+" "+re.lastName),1),t($)&&re.email?(u(),B("div",f8,w(re.email),1)):I("",!0),t(ye)&&re.phone?(u(),B("div",g8,w(re.phone),1)):I("",!0)])]),_:2},1032,["disabled","value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"])]),_:1})]),_:1},8,["model","rules","class"]),t(i).roles.allowWriteCustomers?(u(),Y(Fe,{key:0,class:j(["am-capai-cuf__heading-add",s.responsiveClass]),size:"default",prefix:"plus",icon:"plus","icon-only":t(c)<=540,disabled:t(f)?.maxCapacity===n.appointmentCapacity&&!C(),onClick:z},{default:S(()=>[ce(w(t(x).new_customer),1)]),_:1},8,["class","icon-only","disabled"])):I("",!0)],2),m("div",h8,[t(l).getters["appointment/getBookings"].length>1?(u(),B("div",{key:0,class:j(["am-capai-cuf__bulk",s.responsiveClass])},[m("div",v8,w(t(x).change_group_status),1),N(Je,{modelValue:t(E),"onUpdate:modelValue":Z[2]||(Z[2]=re=>De(E)?E.value=re:E=re),clearable:"",size:"small",placeholder:"Group Status","popper-class":"am-capai-cuf__popper","parent-class":`am-capai-cuf__bulk-status ${s.responsiveClass}`,"prefix-icon":t(E)?F(!0).find(re=>re.value===t(E))?.icon:"circle-empty","prefix-icon-color":t(E)?F(!0).find(re=>re.value===t(E))?.color:"var(--am-c-select-text-op40)",onChange:ee},{default:S(()=>[(u(!0),B(ne,null,Ee(F(!0),re=>(u(),Y(Ye,{key:re.value,value:re.value,label:re.label},{default:S(()=>[m("span",{class:j(`am-icon-${re.icon}`),style:Be(`color: ${re.color}`)},null,6),ce(" "+w(re.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","parent-class","prefix-icon","prefix-icon-color"])],2)):I("",!0),(u(!0),B(ne,null,Ee(t(R),(re,be)=>(u(),B("div",{key:be,class:j(["am-capai-cuf__card",s.responsiveClass])},[m("div",{class:j(["am-capai-cuf__card-info",s.responsiveClass])},[m("div",{class:j(["am-capai-customer__name",t(Q)(re.customer.noShowCount).class])},[t(Q)(re.customer.noShowCount).icon?(u(),B("span",{key:0,class:j(`am-icon-${t(Q)(re.customer.noShowCount).icon}`)},null,2)):I("",!0),ce(" "+w(re.customer.firstName+" "+re.customer.lastName),1)],2),re.customer.phone&&t(ye)?(u(),B("div",E8,[_8,m("a",{href:`tel:${re.customer.phone}`},w(re.customer.phone),9,C8)])):I("",!0),re.customer.email&&t($)?(u(),B("div",y8,[b8,m("a",{href:`mailto:${re.customer.email}`},w(re.customer.email),9,B8)])):I("",!0)],2),m("div",{class:j(["am-capai-cuf__card-booking",s.responsiveClass])},[N(Je,{modelValue:re.status,"onUpdate:modelValue":te=>re.status=te,"prefix-icon":F(!1).find(te=>te.value===re.status)?.icon,"prefix-icon-color":F(!1).find(te=>te.value===re.status)?.color,"popper-class":"am-capai-cuf__popper",size:"small",onChange:te=>me(be,te)},{default:S(()=>[(u(!0),B(ne,null,Ee(F(!1),te=>(u(),Y(Ye,{key:te.value,value:te.value,label:te.label},{default:S(()=>[m("span",{class:j(`am-icon-${te.icon}`),style:Be(`color: ${te.color}`)},null,6),ce(" "+w(te.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","prefix-icon","prefix-icon-color","onChange"]),t(f).maxCapacity>1?(u(),Y(Je,{key:0,modelValue:re.persons,"onUpdate:modelValue":te=>re.persons=te,"parent-class":`${ue(t(f).maxCapacity>1,t(f).customPricing.enabled==="duration")} ${s.responsiveClass}`,placeholder:t(x).persons,"prefix-icon":"users","prefix-icon-color":"var(--am-c-card-text)",size:"small",onChange:te=>se(be,te)},{default:S(()=>[(u(!0),B(ne,null,Ee(_e(re),te=>(u(),Y(Ye,{key:te,disabled:de(re,te),value:te,label:te},null,8,["disabled","value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","parent-class","placeholder","onChange"])):I("",!0),t(f).customPricing.enabled==="duration"?(u(),Y(Je,{key:1,modelValue:re.duration,"onUpdate:modelValue":te=>re.duration=te,"parent-class":`${ue(t(f).maxCapacity>1,t(f).customPricing.enabled==="duration")} ${s.responsiveClass}`,placeholder:t(x).duration,"prefix-icon":"clock","prefix-icon-color":"var(--am-c-card-text)",size:"small",onChange:te=>oe(be,te)},{default:S(()=>[(u(!0),B(ne,null,Ee(Object.keys(t(f).customPricing.durations),te=>(u(),Y(Ye,{key:te,value:te,label:t(hs)(te,t(x).h,t(x).min)},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","parent-class","placeholder","onChange"])):I("",!0)],2),N(Ea,{index:be,"reference-class":s.responsiveClass,"have-edit":t(i).roles.allowWriteCustomers,onRemove:le,onEdit:te=>X(re.customer.id)},null,8,["index","reference-class","have-edit","onEdit"])],2))),128))]),t(M)?(u(),Y(Fr,{key:1,visibility:t(M),"responsive-class":s.responsiveClass,"onUpdate:visibility":Z[3]||(Z[3]=re=>De(M)?M.value=re:M=re),onAddedCustomer:O},null,8,["visibility","responsive-class"])):I("",!0)],4)}}};const k8=m("span",{class:"am-icon-email"},null,-1),D8=["href"],F8=m("span",{class:"am-icon-phone"},null,-1),w8=["href"],P8={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n;let s=Oe();const l=U("shortcodeData");let o=U("amCustomize");const i=U("settings");let r=U("amLabels"),x=V(null),c=V({}),f=b(()=>s.getters["appointment/getCustomFieldsRules"]),p=V({}),d=b(()=>s.getters["appointment/getCustomFields"]),_=b(()=>s.getters["appointment/getServiceId"]),T=b(()=>s.getters["customerInfo/getCustomersIds"]),A=V(null);function E(y,k){let C=s.getters["appointment/getBookings"][y].id;(k.type!=="file"||C)&&(c.value[`${y}cf${k.id}`]=b({get:()=>{let F=s.getters["appointment/getBookings"][y].customFields[k.id]?.value;return F||""},set:F=>s.dispatch("appointment/updateBookingCustomField",{bookingKey:y,fieldId:k.id,value:F})}))}function P(y,k){let C=s.getters["appointment/getBookings"][y].id;(k.type!=="file"||C)&&(p.value[y][k.id]={template:We[k.type],props:{id:k.id,itemName:`${y}cf${k.id}`,label:k.label,options:k.options,class:`am-capai-cfields__item am-cf-width-${k.width}`}}),(k.type==="checkbox"||k.type==="radio")&&(p.value[y][k.id].props.options=p.value[y][k.id].props.options.map(F=>({...F,value:F.label}))),k.type==="text-area"&&(p.value[y][k.id].props={...p.value[y][k.id].props,itemType:"textarea"}),k.type==="file"&&C&&(p.value[y][k.id].props={...p.value[y][k.id].props,btnLabel:r.value.upload_file_here,isUpload:!1,bookingId:C}),k.type==="datepicker"&&(p.value[y][k.id].props={...p.value[y][k.id].props,weekStartsFromDay:i.wordpress.startOfWeek})}function L(){c.value={},s.getters["appointment/getBookings"].forEach((y,k)=>{p.value[k]={},s.getters["appointment/getCustomFields"].forEach(C=>{E(k,C),P(k,C)})})}const{noShowData:D}=U("noShowData");let h=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerPhone.visibility:!0),g=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerEmail.visibility:!0);return xt([_,T],()=>{L()}),Gs(()=>{L()}),Ze(()=>{s.getters["appointment/getBookings"].filter(y=>y.status!=="canceled"&&y.status!=="rejected").length<2&&(A.value=0)}),a({customFieldsFormRef:x}),(y,k)=>{const C=Cs,F=ys,R=st;return u(),Y(R,{ref_key:"customFieldsFormRef",ref:x,model:t(c),rules:t(f),"label-position":"top",class:j(["am-capai-cfields am-capai-cfields__form",e.responsiveClass])},{default:S(()=>[N(F,{modelValue:t(A),"onUpdate:modelValue":k[0]||(k[0]=M=>De(A)?A.value=M:A=M),class:"am-capai-collapse",accordion:""},{default:S(()=>[(u(!0),B(ne,null,Ee(t(s).getters["appointment/getBookings"].filter(M=>M.status!=="canceled"&&M.status!=="rejected"),(M,O)=>(u(),Y(C,{key:O,name:O,class:"am-capai-collapse__item"},{title:S(()=>[m("div",{class:j(["am-capai-customer__name",[{"am-pb-16":!(M.customer.email&&t(g)||M.customer.phone&&t(h))},t(D)(M.customer.noShowCount).class]])},[t(D)(M.customer.noShowCount).icon?(u(),B("span",{key:0,class:j(`am-icon-${t(D)(M.customer.noShowCount).icon}`)},null,2)):I("",!0),ce(" "+w(M.customer.firstName+" "+M.customer.lastName),1)],2)]),default:S(()=>[M.customer.email&&t(g)||M.customer.phone&&t(h)?(u(),B("div",{key:0,class:j(["am-capai-customer__data-wrapper",e.responsiveClass])},[M.customer.email&&t(g)?(u(),B("div",{key:0,class:j(["am-capai-customer__data",e.responsiveClass])},[k8,m("a",{href:`mailto:${M.customer.email}`},w(M.customer.email),9,D8)],2)):I("",!0),M.customer.phone&&t(h)?(u(),B("div",{key:1,class:j(["am-capai-customer__data",e.responsiveClass])},[F8,m("a",{href:`tel:${M.customer.phone}`},w(M.customer.phone),9,w8)],2)):I("",!0)],2)):I("",!0),(u(!0),B(ne,null,Ee(t(d),H=>(u(),B(ne,{key:O+"_"+H.id},[O in t(p)&&`${O}cf${H.id}`in t(c)?(u(),Y(ft(t(p)[O][H.id].template),Ft({key:0,modelValue:t(c)[`${O}cf${H.id}`],"onUpdate:modelValue":z=>t(c)[`${O}cf${H.id}`]=z},t(p)[O][H.id].props),null,16,["modelValue","onUpdate:modelValue"])):I("",!0)],64))),128))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["model","rules","class"])}}};const T8={key:0,class:"am-capai-ext__heading-extra"},L8=m("span",{class:"am-icon-email"},null,-1),S8=["href"],I8=m("span",{class:"am-icon-phone"},null,-1),$8=["href"],N8={class:"am-capai-ext__wrapper"},O8={class:"am-capai-ext__inner-info"},M8={class:"am-capai-ext__inner-name"},V8={key:0,class:"am-capai-ext__inner-duration"},R8={class:"am-capai-ext__total"},q8={props:{responsiveClass:{type:String,default:""}},emits:["changedSlotCondition"],setup(n,{emit:a}){const e=n,s=Oe(),l=U("shortcodeData");let o=U("amCustomize"),i=U("amLabels"),r=b(()=>s.getters["appointment/getEmployeeService"]),x=b(()=>s.getters["appointment/getBookings"]),c=V(null);function f(L,D,h){L.duration&&(h.extras[D].quantity===0||h.extras[D].quantity===1)&&a("changedSlotCondition")}function p(L){return L.extras.length?L.extras.reduce((D,h)=>D+("price"in h?h.price:r.value.extras.find(g=>g.id===h.extraId).price)*h.quantity,0):0}function d(L){return L.filter(D=>D.quantity>0).length}const{noShowData:_}=U("noShowData");let T=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerPhone.visibility:!0),A=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerEmail.visibility:!0),E=U("amColors"),P=b(()=>({"--am-c-ext-text-op60":K(E.value.colorMainText,.6)}));return Ze(()=>{x.value.filter(L=>L.status!=="canceled"&&L.status!=="rejected").length<2&&(c.value=0)}),(L,D)=>{const h=Cs,g=ys;return u(),Y(g,{modelValue:t(c),"onUpdate:modelValue":D[0]||(D[0]=y=>De(c)?c.value=y:c=y),class:"am-capai-ext am-capai-collapse",accordion:"",style:Be(t(P))},{default:S(()=>[(u(!0),B(ne,null,Ee(t(x).filter(y=>y.status!=="canceled"&&y.status!=="rejected"),(y,k)=>(u(),Y(h,{key:k,name:k,class:"am-capai-ext__item am-capai-collapse__item"},{title:S(()=>[m("div",{class:j(["am-capai-ext__heading",{"am-pb-16":!(y.customer.email&&t(A)||y.customer.phone&&t(T))}])},[m("div",{class:j(["am-capai-customer__name",t(_)(y.customer.noShowCount).class])},[t(_)(y.customer.noShowCount).icon?(u(),B("span",{key:0,class:j(`am-icon-${t(_)(y.customer.noShowCount).icon}`)},null,2)):I("",!0),ce(" "+w(y.customer.firstName+" "+y.customer.lastName),1)],2),d(y.extras)>0?(u(),B("div",T8,w(`${t(i).extras}: ${d(y.extras)}`),1)):I("",!0)],2)]),default:S(()=>[y.customer.email&&t(A)||y.customer.phone&&t(T)?(u(),B("div",{key:0,class:j(["am-capai-customer__data-wrapper",e.responsiveClass])},[y.customer.email&&t(A)?(u(),B("div",{key:0,class:j(["am-capai-customer__data",e.responsiveClass])},[L8,m("a",{href:`mailto:${y.customer.email}`},w(y.customer.email),9,S8)],2)):I("",!0),y.customer.phone&&t(T)?(u(),B("div",{key:1,class:j(["am-capai-customer__data",e.responsiveClass])},[I8,m("a",{href:`tel:${y.customer.phone}`},w(y.customer.phone),9,$8)],2)):I("",!0)],2)):I("",!0),m("div",N8,[(u(!0),B(ne,null,Ee(t(r).extras,(C,F)=>(u(),B("div",{key:F,class:j(["am-capai-ext__inner",[{"am-border-bottom":F!==t(r).extras.length-1},e.responsiveClass]])},[m("div",O8,[m("div",M8,w(C.name),1),C.duration?(u(),B("div",V8,w(`${t(i).duration}: ${t(hs)(C.duration,t(i).h,t(i).min)}`),1)):I("",!0)]),m("div",{class:j(["am-capai-ext__inner-selection",e.responsiveClass])},[m("div",{class:j(["am-capai-ext__inner-price",e.responsiveClass])},[C.price?(u(),B(ne,{key:0},[ce(w(t(nt)("price"in y.extras[F]?y.extras[F].price:C.price)),1)],64)):(u(),B(ne,{key:1},[ce(w(t(i).free),1)],64))],2),N(Ct,{modelValue:y.extras[F].quantity,"onUpdate:modelValue":R=>y.extras[F].quantity=R,class:j(e.responsiveClass),size:"small",min:0,max:C.maxQuantity,onChange:R=>f(C,F,y)},null,8,["modelValue","onUpdate:modelValue","class","max","onChange"])],2)],2))),128)),m("div",R8,w(`${t(i).subtotal}: ${t(nt)(p(y))}`),1)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])}}};function bi(n,a){let e=Ce(n,"YYYY-MM-DD"),s=Ce(e).add(a,"M"),l=Ce(s).startOf("month");return e.date()!==s.date()&&s.isSame(l.format("YYYY-MM-DD"))&&s.subtract(1,"d"),s}function U8(n,a,e){let s=Ce(n,"YYYY-MM-DD").startOf("month").day(e);s.format("M")!==n.format("M")&&s.add(7,"days");let l=s.add(7*(a-1),"days");return n.format("M")!==l.format("M")&&l.subtract(7,"days"),l}function z8(n,a,e,s,l,o,i,r){let x=e?Ce(e):Ce().add(s,"days"),c=Ce(a,"YYYY-MM-DD"),f={},p=[];switch(l){case"daily":p.push(Ce(a,"YYYY-MM-DD"));break;case"weekly":let _=Ce(a,"YYYY-MM-DD").isoWeekday();i.forEach((T,A)=>{if(T.selected){let E=A+1,P=Ce(a,"YYYY-MM-DD");_<E?p.push(P.add(E-_,"days")):_===E?p.push(P):_>E&&p.push(P.subtract(_-E,"days"));let L=x||n;P.isSameOrBefore(L)&&P.isAfter(c)&&(f[P.format("YYYY-MM-DD")]=P)}});break;case"monthly":p.push(Ce(a,"YYYY-MM-DD"));break}let d=p.length>0;for(;d;)for(let _=0;_<p.length;_++){switch(l){case"daily":p[_].add(o,"days");break;case"weekly":p[_].add(o*7,"days");break;case"monthly":let T=p[_].isoWeekday();p[_]=r===0?bi(p[_].format("YYYY-MM-DD"),o):U8(bi(p[_].startOf("month").format("YYYY-MM-DD"),o),r,T);break}d=p[_].isSameOrBefore(x),d&&(f[Ce(p[_]).format("YYYY-MM-DD")]=Ce(p[_]))}return f}function j8(n,a,e,s,l,o,i){let r=Ce(s,"YYYY-MM-DD"),x=o?Ce(o,"YYYY-MM-DD"):null,c={},f={};wl(Object.keys(a)).forEach(d=>{f[d]=Ce(d+" 00:00:00")});let p=Ce(s,"YYYY-MM-DD").format("YYYY-MM-DD");for(let d in e){let _=Ce(d,"YYYY-MM-DD"),T=x?_.isSameOrBefore(x):!0;if(d in a&&Object.keys(a[d]).length&&!(d in c)&&T){let A=l in a[d],E=A?l:Object.keys(a[d])[0];c[d]={isSubstituteDate:!1,isSubstituteTime:!A,time:E,times:Object.keys(a[d]),slot:a[d][E]}}else if(d!==p&&!(d in c)&&T){let A=null,E=null;for(let h in f)if((n.recurringSub==="past"||n.recurringSub==="both")&&f[h].isBefore(e[d])&&f[h].isAfter(r)&&h!==d&&!(h in c)&&(A=f[h]),(n.recurringSub==="future"||n.recurringSub==="both")&&f[h].isAfter(e[d])&&h!==d&&!(h in c)){E=f[h];break}let P=A!==null?Ce(e[d]).diff(A,"days"):null,L=E!==null?Ce(E).diff(e[d],"days"):null,D=null;if(P&&L?D=P<L?A:E:P?D=A:L&&(D=E),D!==null&&(x?Ce(D).isSameOrBefore(x):!0)){let h=Ce(D).format("YYYY-MM-DD");if(h in a&&!(d in c)&&!(h in e)){let g=l in a[h],y=g?l:Object.keys(a[h])[0];c[h]={isSubstituteDate:!0,isSubstituteTime:!g,time:y,times:Object.keys(a[h]),slot:a[h][y]}}}}if(x?!T:wl(Object.keys(c)).length>=i)break}return c}const Y8={class:"am-fs__rs-every"},W8={key:1},H8={class:"am-fs__rs-on-week"},Z8=["onClick"],G8={key:2},J8={class:"am-fs__rs-on-month"},X8={class:"am-fs__rs-ends"},Q8={class:"am-fs__rs-ends-choose"},K8={class:"am-fs__rs-ends-options"},eh={class:"am-fs__rs-ends-after"},th={class:"am-fs__rs-summary"},ah={key:0},sh={key:1},lh={key:0},nh=ce(", "),oh={key:0},ih={key:1},rh={name:"RecurringSetup"},ch=Object.assign(rh,{props:{service:{type:Object,default:()=>{}},startDate:{type:String,default:""},startTime:{type:String,default:""},maxDate:{type:String,default:""},globalClass:{type:String,default:""}},setup(n){const a=n;let e=U("amLabels"),s=U("amCustomize"),l=Oe(),o=U("containerWidth",0),i=b(()=>o.value<560||o.value-240<520),r=b({get:()=>l.getters["recurring/getRepeatType"],set:y=>{l.commit("recurring/setRepeatType",y)}}),x=b({get:()=>l.getters["recurring/getRepeatInterval"],set:y=>{l.commit("recurring/setRepeatInterval",y)}}),c=b({get:()=>l.getters["recurring/getOccurrenceType"],set:y=>{l.commit("recurring/setOccurrenceType",y)}}),f=b({get:()=>l.getters["recurring/getOccurrenceDate"]?l.getters["recurring/getOccurrenceDate"]:new Date(a.startDate),set:y=>{l.commit("recurring/setOccurrenceDate",y)}}),p=b({get:()=>l.getters["recurring/getOccurrenceCount"],set:y=>{l.commit("recurring/setOccurrenceCount",y)}}),d=b({get:()=>l.getters["recurring/getMonthly"],set:y=>{l.commit("recurring/setMonthly",y)}});const _=V([{label:e.value.recurrence_day,labelPlural:e.value.recurrence_days,value:"daily"},{label:e.value.recurrence_week,labelPlural:e.value.recurrence_weeks,value:"weekly"},{label:e.value.recurrence_month,labelPlural:e.value.recurrence_months,value:"monthly"}]),T=V([{label:e.value.recurrence_specific_date,value:0},{label:e.value.recurrence_first,value:1},{label:e.value.recurrence_second,value:2},{label:e.value.recurrence_third,value:3},{label:e.value.recurrence_fourth,value:4},{label:e.value.recurrence_last,value:5}]);let A=V(Ce(a.startDate).format("dddd").toLowerCase()),E=V([{label:"Mon",labelFull:"Monday",value:"monday",selected:!1},{label:"Tue",labelFull:"Tuesday",value:"tuesday",selected:!1},{label:"Wed",labelFull:"Wednesday",value:"wednesday",selected:!1},{label:"Thu",labelFull:"Thursday",value:"thursday",selected:!1},{label:"Fri",labelFull:"Friday",value:"friday",selected:!1},{label:"Sat",labelFull:"Saturday",value:"saturday",selected:!1},{label:"Sun",labelFull:"Sunday",value:"sunday",selected:!1}]),P=b(()=>E.value.find(y=>y.value===Ce(a.startDate,"YYYY-MM-DD").format("dddd").toLowerCase()).labelFull);function L(y){f.value=Ce(y,"YYYY-MM-DD").toDate()}function D(y,k=!1){let C=E.value.find(F=>F.value===y);C.selected=k?!0:!C.selected,l.commit("recurring/setDays",{value:y,selected:C.selected})}Ze(()=>{qs&&(E.value=E.value.map((k,C)=>({...k,label:wi[C],labelFull:Pi[C]})));let y=l.getters["recurring/getDays"].filter(k=>k.selected);y.length===0?D(E.value.find(k=>A.value&&k.value===A.value).value,!0):y.forEach(k=>{D(k.value,!0)}),a.service.recurringCycle!=="all"&&l.commit("recurring/setRepeatType",a.service.recurringCycle)});let h=U("amColors"),g=b(()=>({"--am-c-rs-text":h.value.colorMainText,"--am-c-rs-text-op60":K(h.value.colorMainText,.6),"--am-c-rs-bgr":h.value.colorMainBgr,"--am-c-rs-primary":h.value.colorPrimary,"--am-c-rs-inp-border":h.value.colorInpBorder}));return(y,k)=>(u(),B("div",{class:j(["am-fs__rs",[{"am-fs__rs-mobile":t(i)},t(a).globalClass]]),style:Be(t(g))},[t(s)&&t(s).recurringStep&&t(s).recurringStep.options.heading.visibility?(u(),B(ne,{key:0},[m("p",null,w(t(e).recurrence),1),m("span",null,w(t(e).recurrence_choosing_time),1)],64)):I("",!0),m("p",null,w(t(e).repeat_every)+":",1),m("div",Y8,[N(t(Ct),{modelValue:t(x),"onUpdate:modelValue":k[0]||(k[0]=C=>De(x)?x.value=C:x=C),min:1,max:100},null,8,["modelValue"]),N(t(Je),{modelValue:t(r),"onUpdate:modelValue":k[1]||(k[1]=C=>De(r)?r.value=C:r=C),disabled:t(a).service.recurringCycle!=="all"},{default:S(()=>[(u(!0),B(ne,null,Ee(_.value,(C,F)=>(u(),Y(t(Ye),{key:F,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),t(r)==="weekly"?(u(),B("div",W8,[m("p",null,w(`${t(e).recurrence_repeat_on}:`),1),m("div",H8,[(u(!0),B(ne,null,Ee(t(E),(C,F)=>(u(),B("div",{key:F,class:j({"am-fs__rs-on-week-selected":t(E).find(R=>R.value===C.value).selected}),onClick:R=>D(C.value)},w(C.label),11,Z8))),128))])])):I("",!0),t(r)==="monthly"?(u(),B("div",G8,[m("p",null,w(`${t(e).recurrence_repeat_on}:`),1),m("div",J8,[N(t(Je),{modelValue:t(d),"onUpdate:modelValue":k[2]||(k[2]=C=>De(d)?d.value=C:d=C)},{default:S(()=>[(u(!0),B(ne,null,Ee(T.value,(C,F)=>(u(),Y(t(Ye),{key:F,label:C.label+(F!==0?" "+t(P):""),value:C.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):I("",!0),m("p",null,w(`${t(e).recurrence_ends}:`),1),m("span",null,w(t(e).recurrence_choose_ends),1),m("div",X8,[m("div",Q8,[N(t(Rl),{modelValue:t(c),"onUpdate:modelValue":k[3]||(k[3]=C=>De(c)?c.value=C:c=C)},{default:S(()=>[N(t(La),{value:"On"},{default:S(()=>[ce(w(t(e).recurrence_on),1)]),_:1}),N(t(La),{value:"After"},{default:S(()=>[ce(w(t(e).recurrence_after),1)]),_:1})]),_:1},8,["modelValue"])]),m("div",K8,[N(t(t0),{"calendar-minimum-date":t(a).startDate,disabled:t(c)!=="On","input-placeholder":t(e).recurrence_select_date,"calendar-maximum-date":t(a).maxDate,onSelectedDate:L},null,8,["calendar-minimum-date","disabled","input-placeholder","calendar-maximum-date"]),m("div",eh,[N(t(Ct),{modelValue:t(p),"onUpdate:modelValue":k[4]||(k[4]=C=>De(p)?p.value=C:p=C),disabled:t(c)!=="After",min:1,max:100},null,8,["modelValue","disabled"]),m("span",null,w(` ${t(e).occurrences}`),1)])])]),m("div",th,[m("p",null,w(`${t(e).appointment_repeats}:`),1),m("p",null,[ce(w(`${t(e).recurrence_every} ${t(x)>1?t(x):""} ${_.value.find(C=>C.value===t(r))?_.value.find(C=>C.value===t(r)).label:""}`)+" ",1),t(r)==="weekly"?(u(),B("span",ah,w(`${t(e).repeats_on} ${t(E).filter(C=>C.selected).map(C=>C.labelFull).join(", ")}`),1)):I("",!0),t(r)==="monthly"?(u(),B("span",sh,[ce(w(` ${t(e).repeats_on} ${T.value[t(d)].label}`)+" ",1),t(d)!==0?(u(),B("span",lh,w(` ${t(P)}`),1)):I("",!0),nh])):I("",!0),m("span",null,w(` ${t(e).repeats_from} ${t(rt)(t(a).startDate)} ${t(e).repeats_at} ${t(vs)(t(a).startTime)}`),1)]),m("p",null,[t(c)==="After"?(u(),B("span",oh,w(t(e).number_of_recurrences)+" "+w(` ${t(p)}`),1)):t(f)?(u(),B("span",ih,w(t(e).ends_on)+" "+w(` ${t(rt)(t(a0)(t(f)))}`),1)):I("",!0)])])],6))}});const xh={class:"am-capai-recurr__enable"},uh={key:0,class:"am-capai-recurr__content"},dh={key:1,class:"am-capai-recurr__list"},mh={class:"am-capai-recurr__list-heading"},ph={class:"am-capai-recurr__list-heading__text"},fh=m("span",{class:"am-icon-refresh"},null,-1),gh={class:"am-capai-recurr__table"},hh={key:2,class:"am-capai-recurr__actions"},vh={props:{responsiveClass:{type:String,default:""},maximumBookingStartDate:{type:String,required:!0},slotsLoading:{type:Boolean,required:!0},slotsProps:{type:Object,required:!0},freeSlots:{type:Object,required:!0},getFreeTimes:{type:Function,required:!0},isDisabledDate:{type:Function,required:!0},getSelectedDatesTimes:{type:Function,required:!0}},emits:["fetchSlots"],setup(n,{emit:a}){const e=n,s=Oe(),l=U("settings");let o=U("amLabels"),i=U("localLanguage"),r=b(()=>s.getters["appointment/getEmployeeService"]),x=V(!1),c=V(2),f=V(!1),p=U("recurringList"),d=V(!0);function _(){let k=s.getters["recurring/getOccurrenceType"]==="On"?at(s.getters["recurring/getOccurrenceDate"]).format("YYYY-MM-DD"):null,C=z8(e.maximumBookingStartDate,at(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),k,l.general.numberOfDaysAvailableForBooking,s.getters["recurring/getRepeatType"],s.getters["recurring/getRepeatInterval"],s.getters["recurring/getDays"],s.getters["recurring/getMonthly"]);c.value=s.getters["recurring/getOccurrenceType"]==="On"?Object.keys(C).length:s.getters["recurring/getOccurrenceCount"],f.value=!0;let F=wl(Object.keys(C));Si(Object.assign({startDateTime:at(s.getters["appointment/getStartDate"]).startOf("month").subtract(6,"days").format("YYYY-MM-DD"),endDateTime:F.length?at(F[F.length-1]).endOf("month").add(11,"days").format("YYYY-MM-DD"):at().add(l.general.numberOfDaysAvailableForBooking,"days").format("YYYY-MM-DD")},e.slotsProps),null,R=>{let M=j8(r.value,R,C,at(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),s.getters["appointment/getStartTime"],k,s.getters["recurring/getOccurrenceType"]==="After"?s.getters["recurring/getOccurrenceCount"]:null);p.value=[],Object.keys(M).forEach(O=>{p.value.push(Object.assign({date:at(O).toDate(),editing:!1},M[O]))}),f.value=!1})}function T(){p.value=null}function A(k){let C=at(p.value[k].date).format("YYYY-MM-DD");p.value[k].times=Object.keys(e.freeSlots[C]);let F=e.getSelectedDatesTimes(k,!1);C in F&&p.value[k].time in F[C]&&(p.value[k].time="")}function E(k){p.value.splice(k,1)}function P(k){p.value[k].editing=!0}function L(k){p.value[k].editing=!1}let D=V(null);function h(k,C,F=!1){!k&&!D.value?k=at().toDate():!k&&D.value&&(k=D.value),D.value=k&&F?k:D.value,a("fetchSlots",k,C,F)}let g=U("amColors"),y=b(()=>({"--am-c-recurr-bgr-op05":K(g.value.colorPrimary,.05),"--am-c-warning-op10":K(g.value.colorWarning,.1),"--am-c-main-text-op10":K(g.value.colorMainText,.1)}));return xt(x,k=>{k||(p.value=null)}),(k,C)=>(u(),B("div",{class:"am-capai-recurr",style:Be(t(y))},[m("div",xh,[N(ht,{modelValue:t(x),"onUpdate:modelValue":C[0]||(C[0]=F=>De(x)?x.value=F:x=F),label:"Enable Recurring appointment"},null,8,["modelValue"])]),t(x)?(u(),B("div",uh,[!t(f)&&!t(p)?(u(),Y(ch,{key:0,"start-date":t(at)(t(s).getters["appointment/getStartDate"]).format("YYYY-MM-DD"),"start-time":t(s).getters["appointment/getStartTime"],"max-date":t(e).maximumBookingStartDate,service:t(r)},null,8,["start-date","start-time","max-date","service"])):(u(),B(ne,{key:1},[t(p)?(u(),B("div",dh,[m("div",mh,[m("div",ph,[fh,m("div",null,w(`${t(p).length} appointments total`),1)]),m("div",{class:"am-capai-recurr__list-heading__action",onClick:C[1]||(C[1]=()=>{De(d)?d.value=!t(d):d=!t(d)})},w(t(d)?t(o).show_less:t(o).show_more),1)]),t(d)?(u(),B(ne,{key:0},[t(p).filter(F=>F.isSubstituteDate||F.isSubstituteTime).length?(u(),Y(Dr,{key:0,heading:t(o).recurring_unavailable_slots,text:t(o).recurring_sub_message1},null,8,["heading","text"])):I("",!0),m("div",gh,[(u(!0),B(ne,null,Ee(t(p),(F,R)=>(u(),B("div",{key:R,class:j(["am-capai-recurr__row",[{"am-warn":F.isSubstituteDate||F.isSubstituteTime},t(e).responsiveClass]])},[m("div",{class:j(["am-capai-recurr__row-num",t(e).responsiveClass])},w(R+1),3),m("div",{class:j(["am-capai-recurr__row-date",[{"am-disable":!F.editing},t(e).responsiveClass]])},[N(ea,{modelValue:F.date,"onUpdate:modelValue":M=>F.date=M,type:"date",format:t(Kt)(),placeholder:"Pick a day",size:"small",lang:t(i),"disabled-date":(M,O)=>t(e).isDisabledDate(M,F.editing,!1,O),"popper-class":t(e).slotsLoading?"slots-loader":"",onPanelChange:M=>{h(M,R,!0)},onChange:M=>A(R),onFocus:M=>h(F.date,R,!0)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date","popper-class","onPanelChange","onChange","onFocus"])],2),m("div",{class:j(["am-capai-recurr__row-time",[{"am-disable":!F.editing},t(e).responsiveClass]])},[N(Je,{modelValue:F.time,"onUpdate:modelValue":M=>F.time=M,size:"small",placeholder:`${t(o).select_time}`,disabled:!F.date},{default:S(()=>[(u(!0),B(ne,null,Ee(F.editing?t(e).getFreeTimes(R,t(p)[R],!1):t(p)[R].times,M=>(u(),Y(Ye,{key:M,value:M,label:M},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled"])],2),m("div",{class:j(["am-capai-recurr__row-actions",t(e).responsiveClass])},[F.editing?(u(),Y(Fe,{key:1,category:"primary",size:"small",onClick:M=>L(R)},{default:S(()=>[ce(w(t(o).save),1)]),_:2},1032,["onClick"])):(u(),Y(Ea,{key:0,index:R,onRemove:E,onEdit:P},null,8,["index"]))],2)],2))),128))])],64)):I("",!0)])):(u(),Y(Wt,{key:0,count:t(c)},null,8,["count"]))],64)),t(f)?I("",!0):(u(),B("div",hh,[t(p)?I("",!0):(u(),Y(Fe,{key:0,category:"primary",size:"medium",onClick:C[2]||(C[2]=F=>_())},{default:S(()=>[ce(w(t(o).recurring_list),1)]),_:1})),t(p)?(u(),Y(Fe,{key:1,category:"secondary",type:"plain",size:"medium",onClick:C[3]||(C[3]=F=>T())},{default:S(()=>[ce(w(t(o).recurring_settings),1)]),_:1})):I("",!0)]))])):I("",!0)],4))}};const Eh=m("span",{class:"am-icon-email"},null,-1),_h=["href"],Ch=m("span",{class:"am-icon-phone"},null,-1),yh=["href"],bh={class:"am-capai-linked__list"},Bh={class:"am-capai-linked__list-index"},Ah={class:"am-capai-linked__list-date"},kh=m("span",{class:"am-icon-calendar"},null,-1),Dh={class:"am-capai-linked__list-action"},Fh={props:{responsiveClass:{type:String,default:""},linkedAppointments:{type:Array,required:!0}},emits:["editLinkedAppointment"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("shortcodeData");let o=U("amCustomize"),i=V(null);function r(A){return e.linkedAppointments.filter(E=>E.bookings.filter(P=>parseInt(P.customer.id)===parseInt(A.customer.id)).length)}const{noShowData:x}=U("noShowData");let c=U("amLabels");function f(A){s.commit("appointment/resetAppointment",{providerId:s.getters["auth/getProfile"].id}),s.commit("customerInfo/setCustomers",[]),s.commit("customerInfo/setCustomersIds",[]),a("editLinkedAppointment",A)}let p=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerPhone.visibility:!0),d=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerEmail.visibility:!0),_=U("amColors"),T=b(()=>({"--am-c-linked-bgr-op05":K(_.value.colorMainText,.05)}));return Ze(()=>{s.getters["appointment/getBookings"].filter(A=>A.status!=="canceled"&&A.status!=="rejected").length<2&&(i.value=0)}),(A,E)=>{const P=Cs,L=ys;return u(),Y(L,{modelValue:t(i),"onUpdate:modelValue":E[0]||(E[0]=D=>De(i)?i.value=D:i=D),class:"am-capai-collapse am-capai-linked",accordion:"",style:Be(t(T))},{default:S(()=>[(u(!0),B(ne,null,Ee(t(s).getters["appointment/getBookings"],(D,h)=>(u(),B(ne,{key:h},[r(D).length?(u(),Y(P,{key:0,name:h,class:"am-capai-collapse__item"},{title:S(()=>[m("div",{class:j(["am-capai-customer__name",[{"am-pb-16":!(D.customer.email&&t(d)||D.customer.phone&&t(p))},t(x)(D.customer.noShowCount).class]])},[t(x)(D.customer.noShowCount).icon?(u(),B("span",{key:0,class:j(`am-icon-${t(x)(D.customer.noShowCount).icon}`)},null,2)):I("",!0),ce(" "+w(D.customer.firstName+" "+D.customer.lastName),1)],2)]),default:S(()=>[D.customer.email&&t(d)||D.customer.phone&&t(p)?(u(),B("div",{key:0,class:j(["am-capai-customer__data-wrapper",t(e).responsiveClass])},[D.customer.email&&t(d)?(u(),B("div",{key:0,class:j(["am-capai-customer__data",t(e).responsiveClass])},[Eh,m("a",{href:`mailto:${D.customer.email}`},w(D.customer.email),9,_h)],2)):I("",!0),D.customer.phone&&t(p)?(u(),B("div",{key:1,class:j(["am-capai-customer__data",t(e).responsiveClass])},[Ch,m("a",{href:`tel:${D.customer.phone}`},w(D.customer.phone),9,yh)],2)):I("",!0)],2)):I("",!0),m("div",bh,[(u(!0),B(ne,null,Ee(r(D),(g,y)=>(u(),B("div",{key:D.id+"-"+y,class:j(["am-capai-linked__list-item",t(e).responsiveClass])},[m("div",Bh,w(y+1),1),m("div",Ah,[kh,ce(" "+w(t(s0)(g.bookingStart)),1)]),m("div",Dh,[N(Fe,{category:"primary",size:"small",onClick:k=>f(g)},{default:S(()=>[ce(w(t(c).edit),1)]),_:2},1032,["onClick"])])],2))),128))])]),_:2},1032,["name"])):I("",!0)],64))),128))]),_:1},8,["modelValue","style"])}}},Rs=tt(window.wpAmeliaLabels);function wr(n){if(n.gateway==="onSite")return Rs.on_site;if(n.gateway==="wc")return n.gatewayTitle;if(n.gateway)return n.gateway.charAt(0).toUpperCase()+n.gateway.slice(1)}function ro(n){switch(n){case"paid":return Rs.paid;case"pending":return Rs.pending;case"partiallyPaid":return Rs.partially_paid;case"refunded":return Rs.refunded}}function ds(n,a){switch(n){case"paid":return{icon:"am-icon-checkmark-circle",color:a.colorSuccess};case"pending":return{icon:"am-icon-refresh",color:a.colorWarning};case"partiallyPaid":return{icon:"am-icon-prepaid",color:a.colorPrimary};case"refunded":return{icon:"am-icon-refund",color:a.colorError}}}const wh={class:"am-capai-pay__heading-status"},Ph={class:"am-capai-pay__heading-status__text"},Th=m("span",{class:"am-icon-email"},null,-1),Lh=["href"],Sh=m("span",{class:"am-icon-phone"},null,-1),Ih=["href"],$h={class:"am-capai-pay__row-label"},Nh={class:"am-capai-pay__row-value"},Oh={class:"am-capai-pay__row-label"},Mh={class:"am-capai-pay__row-value"},Vh={class:"am-capai-pay__row-label"},Rh={class:"am-capai-pay__row-value"},qh={key:0,class:"am-divider"},Uh={class:"am-capai-pay__row-label"},zh={class:"am-capai-pay__row-label"},jh={class:"am-capai-pay__row-label"},Yh={class:"am-capai-pay__row-label"},Wh={class:"am-capai-pay__row-label"},Hh={class:"am-capai-pay__row-label"},Zh={class:"am-capai-pay__row-label"},Gh={class:"am-capai-pay__row-label"},Jh={class:"am-capai-pay__row-label"},Xh={class:"am-capai-pay__row-label"},Qh={class:"am-capai-pay__row-label"},Kh={props:{responsiveClass:{type:String,default:""},savedAppointment:{type:Object,default:()=>{}}},setup(n){const a=n;let e=Oe();const s=U("shortcodeData");let l=U("amCustomize"),o=U("pageWidth"),i=U("amLabels"),r=b(()=>s.value.cabinetType==="employee"?l.value.appointments.options.customerPhone.visibility:!0),x=b(()=>s.value.cabinetType==="employee"?l.value.appointments.options.customerEmail.visibility:!0),c=V(null),f=b(()=>e.getters["appointment/getEmployeeService"]),p=b(()=>e.getters["appointment/getBookings"].filter(E=>"id"in E&&E.id&&E.status!=="canceled"&&E.status!=="rejected")),d=b(()=>{let E=[];return p.value.forEach((P,L)=>{let D=l0(e.getters["appointment/getAppointmentData"],a.savedAppointment,P,f.value);E.push(vo(e,{price:D?n0(f.value,P.persons,P.duration):P.price,persons:P.persons,aggregatedPrice:P.aggregatedPrice,extras:P.extras.filter(h=>"id"in h&&h.id),serviceId:e.getters["appointment/getServiceId"],tax:P.tax,coupon:P.coupon,wcTax:P.payments.filter(h=>h.wcOrderId&&h.wcItemTaxValue).reduce((h,g)=>h+g.wcItemTaxValue,0)},!1)),E[L].deposit=P.payments.length&&(P.payments[0].status==="paid"||P.payments[0].status==="partiallyPaid")?P.payments[0].amount:0,E[L].paid=P.payments.filter(h=>h.status==="paid"||h.status==="partiallyPaid").reduce((h,g)=>h+g.amount,0),E[L].refunded=P.payments.filter(h=>h.status==="refunded").reduce((h,g)=>h+g.amount,0),E[L].status=P.payments.reduce((h,g)=>h+g.amount,0),P.payments.filter(h=>h.status!=="refunded").length===0?E[L].status="refunded":E[L].paid-(E[L].total-E[L].discount+E[L].tax+E[L].wcTax)===0?E[L].status="paid":E[L].paid?E[L].status="partiallyPaid":E[L].status="pending"}),E});const{noShowData:_}=U("noShowData");let T=U("amColors"),A=b(()=>({"--am-c-pay-text-op03":K(T.value.colorMainText,.03)}));return Ze(()=>{e.getters["appointment/getBookings"].filter(E=>E.status!=="canceled"&&E.status!=="rejected").length<2&&(c.value=0)}),(E,P)=>{const L=Cs,D=ys;return u(),Y(D,{modelValue:t(c),"onUpdate:modelValue":P[0]||(P[0]=h=>De(c)?c.value=h:c=h),class:"am-capai-collapse am-capai-pay",accordion:"",style:Be(t(A))},{default:S(()=>[(u(!0),B(ne,null,Ee(t(p),(h,g)=>(u(),Y(L,{key:g,name:g,class:"am-capai-collapse__item"},{title:S(()=>[m("div",{class:j(["am-capai-pay__heading",{"am-pb-16":!(h.customer.email&&t(x)||h.customer.phone&&t(r))}])},[m("div",{class:j(["am-capai-customer__name",t(_)(h.customer.noShowCount).class])},[t(_)(h.customer.noShowCount).icon?(u(),B("span",{key:0,class:j(`am-icon-${t(_)(h.customer.noShowCount).icon}`)},null,2)):I("",!0),ce(" "+w(h.customer.firstName+" "+h.customer.lastName),1)],2),m("div",wh,[m("span",{class:j(t(ds)(t(d)[g].status,t(T)).icon),style:Be({color:t(ds)(t(d)[g].status,t(T)).color})},null,6),m("div",Ph,w(t(ro)(t(d)[g].status)),1)])],2)]),default:S(()=>[h.customer.email&&t(x)||h.customer.phone&&t(r)?(u(),B("div",{key:0,class:j(["am-capai-customer__data-wrapper",t(a).responsiveClass])},[h.customer.email&&t(x)?(u(),B("div",{key:0,class:j(["am-capai-customer__data",t(a).responsiveClass])},[Th,m("a",{href:`mailto:${h.customer.email}`},w(h.customer.email),9,Lh)],2)):I("",!0),h.customer.phone&&t(r)?(u(),B("div",{key:1,class:j(["am-capai-customer__data",t(a).responsiveClass])},[Sh,m("a",{href:`tel:${h.customer.phone}`},w(h.customer.phone),9,Ih)],2)):I("",!0)],2)):I("",!0),m("div",{class:j(["am-capai-pay__content",t(a).responsiveClass])},[(u(!0),B(ne,null,Ee(h.payments,(y,k)=>(u(),B(ne,{key:k},[m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",$h,w(t(i).date),1),m("div",Nh,w(t(rt)(y.dateTime.split(" ")[0])),1)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Oh,w(t(i).payment_method),1),m("div",Mh,w(t(wr)(y)),1)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Vh,w(t(i).status),1),m("div",Rh,[m("span",{class:j(t(ds)(y.status,t(T)).icon),style:Be({color:t(ds)(y.status,t(T)).color})},null,6),ce(" "+w(t(ro)(y.status)),1)])],2)],64))),128)),t(o)>480?(u(),B("div",qh)):I("",!0),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Uh,w(t(i).price),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].bookable)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",zh,w(t(i).extras),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].total-t(d)[g].bookable)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",jh,w(t(i).subtotal),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].total)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Yh,w(t(i).discount_amount),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].discount)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Wh,w(t(i).tax),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].tax)),3)],2),t(d)[g].wcTax?(u(),B("div",{key:1,class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Hh,w(t(i).tax)+" (Woo) ",1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].wcTax)),3)],2)):I("",!0),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Zh,w(t(i).paid_deposit),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].deposit)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Gh,w(t(i).paid_remaining_amount),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].paid?t(d)[g].paid-t(d)[g].deposit:0)),3)],2),t(d)[g].refunded?(u(),B("div",{key:2,class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Jh,w(t(i).refunded),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].refunded)),3)],2)):I("",!0),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Xh,w(t(i).due),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].paid-(t(d)[g].total-t(d)[g].discount+t(d)[g].tax+t(d)[g].wcTax))),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Qh,w(t(i).total),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(d)[g].total-t(d)[g].discount+t(d)[g].tax+t(d)[g].wcTax)),3)],2)],2)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])}}};const e1={class:"am-capai__footer"},t1={name:"CabinetAppointment"},a1=Object.assign(t1,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number},linkedAppointments:{type:Array,default:()=>[]}},emits:["close","save","editLinkedAppointment"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels");const o=U("settings");let i=U("licence");const r=V("details"),x=V(null);let c=b(()=>s.getters["appointment/getEmployeeService"]),f=V(null),p=V(""),d=b(()=>s.getters["appointment/getBookings"].length?s.getters["appointment/getBookings"].filter($=>$.status==="approved"||$.status==="pending").map($=>$.persons).reduce(($,W)=>$+W,0):0),_=V(null),T=b(()=>s.getters["appointment/getCustomFields"]),A=V(null);ze("recurringList",A);function E($,W){let ae=Ce(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),J={};return s.getters["appointment/getStartDate"]&&s.getters["appointment/getStartTime"]&&!W&&(J[ae]={},J[ae][s.getters["appointment/getStartTime"]]=!0),A.value&&A.value.forEach((Z,xe)=>{if(Z.time&&($!==null?xe!==$:!0)){let he=Ce(Z.date).format("YYYY-MM-DD");he in J||(J[he]={}),J[he][Z.time]=!0}}),J}function P($,W,ae){if(W.date===null)return[];let J=Ce(W.date).format("YYYY-MM-DD"),Z=E($,ae),xe=W.time?Ut(W.time):null;if(J in Z){let he=W.times.filter(be=>!Object.keys(Z[J]).includes(be)),re=[];return he.forEach(be=>{let te=Ut(be),Ae=!0;Object.keys(Z[J]).map(we=>Ut(we)).sort((we,Me)=>we-Me).forEach(we=>{te<we?te+c.value.duration+c.value.timeAfter>we&&(Ae=!1):we+c.value.duration+c.value.timeAfter>te&&(Ae=!1)}),Ae&&(xe!==null&&te>xe&&re.indexOf(W.time)===-1&&re.push(W.time),re.push(be))}),L(J,Z,re)}return L(J,Z,W.times)}function L($,W,ae){let J=[],Z=!1,xe=Ce($,"YYYY-MM-DD").subtract(1,"days").format("YYYY-MM-DD");if(xe in W){let re=Object.keys(W[xe]).map(te=>Ut(te)).sort((te,Ae)=>te-Ae),be=re[re.length-1]+c.value.duration+c.value.timeAfter;be>86400&&(ae.forEach(te=>{be-86400<=Ut(te)&&J.push(te)}),ae=J,Z=!0)}let he=Ce($,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD");if(he in W){let re=Object.keys(W[he]).map(be=>Ut(be)).sort((be,te)=>be-te);re[0]-c.value.duration-c.value.timeAfter<0&&(ae.forEach(be=>{let te=Ut(be);(te+c.value.duration+c.value.timeAfter<=86400||re[0]>=te+c.value.duration+c.value.timeAfter-86400)&&J.push(be)}),Z=!0)}return Z?J:ae}let D=V({});ze("slotsPricing",D);let h=V(""),g=V({}),y=V([]);function k($){y.value=Object.keys(g.value[Ce($).format("YYYY-MM-DD")])}function C($){let W=g.value[Ce(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD")][$][0].l;W&&s.commit("appointment/setLocationId",W)}function F($,W,ae,J){let Z=Ce($).format("YYYY-MM-DD");return typeof J>"u"&&!(Z in g.value&&(W?P(null,{date:$,times:Object.keys(g.value[Z])},ae).length:!0))}let R=V(!1),M=b(()=>{let $={};return s.getters["appointment/getBookings"].filter(W=>W.status==="pending"||W.status==="approved").forEach(W=>{W.extras.forEach(ae=>{ae.quantity&&!(ae.extraId in $)&&($[ae.extraId]={id:ae.extraId,quantity:ae.quantity})})}),{serviceId:s.getters["appointment/getServiceId"],serviceDuration:Math.max.apply(Math,s.getters["appointment/getBookings"].filter(W=>W.status!=="canceled"&&W.status!=="rejected").map(W=>W.duration)),providerIds:s.getters["appointment/getProviderId"]?[s.getters["appointment/getProviderId"]]:[],locationId:s.getters["appointment/getLocationId"],extras:JSON.stringify(Object.values($)),persons:d.value?d.value:1,excludeAppointmentId:s.getters["appointment/getId"],group:s.getters["appointment/getId"]?0:1,timeZone:s.getters["cabinet/getTimeZone"],monthsLoad:1,page:"appointments",structured:!0}});function O($=!1){s.getters["appointment/getStartDate"]&&H(s.getters["appointment/getStartDate"],null,!1,$)}function H($,W=null,ae=!1,J=!1){s.getters["appointment/getServiceId"]&&(R.value=!0,Si(Object.assign({startDateTime:$?Ce($).startOf("month").subtract(6,"days").format("YYYY-MM-DD"):null,endDateTime:$?Ce($).endOf("month").add(6,"days").format("YYYY-MM-DD"):null},M.value),{},(Z,xe,he,re)=>{if(h.value=re,s.getters["appointment/getStartDate"]&&W===null&&!ae){let te=Ce(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD");te in Z?(s.getters["appointment/getStartTime"]&&!(s.getters["appointment/getStartTime"]in Z[te])&&!J&&s.commit("appointment/setStartTime",null),y.value=Object.keys(Z[te]),g.value=Z):J||(g.value={},s.commit("appointment/setStartTime",null),s.commit("appointment/setStartDate",null),s.commit("appointment/setTargetedDate",null),y.value=[])}else g.value=Z;let be=!i.isLite&&!i.isStarter&&!i.isBasic?o0(s,Z,s.getters["appointment/getServiceId"]):null;D.value=be?be.dates:{},R.value=!1},()=>{}))}function z(){g.value={},h.value=null,A.value=null}function X($){if($){if($===1)return{class:"am-no-show-1",icon:"no-show-1"};if($===2)return{class:"am-no-show-2",icon:"no-show-2"};if($>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}ze("noShowData",{noShowData:X});let le=V(!1),Q=V("");function ue(){le.value=!1,Q.value=""}let ee=V(!1),me=V(null);function se(){const $=new Promise(J=>{_.value?.customFieldsFormRef?_.value.customFieldsFormRef.validate(Z=>{Z?J(!0):(r.value="customFields",J(!1))}):J(!0)}),W=new Promise(J=>{f.value?.customersFormRef?f.value.customersFormRef.validate(Z=>{!Z||!s.getters["customerInfo/getCustomersIds"].length?(r.value="customers",J(!1)):J(!0)}):J(!0)}),ae=new Promise(J=>{x.value?.detailsFormRef?x.value.detailsFormRef.validate(Z=>{!Z||!s.getters["appointment/getServiceId"]||!s.getters["appointment/getStartDate"]||!s.getters["appointment/getStartTime"]?(r.value="details",J(!1)):J(!0)}):J(!0)});Promise.all([$,W,ae]).then(J=>{if(!J.includes(!1)){if(p.value=s.getters["appointment/getBookings"].filter(Z=>Z.status!=="canceled"&&Z.status!=="rejected"&&Z.status!=="waiting").map(Z=>Z.persons).reduce((Z,xe)=>Z+xe,0)>c.value.maxCapacity?l.value.select_max_customer_count_warning+" "+c.value.maxCapacity:"",p.value){r.value="customers";return}_e()}})}function _e(){let $=[];s.getters["appointment/getBookings"].forEach(Z=>{let xe={};Object.keys(Z.customFields).forEach(he=>{xe[he]={label:Z.customFields[he].label,type:Z.customFields[he].type,value:Z.customFields[he].type==="datepicker"?Z.customFields[he].value?Ce(Z.customFields[he].value).format("YYYY-MM-DD"):"":Z.customFields[he].value}}),$.push(Object.assign({},Z,{customerId:Z.customer.id,extras:Z.extras.filter(he=>he.quantity),customFields:o.featuresIntegrations.customFields.enabled||s.getters["appointment/getId"]?xe:null}))});let W=[];if(me.value){let Z=me.value.bookings.map(he=>"id"in he&&he.id),xe=$.map(he=>"id"in he&&he.id);W=me.value.bookings.filter(he=>Z.filter(re=>!xe.includes(re)).includes(he.id)).map(he=>new Object({id:he.id}))}let ae=s.getters["cabinet/getTimeZone"],J={serviceId:s.getters["appointment/getServiceId"],providerId:s.getters["appointment/getProviderId"],locationId:s.getters["appointment/getLocationId"],bookings:$,removedBookings:W,bookingStart:Ce(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD")+" "+s.getters["appointment/getStartTime"],utc:ae==="UTC",timeZone:ae==="UTC"?null:ae,notifyParticipants:s.getters["appointment/getNotifyParticipants"]?1:0,internalNotes:s.getters["appointment/getInternalNotes"],id:s.getters["appointment/getId"],payment:{gateway:"onSite"},recurring:A.value?A.value.map(Z=>new Object({bookingStart:Ce(Z.date).format("YYYY-MM-DD")+" "+Z.time,providerId:Z.slot[0][0],locationId:Z.slot[0][1]})):[],lessonSpace:s.getters["appointment/getLessonSpace"]?"https://www.thelessonspace.com/space/"+s.getters["appointment/getLessonSpace"]:null,createPaymentLinks:s.getters["appointment/getCreatePaymentLinks"]?1:0};ee.value=!0,$e.post("/appointments"+(s.getters["appointment/getId"]?"/"+s.getters["appointment/getId"]:""),J,Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(Z=>{Z.data.data.appointment.id&&de("save")}).catch(Z=>{Q.value=l.value.error,"response"in Z&&"data"in Z.response&&"data"in Z.response.data&&("timeSlotUnavailable"in Z.response.data.data&&Z.response.data.data.timeSlotUnavailable===!0&&(Q.value=l.value.time_slot_unavailable,r.value="details"),"customerAlreadyBooked"in Z.response.data.data&&Z.response.data.data.customerAlreadyBooked===!0&&(Q.value=l.value.customer_already_booked,r.value="customers")),le.value=!0}).finally(()=>{ee.value=!1})}function de($){s.commit("appointment/setActive",!1),a($)}Ze(()=>{if(s.commit("appointment/setActive",!0),s.getters["appointment/getId"]){me.value=JSON.parse(JSON.stringify(s.getters["appointment/getAppointmentData"]));let $=s.getters["entities/filteredLocations"]({categoryId:null,serviceId:null,providerId:s.getters["appointment/getProviderId"],locationId:null}),W=s.getters["entities/filteredServices"]({categoryId:null,serviceId:null,providerId:s.getters["appointment/getProviderId"],locationId:null});s.getters["appointment/getId"]&&s.getters["appointment/getServiceId"]&&W.map(J=>J.id).indexOf(s.getters["appointment/getServiceId"])===-1||s.getters["appointment/getId"]&&s.getters["appointment/getLocationId"]&&$.map(J=>J.id).indexOf(s.getters["appointment/getLocationId"])===-1||O(!0)}s.getters["appointment/getServiceId"]&&(s.dispatch("appointment/updateEmployeeService",s.getters["appointment/getServiceId"]),s.dispatch("appointment/addAllCustomFieldsFormRules",{label:l.value.required_field}))});let oe=U("amColors"),ye=b(()=>({"--am-c-capai-text":oe.value.colorMainText,"--am-c-capai-text-op10":K(oe.value.colorMainText,.1),"--am-c-capai-primary":oe.value.colorPrimary,"--am-c-cust-no1":oe.value.colorMainText,"--am-c-cust-no1-bgr":K(oe.value.colorMainText,.1),"--am-c-cust-no2":oe.value.colorWarning,"--am-c-cust-no2-bgr":K(oe.value.colorWarning,.1),"--am-c-cust-no3":oe.value.colorError,"--am-c-cust-no3-bgr":K(oe.value.colorError,.1),"--am-c-cust-link":K(oe.value.colorMainText,.5),"--am-c-cust-text":oe.value.colorMainText}));return($,W)=>{const ae=_a,J=Ca;return t(ee)?(u(),Y(Wt,{key:1})):(u(),B("div",{key:0,class:j(["am-capai",[{"am-no-border":!0},t(e).responsiveClass]]),style:Be(t(ye))},[t(le)?(u(),Y(bt,{key:0,class:"am-asi__top-message am-asi__top-message-error",type:"error","show-icon":!0,"show-border":!0,"close-after":5e3,onClose:ue,onTriggerClose:ue},{title:S(()=>[ce(w(t(Q)),1)]),_:1})):I("",!0),N(J,{modelValue:r.value,"onUpdate:modelValue":W[1]||(W[1]=Z=>r.value=Z)},{default:S(()=>[N(ae,{label:t(l).details,name:"details"},{default:S(()=>[N(n8,{ref_key:"appointmentDetailsRef",ref:x,"slots-props":t(M),"slots-loading":t(R),"free-slots":t(g),"is-disabled-date":F,times:t(y),"get-free-times":P,onRemoveSlots:z,onFetchSlots:H,onSelectDate:k,onSelectTime:C},null,8,["slots-props","slots-loading","free-slots","times"])]),_:1},8,["label"]),t(c)?(u(),Y(ae,{key:0,label:t(l).customers,name:"customers"},{default:S(()=>[N(A8,{ref_key:"appointmentCustomersRef",ref:f,"responsive-class":t(e).responsiveClass,"capacity-warning":t(p),"appointment-capacity":t(d),"saved-appointment":t(me),onChangedSlotCondition:O},null,8,["responsive-class","capacity-warning","appointment-capacity","saved-appointment"])]),_:1},8,["label"])):I("",!0),t(o).featuresIntegrations.extras.enabled&&t(c)&&t(c).extras.length&&t(s).getters["appointment/getBookings"].length?(u(),Y(ae,{key:1,label:t(l).extras,name:"extras"},{default:S(()=>[N(q8,{"responsive-class":t(e).responsiveClass,onChangedSlotCondition:O},null,8,["responsive-class"])]),_:1},8,["label"])):I("",!0),t(o).featuresIntegrations.customFields.enabled&&t(c)&&t(T).length&&t(s).getters["appointment/getBookings"].length?(u(),Y(ae,{key:2,label:t(l).custom_fields,name:"customFields"},{default:S(()=>[N(P8,{ref_key:"appointmentCustomFieldsRef",ref:_,"responsive-class":t(e).responsiveClass},null,8,["responsive-class"])]),_:1},8,["label"])):I("",!0),t(s).getters["appointment/getId"]&&n.linkedAppointments.length?(u(),Y(ae,{key:3,label:t(l).linked,name:"linked"},{default:S(()=>[N(Fh,{"linked-appointments":n.linkedAppointments,"responsive-class":t(e).responsiveClass,onEditLinkedAppointment:W[0]||(W[0]=Z=>t(a)("editLinkedAppointment",Z))},null,8,["linked-appointments","responsive-class"])]),_:1},8,["label"])):I("",!0),t(o).featuresIntegrations.recurringAppointments.enabled&&t(c)&&t(c).recurringCycle!=="disabled"&&t(s).getters["appointment/getStartDate"]&&t(s).getters["appointment/getStartTime"]&&!t(s).getters["appointment/getId"]&&!!t(s).getters["customerInfo/getCustomersIds"].length?(u(),Y(ae,{key:4,label:t(l).recurring,name:"recurring"},{default:S(()=>[N(vh,{"free-slots":t(g),"slots-props":t(M),"maximum-booking-start-date":t(h),"get-free-times":P,"get-selected-dates-times":E,"is-disabled-date":F,"slots-loading":t(R),"responsive-class":t(e).responsiveClass,onFetchSlots:H},null,8,["free-slots","slots-props","maximum-booking-start-date","slots-loading","responsive-class"])]),_:1},8,["label"])):I("",!0),t(s).getters["appointment/getId"]?(u(),Y(ae,{key:5,label:t(l).payment,name:"payment"},{default:S(()=>[N(Kh,{"responsive-class":t(e).responsiveClass,"saved-appointment":t(me)},null,8,["responsive-class","saved-appointment"])]),_:1},8,["label"])):I("",!0)]),_:1},8,["modelValue"]),m("div",e1,[N(Fe,{category:"secondary",size:"default",type:"plain",onClick:W[2]||(W[2]=()=>{t(a)("close")})},{default:S(()=>[ce(w(t(l).cancel),1)]),_:1}),N(Fe,{size:"default",onClick:se},{default:S(()=>[ce(w(t(l).save),1)]),_:1})])],6))}}});const s1={key:0,class:"el-skeleton-item-wrapper-title"},l1={name:"AuthSkeleton"},Gl=Object.assign(l1,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(n){const a=n;return(e,s)=>{const l=Ol,o=Ml;return u(),Y(o,{animated:"",class:j(["am-asi-el-skeleton",[{"am-asi":t(a).mainClass}]])},{template:S(()=>[t(a).centerFirst?(u(),B("div",s1,[N(l,{variant:"rect"})])):I("",!0),(u(!0),B(ne,null,Ee(new Array(t(a).count),i=>(u(),B("div",{key:i,class:"el-skeleton-item-wrapper"},[N(l,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const n1={key:0,class:"am-icon-checkmark-circle-full"},o1={key:1,class:"am-icon-clearable"},i1={key:2,class:"am-cap__actions"},r1={name:"CabinetAppointments",key:"appointments"},c1=Object.assign(r1,{props:{loadBookingsCounter:{type:Number,default:0},appointments:{type:Object,default:null}},setup(n){const a=n;let e=Oe();const s=U("settings");let l=U("amCustomize");const o=U("shortcodeData"),i=U("labels"),r=U("localLanguage");let x=b(()=>s.general.usedLanguages.includes(r.value)),c=b(()=>{let ue=tt({...i}),ee=l.value.appointments.translations;return ee&&Object.keys(ee).forEach(me=>{ee[me][r.value]&&x.value?ue[me]=ee[me][r.value]:ee[me].default&&(ue[me]=ee[me].default)}),ue});ze("amLabels",c);const f=V(null),{width:p}=Za(f);let d=b(()=>ot(p.value));ze("pageWidth",p);let _=V(null),T=V(!1),A=V("success"),E=V("");function P(){T.value=!1,e.commit("cabinet/setPaymentLinkError",{value:!1,type:"appointment"})}let L=U("cabinetType");e.commit("cabinetFilters/setDates",Eo(L.value));let D=b(()=>e.getters["cabinet/getAppointmentsLoading"]),h=b(()=>e.getters["entities/getReady"]),g=V(null),y=V(0),k=V(1);function C(ue){k.value=ue,F(null,ue)}function F(ue=null,ee=1){e.commit("cabinet/setAppointmentsLoading",!0);let me=JSON.parse(JSON.stringify(e.getters["cabinetFilters/getAppointmentsFilters"])),se=e.getters["cabinet/getTimeZone"];me.dates=me.dates.map(de=>Ce(de).format("YYYY-MM-DD")),me.timeZone=se,me.source="cabinet-"+L.value,me.page=ee,e.commit("auth/setLoadingAppointmentsCounter",e.getters["auth/getLoadingAppointmentsCounter"]+1);let _e=e.getters["auth/getLoadingAppointmentsCounter"];$e.get("/appointments",Object.assign(Ue(e),{params:Js(me)})).then(de=>{_e===e.getters["auth/getLoadingAppointmentsCounter"]&&(y.value=de.data.data.total,g.value=Er(de.data.data.appointments,se,L.value==="provider"))}).catch(de=>{de?.response?.data?.data?.reauthorize!==void 0&&de.response.data.data.reauthorize&&e.dispatch("auth/logout"),console.log(de)}).finally(()=>{_e===e.getters["auth/getLoadingAppointmentsCounter"]&&(e.commit("cabinet/setAppointmentsLoading",!1),ue&&"message"in ue&&(T.value=!0,E.value=ue.message,A.value="success",f.value&&_.value&&setTimeout(function(){gt(f.value,_.value.$el,0,300)},500)))})}let R=V([]);function M(ue){e.commit("cabinet/setAppointmentsLoading",!0),$e.get("/appointments/"+ue.id,Object.assign({params:{source:"cabinet-"+L.value,timeZone:e.getters["cabinet/getTimeZone"]}},Ue(e))).then(ee=>{let me=ee.data.data.appointment.bookingStart.split(" "),se=e.getters["entities/getService"](ee.data.data.appointment.serviceId),_e=[];ee.data.data.appointment.bookings.forEach(de=>{let oe=[];se.extras.sort(($,W)=>$.position-W.position).forEach($=>{oe.push({extraId:$.id,quantity:0});let W=de.extras.find(ae=>ae.extraId===$.id);typeof W<"u"&&(oe[oe.length-1]=W)});let ye=de.customFields?JSON.parse(de.customFields):{};e.getters["entities/getCustomFields"].forEach($=>{($.allServices||$.services.some(W=>W.id===se.id))&&(ye[$.id]=ye[$.id]?Object.assign({},ye[$.id],{value:ye[$.id].type==="datepicker"?ye[$.id].value?Ce(ye[$.id].value).toDate():"":ye[$.id].value}):{label:$.label,type:$.type,value:$.type==="checkbox"?[]:"",position:$.position})}),_e.push({id:de.id,customer:ue.bookings.find($=>$.id===de.id).customer,persons:de.persons,status:de.status,duration:de.duration?de.duration.toString():null,extras:oe,customFields:ye,payments:de.payments,price:de.price,aggregatedPrice:de.aggregatedPrice,tax:de.tax,coupon:de.coupon})}),e.commit("appointment/setAppointment",{id:ee.data.data.appointment.id,categoryId:se.categoryId,serviceId:ee.data.data.appointment.serviceId,providerId:ee.data.data.appointment.providerId,locationId:ee.data.data.appointment.locationId,internalNotes:ee.data.data.appointment.internalNotes,lessonSpace:ee.data.data.appointment.lessonSpace!==null?ee.data.data.appointment.lessonSpace.split("https://www.thelessonspace.com/space/")[1]:null,startDate:Ce(me[0]).toDate(),startTime:me[1].substring(0,5),bookings:_e,notifyParticipants:!!ee.data.data.appointment.notifyParticipants,createPaymentLinks:!!ee.data.data.appointment.createPaymentLinks}),R.value=ee.data.data.recurring,O.value=!0}).catch(ee=>{console.log(ee)}).finally(()=>{e.commit("cabinet/setAppointmentsLoading",!1)})}let O=V(!1);function H(){T.value=!0,E.value=c.value.appointment_saved,A.value="success",f.value&&_.value&&setTimeout(function(){gt(f.value,_.value.$el,0,300)},500),F(),le()}function z(ue,ee){E.value=ue,A.value=ee,T.value=!0}function X(){Q(),O.value=!0}function le(){O.value=!1,Q()}function Q(){e.commit("appointment/resetAppointment",{providerId:e.getters["auth/getProfile"].id}),e.commit("customerInfo/setCustomers",[]),e.commit("customerInfo/setCustomersIds",[])}return xt(()=>a.loadBookingsCounter,()=>{F()}),Ze(()=>{F()}),(ue,ee)=>(u(),B("div",{ref_key:"pageContainer",ref:f,class:j(["am-cap am-capa-main",{"am-capai-main":t(O)}])},[m("div",{class:j(["am-capa-main__inner",t(d)])},[t(T)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:_,type:t(A),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:P,onTriggerClose:P},{title:S(()=>[t(A)==="success"?(u(),B("span",n1)):I("",!0),t(A)==="error"?(u(),B("span",o1)):I("",!0),ce(" "+w(t(E)),1)]),_:1},8,["type"])):I("",!0),!t(O)&&t(h)?(u(),Y(Mo,{key:1,"step-key":"appointments","responsive-class":t(d),empty:!1,onAddAppointment:X,onChangeFilters:F},null,8,["responsive-class"])):I("",!0),t(o).cabinetType==="employee"&&t(s).roles.allowWriteAppointments&&!t(O)&&t(h)?(u(),B("div",i1,[N(Fe,{prefix:"plus",size:"small",category:"primary",type:t(l).appointments.options.newAppBtn.buttonType,onClick:X},{default:S(()=>[m("span",null,w(t(c).new_appointment),1)]),_:1},8,["type"])])):I("",!0),!t(D)&&t(h)?(u(),B(ne,{key:3},[!t(O)&&t(g)&&Object.keys(t(g)).length>0?(u(),Y(Ar,{key:0,"grouped-appointments":t(g),"page-width":t(p),"responsive-class":t(d),"step-key":"appointments",onCanceled:F,onBooked:F,onEditAppointment:M,onStatusChange:z},null,8,["grouped-appointments","page-width","responsive-class"])):t(O)?I("",!0):(u(),Y(Ta,{key:1,heading:t(c).no_app_found,text:t(c).have_no_app},null,8,["heading","text"])),!t(O)&&t(g)&&Object.keys(t(g)).length>0&&t(y)>t(s).general.itemsPerPage?(u(),Y(Pl,{key:2,"page-size":t(s).general.itemsPerPage,"pager-count":5,layout:"prev, pager, next",total:t(y),"current-page":t(k),onCurrentChange:C},null,8,["page-size","total","current-page"])):I("",!0),t(O)?(u(),Y(a1,{key:3,"page-width":t(p),"responsive-class":t(d),"linked-appointments":t(R),onEditLinkedAppointment:M,onClose:le,onSave:H},null,8,["page-width","responsive-class","linked-appointments"])):I("",!0)],64)):(u(),Y(Gl,{key:4}))],2)],2))}});var Pr={exports:{}};(function(n,a){(function(s,l){n.exports=l()})(typeof self<"u"?self:ha,function(){return function(e){var s={};function l(o){if(s[o])return s[o].exports;var i=s[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,l),i.l=!0,i.exports}return l.m=e,l.c=s,l.d=function(o,i,r){l.o(o,i)||Object.defineProperty(o,i,{configurable:!1,enumerable:!0,get:r})},l.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return l.d(i,"a",i),i},l.o=function(o,i){return Object.prototype.hasOwnProperty.call(o,i)},l.p="",l(l.s=3)}([function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function i(r,x){this.width=x,this.height=r.length/x,this.data=r}return i.createEmpty=function(r,x){return new i(new Uint8ClampedArray(r*x),r)},i.prototype.get=function(r,x){return r<0||r>=this.width||x<0||x>=this.height?!1:!!this.data[x*this.width+r]},i.prototype.set=function(r,x,c){this.data[x*this.width+r]=c?1:0},i.prototype.setRegion=function(r,x,c,f,p){for(var d=x;d<x+f;d++)for(var _=r;_<r+c;_++)this.set(_,d,!!p)},i}();s.BitMatrix=o},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(2);function i(x,c){return x^c}s.addOrSubtractGF=i;var r=function(){function x(c,f,p){this.primitive=c,this.size=f,this.generatorBase=p,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var d=1,_=0;_<this.size;_++)this.expTable[_]=d,d=d*2,d>=this.size&&(d=(d^this.primitive)&this.size-1);for(var _=0;_<this.size-1;_++)this.logTable[this.expTable[_]]=_;this.zero=new o.default(this,Uint8ClampedArray.from([0])),this.one=new o.default(this,Uint8ClampedArray.from([1]))}return x.prototype.multiply=function(c,f){return c===0||f===0?0:this.expTable[(this.logTable[c]+this.logTable[f])%(this.size-1)]},x.prototype.inverse=function(c){if(c===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[c]-1]},x.prototype.buildMonomial=function(c,f){if(c<0)throw new Error("Invalid monomial degree less than 0");if(f===0)return this.zero;var p=new Uint8ClampedArray(c+1);return p[0]=f,new o.default(this,p)},x.prototype.log=function(c){if(c===0)throw new Error("Can't take log(0)");return this.logTable[c]},x.prototype.exp=function(c){return this.expTable[c]},x}();s.default=r},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(1),i=function(){function r(x,c){if(c.length===0)throw new Error("No coefficients.");this.field=x;var f=c.length;if(f>1&&c[0]===0){for(var p=1;p<f&&c[p]===0;)p++;if(p===f)this.coefficients=x.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(f-p);for(var d=0;d<this.coefficients.length;d++)this.coefficients[d]=c[p+d]}}else this.coefficients=c}return r.prototype.degree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(x){return this.coefficients[this.coefficients.length-1-x]},r.prototype.addOrSubtract=function(x){var c;if(this.isZero())return x;if(x.isZero())return this;var f=this.coefficients,p=x.coefficients;f.length>p.length&&(c=[p,f],f=c[0],p=c[1]);for(var d=new Uint8ClampedArray(p.length),_=p.length-f.length,T=0;T<_;T++)d[T]=p[T];for(var T=_;T<p.length;T++)d[T]=o.addOrSubtractGF(f[T-_],p[T]);return new r(this.field,d)},r.prototype.multiply=function(x){if(x===0)return this.field.zero;if(x===1)return this;for(var c=this.coefficients.length,f=new Uint8ClampedArray(c),p=0;p<c;p++)f[p]=this.field.multiply(this.coefficients[p],x);return new r(this.field,f)},r.prototype.multiplyPoly=function(x){if(this.isZero()||x.isZero())return this.field.zero;for(var c=this.coefficients,f=c.length,p=x.coefficients,d=p.length,_=new Uint8ClampedArray(f+d-1),T=0;T<f;T++)for(var A=c[T],E=0;E<d;E++)_[T+E]=o.addOrSubtractGF(_[T+E],this.field.multiply(A,p[E]));return new r(this.field,_)},r.prototype.multiplyByMonomial=function(x,c){if(x<0)throw new Error("Invalid degree less than 0");if(c===0)return this.field.zero;for(var f=this.coefficients.length,p=new Uint8ClampedArray(f+x),d=0;d<f;d++)p[d]=this.field.multiply(this.coefficients[d],c);return new r(this.field,p)},r.prototype.evaluateAt=function(x){var c=0;if(x===0)return this.getCoefficient(0);var f=this.coefficients.length;if(x===1)return this.coefficients.forEach(function(d){c=o.addOrSubtractGF(c,d)}),c;c=this.coefficients[0];for(var p=1;p<f;p++)c=o.addOrSubtractGF(this.field.multiply(x,c),this.coefficients[p]);return c},r}();s.default=i},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(4),i=l(5),r=l(11),x=l(12);function c(d){var _=x.locate(d);if(!_)return null;for(var T=0,A=_;T<A.length;T++){var E=A[T],P=r.extract(d,E),L=i.decode(P.matrix);if(L)return{binaryData:L.bytes,data:L.text,chunks:L.chunks,version:L.version,location:{topRightCorner:P.mappingFunction(E.dimension,0),topLeftCorner:P.mappingFunction(0,0),bottomRightCorner:P.mappingFunction(E.dimension,E.dimension),bottomLeftCorner:P.mappingFunction(0,E.dimension),topRightFinderPattern:E.topRight,topLeftFinderPattern:E.topLeft,bottomLeftFinderPattern:E.bottomLeft,bottomRightAlignmentPattern:E.alignmentPattern}}}return null}var f={inversionAttempts:"attemptBoth"};function p(d,_,T,A){A===void 0&&(A={});var E=f;Object.keys(E||{}).forEach(function(k){E[k]=A[k]||E[k]});var P=E.inversionAttempts==="attemptBoth"||E.inversionAttempts==="invertFirst",L=E.inversionAttempts==="onlyInvert"||E.inversionAttempts==="invertFirst",D=o.binarize(d,_,T,P),h=D.binarized,g=D.inverted,y=c(L?g:h);return!y&&(E.inversionAttempts==="attemptBoth"||E.inversionAttempts==="invertFirst")&&(y=c(L?h:g)),y}p.default=p,s.default=p},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(0),i=8,r=24;function x(p,d,_){return p<d?d:p>_?_:p}var c=function(){function p(d,_){this.width=d,this.data=new Uint8ClampedArray(d*_)}return p.prototype.get=function(d,_){return this.data[_*this.width+d]},p.prototype.set=function(d,_,T){this.data[_*this.width+d]=T},p}();function f(p,d,_,T){if(p.length!==d*_*4)throw new Error("Malformed data passed to binarizer.");for(var A=new c(d,_),E=0;E<d;E++)for(var P=0;P<_;P++){var L=p[(P*d+E)*4+0],D=p[(P*d+E)*4+1],h=p[(P*d+E)*4+2];A.set(E,P,.2126*L+.7152*D+.0722*h)}for(var g=Math.ceil(d/i),y=Math.ceil(_/i),k=new c(g,y),C=0;C<y;C++)for(var F=0;F<g;F++){for(var R=0,M=1/0,O=0,P=0;P<i;P++)for(var E=0;E<i;E++){var H=A.get(F*i+E,C*i+P);R+=H,M=Math.min(M,H),O=Math.max(O,H)}var z=R/Math.pow(i,2);if(O-M<=r&&(z=M/2,C>0&&F>0)){var X=(k.get(F,C-1)+2*k.get(F-1,C)+k.get(F-1,C-1))/4;M<X&&(z=X)}k.set(F,C,z)}var le=o.BitMatrix.createEmpty(d,_),Q=null;T&&(Q=o.BitMatrix.createEmpty(d,_));for(var C=0;C<y;C++)for(var F=0;F<g;F++){for(var ue=x(F,2,g-3),ee=x(C,2,y-3),R=0,me=-2;me<=2;me++)for(var se=-2;se<=2;se++)R+=k.get(ue+me,ee+se);for(var _e=R/25,me=0;me<i;me++)for(var se=0;se<i;se++){var E=F*i+me,P=C*i+se,de=A.get(E,P);le.set(E,P,de<=_e),T&&Q.set(E,P,!(de<=_e))}}return T?{binarized:le,inverted:Q}:{binarized:le}}s.binarize=f},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(0),i=l(6),r=l(9),x=l(10);function c(h,g){for(var y=h^g,k=0;y;)k++,y&=y-1;return k}function f(h,g){return g<<1|h}var p=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],d=[function(h){return(h.y+h.x)%2===0},function(h){return h.y%2===0},function(h){return h.x%3===0},function(h){return(h.y+h.x)%3===0},function(h){return(Math.floor(h.y/2)+Math.floor(h.x/3))%2===0},function(h){return h.x*h.y%2+h.x*h.y%3===0},function(h){return(h.y*h.x%2+h.y*h.x%3)%2===0},function(h){return((h.y+h.x)%2+h.y*h.x%3)%2===0}];function _(h){var g=17+4*h.versionNumber,y=o.BitMatrix.createEmpty(g,g);y.setRegion(0,0,9,9,!0),y.setRegion(g-8,0,8,9,!0),y.setRegion(0,g-8,9,8,!0);for(var k=0,C=h.alignmentPatternCenters;k<C.length;k++)for(var F=C[k],R=0,M=h.alignmentPatternCenters;R<M.length;R++){var O=M[R];F===6&&O===6||F===6&&O===g-7||F===g-7&&O===6||y.setRegion(F-2,O-2,5,5,!0)}return y.setRegion(6,9,1,g-17,!0),y.setRegion(9,6,g-17,1,!0),h.versionNumber>6&&(y.setRegion(g-11,0,3,6,!0),y.setRegion(0,g-11,6,3,!0)),y}function T(h,g,y){for(var k=d[y.dataMask],C=h.height,F=_(g),R=[],M=0,O=0,H=!0,z=C-1;z>0;z-=2){z===6&&z--;for(var X=0;X<C;X++)for(var le=H?C-1-X:X,Q=0;Q<2;Q++){var ue=z-Q;if(!F.get(ue,le)){O++;var ee=h.get(ue,le);k({y:le,x:ue})&&(ee=!ee),M=f(ee,M),O===8&&(R.push(M),O=0,M=0)}}H=!H}return R}function A(h){var g=h.height,y=Math.floor((g-17)/4);if(y<=6)return x.VERSIONS[y-1];for(var k=0,C=5;C>=0;C--)for(var F=g-9;F>=g-11;F--)k=f(h.get(F,C),k);for(var R=0,F=5;F>=0;F--)for(var C=g-9;C>=g-11;C--)R=f(h.get(F,C),R);for(var M=1/0,O,H=0,z=x.VERSIONS;H<z.length;H++){var X=z[H];if(X.infoBits===k||X.infoBits===R)return X;var le=c(k,X.infoBits);le<M&&(O=X,M=le),le=c(R,X.infoBits),le<M&&(O=X,M=le)}if(M<=3)return O}function E(h){for(var g=0,y=0;y<=8;y++)y!==6&&(g=f(h.get(y,8),g));for(var k=7;k>=0;k--)k!==6&&(g=f(h.get(8,k),g));for(var C=h.height,F=0,k=C-1;k>=C-7;k--)F=f(h.get(8,k),F);for(var y=C-8;y<C;y++)F=f(h.get(y,8),F);for(var R=1/0,M=null,O=0,H=p;O<H.length;O++){var z=H[O],X=z.bits,le=z.formatInfo;if(X===g||X===F)return le;var Q=c(g,X);Q<R&&(M=le,R=Q),g!==F&&(Q=c(F,X),Q<R&&(M=le,R=Q))}return R<=3?M:null}function P(h,g,y){var k=g.errorCorrectionLevels[y],C=[],F=0;if(k.ecBlocks.forEach(function(ee){for(var me=0;me<ee.numBlocks;me++)C.push({numDataCodewords:ee.dataCodewordsPerBlock,codewords:[]}),F+=ee.dataCodewordsPerBlock+k.ecCodewordsPerBlock}),h.length<F)return null;h=h.slice(0,F);for(var R=k.ecBlocks[0].dataCodewordsPerBlock,M=0;M<R;M++)for(var O=0,H=C;O<H.length;O++){var z=H[O];z.codewords.push(h.shift())}if(k.ecBlocks.length>1)for(var X=k.ecBlocks[0].numBlocks,le=k.ecBlocks[1].numBlocks,M=0;M<le;M++)C[X+M].codewords.push(h.shift());for(;h.length>0;)for(var Q=0,ue=C;Q<ue.length;Q++){var z=ue[Q];z.codewords.push(h.shift())}return C}function L(h){var g=A(h);if(!g)return null;var y=E(h);if(!y)return null;var k=T(h,g,y),C=P(k,g,y.errorCorrectionLevel);if(!C)return null;for(var F=C.reduce(function(Q,ue){return Q+ue.numDataCodewords},0),R=new Uint8ClampedArray(F),M=0,O=0,H=C;O<H.length;O++){var z=H[O],X=r.decode(z.codewords,z.codewords.length-z.numDataCodewords);if(!X)return null;for(var le=0;le<z.numDataCodewords;le++)R[M++]=X[le]}try{return i.decode(R,g.versionNumber)}catch{return null}}function D(h){if(h==null)return null;var g=L(h);if(g)return g;for(var y=0;y<h.width;y++)for(var k=y+1;k<h.height;k++)h.get(y,k)!==h.get(k,y)&&(h.set(y,k,!h.get(y,k)),h.set(k,y,!h.get(k,y)));return L(h)}s.decode=D},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(7),i=l(8),r;(function(A){A.Numeric="numeric",A.Alphanumeric="alphanumeric",A.Byte="byte",A.Kanji="kanji",A.ECI="eci"})(r=s.Mode||(s.Mode={}));var x;(function(A){A[A.Terminator=0]="Terminator",A[A.Numeric=1]="Numeric",A[A.Alphanumeric=2]="Alphanumeric",A[A.Byte=4]="Byte",A[A.Kanji=8]="Kanji",A[A.ECI=7]="ECI"})(x||(x={}));function c(A,E){for(var P=[],L="",D=[10,12,14][E],h=A.readBits(D);h>=3;){var g=A.readBits(10);if(g>=1e3)throw new Error("Invalid numeric value above 999");var y=Math.floor(g/100),k=Math.floor(g/10)%10,C=g%10;P.push(48+y,48+k,48+C),L+=y.toString()+k.toString()+C.toString(),h-=3}if(h===2){var g=A.readBits(7);if(g>=100)throw new Error("Invalid numeric value above 99");var y=Math.floor(g/10),k=g%10;P.push(48+y,48+k),L+=y.toString()+k.toString()}else if(h===1){var g=A.readBits(4);if(g>=10)throw new Error("Invalid numeric value above 9");P.push(48+g),L+=g.toString()}return{bytes:P,text:L}}var f=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function p(A,E){for(var P=[],L="",D=[9,11,13][E],h=A.readBits(D);h>=2;){var g=A.readBits(11),y=Math.floor(g/45),k=g%45;P.push(f[y].charCodeAt(0),f[k].charCodeAt(0)),L+=f[y]+f[k],h-=2}if(h===1){var y=A.readBits(6);P.push(f[y].charCodeAt(0)),L+=f[y]}return{bytes:P,text:L}}function d(A,E){for(var P=[],L="",D=[8,16,16][E],h=A.readBits(D),g=0;g<h;g++){var y=A.readBits(8);P.push(y)}try{L+=decodeURIComponent(P.map(function(k){return"%"+("0"+k.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:P,text:L}}function _(A,E){for(var P=[],L="",D=[8,10,12][E],h=A.readBits(D),g=0;g<h;g++){var y=A.readBits(13),k=Math.floor(y/192)<<8|y%192;k<7936?k+=33088:k+=49472,P.push(k>>8,k&255),L+=String.fromCharCode(i.shiftJISTable[k])}return{bytes:P,text:L}}function T(A,E){for(var P,L,D,h,g=new o.BitStream(A),y=E<=9?0:E<=26?1:2,k={text:"",bytes:[],chunks:[],version:E};g.available()>=4;){var C=g.readBits(4);if(C===x.Terminator)return k;if(C===x.ECI)g.readBits(1)===0?k.chunks.push({type:r.ECI,assignmentNumber:g.readBits(7)}):g.readBits(1)===0?k.chunks.push({type:r.ECI,assignmentNumber:g.readBits(14)}):g.readBits(1)===0?k.chunks.push({type:r.ECI,assignmentNumber:g.readBits(21)}):k.chunks.push({type:r.ECI,assignmentNumber:-1});else if(C===x.Numeric){var F=c(g,y);k.text+=F.text,(P=k.bytes).push.apply(P,F.bytes),k.chunks.push({type:r.Numeric,text:F.text})}else if(C===x.Alphanumeric){var R=p(g,y);k.text+=R.text,(L=k.bytes).push.apply(L,R.bytes),k.chunks.push({type:r.Alphanumeric,text:R.text})}else if(C===x.Byte){var M=d(g,y);k.text+=M.text,(D=k.bytes).push.apply(D,M.bytes),k.chunks.push({type:r.Byte,bytes:M.bytes,text:M.text})}else if(C===x.Kanji){var O=_(g,y);k.text+=O.text,(h=k.bytes).push.apply(h,O.bytes),k.chunks.push({type:r.Kanji,bytes:O.bytes,text:O.text})}}if(g.available()===0||g.readBits(g.available())===0)return k}s.decode=T},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function i(r){this.byteOffset=0,this.bitOffset=0,this.bytes=r}return i.prototype.readBits=function(r){if(r<1||r>32||r>this.available())throw new Error("Cannot read "+r.toString()+" bits");var x=0;if(this.bitOffset>0){var c=8-this.bitOffset,f=r<c?r:c,p=c-f,d=255>>8-f<<p;x=(this.bytes[this.byteOffset]&d)>>p,r-=f,this.bitOffset+=f,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(r>0){for(;r>=8;)x=x<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,r-=8;if(r>0){var p=8-r,d=255>>p<<p;x=x<<r|(this.bytes[this.byteOffset]&d)>>p,this.bitOffset+=r}}return x},i.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},i}();s.BitStream=o},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(1),i=l(2);function r(p,d,_,T){var A;d.degree()<_.degree()&&(A=[_,d],d=A[0],_=A[1]);for(var E=d,P=_,L=p.zero,D=p.one;P.degree()>=T/2;){var h=E,g=L;if(E=P,L=D,E.isZero())return null;P=h;for(var y=p.zero,k=E.getCoefficient(E.degree()),C=p.inverse(k);P.degree()>=E.degree()&&!P.isZero();){var F=P.degree()-E.degree(),R=p.multiply(P.getCoefficient(P.degree()),C);y=y.addOrSubtract(p.buildMonomial(F,R)),P=P.addOrSubtract(E.multiplyByMonomial(F,R))}if(D=y.multiplyPoly(L).addOrSubtract(g),P.degree()>=E.degree())return null}var M=D.getCoefficient(0);if(M===0)return null;var O=p.inverse(M);return[D.multiply(O),P.multiply(O)]}function x(p,d){var _=d.degree();if(_===1)return[d.getCoefficient(1)];for(var T=new Array(_),A=0,E=1;E<p.size&&A<_;E++)d.evaluateAt(E)===0&&(T[A]=p.inverse(E),A++);return A!==_?null:T}function c(p,d,_){for(var T=_.length,A=new Array(T),E=0;E<T;E++){for(var P=p.inverse(_[E]),L=1,D=0;D<T;D++)E!==D&&(L=p.multiply(L,o.addOrSubtractGF(1,p.multiply(_[D],P))));A[E]=p.multiply(d.evaluateAt(P),p.inverse(L)),p.generatorBase!==0&&(A[E]=p.multiply(A[E],P))}return A}function f(p,d){var _=new Uint8ClampedArray(p.length);_.set(p);for(var T=new o.default(285,256,0),A=new i.default(T,_),E=new Uint8ClampedArray(d),P=!1,L=0;L<d;L++){var D=A.evaluateAt(T.exp(L+T.generatorBase));E[E.length-1-L]=D,D!==0&&(P=!0)}if(!P)return _;var h=new i.default(T,E),g=r(T,T.buildMonomial(d,1),h,d);if(g===null)return null;var y=x(T,g[0]);if(y==null)return null;for(var k=c(T,g[1],y),C=0;C<y.length;C++){var F=_.length-1-T.log(y[C]);if(F<0)return null;_[F]=o.addOrSubtractGF(_[F],k[C])}return _}s.decode=f},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(0);function i(f,p,d,_){var T=f.x-p.x+d.x-_.x,A=f.y-p.y+d.y-_.y;if(T===0&&A===0)return{a11:p.x-f.x,a12:p.y-f.y,a13:0,a21:d.x-p.x,a22:d.y-p.y,a23:0,a31:f.x,a32:f.y,a33:1};var E=p.x-d.x,P=_.x-d.x,L=p.y-d.y,D=_.y-d.y,h=E*D-P*L,g=(T*D-P*A)/h,y=(E*A-T*L)/h;return{a11:p.x-f.x+g*p.x,a12:p.y-f.y+g*p.y,a13:g,a21:_.x-f.x+y*_.x,a22:_.y-f.y+y*_.y,a23:y,a31:f.x,a32:f.y,a33:1}}function r(f,p,d,_){var T=i(f,p,d,_);return{a11:T.a22*T.a33-T.a23*T.a32,a12:T.a13*T.a32-T.a12*T.a33,a13:T.a12*T.a23-T.a13*T.a22,a21:T.a23*T.a31-T.a21*T.a33,a22:T.a11*T.a33-T.a13*T.a31,a23:T.a13*T.a21-T.a11*T.a23,a31:T.a21*T.a32-T.a22*T.a31,a32:T.a12*T.a31-T.a11*T.a32,a33:T.a11*T.a22-T.a12*T.a21}}function x(f,p){return{a11:f.a11*p.a11+f.a21*p.a12+f.a31*p.a13,a12:f.a12*p.a11+f.a22*p.a12+f.a32*p.a13,a13:f.a13*p.a11+f.a23*p.a12+f.a33*p.a13,a21:f.a11*p.a21+f.a21*p.a22+f.a31*p.a23,a22:f.a12*p.a21+f.a22*p.a22+f.a32*p.a23,a23:f.a13*p.a21+f.a23*p.a22+f.a33*p.a23,a31:f.a11*p.a31+f.a21*p.a32+f.a31*p.a33,a32:f.a12*p.a31+f.a22*p.a32+f.a32*p.a33,a33:f.a13*p.a31+f.a23*p.a32+f.a33*p.a33}}function c(f,p){for(var d=r({x:3.5,y:3.5},{x:p.dimension-3.5,y:3.5},{x:p.dimension-6.5,y:p.dimension-6.5},{x:3.5,y:p.dimension-3.5}),_=i(p.topLeft,p.topRight,p.alignmentPattern,p.bottomLeft),T=x(_,d),A=o.BitMatrix.createEmpty(p.dimension,p.dimension),E=function(y,k){var C=T.a13*y+T.a23*k+T.a33;return{x:(T.a11*y+T.a21*k+T.a31)/C,y:(T.a12*y+T.a22*k+T.a32)/C}},P=0;P<p.dimension;P++)for(var L=0;L<p.dimension;L++){var D=L+.5,h=P+.5,g=E(D,h);A.set(L,P,f.get(Math.floor(g.x),Math.floor(g.y)))}return{matrix:A,mappingFunction:E}}s.extract=c},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=4,i=.5,r=1.5,x=function(D,h){return Math.sqrt(Math.pow(h.x-D.x,2)+Math.pow(h.y-D.y,2))};function c(D){return D.reduce(function(h,g){return h+g})}function f(D,h,g){var y,k,C,F,R=x(D,h),M=x(h,g),O=x(D,g),H,z,X;return M>=R&&M>=O?(y=[h,D,g],H=y[0],z=y[1],X=y[2]):O>=M&&O>=R?(k=[D,h,g],H=k[0],z=k[1],X=k[2]):(C=[D,g,h],H=C[0],z=C[1],X=C[2]),(X.x-z.x)*(H.y-z.y)-(X.y-z.y)*(H.x-z.x)<0&&(F=[X,H],H=F[0],X=F[1]),{bottomLeft:H,topLeft:z,topRight:X}}function p(D,h,g,y){var k=(c(_(D,g,y,5))/7+c(_(D,h,y,5))/7+c(_(g,D,y,5))/7+c(_(h,D,y,5))/7)/4;if(k<1)throw new Error("Invalid module size");var C=Math.round(x(D,h)/k),F=Math.round(x(D,g)/k),R=Math.floor((C+F)/2)+7;switch(R%4){case 0:R++;break;case 2:R--;break}return{dimension:R,moduleSize:k}}function d(D,h,g,y){var k=[{x:Math.floor(D.x),y:Math.floor(D.y)}],C=Math.abs(h.y-D.y)>Math.abs(h.x-D.x),F,R,M,O;C?(F=Math.floor(D.y),R=Math.floor(D.x),M=Math.floor(h.y),O=Math.floor(h.x)):(F=Math.floor(D.x),R=Math.floor(D.y),M=Math.floor(h.x),O=Math.floor(h.y));for(var H=Math.abs(M-F),z=Math.abs(O-R),X=Math.floor(-H/2),le=F<M?1:-1,Q=R<O?1:-1,ue=!0,ee=F,me=R;ee!==M+le;ee+=le){var se=C?me:ee,_e=C?ee:me;if(g.get(se,_e)!==ue&&(ue=!ue,k.push({x:se,y:_e}),k.length===y+1))break;if(X+=z,X>0){if(me===O)break;me+=Q,X-=H}}for(var de=[],oe=0;oe<y;oe++)k[oe]&&k[oe+1]?de.push(x(k[oe],k[oe+1])):de.push(0);return de}function _(D,h,g,y){var k,C=h.y-D.y,F=h.x-D.x,R=d(D,h,g,Math.ceil(y/2)),M=d(D,{x:D.x-F,y:D.y-C},g,Math.ceil(y/2)),O=R.shift()+M.shift()-1;return(k=M.concat(O)).concat.apply(k,R)}function T(D,h){var g=c(D)/c(h),y=0;return h.forEach(function(k,C){y+=Math.pow(D[C]-k*g,2)}),{averageSize:g,error:y}}function A(D,h,g){try{var y=_(D,{x:-1,y:D.y},g,h.length),k=_(D,{x:D.x,y:-1},g,h.length),C={x:Math.max(0,D.x-D.y)-1,y:Math.max(0,D.y-D.x)-1},F=_(D,C,g,h.length),R={x:Math.min(g.width,D.x+D.y)+1,y:Math.min(g.height,D.y+D.x)+1},M=_(D,R,g,h.length),O=T(y,h),H=T(k,h),z=T(F,h),X=T(M,h),le=Math.sqrt(O.error*O.error+H.error*H.error+z.error*z.error+X.error*X.error),Q=(O.averageSize+H.averageSize+z.averageSize+X.averageSize)/4,ue=(Math.pow(O.averageSize-Q,2)+Math.pow(H.averageSize-Q,2)+Math.pow(z.averageSize-Q,2)+Math.pow(X.averageSize-Q,2))/Q;return le+ue}catch{return 1/0}}function E(D,h){for(var g=Math.round(h.x);D.get(g,Math.round(h.y));)g--;for(var y=Math.round(h.x);D.get(y,Math.round(h.y));)y++;for(var k=(g+y)/2,C=Math.round(h.y);D.get(Math.round(k),C);)C--;for(var F=Math.round(h.y);D.get(Math.round(k),F);)F++;var R=(C+F)/2;return{x:k,y:R}}function P(D){for(var h=[],g=[],y=[],k=[],C=function(se){for(var _e=0,de=!1,oe=[0,0,0,0,0],ye=function(W){var ae=D.get(W,se);if(ae===de)_e++;else{oe=[oe[1],oe[2],oe[3],oe[4],_e],_e=1,de=ae;var J=c(oe)/7,Z=Math.abs(oe[0]-J)<J&&Math.abs(oe[1]-J)<J&&Math.abs(oe[2]-3*J)<3*J&&Math.abs(oe[3]-J)<J&&Math.abs(oe[4]-J)<J&&!ae,xe=c(oe.slice(-3))/3,he=Math.abs(oe[2]-xe)<xe&&Math.abs(oe[3]-xe)<xe&&Math.abs(oe[4]-xe)<xe&&ae;if(Z){var re=W-oe[3]-oe[4],be=re-oe[2],te={startX:be,endX:re,y:se},Ae=g.filter(function(Le){return be>=Le.bottom.startX&&be<=Le.bottom.endX||re>=Le.bottom.startX&&be<=Le.bottom.endX||be<=Le.bottom.startX&&re>=Le.bottom.endX&&oe[2]/(Le.bottom.endX-Le.bottom.startX)<r&&oe[2]/(Le.bottom.endX-Le.bottom.startX)>i});Ae.length>0?Ae[0].bottom=te:g.push({top:te,bottom:te})}if(he){var we=W-oe[4],Me=we-oe[3],te={startX:Me,y:se,endX:we},Ae=k.filter(function(pe){return Me>=pe.bottom.startX&&Me<=pe.bottom.endX||we>=pe.bottom.startX&&Me<=pe.bottom.endX||Me<=pe.bottom.startX&&we>=pe.bottom.endX&&oe[2]/(pe.bottom.endX-pe.bottom.startX)<r&&oe[2]/(pe.bottom.endX-pe.bottom.startX)>i});Ae.length>0?Ae[0].bottom=te:k.push({top:te,bottom:te})}}},$=-1;$<=D.width;$++)ye($);h.push.apply(h,g.filter(function(W){return W.bottom.y!==se&&W.bottom.y-W.top.y>=2})),g=g.filter(function(W){return W.bottom.y===se}),y.push.apply(y,k.filter(function(W){return W.bottom.y!==se})),k=k.filter(function(W){return W.bottom.y===se})},F=0;F<=D.height;F++)C(F);h.push.apply(h,g.filter(function(se){return se.bottom.y-se.top.y>=2})),y.push.apply(y,k);var R=h.filter(function(se){return se.bottom.y-se.top.y>=2}).map(function(se){var _e=(se.top.startX+se.top.endX+se.bottom.startX+se.bottom.endX)/4,de=(se.top.y+se.bottom.y+1)/2;if(!!D.get(Math.round(_e),Math.round(de))){var oe=[se.top.endX-se.top.startX,se.bottom.endX-se.bottom.startX,se.bottom.y-se.top.y+1],ye=c(oe)/oe.length,$=A({x:Math.round(_e),y:Math.round(de)},[1,1,3,1,1],D);return{score:$,x:_e,y:de,size:ye}}}).filter(function(se){return!!se}).sort(function(se,_e){return se.score-_e.score}).map(function(se,_e,de){if(_e>o)return null;var oe=de.filter(function($,W){return _e!==W}).map(function($){return{x:$.x,y:$.y,score:$.score+Math.pow($.size-se.size,2)/se.size,size:$.size}}).sort(function($,W){return $.score-W.score});if(oe.length<2)return null;var ye=se.score+oe[0].score+oe[1].score;return{points:[se].concat(oe.slice(0,2)),score:ye}}).filter(function(se){return!!se}).sort(function(se,_e){return se.score-_e.score});if(R.length===0)return null;var M=f(R[0].points[0],R[0].points[1],R[0].points[2]),O=M.topRight,H=M.topLeft,z=M.bottomLeft,X=L(D,y,O,H,z),le=[];X&&le.push({alignmentPattern:{x:X.alignmentPattern.x,y:X.alignmentPattern.y},bottomLeft:{x:z.x,y:z.y},dimension:X.dimension,topLeft:{x:H.x,y:H.y},topRight:{x:O.x,y:O.y}});var Q=E(D,O),ue=E(D,H),ee=E(D,z),me=L(D,y,Q,ue,ee);return me&&le.push({alignmentPattern:{x:me.alignmentPattern.x,y:me.alignmentPattern.y},bottomLeft:{x:ee.x,y:ee.y},topLeft:{x:ue.x,y:ue.y},topRight:{x:Q.x,y:Q.y},dimension:me.dimension}),le.length===0?null:le}s.locate=P;function L(D,h,g,y,k){var C,F,R;try{C=p(y,g,k,D),F=C.dimension,R=C.moduleSize}catch{return null}var M={x:g.x-y.x+k.x,y:g.y-y.y+k.y},O=(x(y,k)+x(y,g))/2/R,H=1-3/O,z={x:y.x+H*(M.x-y.x),y:y.y+H*(M.y-y.y)},X=h.map(function(Q){var ue=(Q.top.startX+Q.top.endX+Q.bottom.startX+Q.bottom.endX)/4,ee=(Q.top.y+Q.bottom.y+1)/2;if(!!D.get(Math.floor(ue),Math.floor(ee))){var me=[Q.top.endX-Q.top.startX,Q.bottom.endX-Q.bottom.startX,Q.bottom.y-Q.top.y+1];c(me)/me.length;var se=A({x:Math.floor(ue),y:Math.floor(ee)},[1,1,1],D),_e=se+x({x:ue,y:ee},z);return{x:ue,y:ee,score:_e}}}).filter(function(Q){return!!Q}).sort(function(Q,ue){return Q.score-ue.score}),le=O>=15&&X.length?X[0]:z;return{alignmentPattern:le,dimension:F}}}]).default})})(Pr);var x1=Fi(Pr.exports);const u1={class:"am-cqcs__header"},d1={key:0,class:"am-cqcs__container"},m1={class:"am-cqcs__container-inner"},p1={class:"am-cqcs__camera-container"},f1=m("div",{class:"am-cqcs__video-overlay"},[m("div",{class:"am-cqcs__frame"})],-1),g1={key:0,class:"am-cqcs__response-info"},h1={key:0,class:"am-cqcs__response-message"},v1={key:1,class:"am-cqcs__response-name"},E1={key:2,class:"am-cqcs__response-item"},_1={key:3,class:"am-cqcs__response-item"},C1={key:4,class:"am-cqcs__response-item"},y1={key:5,class:"am-cqcs__response-item"},b1={key:1,class:"am-cqcs__error"},B1=m("span",{class:"am-icon-close-filled"},null,-1),A1={class:"am-cqcs__controls"},k1=m("span",{class:"am-icon-refresh"},null,-1),D1=m("span",{class:"am-icon-mobile"},null,-1),F1=m("span",{class:"am-icon-mobile"},null,-1),w1={props:{visibility:{type:Boolean,default:!1}},emits:["update:visibility"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("labels"),o=V(!1),i=V(!1),r=V(!1),x=V(!1),c=V([]),f=V(0),p=V(""),d=V(null),_=V(null),T=V(0),A=V(1500),E=V(null),P=V(null),L=V(null),D=V(null),h=V({ticketCode:""}),g=V({ticketCode:[{required:!0,message:"Ticket code is required",trigger:"click"}]}),y=V({ticketCode:{template:We.text,props:{itemName:"ticketCode",placeholder:l.enter_ticket_code,class:"am-cqcs__form-item",prepend:"#"}}}),k=V(null);async function C(){try{if(!(window.isSecureContext||location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname.includes("ngrok.io")||location.hostname.startsWith("192.168.")||location.hostname.startsWith("10.")||location.hostname.startsWith("172.")))throw new Error("Camera access requires HTTPS or localhost. Please access this page over a secure connection or use localhost.");if(!navigator.mediaDevices)throw new Error("MediaDevices API not supported in this browser. Please update your browser or try Chrome/Firefox.");if(!navigator.mediaDevices.getUserMedia)throw new Error("getUserMedia not supported in this browser. Please update your browser or try Chrome/Firefox.");let _e=[];try{_e=await navigator.mediaDevices.enumerateDevices()}catch(de){console.warn("Could not enumerate devices:",de)}c.value=_e.filter(de=>de.kind==="videoinput"),await F()}catch(se){me(se)}}async function F(){k.value&&k.value.closingFromParent(),E.value=null;try{if(p.value="",!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera access not supported in this browser");d.value&&d.value.getTracks().forEach(de=>de.stop());let se={video:{facingMode:"environment"}};c.value.length>0&&c.value[f.value]&&c.value[f.value].deviceId?se.video.deviceId={exact:c.value[f.value].deviceId}:se.video={facingMode:"environment",width:{ideal:1280,min:640},height:{ideal:720,min:480}},d.value=await navigator.mediaDevices.getUserMedia(se);const _e=d.value.getVideoTracks()[0];if(_e&&_e.getCapabilities){const de=_e.getCapabilities();x.value=!!de.torch}P.value&&(P.value.srcObject=d.value,P.value.onloadedmetadata=()=>{P.value.play().catch(de=>{console.warn("Could not auto-play video:",de)})}),i.value=!0,M()}catch(se){me(se)}}function R(){E.value=null,i.value=!1,_.value&&(cancelAnimationFrame(_.value),_.value=null),d.value&&(d.value.getTracks().forEach(se=>se.stop()),d.value=null),P.value&&(P.value.srcObject=null)}function M(){const se=P.value,_e=L.value;if(!se||!_e)return;const de=_e.getContext("2d",{willReadFrequently:!0}),oe=()=>{if(!!i.value){if(se.readyState===se.HAVE_ENOUGH_DATA){(_e.width!==se.videoWidth||_e.height!==se.videoHeight)&&(_e.width=se.videoWidth,_e.height=se.videoHeight),de.drawImage(se,0,0,_e.width,_e.height);const ye=de.getImageData(0,0,_e.width,_e.height),$=performance.now();if($-T.value>=A.value){const W=x1(ye.data,ye.width,ye.height,{inversionAttempts:"dontInvert"});W&&W.data&&(W.data&&(le(W.data),R()),T.value=$)}}_.value=requestAnimationFrame(oe)}};_.value=requestAnimationFrame(oe)}async function O(){if(!(!x.value||!d.value))try{await d.value.getVideoTracks()[0].applyConstraints({advanced:[{torch:!r.value}]}),r.value=!r.value}catch(se){console.error("Error toggling torch:",se)}}async function H(){c.value.length<=1||(f.value=(f.value+1)%c.value.length,await F())}function z(){D.value.validate(se=>{if(se){const _e={ticketManualCode:h.value.ticketCode.trim(),scannedAt:at().format("YYYY-MM-DD")};Q(_e),h.value.ticketCode=""}else return!1})}function X(se){const _e={},de=/(\w+)\s*:\s*([^\s|]+)/g;let oe;for(;(oe=de.exec(se))!==null;){let ye=oe[1],$=oe[2];/^-?\d+$/.test($)&&($=Number($)),_e[ye]=$}return _e}function le(se){p.value="";let _e=X(se);const de=at().format("YYYY-MM-DD");let oe={..._e,scannedAt:de};Q(oe)}function Q(se){o.value=!0,p.value="",$e.post("/scan-eticket",{ticketManualCode:se.ticketManualCode,scannedAt:se.scannedAt},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(_e=>{_e.data&&_e.data.data&&(E.value={messageType:_e.data.data.messageType,message:_e.data.data.message,bookingId:_e.data.data.bookingId,ticketManualCode:_e.data.data.ticketManualCode,ticketControlNumber:_e.data.data.ticketControl,eventName:_e.data.data.eventName?_e.data.data.eventName:ue(_e.data.data)},ee(_e.data.data)&&(E.value.eventTicketName=ee(_e.data.data)))}).catch(_e=>{const de=_e?.response?.data;!de||(de.data?E.value={messageType:de.data.messageType,message:de.data.message}:(E.value={messageType:"error",message:de.message},de.message.includes("Mandatory fields not passed!")&&(E.value.message=l.ticket_not_valid)))}).finally(()=>{o.value=!1})}function ue(se){return se.qrCodes.find(de=>de.ticketManualCode===se.ticketManualCode).eventName||""}function ee(se){return se.qrCodes.find(de=>de.ticketManualCode===se.ticketManualCode).eventTicketName||""}function me(se){console.error("Scanner error:",se),se.name==="NotAllowedError"?p.value=l.camera_error_1:se.name==="NotFoundError"?p.value=l.camera_error_2:se.name==="NotSupportedError"?p.value=l.camera_error_3:p.value=`Camera error: ${se.message}`}return Ze(()=>{xt(()=>e.visibility,se=>{se?C():R()},{immediate:!0})}),Hn(()=>{R()}),(se,_e)=>{const de=vt,oe=st;return e.visibility?(u(),Y(Sa,{key:0,visibility:e.visibility,class:"am-cqcs__dialog",position:"top","footer-visibility":!1,"onUpdate:visibility":_e[0]||(_e[0]=ye=>a("update:visibility",ye))},{header:S(()=>[m("div",u1,w(t(l).e_ticket_scanner),1)]),default:S(()=>[e.visibility?(u(),B("div",d1,[$t(m("div",m1,[m("div",p1,[m("video",{ref_key:"videoElement",ref:P,class:"am-cqcs__video",style:Be({display:t(i)?"block":"none"}),autoplay:"",playsinline:""},null,4),m("canvas",{ref_key:"canvasElement",ref:L,class:"am-cqcs__canvas",style:{display:"none"}},null,512),f1]),t(E)?(u(),B("div",g1,[m("span",{class:j(t(E).messageType==="error"?"am-icon-close-filled":"am-icon-checkmark-circle-full")},null,2),t(E).message?(u(),B("div",h1,w(t(l)[t(E).message]||t(E).message),1)):I("",!0),t(E).eventName?(u(),B("div",v1,w(t(E).eventName),1)):I("",!0),t(E).ticketManualCode?(u(),B("div",E1,[m("span",null,w(t(l).ticket_id)+":",1),ce(" #"+w(t(E).ticketManualCode),1)])):I("",!0),t(E).eventTicketName?(u(),B("div",_1,[m("span",null,w(t(l).ticket_name)+":",1),ce(" "+w(t(E).eventTicketName),1)])):I("",!0),t(E).bookingId?(u(),B("div",C1,[m("span",null,w(t(l).booking_id)+":",1),ce(" #"+w(t(E).bookingId),1)])):I("",!0),t(E).ticketControlNumber?(u(),B("div",y1,[m("span",null,w(t(l).attendees_allowed)+":",1),ce(" "+w(t(E).ticketControlNumber),1)])):I("",!0)])):I("",!0),t(p)?(u(),B("div",b1,[B1,ce(" "+w(t(p)),1)])):I("",!0),m("div",A1,[t(x)?(u(),Y(Fe,{key:0,category:"primary",onClick:O},{default:S(()=>[m("span",{class:j(t(r)?"am-icon-bolt-lightning":"am-icon-bolt-lightning-fill")},null,2),ce(" "+w(t(r)?t(l).torch_off:t(l).torch_on),1)]),_:1})):I("",!0),t(c).length>1?(u(),Y(Fe,{key:1,onClick:H},{default:S(()=>[k1,ce(" "+w(t(l).switch_camera),1)]),_:1})):I("",!0),t(i)?I("",!0):(u(),Y(Fe,{key:2,category:"primary",onClick:F},{default:S(()=>[D1,ce(" "+w(t(l).start_scanner),1)]),_:1})),t(i)?(u(),Y(Fe,{key:3,category:"danger",onClick:R},{default:S(()=>[F1,ce(" "+w(t(l).stop_scanner),1)]),_:1})):I("",!0)]),N(ho,{class:"am-cqcs__collapse"},{default:S(()=>[N(go,{ref_key:"manualCodeCollapse",ref:k,class:"am-cqcs__collapse-item"},{heading:S(()=>[ce(w(t(l).enter_ticket_manually),1)]),default:S(()=>[N(oe,{ref_key:"manualCodeForm",ref:D,model:t(h),rules:t(g),class:"am-cqcs__form",onSubmit:i0(z,["prevent"])},{default:S(()=>[(u(!0),B(ne,null,Ee(t(y),(ye,$)=>(u(),Y(ft(ye.template),Ft({key:$,modelValue:t(h)[$],"onUpdate:modelValue":W=>t(h)[$]=W},ye.props),null,16,["modelValue","onUpdate:modelValue"]))),128)),N(de,null,{default:S(()=>[N(Fe,{category:"primary",onClick:z},{default:S(()=>[ce(w(t(l).validate_ticket),1)]),_:1})]),_:1})]),_:1},8,["model","rules","onSubmit"])]),_:1},512)]),_:1})],512),[[fo,!t(o)]]),t(o)?(u(),Y(Gl,{key:0})):I("",!0)])):I("",!0)]),_:1},8,["visibility"])):I("",!0)}}};function _s(n,a,e={},s={}){for(let l in a)l in n&&a[l]&&typeof a[l]=="object"?(l in s||(s[l]={}),_s(n[l],a[l],l in e?e[l]:n[l],s[l]),Object.keys(s[l]).length===0&&delete s[l]):l in e?s[l]=e[l]:l in n?s[l]=n[l]:s[l]=a[l];return s}function P1(n){lt.activation.stash&&$e.post("/stash",{},Object.assign(Ue(n),{params:{source:"cabinet-provider"}})).then(()=>{}).catch(()=>{})}function T1(n,a){let e=n.getters["event/getDefaultEvent"],s=[],l={};a.customTickets.length&&a.bookings.forEach(r=>{r.ticketsData.forEach(x=>{l[x.eventTicketId]=!0})}),a.customTickets.forEach(r=>{JSON.parse(r.dateRanges).forEach((x,c)=>{c in s||s.push({enabled:x.enabled,range:[Ce(x.startDate,"YYYY-MM-DD").toDate(),Ce(x.endDate,"YYYY-MM-DD").toDate()],tickets:[]}),s[c].tickets.push({price:x.price})}),r.booked=r.id in l});let o=!a.description||a.description.startsWith("<!-- Content -->")?"text":"html",i=a.description?a.description.replace("<!-- Content -->",""):"";return Object.assign({},a,{description:i,descriptionMode:o,tags:a.tags.map(r=>r.name),organizerId:a.organizerId,periods:a.periods.map(r=>new Object({id:r.id,eventId:r.eventId,appleCalendarEventId:r.appleCalendarEventId,googleCalendarEventId:r.googleCalendarEventId,googleMeetUrl:r.googleMeetUrl,outlookCalendarEventId:r.outlookCalendarEventId,startDate:Ce(r.periodStart.split(" ")[0],"YYYY-MM-DD").toDate(),endDate:Ce(r.periodEnd.split(" ")[0],"YYYY-MM-DD").toDate(),startTime:r.periodStart.split(" ")[1].substring(0,5),endTime:r.periodEnd.split(" ")[1].substring(0,5)})),bookingOpens:{disabled:a.bookingOpens===null,date:a.bookingOpens?Ce(a.bookingOpens.split(" ")[0],"YYYY-MM-DD").toDate():null,time:a.bookingOpens?a.bookingOpens.split(" ")[1].substring(0,5):null},bookingOpensRec:a.bookingOpensRec==="same",bookingCloses:{disabled:a.bookingCloses===null,date:a.bookingCloses?Ce(a.bookingCloses.split(" ")[0],"YYYY-MM-DD").toDate():null,time:a.bookingCloses?a.bookingCloses.split(" ")[1].substring(0,5):null},bookingClosesRec:a.bookingClosesRec==="same",recurringEnabled:a.recurring&&a.recurring.cycle!==null,recurring:a.recurring!==null?Object.assign({},a.recurring,{until:a.recurring.until?Ce(a.recurring.until.split(" ")[0],"YYYY-MM-DD").toDate():null,monthDate:a.recurring.monthDate?Ce(a.recurring.monthDate.split(" ")[0],"YYYY-MM-DD").toDate():null}):e.recurring,depositEnabled:a.depositPayment!=="disabled",depositPayment:a.depositPayment!=="disabled"?a.depositPayment:"percentage",customTicketsRangesEnabled:s.length>0,customTicketsRanges:s,maxCustomCapacity:a.maxCustomCapacity===null?1:a.maxCustomCapacity,maxCustomCapacityEnabled:a.maxCustomCapacity!==null,closeAfterMinEnabled:a.closeAfterMin!==null,closeAfterMinBookings:a.closeAfterMinBookings,closeAfterMin:a.closeAfterMin===null?1:a.closeAfterMin,maxExtraPeopleEnabled:a.maxExtraPeople!==null,maxExtraPeople:a.maxExtraPeople===null?0:a.maxExtraPeople,locationId:a.locationId===null&&a.customLocation?0:a.locationId,settings:_s(lt,e.settings,a.settings?JSON.parse(a.settings):{},{})})}function L1(n){let a=n.getters["event/getDefaultEvent"],e=[];n.getters["event/getCustomTickets"].forEach((l,o)=>{let i=[];n.getters["event/getCustomTicketsRanges"].filter(r=>r.range[0]&&r.range[1]).forEach(r=>{i.push({startDate:Ce(r.range[0]).format("YYYY-MM-DD"),endDate:Ce(r.range[1]).format("YYYY-MM-DD"),price:r.tickets[o].price})}),e.push(Object.assign({},l,{dateRanges:JSON.stringify(i)}))});let s=_s(_s(lt,a.settings,{},{}),a.settings,n.getters["event/getSettings"],{});return Object.keys(n.getters["event/getSettings"]).forEach(l=>{Object.keys(n.getters["event/getSettings"][l]).forEach(o=>{n.getters["event/getSettings"][l][o]!==null&&typeof n.getters["event/getSettings"][l][o]=="object"?(Object.keys(n.getters["event/getSettings"][l][o]).forEach(i=>{(n.getters["event/getSettings"][l][o][i]===lt[l][o][i]||lt[l][o][i]&&(n.getters["event/getSettings"][l][o][i]===""||n.getters["event/getSettings"][l][o][i]===null))&&delete s[l][o][i]}),typeof s[l][o]=="object"&&Object.keys(s[l][o]).length===0&&delete s[l][o]):l in lt&&o in lt[l]&&(s[l][o]===lt[l][o]||lt[l][o]&&(n.getters["event/getSettings"][l][o]===""||n.getters["event/getSettings"][l][o]===null))&&delete s[l][o]}),Object.keys(s[l]).length===0&&delete s[l]}),{aggregatedPrice:n.getters["event/getAggregatedPrice"],bookMultipleTimes:n.getters["event/getBookMultipleTimes"],bookingCloses:!n.getters["event/getBookingClosesDisabled"]&&n.getters["event/getBookingClosesDate"]&&n.getters["event/getBookingClosesTime"]?Ce(n.getters["event/getBookingClosesDate"]).format("YYYY-MM-DD")+" "+n.getters["event/getBookingClosesTime"]+":00":null,bookingClosesRec:n.getters["event/getBookingClosesRec"]?"same":"calculate",bookingOpens:!n.getters["event/getBookingOpensDisabled"]&&n.getters["event/getBookingOpensDate"]&&n.getters["event/getBookingOpensTime"]?Ce(n.getters["event/getBookingOpensDate"]).format("YYYY-MM-DD")+" "+n.getters["event/getBookingOpensTime"]+":00":null,bookingOpensRec:n.getters["event/getBookingOpensRec"]?"same":"calculate",bringingAnyone:n.getters["event/getBringingAnyone"],closeAfterMin:n.getters["event/getCloseAfterMinEnabled"]?n.getters["event/getCloseAfterMin"]:null,closeAfterMinBookings:n.getters["event/getCloseAfterMinBookings"],color:n.getters["event/getColor"],customLocation:n.getters["event/getCustomLocation"],customPricing:n.getters["event/getCustomPricing"],customTickets:e,deposit:n.getters["event/getDeposit"],depositPayment:n.getters["event/getDepositEnabled"]?n.getters["event/getDepositPayment"]:"disabled",depositPerPerson:n.getters["event/getDepositPerPerson"],description:n.getters["event/getDescription"]&&n.getters["event/getDescriptionMode"]==="text"?"<!-- Content -->"+n.getters["event/getDescription"]:n.getters["event/getDescription"],fullPayment:n.getters["event/getFullPayment"],gallery:n.getters["event/getGallery"],id:n.getters["event/getId"],locationId:n.getters["event/getLocationId"]===0?null:n.getters["event/getLocationId"],maxCapacity:n.getters["event/getMaxCapacity"],maxCustomCapacity:n.getters["event/getMaxCustomCapacityEnabled"]?n.getters["event/getMaxCustomCapacity"]:null,maxExtraPeople:n.getters["event/getMaxExtraPeopleEnabled"]?n.getters["event/getMaxExtraPeople"]:null,name:n.getters["event/getName"],notifyParticipants:n.getters["event/getNotifyParticipants"],organizerId:n.getters["event/getOrganizerId"],parentId:n.getters["event/getParentId"],periods:Tr(n),price:n.getters["event/getPrice"],providers:n.getters["event/getId"]?n.getters["event/getProviders"]:[{id:n.getters["auth/getProfile"].id,firstName:n.getters["auth/getProfile"].firstName,lastName:n.getters["auth/getProfile"].lastName,email:n.getters["auth/getProfile"].email,type:"provider"}],recurring:n.getters["event/getRecurringEnabled"]?Object.assign({},n.getters["event/getRecurring"],{until:Ce(n.getters["event/getRecurringUntil"]).format("YYYY-MM-DD"),monthDate:n.getters["event/getRecurringMonthDate"]?Ce(n.getters["event/getRecurringMonthDate"]).format("YYYY-MM-DD"):null}):null,settings:Object.keys(s).length?JSON.stringify(s):null,show:n.getters["event/getShow"],tags:n.getters["event/getTags"].map(l=>new Object({name:l})),timeZone:n.getters["cabinet/getTimeZone"],translations:n.getters["event/getTranslations"],utc:n.getters["cabinet/getTimeZone"]==="UTC",zoomUserId:n.getters["event/getZoomUserId"]}}function Tr(n){return n.getters["event/getPeriods"].map(a=>new Object({id:a.id,eventId:a.eventId,appleCalendarEventId:a.appleCalendarEventId,googleCalendarEventId:a.googleCalendarEventId,googleMeetUrl:a.googleMeetUrl,outlookCalendarEventId:a.outlookCalendarEventId,microsoftTeamsUrl:a.microsoftTeamsUrl,periodStart:n.getters["cabinet/getTimeZone"]==="UTC"?Ce(a.startDate).utc().format("YYYY-MM-DD")+" "+a.startTime+":00":Ce(a.startDate).format("YYYY-MM-DD")+" "+a.startTime+":00",periodEnd:n.getters["cabinet/getTimeZone"]==="UTC"?Ce(a.endDate).utc().format("YYYY-MM-DD")+" "+a.endTime+":00":Ce(a.endDate).format("YYYY-MM-DD")+" "+a.endTime+":00"}))}const bl=tt(window.wpAmeliaLabels);function Bi(n,a={}){return Object.assign(a,{id:n.id,eventId:n.event.id,customer:n.customer,customerId:n.customer.id,persons:n.persons,customFields:n.customFields?JSON.parse(n.customFields):{},ticketsData:n.ticketsData,status:n.status,tax:n.tax,price:n.price,coupon:n.coupon,payments:n.payments,qrCodes:n.qrCodes})}function Lr(n){let a={};return Object.keys(n.getters["attendee/getCustomFields"]).forEach(e=>{a[e]={label:n.getters["attendee/getCustomFields"][e].label,type:n.getters["attendee/getCustomFields"][e].type,value:n.getters["attendee/getCustomFields"][e].type==="datepicker"?n.getters["attendee/getCustomFields"][e].value?Ce(n.getters["attendee/getCustomFields"][e].value).format("YYYY-MM-DD"):null:n.getters["attendee/getCustomFields"][e].value}}),{id:n.getters["attendee/getId"],type:"event",eventId:n.getters["attendee/getEventId"],bookings:[{customerId:n.getters["attendee/getCustomerId"],persons:n.getters["attendee/getPersons"],customFields:a,ticketsData:n.getters["attendee/getTickets"],status:n.getters["attendee/getStatus"],coupon:n.getters["attendee/getCoupon"]}],status:n.getters["attendee/getStatus"],validateCoupon:!1,isBackendOrCabinet:!0,createPaymentLinks:!1,payment:{gateway:"onSite"}}}function gs(n,a,e=null){let s=a.customFields,l=e&&e.customPricing?e.customTickets.map((o,i)=>new Object({eventTicketId:o.id,persons:i===0&&!Object.keys(a.ticketsData).length?1:0,price:o.price})):[];return e&&(n.getters["entities/getCustomFields"].filter(o=>o.allEvents||o.events.map(i=>i.id).indexOf(e.id)!==-1&&o.type!=="content"&&o.type!=="file").forEach(o=>{s[o.id]={type:o.type,label:o.label,value:o.id in s?s[o.id].value:o.type==="checkbox"||o.type==="file"?[]:"",width:o.width,options:o.options,id:o.id,required:o.required}}),e.customPricing&&Object.keys(a.ticketsData).forEach(o=>{let i=l.find(r=>r.eventTicketId===a.ticketsData[o].eventTicketId);i.id=a.ticketsData[o].id,i.persons=a.ticketsData[o].persons,i.price=a.ticketsData[o].price,i.customerBookingId=a.ticketsData[o].customerBookingId})),Object.assign({},a,{eventId:e?e.id:null,customFields:s,ticketsData:l})}function Sr(){return[{label:bl.approved,value:"approved",icon:"check",color:"var(--am-c-success)"},{label:bl.waiting,value:"waiting",icon:"clock",color:"var(--am-c-warning)"},{label:bl.canceled,value:"canceled",icon:"close",color:"var(--am-c-error)"},{label:bl["no-show"],value:"no-show",icon:"no-show",color:"#808A90"}]}function Ir(n){let a=0;return n.getters["attendee/getTickets"].length?n.getters["attendee/getTickets"].forEach(e=>{e.persons&&(a+=n.getters["attendee/getAggregatedPrice"]?e.price*e.persons:e.price)}):a=n.getters["attendee/getAggregatedPrice"]?n.getters["attendee/getPrice"]*n.getters["attendee/getPersons"]:n.getters["attendee/getPrice"],xo(null,n.getters["attendee/getCoupon"],n.getters["attendee/getTax"]&&n.getters["attendee/getTax"].length?n.getters["attendee/getTax"][0]:null,a,!1)}const S1=["innerHTML"],I1=["innerHTML"],$1={setup(n,{expose:a}){let e=Oe(),s=U("amLabels"),l=U("licence");const o=U("settings");let i=V(e.getters["entities/getLocations"]),r=V(e.getters["entities/getTags"]),x=V("");function c(P){x.value=P.toLowerCase()}let f=b(()=>x.value?r.value.filter(P=>P.name.toLowerCase().includes(x.value)):r.value),p=V(null),d=V({name:b({get:()=>e.getters["event/getName"],set:P=>{e.commit("event/setName",P)}}),locationId:b({get:()=>e.getters["event/getLocationId"],set:P=>{e.commit("event/setLocationId",P)}}),customLocation:b({get:()=>e.getters["event/getCustomLocation"],set:P=>{e.commit("event/setCustomLocation",P)}}),organizerId:b({get:()=>e.getters["event/getOrganizerId"],set:P=>{e.commit("event/setOrganizerId",P)}}),zoomUserId:b({get:()=>e.getters["event/getZoomUserId"],set:P=>{e.commit("event/setZoomUserId",P)}}),tags:b({get:()=>e.getters["event/getTags"],set:P=>{e.commit("event/setTags",P)}}),notifyParticipants:b({get:()=>e.getters["event/getNotifyParticipants"],set:P=>{e.commit("event/setNotifyParticipants",P)}}),description:b({get:()=>e.getters["event/getDescription"],set:P=>{e.commit("event/setDescription",P||"")}})}),_=b(()=>d.value.organizerId!==null);function T(P){e.commit("event/setOrganizerId",P?e.getters["auth/getProfile"].id:null)}let A=b(()=>({name:[{required:!0,message:s.value.please_enter_name,trigger:["submit","change"]}]})),E=b(()=>{let P=e.getters["auth/getZoomUsers"];return P.length?P.map(L=>({value:L.id,label:`${L.first_name} ${L.last_name} (${L.email})`})):[]});return a({detailsFormRef:p}),(P,L)=>{const D=vt,h=Vl,g=st;return u(),Y(g,{ref_key:"detailsFormRef",ref:p,model:t(d),rules:t(A),class:"am-capei-def"},{default:S(()=>[N(D,{prop:"name",label:`${t(s).name}:`,class:"am-capei-def__item"},{default:S(()=>[N(ct,{modelValue:t(d).name,"onUpdate:modelValue":L[0]||(L[0]=y=>t(d).name=y),placeholder:t(s).enter_event_name},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),!t(l).isStarter&&t(i).length>1?(u(),Y(D,{key:0,label:`${t(s).event_select_address}:`,class:"am-capei-def__item"},{default:S(()=>[N(Je,{modelValue:t(d).locationId,"onUpdate:modelValue":L[1]||(L[1]=y=>t(d).locationId=y),placeholder:t(s).select},{default:S(()=>[(u(),Y(Ye,{key:0,value:0,label:t(s).event_custom_address},null,8,["label"])),(u(!0),B(ne,null,Ee(t(i),y=>(u(),Y(Ye,{key:y.id,value:y.id,label:y.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):I("",!0),t(d).locationId?I("",!0):(u(),Y(D,{key:1,label:`${t(s).event_custom_address}:`,class:"am-capei-def__item"},{default:S(()=>[N(ct,{modelValue:t(d).customLocation,"onUpdate:modelValue":L[2]||(L[2]=y=>t(d).customLocation=y)},null,8,["modelValue"])]),_:1},8,["label"])),t(o).zoom.enabled?(u(),Y(D,{key:2,label:`${t(s).zoom_user}:`,class:"am-capei-def__item"},{default:S(()=>[N(Je,{modelValue:t(d).zoomUserId,"onUpdate:modelValue":L[3]||(L[3]=y=>t(d).zoomUserId=y),clearable:"",placeholder:t(s).zoom_user_placeholder},{default:S(()=>[(u(!0),B(ne,null,Ee(t(E),y=>(u(),Y(Ye,{key:y.value,value:y.value,label:y.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):I("",!0),!t(l).isStarter&&(t(o).googleCalendar.enabled||t(o).outlookCalendar.enabled||t(o).appleCalendar)&&(t(e).getters["employee/getGoogleCalendarId"]||t(e).getters["employee/getOutlookCalendarId"]||t(e).getters["employee/getAppleCalendarId"])?(u(),Y(D,{key:3,class:"am-capei-def__item am-capei-def__item-tool"},{default:S(()=>[N(it,{modelValue:t(_),"onUpdate:modelValue":L[4]||(L[4]=y=>De(_)?_.value=y:_=y),disabled:t(d).organizerId&&t(d).organizerId!==t(e).getters["auth/getProfile"].id,"active-text":t(s).event_organizer,"aria-label":t(s).event_organizer,onChange:T},null,8,["modelValue","disabled","active-text","aria-label"]),N(h,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(s).event_organizer_tooltip},null,8,S1)]),default:S(()=>[N(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1})):I("",!0),N(D,{label:`${t(s).event_tags}:`,class:"am-capei-def__item"},{default:S(()=>[N(Je,{modelValue:t(d).tags,"onUpdate:modelValue":L[5]||(L[5]=y=>t(d).tags=y),clearable:"",filterable:"",multiple:"","allow-create":!0,placeholder:t(s).event_tags_select_or_create,"filter-method":c},{default:S(()=>[(u(!0),B(ne,null,Ee(t(f),(y,k)=>(u(),Y(Ye,{key:k,value:y.name,label:y.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),N(D,{class:"am-capei-def__item am-capei-def__item-tool"},{default:S(()=>[N(it,{modelValue:t(d).notifyParticipants,"onUpdate:modelValue":L[6]||(L[6]=y=>t(d).notifyParticipants=y),"active-text":t(s).notify_attendees,"aria-label":t(s).notify_attendees},null,8,["modelValue","active-text","aria-label"]),N(h,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(s).notify_attendees_tooltip},null,8,I1)]),default:S(()=>[N(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1}),N(D,{prop:"description",label:t(s).description_colon,class:"am-capei-def__item"},{default:S(()=>[N(gr,{modelValue:t(d).description,"onUpdate:modelValue":L[7]||(L[7]=y=>t(d).description=y),mode:t(e).getters["event/getDescriptionMode"],onSetMode:L[8]||(L[8]=y=>t(e).commit("event/setDescriptionMode",y))},null,8,["modelValue","mode"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}};const N1={class:"am-capei-per__segment"},O1={key:0,class:"am-capei-per__delete"},M1={class:"am-capei-per__segment"},V1=["innerHTML"],R1={class:"am-capei-per__segment"},q1=["innerHTML"],U1={props:{pageWidth:{type:Number,default:0}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth));const l=Oe(),o=U("settings");let i=U("amLabels"),r=U("localLanguage"),x=V(at());function c(D){let h=E.value.periods.map(g=>g.endDate).filter(g=>g instanceof Date&&!isNaN(g));return at(D)<x.value||at(D)>at(new Date(Math.max(...h)))}function f(D,h){const g=at(D)<x.value;return(h?at(D)>at(h):!1)||g}function p(D,h){return h?at(D)<at(h):at(D)<x.value}function d(){let D=!0;A.value.validate(h=>{h||(D=!1)}),D&&E.value.periods.push({eventId:l.getters["event/getId"]?l.getters["event/getId"]:null,startDate:null,endDate:null,startTime:null,endTime:null})}function _(D){l.getters["event/getId"]&&E.value.periods[D]?.id&&E.value.periods[D].id&&E.value.periods.forEach((h,g)=>{g!==D&&!h?.id&&(E.value.periods[g].id=E.value.periods[D].id,E.value.periods[g].eventId=E.value.periods[D].eventId,E.value.periods[g].appleCalendarEventId=E.value.periods[D].appleCalendarEventId,E.value.periods[g].googleCalendarEventId=E.value.periods[D].googleCalendarEventId,E.value.periods[g].googleMeetUrl=E.value.periods[D].googleMeetUrl,E.value.periods[g].outlookCalendarEventId=E.value.periods[D].outlookCalendarEventId,E.value.periods[g].microsoftTeamsUrl=E.value.periods[D].microsoftTeamsUrl)}),E.value.periods.splice(D,1)}let T=b(()=>l.getters["event/getRecurringEnabled"]),A=V(null),E=V({periods:b({get:()=>l.getters["event/getPeriods"],set:D=>{l.commit("event/setPeriods",D)}}),bookingOpensDisabled:b({get:()=>l.getters["event/getBookingOpensDisabled"],set:D=>{l.commit("event/setBookingOpensDisabled",D)}}),bookingOpensDate:b({get:()=>l.getters["event/getBookingOpensDate"],set:D=>{l.commit("event/setBookingOpensDate",D)}}),bookingOpensTime:b({get:()=>l.getters["event/getBookingOpensTime"],set:D=>{l.commit("event/setBookingOpensTime",D)}}),bookingOpensRec:b({get:()=>l.getters["event/getBookingOpensRec"],set:D=>{l.commit("event/setBookingOpensRec",D)}}),bookingClosesDisabled:b({get:()=>l.getters["event/getBookingClosesDisabled"],set:D=>{l.commit("event/setBookingClosesDisabled",D)}}),bookingClosesDate:b({get:()=>l.getters["event/getBookingClosesDate"],set:D=>{l.commit("event/setBookingClosesDate",D)}}),bookingClosesTime:b({get:()=>l.getters["event/getBookingClosesTime"],set:D=>{l.commit("event/setBookingClosesTime",D)}}),bookingClosesRec:b({get:()=>l.getters["event/getBookingClosesRec"],set:D=>{l.commit("event/setBookingClosesRec",D)}})});a({periodsFormRef:A});let P=U("amColors"),L=b(()=>({"--am-c-capei-per-text":P.value.colorMainText,"--am-c-capei-per-text-op03":K(P.value.colorMainText,.03),"--am-c-capei-per-inp-bgr-op03":K(P.value.colorInpBgr,.03)}));return(D,h)=>{const g=vt,y=Vl,k=st;return u(),Y(k,{ref_key:"periodsFormRef",ref:A,model:t(E),"label-position":"top",class:"am-capei-per",style:Be(t(L))},{default:S(()=>[m("div",N1,[(u(!0),B(ne,null,Ee(t(E).periods,(C,F)=>(u(),B(ne,{key:F},[N(g,{prop:"periods."+F+".startDate",rules:{required:!0,message:t(i).select_date_warning,trigger:["blur","change"]},label:`${t(i).start_date}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(ea,{modelValue:C.startDate,"onUpdate:modelValue":R=>C.startDate=R,format:t(Kt)(),lang:t(r),"disabled-date":R=>f(R,C.endDate)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date"])]),_:2},1032,["prop","rules","label","class"]),N(g,{prop:"periods."+F+".endDate",rules:{required:!0,message:t(i).select_date_warning,trigger:["blur","change"]},label:`${t(i).end_date}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(ea,{modelValue:C.endDate,"onUpdate:modelValue":R=>C.endDate=R,format:t(Kt)(),lang:t(r),"disabled-date":R=>p(R,C.startDate)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date"])]),_:2},1032,["prop","rules","label","class"]),N(g,{prop:"periods."+F+".startTime",rules:{required:!0,message:t(i).select_time_warning,trigger:["blur","change"]},label:`${t(i).start_time}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(Fa,{modelValue:C.startTime,"onUpdate:modelValue":R=>C.startTime=R,start:"00:00",end:t(Mt)(t(Ut)("24:00")-t(o).general.timeSlotLength),"min-time":null,"max-time":C.endTime,step:t(Mt)(t(o).general.timeSlotLength),clearable:!1,placeholder:t(i).select_time},null,8,["modelValue","onUpdate:modelValue","end","max-time","step","placeholder"])]),_:2},1032,["prop","rules","label","class"]),N(g,{prop:"periods."+F+".endTime",rules:{required:!0,message:t(i).select_time_warning,trigger:["blur","change"]},label:`${t(i).end_time}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(Fa,{modelValue:C.endTime,"onUpdate:modelValue":R=>C.endTime=R,disabled:!C.startTime,start:"00:00",end:"24:00","min-time":C.startTime,"max-time":null,step:t(Mt)(t(o).general.timeSlotLength),clearable:!1,placeholder:t(i).select_time},null,8,["modelValue","onUpdate:modelValue","disabled","min-time","step","placeholder"])]),_:2},1032,["prop","rules","label","class"]),t(E).periods.length>1?(u(),B("div",O1,[N(Fe,{size:"default",category:"danger",onClick:R=>_(F)},{default:S(()=>[ce(w(t(i).delete_period),1)]),_:2},1032,["onClick"])])):I("",!0)],64))),128)),N(Fe,{size:"default",onClick:h[0]||(h[0]=C=>d())},{default:S(()=>[ce(w(t(i).add_period),1)]),_:1})]),m("div",M1,[N(ht,{modelValue:t(E).bookingOpensDisabled,"onUpdate:modelValue":h[1]||(h[1]=C=>t(E).bookingOpensDisabled=C),label:t(i).event_booking_opens_now},null,8,["modelValue","label"]),t(E).bookingOpensDisabled?I("",!0):(u(),B(ne,{key:0},[N(g,{label:`${t(i).date}:`,prop:"bookingOpensDate",rules:{required:!0,message:t(i).select_date_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(ea,{modelValue:t(E).bookingOpensDate,"onUpdate:modelValue":h[2]||(h[2]=C=>t(E).bookingOpensDate=C),format:t(Kt)(),lang:t(r),"disabled-date":c},null,8,["modelValue","format","lang"])]),_:1},8,["label","rules","class"]),N(g,{label:`${t(i).time}:`,prop:"bookingOpensTime",rules:{required:!0,message:t(i).select_time_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(Fa,{modelValue:t(E).bookingOpensTime,"onUpdate:modelValue":h[3]||(h[3]=C=>t(E).bookingOpensTime=C),placeholder:t(i).select_time,step:t(Mt)(t(o).general.timeSlotLength),start:"00:00",end:"24:00",clearable:!1},null,8,["modelValue","placeholder","step"])]),_:1},8,["label","rules","class"])],64)),t(T)?(u(),Y(ht,{key:1,modelValue:t(E).bookingOpensRec,"onUpdate:modelValue":h[4]||(h[4]=C=>t(E).bookingOpensRec=C)},{default:S(()=>[ce(w(t(i).apply_to_all)+" ",1),N(y,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(i).event_booking_closes_apply},null,8,V1)]),default:S(()=>[N(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1},8,["modelValue"])):I("",!0)]),m("div",R1,[N(ht,{modelValue:t(E).bookingClosesDisabled,"onUpdate:modelValue":h[5]||(h[5]=C=>t(E).bookingClosesDisabled=C),label:t(i).event_booking_closes_after},null,8,["modelValue","label"]),t(E).bookingClosesDisabled?I("",!0):(u(),B(ne,{key:0},[N(g,{label:`${t(i).date}:`,prop:"bookingClosesDate",rules:{required:!0,message:t(i).select_date_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(ea,{modelValue:t(E).bookingClosesDate,"onUpdate:modelValue":h[6]||(h[6]=C=>t(E).bookingClosesDate=C),format:t(Kt)(),lang:t(r),"disabled-date":c},null,8,["modelValue","format","lang"])]),_:1},8,["label","rules","class"]),N(g,{label:`${t(i).time}:`,prop:"bookingClosesTime",rules:{required:!0,message:t(i).select_time_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(Fa,{modelValue:t(E).bookingClosesTime,"onUpdate:modelValue":h[7]||(h[7]=C=>t(E).bookingClosesTime=C),step:t(Mt)(t(o).general.timeSlotLength),start:"00:00",end:"24:00",clearable:!1,placeholder:t(i).select_time},null,8,["modelValue","step","placeholder"])]),_:1},8,["label","rules","class"])],64)),t(T)?(u(),Y(ht,{key:1,modelValue:t(E).bookingClosesRec,"onUpdate:modelValue":h[8]||(h[8]=C=>t(E).bookingClosesRec=C)},{default:S(()=>[ce(w(t(i).apply_to_all)+" ",1),N(y,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(i).event_booking_closes_apply},null,8,q1)]),default:S(()=>[N(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1},8,["modelValue"])):I("",!0)])]),_:1},8,["model","style"])}}};const z1={class:"am-capei-recurr__header"},j1={class:"am-capei-recurr__header-text"},Y1={props:{pageWidth:{type:Number,default:0},recurringUntil:{type:Object,default:null}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth));const l=Oe();let o=U("amLabels"),i=U("localLanguage"),r=V([{label:o.value.day,value:"daily"},{label:o.value.week,value:"weekly"},{label:o.value.month,value:"monthly"},{label:o.value.year,value:"yearly"}]),x=V([{label:o.value.recurring_date_first,value:"first"},{label:o.value.recurring_date_second,value:"second"},{label:o.value.recurring_date_third,value:"third"},{label:o.value.recurring_date_fourth,value:"fourth"},{label:o.value.recurring_date_fifth,value:"fifth"},{label:o.value.recurring_date_last,value:"last"}]),c=[{label:o.value.weekday_monday,value:"monday"},{label:o.value.weekday_tuesday,value:"tuesday"},{label:o.value.weekday_wednesday,value:"wednesday"},{label:o.value.weekday_thursday,value:"thursday"},{label:o.value.weekday_friday,value:"friday"},{label:o.value.weekday_saturday,value:"saturday"},{label:o.value.weekday_sunday,value:"sunday"}],f=V(null),p=V({enabled:b({get:()=>l.getters["event/getRecurringEnabled"],set:L=>{l.commit("event/setRecurringEnabled",L)}}),cycle:b({get:()=>l.getters["event/getRecurringCycle"],set:L=>{l.commit("event/setRecurringCycle",L)}}),cycleInterval:b({get:()=>l.getters["event/getRecurringCycleInterval"],set:L=>{l.commit("event/setRecurringCycleInterval",L)}}),monthDate:b({get:()=>l.getters["event/getRecurringMonthDate"],set:L=>{l.commit("event/setRecurringMonthDate",L)}}),monthlyOnDay:b({get:()=>l.getters["event/getRecurringMonthlyOnDay"],set:L=>{l.commit("event/setRecurringMonthlyOnDay",L)}}),monthlyOnRepeat:b({get:()=>l.getters["event/getRecurringMonthlyOnRepeat"],set:L=>{l.commit("event/setRecurringMonthlyOnRepeat",L)}}),monthlyRepeat:b({get:()=>l.getters["event/getRecurringMonthlyRepeat"],set:L=>{l.commit("event/setRecurringMonthlyRepeat",L)}}),order:b({get:()=>l.getters["event/getRecurringOrder"],set:L=>{l.commit("event/setRecurringOrder",L)}}),until:b({get:()=>l.getters["event/getRecurringUntil"],set:L=>{l.commit("event/setRecurringUntil",L)}})}),d=b(()=>({cycle:[{required:!0,message:o.value.select_cycle_warning,trigger:["submit","change"]}],until:[{required:!0,message:o.value.select_date_warning,trigger:["submit","change"]}],monthDate:[{required:!0,message:o.value.select_date_warning,trigger:["submit","change"]}]})),_=b(()=>l.getters["event/getPeriods"]),T=b(()=>e.recurringUntil!==null?e.recurringUntil:_.value.length?at(_.value[0].startDate,"YYYY-MM-DD"):at());function A(L){return at(L)<=T.value}a({recurringFormRef:f});let E=U("amColors"),P=b(()=>({"--am-c-capei-recurr-text":E.value.colorMainText,"--am-c-capei-recurr-text-op03":K(E.value.colorMainText,.03),"--am-c-capei-recurr-inp-bgr-op03":K(E.value.colorInpBgr,.03),"--am-c-capei-recurr-bgr-op03":K(E.value.colorMainText,.03)}));return(L,D)=>{const h=vt,g=st;return u(),B("div",{class:"am-capei-recurr",style:Be(t(P))},[m("div",z1,[m("div",j1,w(t(o).event_recurring_check),1),N(it,{modelValue:t(p).enabled,"onUpdate:modelValue":D[0]||(D[0]=y=>t(p).enabled=y),disabled:!t(_).length||!t(_)[0].startDate||!t(_)[0].endDate,"aria-label":t(o).event_recurring_check},null,8,["modelValue","disabled","aria-label"])]),t(p).enabled&&t(_).length&&t(_)[0].startDate&&t(_)[0].endDate?(u(),Y(g,{key:0,ref_key:"recurringFormRef",ref:f,rules:t(d),model:t(p),"label-position":"top",class:"am-capei-recurr__form"},{default:S(()=>[N(h,{label:`${t(o).repeat_every}`,class:j(["am-capei-recurr__form-item am-ws-150",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(p).cycleInterval,"onUpdate:modelValue":D[1]||(D[1]=y=>t(p).cycleInterval=y),min:1,disabled:t(e).recurringUntil!==null},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),N(h,{prop:"cycle",class:j(["am-capei-recurr__form-item am-inline-ws-150 am-align-end",t(s)])},{default:S(()=>[N(Je,{modelValue:t(p).cycle,"onUpdate:modelValue":D[2]||(D[2]=y=>t(p).cycle=y),clearable:"",placeholder:t(o).select_repeat_period,disabled:t(e).recurringUntil!==null},{default:S(()=>[(u(!0),B(ne,null,Ee(t(r),(y,k)=>(u(),Y(Ye,{key:k,value:y.value,label:y.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["class"]),t(p).cycle==="monthly"?(u(),Y(Rl,{key:0,modelValue:t(p).monthlyRepeat,"onUpdate:modelValue":D[5]||(D[5]=y=>t(p).monthlyRepeat=y),class:"am-w-100",disabled:t(e).recurringUntil!==null},{default:S(()=>[N(h,{class:"am-capei-recurr__form-item"},{default:S(()=>[N(La,{value:"each"},{default:S(()=>[ce(w(t(o).recurrence_each),1)]),_:1})]),_:1}),N(h,{prop:"on",class:"am-capei-recurr__form-item"},{default:S(()=>[N(La,{value:"on"},{default:S(()=>[ce(w(t(o).recurrence_on),1)]),_:1})]),_:1}),N(h,{class:j(["am-capei-recurr__form-item am-w-50",t(s)])},{default:S(()=>[N(Je,{modelValue:t(p).monthlyOnRepeat,"onUpdate:modelValue":D[3]||(D[3]=y=>t(p).monthlyOnRepeat=y),disabled:t(p).monthlyRepeat==="each"||t(e).recurringUntil!==null,placeholder:t(o).select_repeat_period},{default:S(()=>[(u(!0),B(ne,null,Ee(t(x),(y,k)=>(u(),Y(Ye,{key:k,value:y.value,label:y.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["class"]),N(h,{class:j(["am-capei-recurr__form-item am-w-50",t(s)])},{default:S(()=>[N(Je,{modelValue:t(p).monthlyOnDay,"onUpdate:modelValue":D[4]||(D[4]=y=>t(p).monthlyOnDay=y),disabled:t(p).monthlyRepeat==="each",placeholder:t(o).select_repeat_period},{default:S(()=>[(u(!0),B(ne,null,Ee(t(c),(y,k)=>(u(),Y(Ye,{key:k,value:y.value,label:y.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["class"])]),_:1},8,["modelValue","disabled"])):I("",!0),N(h,{label:t(o).event_recurring_until,prop:"until",class:"am-capei-recurr__form-item"},{default:S(()=>[N(ea,{modelValue:t(p).until,"onUpdate:modelValue":D[6]||(D[6]=y=>t(p).until=y),format:t(Kt)(),lang:t(i),"disabled-date":A,placeholder:t(o).select_date},null,8,["modelValue","format","lang","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])):I("",!0)],4)}}};const W1={class:"am-capei-price__heading"},H1={key:0,class:"am-capei-price__segment"},Z1={key:0,class:"am-capei-price__block"},G1={class:"am-capei-price__block-header"},J1={class:"am-capei-price__block-header__text"},X1={key:1,class:"am-capei-price__segment"},Q1={key:1,class:"am-capei-price__block"},K1={class:"am-capei-price__block-header"},ev={class:"am-capei-price__block-header__text"},tv={key:0,class:"am-capei-price__block-heading am-pl-32 am-pr-44"},av={class:"am-capei-price__block-heading__item am-custom-pricing am-w-40"},sv={class:"am-capei-price__block-heading__item am-custom-pricing am-w-30"},lv={class:"am-capei-price__block-heading__item am-custom-pricing am-w-30"},nv={key:1,class:"am-separator am-order-6"},ov=m("div",{class:"am-separator"},null,-1),iv={class:"am-capei-price__part"},rv=m("div",{class:"am-separator"},null,-1),cv={class:"am-capei-price__block-header"},xv={class:"am-capei-price__block-header__text"},uv={key:1,class:"am-capei-price__block-segment"},dv={key:0,class:"am-capei-price__block-heading"},mv={class:"am-capei-price__block-heading__item am-custom-date am-w-50"},pv={class:"am-capei-price__block-heading__item am-custom-date am-w-50"},fv=m("div",{class:"am-separator"},null,-1),gv={key:2,class:"am-capei-price__block"},hv={class:"am-capei-price__block-header"},vv={class:"am-capei-price__block-header__text"},Ev={key:0,class:"am-capei-price__part"},_v={key:3,class:"am-capei-price__block"},Cv={class:"am-capei-price__block-header"},yv={class:"am-capei-price__block-header__text"},bv={key:0,class:"am-capei-price__part"},Bv={props:{pageWidth:{type:Number,default:0}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth)),l=Oe(),o=U("amLabels");const i=U("settings");let r=U("localLanguage"),x=U("licence"),c={components:{IconComponent:Ge},template:'<IconComponent icon="plus"/>'};function f(C){let F=Ce(C),R=!1;if(g.value.customTicketsRanges.forEach(H=>{!R&&H.range[0]&&H.range[1]&&(R=Ce(H.range[0])<=F&&Ce(H.range[1])>=F)}),R)return!0;let M=l.getters["event/getBookingOpensDisabled"]?Ce():Ce(l.getters["event/getBookingOpensDate"]),O=l.getters["event/getBookingClosesDisabled"]?l.getters["event/getPeriods"][0].startDate?Ce(l.getters["event/getPeriods"][0].startDate,"YYYY-MM-DD"):Ce():Ce(l.getters["event/getBookingClosesDate"]);return F<M||F>O}let p=b(()=>l.getters["event/getEvent"]),d=b(()=>g.value.customPricing?g.value.customTickets.reduce((C,F)=>C+F.spots,0)>1:g.value.maxCapacity>1),_=b(()=>g.value.customPricing?g.value.customTickets.reduce((C,F)=>C+F.spots,0):0),T=b(()=>g.value.customPricing&&g.value.maxCustomCapacityEnabled?g.value.maxCustomCapacity:g.value.customPricing?_.value:g.value.maxCapacity);function A(){g.value.customPricing&&g.value.customTickets.length===0&&P()}function E(C){g.value.customTickets.splice(C,1)}function P(){g.value.customTickets.push({enabled:!0,name:"",spots:1,waitingListSpots:0,price:0}),g.value.customTicketsRanges.forEach(C=>{C.tickets.push(new Object({price:0}))})}function L(C){g.value.customTicketsRanges.splice(C,1)}function D(){g.value.customTicketsRanges.push({range:["",""],tickets:g.value.customTickets.map(C=>new Object({price:C.price}))})}const h=V(null);let g=V({price:b({get:()=>l.getters["event/getPrice"],set:C=>{l.commit("event/setPrice",C)}}),maxCapacity:b({get:()=>l.getters["event/getMaxCapacity"],set:C=>{l.commit("event/setMaxCapacity",C)}}),bringingAnyone:b({get:()=>l.getters["event/getBringingAnyone"],set:C=>{l.commit("event/setBringingAnyone",C)}}),aggregatedPrice:b({get:()=>l.getters["event/getAggregatedPrice"],set:C=>{l.commit("event/setAggregatedPrice",C)}}),bookMultipleTimes:b({get:()=>l.getters["event/getBookMultipleTimes"],set:C=>{l.commit("event/setBookMultipleTimes",C)}}),depositEnabled:b({get:()=>l.getters["event/getDepositEnabled"],set:C=>{l.commit("event/setDepositEnabled",C)}}),deposit:b({get:()=>l.getters["event/getDeposit"],set:C=>{l.commit("event/setDeposit",C)}}),depositPayment:b({get:()=>l.getters["event/getDepositPayment"],set:C=>{l.commit("event/setDepositPayment",C)}}),depositPerPerson:b({get:()=>l.getters["event/getDepositPerPerson"],set:C=>{l.commit("event/setDepositPerPerson",C)}}),fullPayment:b({get:()=>l.getters["event/getFullPayment"],set:C=>{l.commit("event/setFullPayment",C)}}),customPricing:b({get:()=>l.getters["event/getCustomPricing"],set:C=>{l.commit("event/setCustomPricing",C)}}),customTickets:b({get:()=>l.getters["event/getCustomTickets"],set:C=>{l.commit("event/setCustomTickets",C)}}),customTicketsRangesEnabled:b({get:()=>l.getters["event/getCustomTicketsRangesEnabled"],set:C=>{l.commit("event/setCustomTicketsRangesEnabled",C)}}),customTicketsRanges:b({get:()=>l.getters["event/getCustomTicketsRanges"],set:C=>{l.commit("event/setCustomTicketsRanges",C)}}),maxCustomCapacityEnabled:b({get:()=>l.getters["event/getMaxCustomCapacityEnabled"],set:C=>{l.commit("event/setMaxCustomCapacityEnabled",C)}}),maxCustomCapacity:b({get:()=>l.getters["event/getMaxCustomCapacity"],set:C=>{l.commit("event/setMaxCustomCapacity",C)}}),closeAfterMinEnabled:b({get:()=>l.getters["event/getCloseAfterMinEnabled"],set:C=>{l.commit("event/setCloseAfterMinEnabled",C)}}),closeAfterMin:b({get:()=>l.getters["event/getCloseAfterMin"],set:C=>{l.commit("event/setCloseAfterMin",C)}}),closeAfterMinBookings:b({get:()=>l.getters["event/getCloseAfterMinBookings"],set:C=>{l.commit("event/setCloseAfterMinBookings",C)}}),maxExtraPeopleEnabled:b({get:()=>l.getters["event/getMaxExtraPeopleEnabled"],set:C=>{l.commit("event/setMaxExtraPeopleEnabled",C)}}),maxExtraPeople:b({get:()=>l.getters["event/getMaxExtraPeople"],set:C=>{l.commit("event/setMaxExtraPeople",C)}})});a({pricingFormRef:h});let y=U("amColors"),k=b(()=>({"--am-c-capei-price-text":y.value.colorMainText,"--am-c-capei-price-text-op03":K(y.value.colorMainText,.03),"--am-c-capei-price-inp-bgr-op03":K(y.value.colorInpBgr,.03)}));return(C,F)=>{const R=vt,M=st;return u(),Y(M,{ref_key:"pricingFormRef",ref:h,model:t(g),style:Be(t(k)),class:"am-capei-price"},{default:S(()=>[m("div",W1,[N(R,{label:`${t(o).price}:`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(ct,{modelValue:t(g).price,"onUpdate:modelValue":F[0]||(F[0]=O=>t(g).price=O),disabled:t(g).customPricing,"is-money":!0},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),N(R,{label:`${t(o).event_max_capacity}:`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(g).maxCapacity,"onUpdate:modelValue":F[1]||(F[1]=O=>t(g).maxCapacity=O),disabled:t(g).customPricing,min:1},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),t(d)?(u(),B("div",H1,[N(ht,{modelValue:t(g).bringingAnyone,"onUpdate:modelValue":F[2]||(F[2]=O=>t(g).bringingAnyone=O),label:t(o).event_bringing_anyone},null,8,["modelValue","label"]),t(g).bringingAnyone?(u(),Y(ht,{key:0,modelValue:t(g).aggregatedPrice,"onUpdate:modelValue":F[3]||(F[3]=O=>t(g).aggregatedPrice=O),label:t(o).event_aggregated_price},null,8,["modelValue","label"])):I("",!0),N(ht,{modelValue:t(g).bookMultipleTimes,"onUpdate:modelValue":F[4]||(F[4]=O=>t(g).bookMultipleTimes=O),label:t(o).event_book_more_than_once},null,8,["modelValue","label"])])):I("",!0)]),t(i).featuresIntegrations.depositPayment.enabled&&!t(x).isStarter?(u(),B("div",Z1,[m("div",G1,[m("div",J1,w(t(o).deposit_enabled),1),N(it,{modelValue:t(g).depositEnabled,"onUpdate:modelValue":F[5]||(F[5]=O=>t(g).depositEnabled=O),"aria-label":t(o).deposit_enabled},null,8,["modelValue","aria-label"])]),t(g).depositEnabled?(u(),B(ne,{key:0},[N(R,{label:`${t(o).deposit_payment}:`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(Je,{modelValue:t(g).depositPayment,"onUpdate:modelValue":F[6]||(F[6]=O=>t(g).depositPayment=O)},{default:S(()=>[N(Ye,{value:"percentage",label:t(o).amount_percentage},null,8,["label"]),N(Ye,{value:"fixed",label:t(o).amount_fixed},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","class"]),t(g).depositPayment==="fixed"?(u(),Y(R,{key:0,label:`${t(o).amount} (${t(r0)()}):`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(ct,{modelValue:t(g).deposit,"onUpdate:modelValue":F[7]||(F[7]=O=>t(g).deposit=O),"is-money":!0},null,8,["modelValue"])]),_:1},8,["label","class"])):I("",!0),t(g).depositPayment==="percentage"?(u(),Y(R,{key:1,label:`${t(o).amount} (%):`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(g).deposit,"onUpdate:modelValue":F[8]||(F[8]=O=>t(g).deposit=O),min:1,max:100},null,8,["modelValue"])]),_:1},8,["label","class"])):I("",!0)],64)):I("",!0),t(g).depositEnabled?(u(),B("div",X1,[N(ht,{modelValue:t(g).depositPerPerson,"onUpdate:modelValue":F[9]||(F[9]=O=>t(g).depositPerPerson=O),label:t(o).deposit_per_person},null,8,["modelValue","label"]),N(ht,{modelValue:t(g).fullPayment,"onUpdate:modelValue":F[10]||(F[10]=O=>t(g).fullPayment=O),label:t(o).allow_total_event_amount},null,8,["modelValue","label"])])):I("",!0)])):I("",!0),(t(p).id||t(i).featuresIntegrations.tickets.enabled)&&!t(x).isStarter?(u(),B("div",Q1,[m("div",K1,[m("div",ev,w(t(o).custom_pricing_enabled),1),N(it,{modelValue:t(g).customPricing,"onUpdate:modelValue":F[11]||(F[11]=O=>t(g).customPricing=O),disabled:t(p).bookings&&t(p).bookings.length>0,"aria-label":t(o).custom_pricing_enabled,onChange:A},null,8,["modelValue","disabled","aria-label"])]),t(g).customPricing?(u(),B(ne,{key:0},[e.pageWidth>545?(u(),B("div",tv,[m("div",av,w(t(o).name)+": ",1),m("div",sv,w(t(o).price)+": ",1),m("div",lv,w(t(o).spots)+": ",1)])):I("",!0),(u(!0),B(ne,null,Ee(t(g).customTickets,(O,H)=>(u(),B("div",{key:H,class:"am-capei-price__block-segment am-custom-76"},[m("div",{class:j(["am-capei-price__block-inner am-ws-16",{"am-mt-22":e.pageWidth<546}])},[N(R,null,{default:S(()=>[N(ht,{modelValue:O.enabled,"onUpdate:modelValue":z=>O.enabled=z},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],2),m("div",{class:j(["am-capei-price__block-inner",[{"am-we-40":e.pageWidth>545},{"am-we-100":e.pageWidth<546}]])},[N(R,{label:e.pageWidth<546?`${t(o).name}:`:""},{default:S(()=>[N(ct,{modelValue:O.name,"onUpdate:modelValue":z=>O.name=z,disabled:!O.enabled,"aria-label":t(o).name},null,8,["modelValue","onUpdate:modelValue","disabled","aria-label"])]),_:2},1032,["label"])],2),m("div",{class:j(["am-capei-price__block-inner",[{"am-we-30":e.pageWidth>545},{"am-w-50 am-order-2":e.pageWidth<546},{"am-w-100":e.pageWidth<401}]])},[N(R,{label:e.pageWidth<546?t(o).price:""},{default:S(()=>[N(ct,{modelValue:O.price,"onUpdate:modelValue":z=>O.price=z,disabled:!O.enabled,"is-money":!0,"aria-label":t(o).price},null,8,["modelValue","onUpdate:modelValue","disabled","aria-label"])]),_:2},1032,["label"])],2),m("div",{class:j(["am-capei-price__block-inner",[{"am-we-30":e.pageWidth>545},{"am-w-50 am-order-3":e.pageWidth<546},{"am-w-100":e.pageWidth<401}]])},[N(R,{label:e.pageWidth<546?`${t(o).spots}:`:""},{default:S(()=>[N(Ct,{modelValue:O.spots,"onUpdate:modelValue":z=>O.spots=z,min:1,disabled:!O.enabled||t(g).maxCustomCapacityEnabled,"aria-label":t(o).spots},null,8,["modelValue","onUpdate:modelValue","disabled","aria-label"])]),_:2},1032,["label"])],2),!O.booked&&t(g).customTickets.length>1?(u(),B("div",{key:0,class:j(["am-capei-price__block-delete",{"am-order-1 am-mt-22":e.pageWidth<546}])},[N(Fe,{category:"secondary",type:"plain",size:"mini","icon-only":!0,icon:{components:{IconComponent:Ge},template:"<IconComponent icon='bucket'/>"},onClick:z=>E(H)},null,8,["icon","onClick"])],2)):I("",!0),e.pageWidth<546?(u(),B("div",nv)):I("",!0)]))),128)),N(Fe,{icon:t(c),prefix:"plus",size:"default",category:"primary",type:"filled",onClick:P},{default:S(()=>[ce(w(t(o).add_ticket_category),1)]),_:1},8,["icon"]),ov,m("div",iv,[m("div",{class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},[N(ht,{modelValue:t(g).maxCustomCapacityEnabled,"onUpdate:modelValue":F[12]||(F[12]=O=>t(g).maxCustomCapacityEnabled=O),label:`${t(o).event_max_capacity}:`},null,8,["modelValue","label"])],2),m("div",{class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},[N(Ct,{modelValue:t(g).maxCustomCapacity,"onUpdate:modelValue":F[13]||(F[13]=O=>t(g).maxCustomCapacity=O),min:1,disabled:!t(g).maxCustomCapacityEnabled},null,8,["modelValue","disabled"])],2)]),rv,m("div",cv,[m("div",xv,w(t(o).pricing_by_date_enabled),1),N(it,{modelValue:t(g).customTicketsRangesEnabled,"onUpdate:modelValue":F[14]||(F[14]=O=>t(g).customTicketsRangesEnabled=O),"aria-label":t(o).pricing_by_date_enabled},null,8,["modelValue","aria-label"])]),t(g).customTicketsRangesEnabled?(u(),B("div",uv,[(u(!0),B(ne,null,Ee(t(g).customTicketsRanges,(O,H)=>(u(),B(ne,{key:H},[N(R,{label:`${t(o).event_date_range}:`,class:"am-capei-price__date-range"},{default:S(()=>[N(ea,{modelValue:O.range,"onUpdate:modelValue":z=>O.range=z,type:"daterange",format:t(Kt)(),placeholder:"Pick a day",lang:t(r),"disabled-date":f,"start-placeholder":t(o).start_date,"end-placeholder":t(o).end_date},null,8,["modelValue","onUpdate:modelValue","format","lang","start-placeholder","end-placeholder"]),N(Fe,{category:"secondary",type:"plain",size:"mini","icon-only":!0,icon:{components:{IconComponent:Ge},template:"<IconComponent icon='bucket'/>"},"aria-label":t(o).delete,onClick:z=>L(H)},null,8,["icon","aria-label","onClick"])]),_:2},1032,["label"]),e.pageWidth>545?(u(),B("div",dv,[m("div",mv,w(t(o).name)+": ",1),m("div",pv,w(t(o).price)+": ",1)])):I("",!0),(u(!0),B(ne,null,Ee(t(g).customTickets,(z,X)=>(u(),B(ne,{key:X},[m("div",{class:j(["am-capei-price__block-inner",[{"am-w-50":e.pageWidth>545},{"am-w-100":e.pageWidth<546}]])},[N(R,{label:e.pageWidth<546?`${t(o).name}:`:""},{default:S(()=>[N(ct,{modelValue:z.name,"onUpdate:modelValue":le=>z.name=le,disabled:!0,"aria-label":t(o).name},null,8,["modelValue","onUpdate:modelValue","aria-label"])]),_:2},1032,["label"])],2),m("div",{class:j(["am-capei-price__block-inner",[{"am-w-50":e.pageWidth>545},{"am-w-100":e.pageWidth<546}]])},[N(R,{label:e.pageWidth<546?`${t(o).price}:`:""},{default:S(()=>[N(ct,{modelValue:O.tickets[X].price,"onUpdate:modelValue":le=>O.tickets[X].price=le,"is-money":!0,"aria-label":t(o).price},null,8,["modelValue","onUpdate:modelValue","aria-label"])]),_:2},1032,["label"])],2)],64))),128)),fv],64))),128)),N(Fe,{icon:t(c),prefix:"plus",size:"default",category:"primary",type:"filled",onClick:D},{default:S(()=>[ce(w(t(o).event_add_date_range),1)]),_:1},8,["icon"])])):I("",!0)],64)):I("",!0)])):I("",!0),t(g).maxCapacity>1||t(g).maxCustomCapacity>1||t(_)>1?(u(),B("div",gv,[m("div",hv,[m("div",vv,w(t(o).event_close_after_min),1),N(it,{modelValue:t(g).closeAfterMinEnabled,"onUpdate:modelValue":F[15]||(F[15]=O=>t(g).closeAfterMinEnabled=O),"aria-label":t(o).event_close_after_min},null,8,["modelValue","aria-label"])]),t(g).closeAfterMinEnabled&&(t(g).maxCapacity>1||t(g).maxCustomCapacity>1||t(_)>1)?(u(),B("div",Ev,[N(Rl,{modelValue:t(g).closeAfterMinBookings,"onUpdate:modelValue":F[16]||(F[16]=O=>t(g).closeAfterMinBookings=O),class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},{default:S(()=>[N(La,{value:!1},{default:S(()=>[ce(w(t(o).event_close_min_total),1)]),_:1}),N(La,{value:!0},{default:S(()=>[ce(w(t(o).event_close_min_bookings),1)]),_:1})]),_:1},8,["modelValue","class"]),N(R,{class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},{default:S(()=>[N(Ct,{modelValue:t(g).closeAfterMin,"onUpdate:modelValue":F[17]||(F[17]=O=>t(g).closeAfterMin=O),min:1,max:t(T)},null,8,["modelValue","max"])]),_:1},8,["class"])])):I("",!0)])):I("",!0),t(g).maxCapacity>1||t(g).maxCustomCapacity>1||t(_)>1?(u(),B("div",_v,[m("div",Cv,[m("div",yv,w(t(o).limit_extra_people),1),N(it,{modelValue:t(g).maxExtraPeopleEnabled,"onUpdate:modelValue":F[18]||(F[18]=O=>t(g).maxExtraPeopleEnabled=O),"aria-label":t(o).limit_extra_people},null,8,["modelValue","aria-label"])]),t(g).maxExtraPeopleEnabled&&(t(g).maxCapacity>1||t(g).maxCustomCapacity>1||t(_)>1)?(u(),B("div",bv,[N(R,{label:`${t(o).limit_extra_people_set}:`,class:"am-capei-price__part-item am-w-100"},{default:S(()=>[N(Ct,{modelValue:t(g).maxExtraPeople,"onUpdate:modelValue":F[19]||(F[19]=O=>t(g).maxExtraPeople=O),min:0,max:t(T)-1},null,8,["modelValue","max"])]),_:1},8,["label"])])):I("",!0)])):I("",!0)]),_:1},8,["model","style"])}}};const Av={class:"am-capei-custef__heading"},kv={class:"am-capei-custef__colors"},Dv=["onClick"],Fv={key:0,class:"am-icon-check"},wv={setup(n){let a=Oe(),e=U("amLabels");const s=V(null);let l=V(1),o=V(["#1788FB","#4BBEC6","#FBC22D","#FA3C52","#D696B8","#689BCA","#26CC2B","#FD7E35","#E38587","#774DFB"]),i=V({color:b({get:()=>a.getters["event/getColor"],set:r=>{a.commit("event/setColor",r)}}),show:b({get:()=>a.getters["event/getShow"],set:r=>{a.commit("event/setShow",r)}})});return Ze(()=>{let r=a.getters["event/getColor"];o.value.filter(c=>c===r).length>0?l.value=1:l.value=2}),(r,x)=>{const c=vt,f=c0,p=st;return u(),Y(p,{ref_key:"customizeFormRef",ref:s,model:t(i),class:"am-capei-custef"},{default:S(()=>[m("div",Av,w(t(e).event_colors),1),N(Rl,{modelValue:t(l),"onUpdate:modelValue":x[2]||(x[2]=d=>De(l)?l.value=d:l=d)},{default:S(()=>[N(c,{class:"am-capei-custef__item"},{default:S(()=>[N(La,{value:1},{default:S(()=>[ce(w(t(e).event_colors_preset)+": ",1)]),_:1}),m("div",kv,[(u(!0),B(ne,null,Ee(t(o),d=>(u(),B("div",{key:d,class:j(["am-capei-custef__colors-item",{"am-disabled":t(l)===2}]),onClick:_=>t(a).commit("event/setColor",d)},[m("div",{class:"am-capei-custef__colors-item__inner",style:Be({backgroundColor:d})},[d===t(i).color?(u(),B("span",Fv)):I("",!0)],4)],10,Dv))),128))])]),_:1}),N(c,{class:"am-capei-custef__item"},{default:S(()=>[N(La,{value:2},{default:S(()=>[ce(w(t(e).event_colors_custom)+": ",1)]),_:1}),N(f,{modelValue:t(i).color,"onUpdate:modelValue":x[0]||(x[0]=d=>t(i).color=d),disabled:t(l)===1,"aria-label":t(e).event_colors_custom},null,8,["modelValue","disabled","aria-label"])]),_:1}),N(c,{class:"am-capei-custef__item"},{default:S(()=>[N(ht,{modelValue:t(i).show,"onUpdate:modelValue":x[1]||(x[1]=d=>t(i).show=d),label:t(e).event_show_on_site},null,8,["modelValue","label"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])}}};const Pv={class:"am-capei-waiting__header"},Tv={class:"am-capei-waiting__header-text"},Lv={class:"am-capei-waiting__header"},Sv={class:"am-capei-waiting__header-text"},Iv={props:{pageWidth:{type:Number,default:0},waitingListUntil:{type:Object,default:null}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth));const l=Oe();let o=U("amLabels"),i=V(null),r=V({enabled:b({get:()=>l.getters["event/getWaitingListEnabled"],set:_=>{l.commit("event/setWaitingListEnabled",_)}}),maxCapacity:b({get:()=>l.getters["event/getWaitingListMaxCapacity"],set:_=>{l.commit("event/setWaitingListMaxCapacity",_)}}),maxExtraPeopleEnabled:b({get:()=>l.getters["event/getWaitingListMaxExtraPeopleEnabled"],set:_=>{l.commit("event/setWaitingListMaxExtraPeopleEnabled",_)}}),maxExtraPeople:b({get:()=>l.getters["event/getWaitingListMaxExtraPeople"],set:_=>{l.commit("event/setWaitingListMaxExtraPeople",_)}})}),x=b(()=>l.getters["event/getCustomTickets"]),c=b(()=>l.getters["event/getCustomPricing"]),f=b(()=>l.getters["event/getMaxCustomCapacityEnabled"]);a({waitingListFormRef:i});let p=U("amColors"),d=b(()=>({"--am-c-capei-waiting-text":p.value.colorMainText,"--am-c-capei-waiting-text-op03":K(p.value.colorMainText,.03),"--am-c-capei-waiting-inp-bgr-op03":K(p.value.colorInpBgr,.03),"--am-c-capei-waiting-bgr-op05":K(p.value.colorPrimary,.05)}));return(_,T)=>{const A=vt,E=st;return u(),B("div",{class:"am-capei-waiting",style:Be(t(d))},[m("div",Pv,[m("div",Tv,w(t(o).events_show_waiting_list_booking_full),1),N(it,{modelValue:t(r).enabled,"onUpdate:modelValue":T[0]||(T[0]=P=>t(r).enabled=P),"aria-label":t(o).events_show_waiting_list_booking_full},null,8,["modelValue","aria-label"])]),t(r).enabled?(u(),Y(E,{key:0,ref_key:"waitingListFormRef",ref:i,model:t(r),"label-position":"top"},{default:S(()=>[!t(c)||t(f)?(u(),Y(A,{key:0,label:`${t(o).maximum_capacity}`,class:j(["am-capei-waiting__item",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(r).maxCapacity,"onUpdate:modelValue":T[1]||(T[1]=P=>t(r).maxCapacity=P),min:1},null,8,["modelValue"])]),_:1},8,["label","class"])):I("",!0),t(c)?(u(!0),B(ne,{key:1},Ee(t(x),(P,L)=>(u(),Y(A,{key:L,label:P.name,class:j(["am-capei-waiting__item",t(s)])},{default:S(()=>[N(Ct,{modelValue:P.waitingListSpots,"onUpdate:modelValue":D=>P.waitingListSpots=D,min:1,disabled:t(f)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","class"]))),128)):I("",!0),m("div",Lv,[m("div",Sv,w(t(o).limit_extra_people),1),N(it,{modelValue:t(r).maxExtraPeopleEnabled,"onUpdate:modelValue":T[2]||(T[2]=P=>t(r).maxExtraPeopleEnabled=P),"aria-label":t(o).limit_extra_people},null,8,["modelValue","aria-label"])]),t(r).maxExtraPeopleEnabled?(u(),Y(A,{key:2,class:j(t(s))},{default:S(()=>[N(Ct,{modelValue:t(r).maxExtraPeople,"onUpdate:modelValue":T[3]||(T[3]=P=>t(r).maxExtraPeople=P),min:0,disabled:!t(r).maxExtraPeopleEnabled},null,8,["modelValue","disabled"])]),_:1},8,["class"])):I("",!0)]),_:1},8,["model"])):I("",!0)],4)}}};const $v={class:"am-capei-sef__header"},Nv=m("span",{class:"am-icon-options"},null,-1),Ov={class:"am-capei-sef__header-text"},Mv={class:"am-capei-sef__content"},Vv=["innerHTML"],Rv=["innerHTML"],qv={class:"am-capei-sef__header"},Uv=m("span",{class:"am-icon-payments"},null,-1),zv={class:"am-capei-sef__header-text"},jv={class:"am-capei-sef__content"},Yv={class:"am-capei-sef__segment"},Wv={key:0,class:"am-capei-sef__heading"},Hv={class:"am-capei-sef__heading-text"},Zv=["innerHTML"],Gv=["innerHTML"],Jv={key:0,class:"am-capei-sef__heading"},Xv={class:"am-capei-sef__heading-text"},Qv={class:"am-capei-sef__segment"},Kv={key:0,class:"am-capei-sef__heading"},eE={class:"am-capei-sef__heading-text"},tE={key:1,class:"am-capei-sef__heading"},aE=["src"],sE={key:2,class:"am-capei-sef__heading"},lE=["src"],nE={key:3,class:"am-capei-sef__heading"},oE=["src"],iE={key:4,class:"am-capei-sef__heading"},rE=["src"],cE={key:5,class:"am-capei-sef__heading"},xE=["src"],uE={key:6,class:"am-capei-sef__heading"},dE=["src"],mE={class:"am-capei-sef__header"},pE=m("span",{class:"am-icon-options"},null,-1),fE={class:"am-capei-sef__header-text"},gE={key:0,class:"am-capei-sef__heading"},hE={class:"am-capei-sef__heading-text"},vE={key:1,class:"am-capei-sef__heading"},EE={class:"am-capei-sef__heading-text"},_E={key:2,class:"am-capei-sef__heading"},CE={class:"am-capei-sef__heading-text"},yE={setup(n){let a=Oe(),e=U("licence"),s=U("amLabels");const l=U("settings"),o=U("baseUrls");let i=V([{label:s.value.disabled,value:0},{label:s.value.min10,value:600},{label:s.value.min12,value:720},{label:s.value.min15,value:900},{label:s.value.min30,value:1800},{label:s.value.min45,value:2700},{label:s.value.h1,value:3600},{label:s.value.h1min30,value:5400},{label:s.value.h2,value:7200},{label:s.value.h3,value:10800},{label:s.value.h4,value:14400},{label:s.value.h6,value:21600},{label:s.value.h8,value:28800},{label:s.value.h9,value:32400},{label:s.value.h10,value:36e3},{label:s.value.h11,value:39600},{label:s.value.h12,value:43200},{label:s.value.day1,value:86400},{label:s.value.days2,value:172800},{label:s.value.days3,value:259200},{label:s.value.days4,value:345600},{label:s.value.days5,value:432e3},{label:s.value.days6,value:518400},{label:s.value.week1,value:604800},{label:s.value.weeks2,value:1209600},{label:s.value.weeks3,value:1814400},{label:s.value.weeks4,value:2419200},{label:s.value.months3,value:7884e3},{label:s.value.months6,value:15768e3}]),r=V([]),x=V(!1),c=V(0),f=V(null),p=b(()=>{if(r.value.length){let h=r.value.find(g=>g.id===l.payments.wc.productId);return typeof h<"u"?h.name:s.value.select}return""});function d(){l.payments.wc.enabled&&_({id:P.value.paymentsWcProductId},h=>{r.value=h.length?h:[]})}function _(h,g){clearTimeout(f.value),x.value=!0,c.value++,f.value=setTimeout(()=>{let y=c.value;$e.get("/payment/wc/products",{params:h}).then(k=>{y>=c.value&&g(k.data.data.products.sort((C,F)=>C.name.toLowerCase()>F.name.toLowerCase()?1:-1))}).finally(()=>{x.value=!1})},500)}function T(h){h&&_({name:h},g=>{r.value=g})}let A=V("");const E=V(null);let P=V({generalMinimumTimeRequirementPriorToCanceling:b({get:()=>a.getters["event/getSettingsGeneralMinimumTimeRequirementPriorToCanceling"],set:h=>{a.commit("event/setSettingsGeneralMinimumTimeRequirementPriorToCanceling",h)}}),generalRedirectUrlAfterAppointment:b({get:()=>a.getters["event/getSettingsGeneralRedirectUrlAfterAppointment"],set:h=>{a.commit("event/setSettingsGeneralRedirectUrlAfterAppointment",h)}}),paymentsPaymentLinksEnabled:b({get:()=>a.getters["event/getSettingsPaymentsPaymentLinksEnabled"],set:h=>{a.commit("event/setSettingsPaymentsPaymentLinksEnabled",h)}}),paymentsPaymentLinksRedirectUrl:b({get:()=>a.getters["event/getSettingsPaymentsPaymentLinksRedirectUrl"],set:h=>{a.commit("event/setSettingsPaymentsPaymentLinksRedirectUrl",h)}}),paymentsOnSite:b({get:()=>a.getters["event/getSettingsPaymentsOnSite"],set:h=>{a.commit("event/setSettingsPaymentsOnSite",h)}}),paymentsWcEnabled:b({get:()=>a.getters["event/getSettingsPaymentsWcEnabled"],set:h=>{a.commit("event/setSettingsPaymentsWcEnabled",h)}}),paymentsWcProductId:b({get:()=>a.getters["event/getSettingsPaymentsWcProductId"],set:h=>{a.commit("event/setSettingsPaymentsWcProductId",h)}}),paymentsStripeEnabled:b({get:()=>a.getters["event/getSettingsPaymentsStripeEnabled"],set:h=>{a.commit("event/setSettingsPaymentsStripeEnabled",h)}}),paymentsPayPalEnabled:b({get:()=>a.getters["event/getSettingsPaymentsPayPalEnabled"],set:h=>{a.commit("event/setSettingsPaymentsPayPalEnabled",h)}}),paymentsMollieEnabled:b({get:()=>a.getters["event/getSettingsPaymentsMollieEnabled"],set:h=>{a.commit("event/setSettingsPaymentsMollieEnabled",h)}}),paymentsRazorpayEnabled:b({get:()=>a.getters["event/getSettingsPaymentsRazorpayEnabled"],set:h=>{a.commit("event/setSettingsPaymentsRazorpayEnabled",h)}}),paymentsBarionEnabled:b({get:()=>a.getters["event/getSettingsPaymentsBarionEnabled"],set:h=>{a.commit("event/setSettingsPaymentsBarionEnabled",h)}}),paymentsSquareEnabled:b({get:()=>a.getters["event/getSettingsPaymentsSquareEnabled"],set:h=>{a.commit("event/setSettingsPaymentsSquareEnabled",h)}}),integrationsGoogleMeetEnabled:b({get:()=>a.getters["event/getSettingsIntegrationsGoogleMeetEnabled"],set:h=>{a.commit("event/setSettingsIntegrationsGoogleMeetEnabled",h)}}),integrationsMicrosoftTeamsEnabled:b({get:()=>a.getters["event/getSettingsIntegrationsMicrosoftTeamsEnabled"],set:h=>{a.commit("event/setSettingsIntegrationsMicrosoftTeamsEnabled",h)}}),integrationsLessonSpaceEnabled:b({get:()=>a.getters["event/getSettingsIntegrationsLessonSpaceEnabled"],set:h=>{a.commit("event/setSettingsIntegrationsLessonSpaceEnabled",h)}})});Ze(()=>{P.value.generalMinimumTimeRequirementPriorToCanceling===l.general.minimumTimeRequirementPriorToCanceling&&a.commit("event/setSettingsGeneralMinimumTimeRequirementPriorToCanceling",""),P.value.generalRedirectUrlAfterAppointment===l.general.redirectUrlAfterAppointment&&a.commit("event/setSettingsGeneralRedirectUrlAfterAppointment",""),P.value.paymentsPaymentLinksRedirectUrl===l.payments.paymentLinks.redirectUrl&&a.commit("event/setSettingsPaymentsPaymentLinksRedirectUrl",""),d()});let L=U("amColors"),D=b(()=>({"--am-c-capei-sef-primary":L.value.colorPrimary,"--am-c-capei-sef-text":L.value.colorMainText,"--am-c-capei-sef-text-op03":K(L.value.colorMainText,.03),"--am-c-capei-sef-bgr":L.value.colorMainBgr}));return(h,g)=>{const y=Vl,k=vt,C=Cs,F=ys,R=st;return u(),Y(R,{ref_key:"settingsFormRef",ref:E,model:t(P),class:"am-capei-sef",style:Be(t(D))},{default:S(()=>[N(F,{modelValue:t(A),"onUpdate:modelValue":g[16]||(g[16]=M=>De(A)?A.value=M:A=M),accordion:"",class:"am-capei-sef__collapse"},{default:S(()=>[N(C,{name:"general",class:"am-capei-sef__collapse-item"},{title:S(()=>[m("div",$v,[Nv,m("div",Ov,w(t(s).general),1)])]),default:S(()=>[m("div",Mv,[N(k,null,{label:S(()=>[ce(w(t(s).minimum_time_before_canceling)+" ",1),N(y,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(s).minimum_time_before_canceling_tooltip},null,8,Vv)]),default:S(()=>[N(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:S(()=>[N(Je,{modelValue:t(P).generalMinimumTimeRequirementPriorToCanceling,"onUpdate:modelValue":g[0]||(g[0]=M=>t(P).generalMinimumTimeRequirementPriorToCanceling=M),placeholder:t(i).find(M=>M.value===t(l).general.minimumTimeRequirementPriorToCanceling).label,clearable:""},{default:S(()=>[(u(!0),B(ne,null,Ee(t(i),(M,O)=>(u(),Y(Ye,{key:O,value:M.value,label:M.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),N(k,null,{label:S(()=>[ce(w(t(s).redirect_url_after_appointment)+" ",1),N(y,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(s).redirect_url_after_appointment_tooltip},null,8,Rv)]),default:S(()=>[N(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:S(()=>[N(ct,{modelValue:t(P).generalRedirectUrlAfterAppointment,"onUpdate:modelValue":g[1]||(g[1]=M=>t(P).generalRedirectUrlAfterAppointment=M),placeholder:t(l).general.redirectUrlAfterAppointment},null,8,["modelValue","placeholder"])]),_:1})])]),_:1}),N(C,{name:"payment",class:"am-capei-sef__collapse-item"},{title:S(()=>[m("div",qv,[Uv,m("div",zv,w(t(s).payments),1)])]),default:S(()=>[m("div",jv,[m("div",Yv,[t(e).isStarter?I("",!0):(u(),B("div",Wv,[m("div",Hv,[ce(w(t(s).payment_links_enable)+" ",1),N(y,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(s).payment_links_enable_tooltip},null,8,Zv)]),default:S(()=>[N(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),N(it,{modelValue:t(P).paymentsPaymentLinksEnabled,"onUpdate:modelValue":g[2]||(g[2]=M=>t(P).paymentsPaymentLinksEnabled=M)},null,8,["modelValue"])])),t(P).paymentsPaymentLinksEnabled&&!t(e).isStarter?(u(),Y(k,{key:1,label:t(s).redirect_url_after_appointment},{label:S(()=>[ce(w(t(s).redirect_url_after_appointment)+" ",1),N(y,{effect:"dark",placement:"top"},{content:S(()=>[m("div",{innerHTML:t(e).isPro||t(e).isDeveloper?t(s).redirect_url_after_app_or_package_tt:t(s).redirect_url_after_appointment_tooltip},null,8,Gv)]),default:S(()=>[N(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:S(()=>[N(ct,{modelValue:t(P).paymentsPaymentLinksRedirectUrl,"onUpdate:modelValue":g[3]||(g[3]=M=>t(P).paymentsPaymentLinksRedirectUrl=M),placeholder:t(l).payments.paymentLinks.redirectUrl},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):I("",!0)]),t(l).payments.onSite?(u(),B("div",Jv,[m("div",Xv,w(t(s).on_site),1),N(it,{modelValue:t(P).paymentsOnSite,"onUpdate:modelValue":g[4]||(g[4]=M=>t(P).paymentsOnSite=M)},null,8,["modelValue"])])):I("",!0),m("div",Qv,[t(l).payments.wc.enabled?(u(),B("div",Kv,[m("div",eE,w(t(s).wc_service),1),N(it,{modelValue:t(P).paymentsWcEnabled,"onUpdate:modelValue":g[5]||(g[5]=M=>t(P).paymentsWcEnabled=M)},null,8,["modelValue"])])):I("",!0),t(P).paymentsWcEnabled?(u(),Y(k,{key:1},{default:S(()=>[N(Je,{modelValue:t(P).paymentsWcProductId,"onUpdate:modelValue":g[6]||(g[6]=M=>t(P).paymentsWcProductId=M),clearable:"",filterable:"",remote:"",placeholder:t(p),loading:t(x),"remote-method":T},{default:S(()=>[(u(!0),B(ne,null,Ee(t(r),(M,O)=>(u(),Y(Ye,{key:O,value:M.id,label:M.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","loading"])]),_:1})):I("",!0)]),t(l).payments.payPal.enabled?(u(),B("div",tE,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/paypal-light.svg",alt:"PayPal"},null,8,aE),N(it,{modelValue:t(P).paymentsPayPalEnabled,"onUpdate:modelValue":g[7]||(g[7]=M=>t(P).paymentsPayPalEnabled=M)},null,8,["modelValue"])])):I("",!0),t(l).payments.stripe.enabled?(u(),B("div",sE,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/stripe.svg",alt:"Stripe"},null,8,lE),N(it,{modelValue:t(P).paymentsStripeEnabled,"onUpdate:modelValue":g[8]||(g[8]=M=>t(P).paymentsStripeEnabled=M)},null,8,["modelValue"])])):I("",!0),t(l).payments.mollie.enabled?(u(),B("div",nE,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/mollie.svg",alt:"Mollie"},null,8,oE),N(it,{modelValue:t(P).paymentsMollieEnabled,"onUpdate:modelValue":g[9]||(g[9]=M=>t(P).paymentsMollieEnabled=M)},null,8,["modelValue"])])):I("",!0),t(l).payments.square.enabled?(u(),B("div",iE,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/square.svg",alt:"Square"},null,8,rE),N(it,{modelValue:t(P).paymentsSquareEnabled,"onUpdate:modelValue":g[10]||(g[10]=M=>t(P).paymentsSquareEnabled=M)},null,8,["modelValue"])])):I("",!0),t(l).payments.razorpay.enabled?(u(),B("div",cE,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/razorpay.svg",alt:"Razorpay"},null,8,xE),N(it,{modelValue:t(P).paymentsRazorpayEnabled,"onUpdate:modelValue":g[11]||(g[11]=M=>t(P).paymentsRazorpayEnabled=M)},null,8,["modelValue"])])):I("",!0),t(l).payments.barion.enabled?(u(),B("div",uE,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/barion.svg",alt:"Barion"},null,8,dE),N(it,{modelValue:t(P).paymentsBarionEnabled,"onUpdate:modelValue":g[12]||(g[12]=M=>t(P).paymentsBarionEnabled=M)},null,8,["modelValue"])])):I("",!0)])]),_:1}),t(l).googleCalendar.enabled&&t(l).googleMeet.enabled||t(l).outlookCalendar.enabled&&t(l).microsoftTeams.enabled||t(l).lessonSpace.enabled?(u(),Y(C,{key:0,name:"integrations",class:"am-capei-sef__collapse-item"},{title:S(()=>[m("div",mE,[pE,m("div",fE,w(t(s).integrations_settings),1)])]),default:S(()=>[t(l).googleCalendar.enabled&&t(l).googleMeet.enabled?(u(),B("div",gE,[m("div",hE,w(t(s).enable_google_meet),1),N(it,{modelValue:t(P).integrationsGoogleMeetEnabled,"onUpdate:modelValue":g[13]||(g[13]=M=>t(P).integrationsGoogleMeetEnabled=M)},null,8,["modelValue"])])):I("",!0),t(l).outlookCalendar.enabled&&t(l).microsoftTeams.enabled?(u(),B("div",vE,[m("div",EE,w(t(s).enable_microsoft_teams),1),N(it,{modelValue:t(P).integrationsMicrosoftTeamsEnabled,"onUpdate:modelValue":g[14]||(g[14]=M=>t(P).integrationsMicrosoftTeamsEnabled=M)},null,8,["modelValue"])])):I("",!0),t(l).lessonSpace.enabled?(u(),B("div",_E,[m("div",CE,w(t(s).lesson_space),1),N(it,{modelValue:t(P).integrationsLessonSpaceEnabled,"onUpdate:modelValue":g[15]||(g[15]=M=>t(P).integrationsLessonSpaceEnabled=M)},null,8,["modelValue"])])):I("",!0)]),_:1})):I("",!0)]),_:1},8,["modelValue"])]),_:1},8,["model","style"])}}};const bE={class:"am-capei__footer-actions"},BE={name:"CabinetEvent"},AE=Object.assign(BE,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["close","save","duplicate"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels");const o=U("settings");let i=U("licence");const r=V("details");let x=V(null),c=V(null),f=V(null),p=V(null),d=V(null),_=V(!0),T=V(!1),A=V(!1);function E(){a("duplicate",Object.assign(JSON.parse(JSON.stringify(s.getters["event/getEvent"])),{id:null,bookings:[]}))}async function P(){let C=!0;await new Promise(F=>{x.value?.detailsFormRef.validate(R=>{R||(r.value="details",C=!1),F()})}),C&&(await new Promise(F=>{c.value?.periodsFormRef.validate(R=>{R||(r.value="periods",C=!1),F()})}),C&&(s.getters["event/getRecurringEnabled"]&&(await new Promise(F=>{f.value?.recurringFormRef.validate(R=>{R||(r.value="recurring",C=!1),F()})}),!C)||h(F=>{F?A.value=!0:D()})))}function L(C){_.value=!0,$e.post("/events"+(s.getters["event/getId"]?"/"+s.getters["event/getId"]:""),Object.assign(L1(s),{applyGlobally:C}),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{P1(s),g("save")}).catch(F=>{console.log(F)}).finally(()=>{_.value=!1})}function D(){d.value?(_.value=!1,A.value=!1,T.value=!0):L(!1)}function h(C){let F=s.getters["event/getOrganizerId"]?s.getters["employee/getEmployee"]:null;if(F&&(F.googleCalendar||F.outlookCalendar)){_.value=!0;let R=s.getters["event/getProviders"].map(M=>new Object({id:M.id}));$e.post("/events/calendar",{providers:s.getters["event/getProviders"].map(M=>M.id).indexOf(F.id)===-1?R.concat([{id:F.id}]):R,periods:Tr(s),eventIds:[s.getters["event/getId"],s.getters["event/getParentId"]],recurring:s.getters["event/getRecurring"]},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{C(!1)}).catch(()=>{C(!0),_.value=!1})}else C(!1)}function g(C){s.commit("event/setActive",!1),a(C)}Ze(()=>{s.getters["event/getId"]&&s.getters["event/getRecurringUntil"]&&(d.value=at(s.getters["event/getRecurringUntil"].toISOString().split("T")[0])),s.commit("event/setActive",!0),_.value=!1});let y=U("amColors"),k=b(()=>({"--am-c-capei-text":y.value.colorMainText,"--am-c-capei-text-op10":K(y.value.colorMainText,.1),"--am-c-capei-primary":y.value.colorPrimary,"--am-c-cust-no1":y.value.colorMainText,"--am-c-cust-no1-bgr":K(y.value.colorMainText,.1),"--am-c-cust-no2":y.value.colorWarning,"--am-c-cust-no2-bgr":K(y.value.colorWarning,.1),"--am-c-cust-no3":y.value.colorError,"--am-c-cust-no3-bgr":K(y.value.colorError,.1),"--am-c-cust-link":K(y.value.colorMainText,.5),"--am-c-cust-text":y.value.colorMainText}));return(C,F)=>{const R=_a,M=Ca;return u(),B(ne,null,[t(_)?(u(),Y(Wt,{key:1})):(u(),B("div",{key:0,class:j(["am-capei",t(e).responsiveClass]),style:Be(t(k))},[N(M,{modelValue:r.value,"onUpdate:modelValue":F[0]||(F[0]=O=>r.value=O),class:"am-ap__tabs"},{default:S(()=>[N(R,{label:t(l).details,name:"details"},{default:S(()=>[N($1,{ref_key:"eventDetailsRef",ref:x},null,512)]),_:1},8,["label"]),N(R,{label:t(l).periods,name:"periods"},{default:S(()=>[N(U1,{ref_key:"eventPeriodsRef",ref:c,"page-width":t(e).pageWidth},null,8,["page-width"])]),_:1},8,["label"]),t(i).isStarter?I("",!0):(u(),Y(R,{key:0,label:t(l).recurring,name:"recurring"},{default:S(()=>[N(Y1,{ref_key:"eventRecurringRef",ref:f,"page-width":t(e).pageWidth,"recurring-until":t(d)},null,8,["page-width","recurring-until"])]),_:1},8,["label"])),N(R,{label:t(l).pricing,name:"pricing"},{default:S(()=>[N(Bv,{ref_key:"eventPricingRef",ref:p,"page-width":t(e).pageWidth},null,8,["page-width"])]),_:1},8,["label"]),N(R,{label:t(l).customize,name:"customize"},{default:S(()=>[N(wv)]),_:1},8,["label"]),t(o).featuresIntegrations.waitingList.enabled&&!t(i).isStarter&&!t(i).isBasic?(u(),Y(R,{key:1,label:t(l).waiting_list,name:"waitingList"},{default:S(()=>[N(Iv,{"page-width":t(e).pageWidth},null,8,["page-width"])]),_:1},8,["label"])):I("",!0),N(R,{label:t(l).settings,name:"settings"},{default:S(()=>[N(yE)]),_:1},8,["label"])]),_:1},8,["modelValue"]),m("div",{class:j(["am-capei__footer",[{"am-capei__footer_new":!t(s).getters["event/getId"]},t(e).responsiveClass]])},[t(s).getters["event/getId"]?(u(),Y(Fe,{key:0,class:"am-capei__footer-duplicate","icon-only":!0,icon:"duplicate",type:"plain",category:"secondary",onClick:E})):I("",!0),m("div",bE,[N(Fe,{category:"secondary",size:"default",type:"plain",onClick:F[1]||(F[1]=()=>{t(a)("close")})},{default:S(()=>[ce(w(t(l).cancel),1)]),_:1}),N(Fe,{size:"default",onClick:P},{default:S(()=>[ce(w(t(l).save),1)]),_:1})])],2)],6)),N(Ha,{visibility:t(T)&&t(d)!==null,title:t(l).confirm,description:t(l).confirm_save_following,"close-btn-text":t(l).save_single,"confirm-btn-text":t(l).update_following,"customized-options":{cancelBtn:{type:"plain"},confirmBtn:{type:""}},onDecline:F[2]||(F[2]=O=>L(!1)),onConfirm:F[3]||(F[3]=O=>L(!0)),onClose:F[4]||(F[4]=O=>De(T)?T.value=!1:T=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"]),N(Ha,{visibility:t(A),title:t(l).confirm,description:t(l).confirm_save_conflict,"close-btn-text":t(l).cancel,"confirm-btn-text":t(l).confirm,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:F[5]||(F[5]=O=>De(A)?A.value=!1:A=!1),onConfirm:D,onClose:F[6]||(F[6]=O=>De(A)?A.value=!1:A=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"])],64)}}});const kE={class:"am-cap__att"},DE={class:"am-cap-customers"},FE={class:"am-cap__cust-option"},wE={class:"am-cap__cust-option__heading"},PE={key:0,class:"am-cap__cust-option__inner"},TE={key:1,class:"am-cap__cust-option__inner"},LE={key:0,class:"am-cap-cust__data-wrapper"},SE={key:0,class:"am-cap-cust__data"},IE=m("span",{class:"am-icon-phone"},null,-1),$E=["href"],NE={key:1,class:"am-cap-cust__data"},OE=m("span",{class:"am-icon-email"},null,-1),ME=["href"],VE={class:"am-cap__att-heading"},RE={props:{event:{type:Object,default:()=>{}},isNew:{type:Boolean,default:!1},pageWidth:{type:Number,required:!0}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth)),l=Oe(),o=U("amLabels");const i=U("settings"),r=U("shortcodeData");let x=U("amCustomize"),c=b(()=>r.value.cabinetType==="employee"?x.value.events.options.customerPhone.visibility:!0),f=b(()=>r.value.cabinetType==="employee"?x.value.events.options.customerEmail.visibility:!0),p=V(null),d=V({customerId:b({get:()=>l.getters["attendee/getCustomerId"],set:R=>l.commit("attendee/setCustomerId",R)}),status:b({get:()=>l.getters["attendee/getStatus"],set:R=>l.commit("attendee/setStatus",R)}),persons:b({get:()=>l.getters["attendee/getPersons"],set:R=>l.commit("attendee/setPersons",R)}),tickets:b({get:()=>l.getters["attendee/getTickets"],set:R=>l.commit("attendee/setTickets",R)})}),_=V({customerId:[{required:!0,message:o.value.select_customer,trigger:["submit","change"]}]}),T=b(()=>e.event.settings?JSON.parse(e.event.settings):null),A=V(Sr().filter(R=>R.value!=="canceled"&&(!i.featuresIntegrations.waitingList.enabled||(T.value?"waitingList"in T.value&&!T.value.waitingList.enabled:!0)?R.value!=="waiting":!0)&&R.value!=="no-show")),E=b(()=>l.getters["customerInfo/getLoading"]),P=b(()=>l.getters["customerInfo/getCustomers"]),L=b(()=>d.value.customerId?P.value.find(R=>R.id===d.value.customerId):null);function D(R){l.dispatch("customerInfo/resetCustomer"),l.commit("customerInfo/setLoading",!0),h.value=!0,$e.get("/users/customers/"+R,Object.assign({params:{source:"cabinet-provider"}},Ue(l))).then(M=>{l.commit("customerInfo/setCustomer",kr(l,M.data.data.user))}).catch(M=>{console.log(M)}).finally(()=>{l.commit("customerInfo/setLoading",!1)})}let h=V(!1);function g(){l.dispatch("customerInfo/resetCustomer"),h.value=!0}function y(R){l.commit("customerInfo/setCustomers",[R]),l.commit("attendee/setCustomerId",R.id)}Ze(()=>{l.getters["attendee/getId"]||l.commit("customerInfo/setCustomers",l.getters["auth/getPreloadedCustomers"])}),a({detailsFormRef:p});function k(R){if(R){if(R===1)return{class:"am-no-show-1",icon:"no-show-1"};if(R===2)return{class:"am-no-show-2",icon:"no-show-2"};if(R>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}let C=U("amColors"),F=b(()=>({"--am-c-cust-no1":C.value.colorMainText,"--am-c-cust-no1-bgr":K(C.value.colorMainText,.1),"--am-c-cust-no2":C.value.colorWarning,"--am-c-cust-no2-bgr":K(C.value.colorWarning,.1),"--am-c-cust-no3":C.value.colorError,"--am-c-cust-no3-bgr":K(C.value.colorError,.1),"--am-c-cust-text":C.value.colorMainText,"--am-c-cust-link":K(C.value.colorMainText,.5)}));return(R,M)=>{const O=vt,H=st;return u(),B("div",kE,[N(H,{ref_key:"detailsFormRef",ref:p,model:t(d),rules:t(_),class:"am-cap__att-form"},{default:S(()=>[m("div",DE,[e.isNew?(u(),Y(O,{key:0,prop:"customerId",class:"am-cap__att-form__item am-w-100"},{default:S(()=>[N(Je,{modelValue:t(d).customerId,"onUpdate:modelValue":M[0]||(M[0]=z=>t(d).customerId=z),filterable:"",clearable:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","prefix-icon":"search","prefix-icon-color":"var(--am-c-inp-text)","popper-class":"am-cap-cust__popper",placeholder:t(o).event_attendees_search,"remote-method":z=>{t(Zs)(t(l),z)},loading:t(E),onFocus:M[1]||(M[1]=z=>t(Oo)(t(l)))},{default:S(()=>[(u(!0),B(ne,null,Ee(t(P),z=>(u(),Y(Ye,{key:z.id,value:z.id,label:z.email?z.email:z.firstName+" "+z.lastName},{default:S(()=>[m("div",FE,[m("div",wE,w(z.firstName+" "+z.lastName),1),z.email&&t(f)?(u(),B("div",PE,w(z.email),1)):I("",!0),z.phone&&t(c)?(u(),B("div",TE,w(z.phone),1)):I("",!0)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"])]),_:1})):I("",!0),!t(l).getters["attendee/getId"]&&t(i).roles.allowWriteCustomers?(u(),Y(Fe,{key:1,class:j(["am-capai-cuf__heading-add",e.responsiveClass]),size:"default",disabled:!!t(d).customerId,prefix:"plus",icon:"plus","icon-only":e.pageWidth<=420,onClick:g},{default:S(()=>[ce(w(t(o).new_customer),1)]),_:1},8,["class","disabled","icon-only"])):I("",!0)]),t(L)?(u(),B("div",{key:0,class:j(["am-cap-attendee",t(s)])},[m("div",{class:j(["am-cap-cust",t(s)]),style:Be(t(F))},[m("div",{class:j(["am-cap-cust__name",k(0).class])},[k(0).icon?(u(),B("span",{key:0,class:j(`am-icon-${k(0).icon}`)},null,2)):I("",!0),ce(" "+w(t(L).firstName+" "+t(L).lastName),1)],2),t(L).phone&&t(c)||t(L).email&&t(f)?(u(),B("div",LE,[t(L).phone&&t(c)?(u(),B("div",SE,[IE,m("a",{href:`tel:${t(L).phone}`},w(t(L).phone),9,$E)])):I("",!0),t(L).email&&t(f)?(u(),B("div",NE,[OE,m("a",{href:`mailto:${t(L).email}`},w(t(L).email),9,ME)])):I("",!0)])):I("",!0)],6),N(O,{prop:"status",class:j(["am-cap__att-form__item",t(s)])},{default:S(()=>[N(Je,{modelValue:t(d).status,"onUpdate:modelValue":M[2]||(M[2]=z=>t(d).status=z),disabled:!e.isNew,placeholder:t(o).select,"prefix-icon":t(A).find(z=>z.value===t(d).status).icon,"prefix-icon-color":t(A).find(z=>z.value===t(d).status).color,"popper-class":"am-capei-att__popper"},{default:S(()=>[(u(!0),B(ne,null,Ee(t(A),z=>(u(),Y(Ye,{key:z.value,value:z.value,label:z.label},{default:S(()=>[m("span",{class:j(`am-icon-${z.icon}`),style:Be({color:z.color})},null,6),ce(" "+w(z.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder","prefix-icon","prefix-icon-color"])]),_:1},8,["class"]),t(i).roles.allowWriteCustomers?(u(),Y(Ea,{key:0,"have-delete":!1,"reference-class":t(s),onEdit:M[3]||(M[3]=z=>D(t(L).id))},null,8,["reference-class"])):I("",!0)],2)):I("",!0),t(L)?(u(),B(ne,{key:1},[e.event.customPricing?(u(),B(ne,{key:1},[m("div",VE,w(`${t(o).event_book_tickets}:`),1),(u(!0),B(ne,null,Ee(t(d).tickets,(z,X)=>(u(),Y(O,{key:X,label:e.event.customTickets.find(le=>le.id===z.eventTicketId).name,class:j(["am-cap__att-form__item",t(s)])},{default:S(()=>[N(Ct,{modelValue:z.persons,"onUpdate:modelValue":le=>z.persons=le,min:0,disabled:!t(i).roles.allowWriteEvents},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","class"]))),128))],64)):(u(),Y(O,{key:0,prop:"persons",label:`${t(o).event_book_persons}:`,class:j(["am-cap__att-form__item",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(d).persons,"onUpdate:modelValue":M[4]||(M[4]=z=>t(d).persons=z),min:1,disabled:!t(i).roles.allowWriteEvents},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]))],64)):I("",!0),t(L)?I("",!0):(u(),Y(Ta,{key:2,heading:t(o).no_attendees_yet},null,8,["heading"]))]),_:1},8,["model","rules"]),t(h)?(u(),Y(Fr,{key:0,visibility:t(h),"responsive-class":e.responsiveClass,"onUpdate:visibility":M[5]||(M[5]=z=>De(h)?h.value=z:h=z),onAddedCustomer:y},null,8,["visibility","responsive-class"])):I("",!0)])}}};const qE={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n;let s=Oe();const l=U("settings");let o=U("amLabels"),i=V(null),r=V({}),x=V({}),c=V({}),f=b(()=>s.getters["attendee/getCustomFields"]);function p(T,A){let E=s.getters["attendee/getId"];(T.type!=="file"||E)&&(r.value[A]=b({get:()=>{let P=s.getters["attendee/getCustomFields"][A]?.value;return P||""},set:P=>s.commit("attendee/setCustomFields",{id:A,value:P})}))}function d(T,A){let E=s.getters["attendee/getId"];(T.type!=="file"||E)&&(c.value[A]={template:We[T.type],props:{id:A,itemName:A.toString(),label:T.label,options:T.options,class:`am-capei-att-cf__item am-cf-width-${T.width}`}}),(T.type==="checkbox"||T.type==="radio")&&(c.value[A].props.options=c.value[A].props.options.map(P=>({...P,value:P.label}))),T.type==="text-area"&&(c.value[A].props={...c.value[A].props,itemType:"textarea"}),T.type==="file"&&E&&(c.value[A].props={...c.value[A].props,btnLabel:o.value.upload_file_here,isUpload:!1,bookingId:E,source:"cabinet-provider"}),T.type==="datepicker"&&(c.value[A].props={...c.value[A].props,weekStartsFromDay:l.wordpress.startOfWeek})}function _(T){let A=s.getters["attendee/getId"];(T.type!=="file"||A)&&(x.value[T.id]=[{message:o.value.required_field,required:T.required,trigger:["submit","change"]}])}return Ze(()=>{r.value={},c.value={};for(let T in f.value)p(f.value[T],T),d(f.value[T],T),_(f.value[T])}),a({customFieldsFormRef:i}),(T,A)=>{const E=st;return u(),Y(E,{ref_key:"customFieldsFormRef",ref:i,model:t(r),rules:t(x),"label-position":"top",class:j(["am-capei-att-cf__form",e.responsiveClass])},{default:S(()=>[(u(!0),B(ne,null,Ee(Object.keys(t(f)),P=>(u(),B(ne,{key:P},[P in t(r)?(u(),Y(ft(t(c)[P].template),Ft({key:0,modelValue:t(r)[P],"onUpdate:modelValue":L=>t(r)[P]=L},t(c)[P].props),null,16,["modelValue","onUpdate:modelValue"])):I("",!0)],64))),128))]),_:1},8,["model","rules","class"])}}};const UE={class:"am-capai-pay__row-label"},zE={class:"am-capai-pay__row-value"},jE={class:"am-capai-pay__row-label"},YE={class:"am-capai-pay__row-value"},WE={class:"am-capai-pay__row-label"},HE={class:"am-capai-pay__row-value"},ZE={key:0,class:"am-divider"},GE={class:"am-capai-pay__row-label"},JE={class:"am-capai-pay__row-label"},XE={class:"am-capai-pay__row-label"},QE={class:"am-capai-pay__row-label"},KE={class:"am-capai-pay__row-label"},e_={class:"am-capai-pay__row-label"},t_={class:"am-capai-pay__row-label"},a_={props:{event:{type:Object,default:()=>{}},pageWidth:{type:Number,default:0}},setup(n){const a=n;let e=Oe(),s=U("amLabels"),l=b(()=>e.getters["attendee/getPayments"]),o=b(()=>Object.assign(Ir(e),{deposit:l.value[0].amount,paid:l.value.reduce((x,c)=>x+c.amount,0)})),i=U("amColors"),r=b(()=>({"--am-c-pay-text-op03":K(i.value.colorMainText,.03)}));return(x,c)=>(u(),B("div",{class:j(["am-capai-pay__content",a.responsiveClass]),style:Be(t(r))},[(u(!0),B(ne,null,Ee(t(l),(f,p)=>(u(),B(ne,{key:p},[m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",UE,w(t(s).date),1),m("div",zE,w(t(rt)(f.dateTime.split(" ")[0])),1)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",jE,w(t(s).payment_method),1),m("div",YE,w(t(wr)(f)),1)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",WE,w(t(s).status),1),m("div",HE,[m("span",{class:j(t(ds)(f.status,t(i)).icon),style:Be({color:t(ds)(f.status,t(i)).color})},null,6),ce(" "+w(t(ro)(f.status)),1)])],2)],64))),128)),a.pageWidth>480?(u(),B("div",ZE)):I("",!0),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",GE,w(t(s).price),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).price)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",JE,w(t(s).discount_amount),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).discount)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",XE,w(t(s).tax),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).tax)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",QE,w(t(s).paid_deposit),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).deposit)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",KE,w(t(s).paid_remaining_amount),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).paid-t(o).deposit)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",e_,w(t(s).due),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).paid-(t(o).price-t(o).discount+t(o).tax))),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",t_,w(t(s).total),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).price-t(o).discount+t(o).tax)),3)],2)],6))}};const s_=m("span",{class:"am-icon-clearable"},null,-1),l_={class:"am-capei-atti__footer"},n_={name:"CabinetEventAttendee"},$r=Object.assign(n_,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},isNew:{type:Boolean,default:!1},event:{type:Object,default:()=>{}},pageWidth:{type:Number,default:0}},emits:["close","save"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels");const o=U("settings");let i=V(!1),r=b(()=>s.getters["attendee/getCustomFields"]);const x=V("details");let c=V(null),f=V(null),p=V(!1),d=V(null),_=V("");function T(){p.value=!1,_.value=""}let A=V(!1),E=V();ze("formWrapper",E);function P(){let C=Ir(s);return C.price-C.discount+C.tax}function L(){let C=!0;if(f.value?.customFieldsFormRef.validate(M=>{M||(x.value="customFields",C=!1)}),c.value?.detailsFormRef.validate(M=>{M||(x.value="details",C=!1)}),!C)return;let F=o.payments.paymentLinks&&o.payments.paymentLinks.enabled,R=e.event.settings?JSON.parse(e.event.settings):null;R&&"payments"in R&&"paymentLinks"in R.payments&&"enabled"in R.payments.paymentLinks&&(F=R.payments.paymentLinks.enabled),F&&s.getters["attendee/getId"]&&P()>h.value?A.value=!0:D(!1)}function D(C){i.value=!0,$e.post(s.getters["attendee/getId"]?"/events/bookings/"+s.getters["attendee/getId"]:"/bookings",Object.assign(Lr(s),{runInstantPostBookingActions:!0,createPaymentLinks:C}),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{a("save"),s.commit("attendee/setActive",!1)}).catch(F=>{console.log(F)}).finally(()=>{i.value=!1})}let h=V(0);function g(){s.commit("attendee/setActive",!1),a("close")}Ze(()=>{s.commit("attendee/setActive",!0),s.getters["attendee/getId"]&&(h.value=P())});let y=U("amColors"),k=b(()=>({"--am-c-capai-text":y.value.colorMainText,"--am-c-capai-text-op10":K(y.value.colorMainText,.1),"--am-c-capai-primary":y.value.colorPrimary,"--am-c-cust-no1":y.value.colorMainText,"--am-c-cust-no1-bgr":K(y.value.colorMainText,.1),"--am-c-cust-no2":y.value.colorWarning,"--am-c-cust-no2-bgr":K(y.value.colorWarning,.1),"--am-c-cust-no3":y.value.colorError,"--am-c-cust-no3-bgr":K(y.value.colorError,.1),"--am-c-cust-link":K(y.value.colorMainText,.5),"--am-c-cust-text":y.value.colorMainText}));return(C,F)=>{const R=_a,M=Ca;return t(i)?(u(),Y(Wt,{key:1})):(u(),B("div",{key:0,class:j(["am-capei-atti",[{"am-no-border":!0},t(e).responsiveClass]]),style:Be(t(k))},[t(p)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:d,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:T,onTriggerClose:T},{title:S(()=>[s_,ce(" "+w(t(_)),1)]),_:1},512)):I("",!0),N(M,{modelValue:x.value,"onUpdate:modelValue":F[0]||(F[0]=O=>x.value=O)},{default:S(()=>[N(R,{label:t(l).details,name:"details"},{default:S(()=>[N(t(RE),{ref_key:"attendeeDetailsRef",ref:c,event:t(e).event,"is-new":t(e).isNew,"page-width":t(e).pageWidth},null,8,["event","is-new","page-width"])]),_:1},8,["label"]),Object.keys(t(r)).length?(u(),Y(R,{key:0,label:t(l).custom_fields,name:"customFields"},{default:S(()=>[N(t(qE),{ref_key:"attendeeCustomFieldsRef",ref:f,event:t(e).event},null,8,["event"])]),_:1},8,["label"])):I("",!0),t(s).getters["attendee/getId"]?(u(),Y(R,{key:1,label:t(l).payment,name:"payment"},{default:S(()=>[N(t(a_),{event:t(e).event,"page-width":t(e).pageWidth},null,8,["event","page-width"])]),_:1},8,["label"])):I("",!0)]),_:1},8,["modelValue"]),m("div",l_,[N(Fe,{category:"secondary",size:"default",type:"plain",onClick:g},{default:S(()=>[ce(w(t(o).roles.allowWriteEvents?t(l).cancel:t(l).close),1)]),_:1}),t(o).roles.allowWriteEvents?(u(),Y(Fe,{key:0,size:"default",onClick:L},{default:S(()=>[ce(w(t(l).save),1)]),_:1})):I("",!0)]),N(Ha,{visibility:t(A),title:t(l).confirm,description:t(l).price_changed_message,"close-btn-text":t(l).no,"confirm-btn-text":t(l).yes,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:F[1]||(F[1]=O=>D(!1)),onConfirm:F[2]||(F[2]=O=>D(!0)),onClose:F[3]||(F[3]=O=>De(A)?A.value=!1:A=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"])],6))}}});const o_=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),i_={key:1,class:"am-capei-att__top"},r_={class:"am-capei-att__top-heading"},c_={class:"am-capei-att__top-text"},x_={key:0,class:"am-capei-att__top-places"},u_={class:"am-cap__cust-option"},d_={class:"am-cap__cust-option__heading"},m_={key:0,class:"am-cap__cust-option__inner"},p_={key:1,class:"am-cap__cust-option__inner"},f_={key:0,class:"am-capei-att__card-wrapper"},g_={key:0,class:"am-capei-customer__data-wrapper"},h_={key:0,class:"am-capei-customer__data"},v_=m("span",{class:"am-icon-phone"},null,-1),E_=["href"],__={key:1,class:"am-capei-customer__data"},C_=m("span",{class:"am-icon-email"},null,-1),y_=["href"],b_={key:0,class:"am-capei-att__card-tickets"},B_={class:"am-capei-att__card-label"},A_={class:"am-capei-att__card-tickets__inner"},k_={key:1,class:"am-capei-att__card-persons"},D_={class:"am-capei-att__card-label"},F_={class:"am-capei-att__card-person"},w_={key:2,class:"am-capei-att__card-etickets"},P_={class:"am-capei-att__card-etickets__label"},T_={class:"am-capei-att__card-etickets__date"},L_={class:"am-capei-att__card-etickets__capacity"},S_={key:0,class:"am-capei-att__card-wrapper"},I_={key:0,class:"am-capei-customer__data-wrapper"},$_={key:0,class:"am-capei-customer__data"},N_=m("span",{class:"am-icon-phone"},null,-1),O_=["href"],M_={key:1,class:"am-capei-customer__data"},V_=m("span",{class:"am-icon-email"},null,-1),R_=["href"],q_={key:0,class:"am-capei-att__card-tickets"},U_={class:"am-capei-att__card-label"},z_={class:"am-capei-att__card-tickets__inner"},j_={key:1,class:"am-capei-att__card-persons"},Y_={class:"am-capei-att__card-label"},W_={class:"am-capei-att__card-person"},H_={name:"CabinetEventAttendees"},Z_=Object.assign(H_,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number},event:{type:Object,default:()=>{}}},emits:["close","openAttendee"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels");const o=U("settings"),i=U("shortcodeData");let r=U("amCustomize"),x=b(()=>i.value.cabinetType==="employee"?r.value.events.options.customerPhone.visibility:!0),c=b(()=>i.value.cabinetType==="employee"?r.value.events.options.customerEmail.visibility:!0),f=V(null),p=V(!1),d=V("success"),_=V("");function T(){p.value=!1,s.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}let A=V(!1),E=V(!1),P=V(!1),L=V([]),D=V(0),h=V(1),g=V(!1),y=V([]),k=V(0),C=V(1),F=b(()=>e.event.settings?JSON.parse(e.event.settings):null);const{noShowData:R}=U("noShowData");let M=V(!1),O=V(null),H=V(!1);function z(){O.value=null,M.value=!1}function X(Me,Le){O.value=Me,H.value=Le,M.value=!0}let le=V(null);function Q(){s.commit("attendee/setActive",!1),p.value=!0,_.value=l.value.event_attendee_saved,le.value&&f.value&&setTimeout(function(){gt(le.value,f.value.$el,0,300)},500),$(se.value==="approved"?["approved","canceled"]:["waiting"]),ue()}function ue(){A.value=!1,E.value=!1,a("openAttendee",!1)}function ee(){s.commit("attendee/setAttendee",gs(s,s.getters["attendee/getDefaultAttendee"],e.event)),A.value=!0,a("openAttendee",!0)}function me(Me){let Le=s.getters["customerInfo/getCustomers"],ke=s.getters["customerInfo/getCustomersIds"];Le.filter(pe=>pe.id===Me.customer.id).length===0&&(Le.push(Me.customer),s.commit("customerInfo/setCustomers",Le)),ke.indexOf(Me.customer.id)===-1&&(ke.push(Me.customer.id),s.commit("customerInfo/setCustomersIds",ke)),s.commit("attendee/setAttendee",gs(s,Me,e.event)),E.value=!0,A.value=!0,a("openAttendee",!0)}const se=V("approved");function _e(){switch(se.value){case"approved":h.value=1;break;case"waiting":C.value=1;break}$(se.value==="approved"?["approved","canceled"]:["waiting"])}let de=V(null),oe=b(()=>s.getters["customerInfo/getLoading"]),ye=b(()=>s.getters["customerInfo/getCustomers"]);function $(Me,Le=1){Me[0]==="approved"?P.value=!0:g.value=!0,$e.get("/bookings/events",Object.assign(Ue(s),{params:Js({source:"cabinet-provider",statuses:Me,page:Le,limit:parseInt(o.general.itemsPerPage),events:[e.event.id],customers:de.value?[de.value]:[]})})).then(ke=>{Me[0]==="approved"?(xe.value=ke.data.data.attendeeCount,he.value=ke.data.data.maxCapacity,L.value=ke.data.data.bookings.filter(pe=>pe.status==="approved"||pe.status==="canceled").reduce((pe,ie)=>(pe.push(gs(s,Bi(ie,s.getters["attendee/getAttendee"]),e.event)),pe),[]),D.value=ke.data.data.filteredCount):(xe.value=ke.data.data.waitingCount,he.value=ke.data.data.waitingCapacity,y.value=ke.data.data.bookings.filter(pe=>pe.status==="waiting").reduce((pe,ie)=>(pe.push(Bi(ie)),pe),[]),k.value=ke.data.data.filteredCount)}).catch(ke=>{console.log(ke)}).finally(()=>{P.value=!1,g.value=!1})}function W(Me,Le){$e.post("/events/bookings/"+Me,{status:Le,bookings:[{status:Le}]},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{}).catch(ke=>{console.log(ke)}).finally(()=>{})}function ae(Me){let Le=se.value==="approved"?["approved","canceled"]:["waiting"];Le[0]==="approved"?h.value=Me:C.value=Me,$(Le,Me)}function J(){M.value=!1,H.value?g.value=!0:P.value=!0,$e.post("/events/bookings/delete/"+O.value.id,Lr(s),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{ae(h.value)}).catch(()=>{g.value=!1,P.value=!1})}let Z=V(Sr().filter(Me=>(!o.featuresIntegrations.waitingList.enabled||(F.value?"waitingList"in F.value&&!F.value.waitingList.enabled:!0)?Me.value!=="waiting":!0)&&(o.featuresIntegrations.noShowTag.enabled?!0:Me.value!=="no-show"))),xe=V(0),he=V(0),re=b(()=>`${xe.value}/${he.value}`),be=b(()=>xe.value===1?l.value.attendee:l.value.attendees);function te(Me){const Le=JSON.parse(Me),ke={};return Le.forEach(pe=>{if(pe.type!=="booking")for(const[ie,je]of Object.entries(pe.dates))(ke[ie]=ke[ie]||[]).push(je)}),Object.fromEntries(Object.entries(ke).map(([pe,ie])=>[pe,`${ie.filter(Boolean).length}/${ie.length}`]))}Ze(()=>{$(["approved","canceled"]),s.commit("customerInfo/setCustomers",s.getters["auth/getPreloadedCustomers"])});let Ae=U("amColors"),we=b(()=>({"--am-c-capei-att-primary":Ae.value.colorPrimary,"--am-c-capei-att-text":Ae.value.colorMainText,"--am-c-capei-att-text-op90":K(Ae.value.colorMainText,.9),"--am-c-capei-att-text-op10":K(Ae.value.colorMainText,.1)}));return(Me,Le)=>{const ke=_a,pe=Ca;return u(),B("div",{ref_key:"attendeesContainer",ref:le,class:"am-capei-att",style:Be(t(we))},[t(p)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:f,type:t(d),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:T,onTriggerClose:T},{title:S(()=>[o_,ce(" "+w(t(_)),1)]),_:1},8,["type"])):I("",!0),t(A)?I("",!0):(u(),B("div",i_,[m("div",r_,[m("div",c_,w(t(e).event.name),1),t(he)?(u(),B("div",x_,w(t(re))+" "+w(t(be)),1)):I("",!0)]),N(Fe,{category:"secondary",type:"plain",size:"small",class:"am-capei-att__back",onClick:Le[0]||(Le[0]=ie=>t(a)("close"))},{default:S(()=>[ce(w(t(l).back),1)]),_:1})])),t(A)?I("",!0):(u(),B("div",{key:2,class:j(["am-capei-att__header",t(e).responsiveClass])},[N(Je,{modelValue:t(de),"onUpdate:modelValue":Le[1]||(Le[1]=ie=>De(de)?de.value=ie:de=ie),filterable:"",clearable:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","prefix-icon":"search","prefix-icon-color":"var(--am-c-capei-att-text)","popper-class":"am-cap-cust__popper",placeholder:t(l).event_attendees_search,"remote-method":ie=>{t(Zs)(t(s),ie)},loading:t(oe),onFocus:Le[2]||(Le[2]=ie=>t(Oo)(t(s))),onChange:Le[3]||(Le[3]=ie=>$(se.value==="approved"?["approved","canceled"]:["waiting"],1))},{default:S(()=>[(u(!0),B(ne,null,Ee(t(ye),ie=>(u(),Y(Ye,{key:ie.id,value:ie.id,label:`${ie.firstName} ${ie.lastName}`},{default:S(()=>[m("div",u_,[m("div",d_,w(ie.firstName+" "+ie.lastName),1),t(c)?(u(),B("div",m_,w(ie.email),1)):I("",!0),t(x)?(u(),B("div",p_,w(ie.phone),1)):I("",!0)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"]),t(o).roles.allowWriteEvents?(u(),Y(Fe,{key:0,prefix:"plus",icon:"plus","icon-only":t(e).pageWidth<540,onClick:ee},{default:S(()=>[ce(w(t(l).event_add_attendee),1)]),_:1},8,["icon-only"])):I("",!0)],2)),t(A)?I("",!0):(u(),Y(pe,{key:3,modelValue:se.value,"onUpdate:modelValue":Le[4]||(Le[4]=ie=>se.value=ie),onTabClick:_e},{default:S(()=>[N(ke,{label:t(l).attendees,name:"approved"},{default:S(()=>[t(P)?(u(),Y(Wt,{key:1})):(u(),B("div",f_,[t(L).length?(u(),B(ne,{key:0},[(u(!0),B(ne,null,Ee(t(L),(ie,je)=>(u(),B("div",{key:je,class:j(["am-capei-att__card",t(e).responsiveClass])},[m("div",{class:j(["am-capei-att__card-inner",t(e).responsiveClass])},[m("div",{class:j(["am-capei-att__info",t(e).responsiveClass])},[m("div",{class:j(["am-capei-customer__name",t(R)(0).class])},[t(R)(0).icon?(u(),B("span",{key:0,class:j(`am-icon-${t(R)(0).icon}`)},null,2)):I("",!0),ce(" "+w(ie.customer.firstName+" "+ie.customer.lastName),1)],2),ie.customer.phone&&t(x)||ie.customer.email&&t(c)?(u(),B("div",g_,[ie.customer.phone&&t(x)?(u(),B("div",h_,[v_,m("a",{href:`tel:${ie.customer.phone}`},w(ie.customer.phone),9,E_)])):I("",!0),ie.customer.email&&t(c)?(u(),B("div",__,[C_,m("a",{href:`mailto:${ie.customer.email}`},w(ie.customer.email),9,y_)])):I("",!0)])):I("",!0)],2),N(Je,{modelValue:ie.status,"onUpdate:modelValue":ve=>ie.status=ve,placeholder:t(l).select,disabled:!t(o).roles.allowWriteEvents,"prefix-icon":t(Z).find(ve=>ve.value===ie.status).icon,"prefix-icon-color":t(Z).find(ve=>ve.value===ie.status).color,"popper-class":"am-capei-att__popper","parent-class":t(e).responsiveClass,onChange:ve=>{W(ie.id,ve)}},{default:S(()=>[(u(!0),B(ne,null,Ee(t(Z),ve=>(u(),Y(Ye,{key:ve.value,value:ve.value,label:ve.label},{default:S(()=>[m("span",{class:j(`am-icon-${ve.icon}`),style:Be({color:ve.color})},null,6),ce(" "+w(ve.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled","prefix-icon","prefix-icon-color","parent-class","onChange"])],2),ie.ticketsData.length?(u(),B("div",b_,[m("div",B_,w(t(l).event_book_tickets)+": ",1),m("div",A_,[(u(!0),B(ne,null,Ee(ie.ticketsData,(ve,Pe)=>(u(),B("div",{key:Pe,class:"am-capei-att__card-ticket"},w(ve.persons)+" x "+w(t(e).event.customTickets.find(Ve=>Ve.id===ve.eventTicketId).name),1))),128))])])):(u(),B("div",k_,[m("div",D_,w(t(l).event_book_persons)+": ",1),m("div",F_,w(ie.persons),1)])),t(o).featuresIntegrations.eTickets.enabled&&ie.qrCodes?(u(),B("div",w_,[m("div",P_,w(t(l).checked_in)+": ",1),(u(!0),B(ne,null,Ee(te(ie.qrCodes),(ve,Pe)=>(u(),B("div",{key:Pe,class:"am-capei-att__card-etickets__item"},[m("span",T_,w(Pe)+":",1),m("span",L_,w(ve),1)]))),128))])):I("",!0),t(o).roles.allowWriteEvents?(u(),Y(Ea,{key:3,index:je,"reference-class":t(e).responsiveClass,onEdit:ve=>me(ie),onRemove:ve=>X(ie,!1)},null,8,["index","reference-class","onEdit","onRemove"])):I("",!0)],2))),128)),t(D)>t(o).general.itemsPerPage?(u(),Y(Pl,{key:0,"page-size":t(o).general.itemsPerPage,"pager-count":5,layout:"prev, pager, next",total:t(D),"current-page":t(h),onCurrentChange:ae},null,8,["page-size","total","current-page"])):I("",!0)],64)):(u(),Y(Ta,{key:1,heading:t(l).no_attendees_yet},null,8,["heading"]))]))]),_:1},8,["label"]),t(o).featuresIntegrations.waitingList.enabled&&t(F)!==null&&"waitingList"in t(F)&&t(F).waitingList.enabled?(u(),Y(ke,{key:0,label:t(l).waiting_list,name:"waiting"},{default:S(()=>[t(g)?(u(),Y(Wt,{key:1})):(u(),B("div",S_,[t(y).length?(u(),B(ne,{key:0},[(u(!0),B(ne,null,Ee(t(y),(ie,je)=>(u(),B("div",{key:je,class:"am-capei-att__card"},[m("div",{class:j(["am-capei-att__card-inner",t(e).responsiveClass])},[m("div",{class:j(["am-capei-att__info",t(e).responsiveClass])},[m("div",{class:j(["am-capei-customer__name",t(R)(0).class])},[t(R)(0).icon?(u(),B("span",{key:0,class:j(`am-icon-${t(R)(0).icon}`)},null,2)):I("",!0),ce(" "+w(ie.customer.firstName+" "+ie.customer.lastName),1)],2),ie.customer.phone&&t(x)||ie.customer.email&&t(c)?(u(),B("div",I_,[ie.customer.phone&&t(x)?(u(),B("div",$_,[N_,m("a",{href:`tel:${ie.customer.phone}`},w(ie.customer.phone),9,O_)])):I("",!0),ie.customer.email&&t(c)?(u(),B("div",M_,[V_,m("a",{href:`mailto:${ie.customer.email}`},w(ie.customer.email),9,R_)])):I("",!0)])):I("",!0)],2),N(Je,{modelValue:ie.status,"onUpdate:modelValue":ve=>ie.status=ve,placeholder:t(l).select,disabled:!t(o).roles.allowWriteEvents,"prefix-icon":t(Z).find(ve=>ve.value===ie.status).icon,"prefix-icon-color":t(Z).find(ve=>ve.value===ie.status).color,"popper-class":"am-capei-att__popper",onChange:ve=>{W(ie.id,ve)}},{default:S(()=>[(u(!0),B(ne,null,Ee(t(Z),ve=>(u(),Y(Ye,{key:ve.value,value:ve.value,label:ve.label},{default:S(()=>[m("span",{class:j(`am-icon-${ve.icon}`),style:Be({color:ve.color})},null,6),ce(" "+w(ve.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled","prefix-icon","prefix-icon-color","onChange"])],2),Object.keys(ie.ticketsData).length?(u(),B("div",q_,[m("div",U_,w(t(l).event_book_tickets)+": ",1),m("div",z_,[(u(!0),B(ne,null,Ee(ie.ticketsData,(ve,Pe)=>(u(),B("div",{key:Pe,class:"am-capei-att__card-ticket"},w(ve.persons)+" x "+w(t(e).event.customTickets.find(Ve=>Ve.id===ve.eventTicketId).name),1))),128))])])):(u(),B("div",j_,[m("div",Y_,w(t(l).event_book_persons)+": ",1),m("div",W_,w(ie.persons),1)])),t(o).roles.allowWriteEvents?(u(),Y(Ea,{key:2,index:je,"reference-class":t(e).responsiveClass,onEdit:ve=>me(ie),onRemove:ve=>X(ie,!0)},null,8,["index","reference-class","onEdit","onRemove"])):I("",!0)]))),128)),t(k)>t(o).general.itemsPerPage?(u(),Y(Pl,{key:0,"page-size":t(o).general.itemsPerPage,"pager-count":5,layout:"prev, pager, next",total:t(k),"current-page":t(C),onCurrentChange:ae},null,8,["page-size","total","current-page"])):I("",!0)],64)):(u(),Y(Ta,{key:1,heading:t(l).no_attendees_yet},null,8,["heading"]))]))]),_:1},8,["label"])):I("",!0)]),_:1},8,["modelValue"])),N(Ha,{visibility:t(M),title:t(l).confirm,description:t(l).event_attendee_remove,"close-btn-text":t(l).no,"confirm-btn-text":t(l).yes,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:z,onConfirm:J,onClose:z},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"]),t(A)?(u(),Y($r,{key:4,visibility:t(A),title:t(E)?t(l).event_edit_attendee:t(l).event_add_attendee,event:t(e).event,"page-width":t(e).pageWidth,"is-new":!t(E),onSave:Q,onClose:ue},null,8,["visibility","title","event","page-width","is-new"])):I("",!0)],4)}}});const G_=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),J_={name:"CabinetEvents",key:"events"},X_=Object.assign(J_,{props:{loadBookingsCounter:{type:Number,default:0}},setup(n){const a=n;let e=Oe(),s=V(null),{width:l}=Za(s),o=b(()=>ot(l.value)),i={components:{IconComponent:Ge},template:'<IconComponent icon="plus"/>'},r=U("licence");const x=U("settings");let c=U("originKey"),f=U("amCustomize");const p=U("shortcodeData");let d=b(()=>p.value.cabinetType==="customer"&&(r.isPro||r.isDeveloper)&&x.featuresIntegrations.eTickets.enabled);const _=U("labels"),T=U("localLanguage");let A=b(()=>x.general.usedLanguages.includes(T.value)),E=b(()=>{let ve=tt({..._}),Pe=f.value.events.translations;return Pe&&Object.keys(Pe).forEach(Ve=>{Pe[Ve][T.value]&&A.value?ve[Ve]=Pe[Ve][T.value]:Pe[Ve].default&&(ve[Ve]=Pe[Ve].default)}),ve});ze("amLabels",E);let P=V(null),L=V(!1),D=V("success"),h=V("");function g(){L.value=!1,e.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}function y(ve){let Pe=tt({..._}),Ve=f.value[ve].translations;return Ve&&Object.keys(Ve).forEach(Ke=>{Ve[Ke][T.value]&&A.value?Pe[Ke]=Ve[Ke][T.value]:Ve[Ke].default&&(Pe[Ke]=Ve[Ke].default)}),Pe}function k(ve){return f.value[ve].options}let C=b(()=>e.getters["entities/getReady"]),F=U("cabinetType");e.commit("cabinetFilters/setDates",Eo(F.value));let R=b(()=>e.getters["cabinet/getEventsLoading"]),M=V(!1),O=V(null),H=V(null),z=V(0),X=V(1);function le(ve){X.value=ve,Q(ve)}function Q(ve=1){O.value=null,e.commit("cabinet/setEventsLoading",!0);let Pe=e.getters["cabinet/getTimeZone"],Ve=JSON.parse(JSON.stringify(e.getters["cabinetFilters/getEventsFilters"]));Ve.dates=Ve.dates.map(Re=>Ce(Re).format("YYYY-MM-DD")),Ve.timeZone=Pe,Ve.source="cabinet-"+F.value,Ve.id=Ve.events,Ve.group=!0,Ve.page=ve,Ve.limit=x.general.itemsPerPage,Ve.customers&&(Ve.customerId=Ve.customers),e.commit("auth/setLoadingEventsCounter",e.getters["auth/getLoadingEventsCounter"]+1);let Ke=e.getters["auth/getLoadingEventsCounter"];$e.get("/events",Object.assign(Ue(e),{params:Js(Ve)})).then(Re=>{Ke===e.getters["auth/getLoadingEventsCounter"]&&(e.dispatch("cabinetFilters/injectEventsOptions",Re.data.data.events),e.commit("auth/setPreloadedEvents",Re.data.data.events),z.value=Re.data.data.count,e.commit("eventEntities/setEvents",Re.data.data.events),H.value=G0(Re.data.data.events,e.getters["cabinet/getTimeZone"],e))}).catch(Re=>{Re?.response?.data?.data?.reauthorize!==void 0&&Re.response.data.data.reauthorize&&e.dispatch("auth/logout"),console.log(Re)}).finally(()=>{Ke===e.getters["auth/getLoadingEventsCounter"]&&e.commit("cabinet/setEventsLoading",!1)})}function ue(ve){e.commit("cabinet/setEventsLoading",!0),$e.get("/events/"+ve.id,Object.assign({params:{source:"cabinet-"+F.value,timeZone:e.getters["cabinet/getTimeZone"]}},Ue(e))).then(Pe=>{e.commit("event/setEvent",T1(e,Pe.data.data.event)),ee.value=!0}).catch(Pe=>{console.log(Pe)}).finally(()=>{e.commit("cabinet/setEventsLoading",!1)})}let ee=V(!1),me=V(!1),se=V(!1),_e=V(!1),de=V(!1),oe=V(null);function ye(ve){e.commit("cabinet/setEventsLoading",!0),ee.value=!1,setTimeout(()=>{e.commit("event/setEvent",ve),ee.value=!0,e.commit("cabinet/setEventsLoading",!1)},500)}function $(){L.value=!0,h.value=E.value.event_saved,s.value&&P.value&&setTimeout(function(){gt(s.value,P.value.$el,0,300)},500),Q(),te()}function W(){Ae(),ee.value=!0}function ae(ve){oe.value=ve,be(gs(e,e.getters["attendee/getDefaultAttendee"],ve)),se.value=!0}function J(){Q(X.value),Z()}function Z(){se.value=!1,_e.value=!1}function xe(ve){oe.value=ve,me.value=!0}function he(){oe.value=null,Q(X.value),be(gs(e,e.getters["attendee/getDefaultAttendee"])),me.value=!1,de.value=!1}function re(ve){de.value=ve}function be(ve={}){e.commit("attendee/setAttendee",ve)}function te(){ee.value=!1,Ae()}function Ae(){e.commit("event/setEvent",{bookings:[],settings:_s(x,e.getters["event/getSettings"],{},{})})}let we=V(!1);function Me(){we.value=!0,$e.post("/bookings/cancel/"+O.value.id,{type:"event",source:"cabinet-"+F.value},Object.assign(Ue(e),{params:{source:"cabinet-"+F.value}})).then(()=>{O.value=null,Q(),L.value=!0,h.value=E.value.event_canceled,s.value&&P.value&&setTimeout(function(){gt(s.value,P.value.$el,0,300)},500)}).catch(ve=>{!("data"in ve.response.data)&&"message"in ve.response.data&&(L.value=!0,h.value=ve.response.data.message,s.value&&P.value&&setTimeout(function(){gt(s.value,P.value.$el,0,300)},500))}).finally(()=>{we.value=!1})}xt(()=>a.loadBookingsCounter,()=>{Q()}),Ze(()=>{Q()});function Le(ve){let Pe=[],Ve=e.getters["entities/getEmployees"];if(ve.organizerId&&Ve.find(Ke=>Ke.id===ve.organizerId)){let Ke={...Ve.find(Re=>Re.id===ve.organizerId),rank:"organizer"};if(!ve.providers.length)return Ke;Pe.push(Ke)}return ve.providers.length&&ve.providers.forEach(Ke=>{Ke.id!==ve.organizerId&&Ve.find(Re=>Re.id===Ke.id)&&Pe.push(Ve.find(Re=>Re.id===Ke.id))}),Pe}function ke(ve){if(ve){if(ve===1)return{class:"am-no-show-1",icon:"no-show-1"};if(ve===2)return{class:"am-no-show-2",icon:"no-show-2"};if(ve>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}ze("noShowData",{noShowData:ke});let pe=V(!1),ie=U("amColors"),je=b(()=>({"--am-c-cape-bgr":ie.value.colorMainBgr,"--am-c-cape-text":ie.value.colorMainText,"--am-c-cape-text-op70":K(ie.value.colorMainText,.7),"--am-c-cape-text-op25":K(ie.value.colorMainText,.25),"--am-c-cape-primary":ie.value.colorPrimary,"--am-c-cust-no1":ie.value.colorMainText,"--am-c-cust-no1-bgr":K(ie.value.colorMainText,.1),"--am-c-cust-no2":ie.value.colorWarning,"--am-c-cust-no2-bgr":K(ie.value.colorWarning,.1),"--am-c-cust-no3":ie.value.colorError,"--am-c-cust-no3-bgr":K(ie.value.colorError,.1),"--am-c-cust-text":ie.value.colorMainText,"--am-c-cust-link":K(ie.value.colorMainText,.5)}));return(ve,Pe)=>(u(),B("div",{ref_key:"pageContainer",ref:s,class:j(["am-cap am-cape-main",{"am-capei-main":t(ee)||t(se)||t(de)}]),style:Be(t(je))},[m("div",{class:j(["am-cape-main__inner",t(o)])},[t(L)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:P,type:t(D),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:g,onTriggerClose:g},{title:S(()=>[G_,ce(" "+w(t(h)),1)]),_:1},8,["type"])):I("",!0),!t(se)&&!t(ee)&&!t(me)&&t(C)?(u(),Y(Mo,{key:1,"step-key":"events",empty:t(M),"responsive-class":t(o),onChangeFilters:Q},null,8,["empty","responsive-class"])):I("",!0),t(p).cabinetType==="employee"&&t(C)&&!t(se)&&!t(ee)&&!t(me)&&((t(r).isPro||t(r).isDeveloper)&&t(x).featuresIntegrations.eTickets.enabled||t(x).roles.allowWriteEvents)?(u(),B("div",{key:2,class:j(["am-cap__actions",t(o)])},[(t(r).isPro||t(r).isDeveloper)&&t(x).featuresIntegrations.eTickets.enabled&&(t(f).events.options?.scanQrCodeBtn?.visibility??!0)?(u(),Y(Fe,{key:0,prefix:"scan-qr-code",size:"small",category:"secondary",type:"plain",onClick:Pe[0]||(Pe[0]=Ve=>De(pe)?pe.value=!0:pe=!0)},{default:S(()=>[ce(w(t(E).scan_e_ticket),1)]),_:1})):I("",!0),t(x).roles.allowWriteEvents?(u(),Y(Fe,{key:1,icon:t(i),prefix:"plus",size:"small",category:"primary",type:t(f).events.options.newEvtBtn.buttonType,onClick:W},{default:S(()=>[m("span",null,w(t(E).new_event),1)]),_:1},8,["icon","type"])):I("",!0)],2)):I("",!0),!t(R)&&t(C)?(u(),B(ne,{key:3},[!t(se)&&!t(ee)&&!t(me)&&t(H)&&Object.keys(t(H)).length>0?(u(),B("div",{key:0,class:j(["am-cape__wrapper",[{"am-no-border":t(H)&&Object.keys(t(H)).length===1},t(o)]])},[(u(!0),B(ne,null,Ee(t(H),(Ve,Ke)=>(u(),B("div",{key:Ke,class:"am-cape"},[m("div",{class:j(["am-cape__date",[{"am-today":t(rt)(Ke)===t(rt)(t(Ce)().format("YYYY-MM-DD"))},{"am-no-flag":t(H)&&Object.keys(t(H)).length===1},t(o)]])},w(t(rt)(Ke)),3),(u(!0),B(ne,null,Ee(Ve.events,(Re,$a)=>(u(),Y(br,{key:$a,start:t(vs)(Re.periods[0].periodStart.split(" ")[1].slice(0,5)),name:Re.name,employee:Le(Re),customers:Re.bookings.filter(ut=>ut.status!=="rejected"&&ut.status!=="canceled").map(ut=>ut.customer),price:t(Ii)(Re),duration:null,periods:(ve.periods=t(J0)(Re.periods))?ve.periods:[],extras:[],tickets:t(X0)(Re),"custom-fields":t(_r)(Re.bookings,t(p).cabinetType),location:t(Q0)(t(e),Re),"qr-codes":t(d)?t(K0)(Re):[],"google-meet-link":Re.periods.length===1&&Re.periods[0].googleMeetUrl?Re.periods[0].googleMeetUrl:"","microsoft-teams-link":Re.periods.length===1&&Re.periods[0].microsoftTeamsUrl?Re.periods[0].microsoftTeamsUrl:"","zoom-link":Re.periods.length===1&&Re.periods[0].zoomMeeting?Re.periods[0].zoomMeeting.joinUrl:"","lesson-space-link":Re.periods.length===1&&Re.periods[0].lessonSpace?Re.periods[0].lessonSpace:"",bookable:Re,reservation:Re,booking:Re.bookings[0],"responsive-class":t(o),"parent-width":t(l),"customized-options":k("events"),onEditEvent:ue,onAddEventAttendee:ae,onListEventAttendees:xe,onCancelBooking:Pe[1]||(Pe[1]=ut=>{De(O)?O.value=ut:O=ut})},null,8,["start","name","employee","customers","price","periods","tickets","custom-fields","location","qr-codes","google-meet-link","microsoft-teams-link","zoom-link","lesson-space-link","bookable","reservation","booking","responsive-class","parent-width","customized-options"]))),128))]))),128))],2)):I("",!0),!t(se)&&!t(ee)&&!t(me)&&(t(H)===null||Object.keys(t(H)).length===0)?(u(),Y(Ta,{key:1,heading:t(E).no_evt_found,text:t(E).have_no_evt},null,8,["heading","text"])):I("",!0),!t(se)&&!t(ee)&&!t(me)&&t(H)&&Object.keys(t(H)).length>0&&t(z)>t(x).general.itemsPerPage?(u(),Y(Pl,{key:2,"page-size":t(x).general.itemsPerPage,"pager-count":5,layout:"prev, pager, next",total:t(z),"current-page":t(X),onCurrentChange:le},null,8,["page-size","total","current-page"])):I("",!0),t(ee)?(u(),Y(AE,{key:3,"page-width":t(l),"responsive-class":t(o),onClose:te,onSave:$,onDuplicate:ye},null,8,["page-width","responsive-class"])):I("",!0),!t(se)&&t(me)?(u(),Y(Z_,{key:4,event:t(oe),"page-width":t(l),"responsive-class":t(o),onClose:he,onOpenAttendee:re},null,8,["event","page-width","responsive-class"])):I("",!0),t(se)?(u(),Y($r,{key:5,visibility:t(se),title:t(_e)?t(E).event_edit_attendee:t(E).event_add_attendee,event:t(oe),"page-width":t(l),"is-new":!t(_e),onSave:J,onClose:Z},null,8,["visibility","title","event","page-width","is-new"])):I("",!0),t(c)==="capc"?(u(),Y(Ha,{key:6,visibility:t(O)!==null,title:y("cancelEvent").cancel_event,description:y("cancelEvent").confirm_cancel_event,"close-btn-text":y("cancelEvent").close,"confirm-btn-text":y("cancelEvent").confirm,"customized-options":k("cancelEvent"),loading:t(we),onClose:Pe[2]||(Pe[2]=Ve=>De(O)?O.value=null:O=null),onDecline:Pe[3]||(Pe[3]=Ve=>De(O)?O.value=null:O=null),onConfirm:Me},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])):I("",!0),t(pe)?(u(),Y(w1,{key:7,visibility:t(pe),"onUpdate:visibility":[Pe[4]||(Pe[4]=Ve=>De(pe)?pe.value=Ve:pe=Ve),Pe[5]||(Pe[5]=Ve=>De(pe)?pe.value=Ve:pe=Ve)]},null,8,["visibility"])):I("",!0)],64)):(u(),Y(Gl,{key:4}))],2)],6))}});const Q_={class:"am-sc__top-menu"},K_={class:"am-sc__top-left"},eC={class:"am-sc__name"},tC={key:0,class:"am-sc__date"},aC={key:1,class:"am-sc__date"},sC=["onClick"],lC={class:"am-sc__edit"},nC=["onClick"],oC=m("span",{class:"am-icon-eye"},null,-1),iC={class:"am-sc__edit-text"},rC=["onClick"],cC=m("span",{class:"am-icon-download"},null,-1),xC={class:"am-sc__edit-text"},uC=["onClick"],dC={class:"am-sc__capacity"},mC=m("div",{class:"am-sc__btn"},[m("span",{class:"am-icon-arrow-right"})],-1),pC={key:0,class:"am-sc__bottom"},fC=m("span",{class:"am-icon-triangle-info"},null,-1),gC={name:"CabinetPackagesList"},hC=Object.assign(gC,{props:{packages:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""}},emits:["click"],setup(n,{emit:a}){const e=n;let s=Oe();function l(C){return Ce(C,"YYYY-MM-DD").diff(Ce(),"days")}function o(C){a("click",C)}function i(C,F,R){let M=0;return Object.keys(C).forEach(O=>{(F===null||parseInt(F)===parseInt(O))&&(M+=C[O].purchaseData[R])}),M}function r(C){return C===1?A.value.appointment_booked:A.value.appointments_booked}function x(C){let F=C.packageData.sharedCapacity?C.packageData.sharedCount:i(C.services,null,"count"),R=C.packageData.sharedCapacity?C.packageData.sharedTotal:i(C.services,null,"total");return`${R-F}/${R} ${r(R-F)}`}let c=U("containerWidth");const f=U("settings");let p=U("amCustomize");const d=U("labels"),_=U("localLanguage");let T=b(()=>f.general.usedLanguages.includes(_.value)),A=b(()=>{let C=tt({...d}),F=p.value.packagesList.translations;return F&&Object.keys(F).forEach(R=>{F[R][_.value]&&T.value?C[R]=F[R][_.value]:F[R].default&&(C[R]=F[R].default)}),C}),E=U("amColors"),P=U("licence");const L=V([]);Ze(()=>{L.value=e.packages.map(()=>!1)});function D(C,F){C.stopPropagation(),L.value=L.value.map((R,M)=>M===F?!R:!1)}function h(C){L.value[C]=!1}function g(C){s.commit("cabinet/setPackageLoading",!0),$e.post("/invoices/"+e.packages[C][1].packageData.payments[0].id,{format:"pdf"},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(F=>{window.open(Fl(F)),L.value[C]=!1}).catch(F=>{console.log(F.message)}).finally(()=>{s.commit("cabinet/setPackageLoading",!1)})}function y(C){s.commit("cabinet/setPackageLoading",!0);const F=f.notifications.invoiceFormat||"pdf";$e.post("/invoices/"+e.packages[C][1].packageData.payments[0].id,{format:F},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(R=>{let M=Fl(R,F);const O=document.createElement("a");O.href=M,O.download=`Invoice.${F}`,document.body.appendChild(O),O.click(),document.body.removeChild(O),L.value[C]=!1}).catch(R=>{console.log(R.message)}).finally(()=>{s.commit("cabinet/setPackageLoading",!1)})}let k=b(()=>({"--am-c-sc-bgr":E.value.colorMainBgr,"--am-c-sc-bgr-op15":K(E.value.colorMainText,.15),"--am-c-sc-text":E.value.colorMainText,"--am-c-sc-text-op80":K(E.value.colorMainText,.8),"--am-c-sc-text-op60":K(E.value.colorMainText,.6),"--am-c-sc-text-op10":K(E.value.colorMainText,.1),"--am-c-sc-text-op15":K(E.value.colorMainText,.15),"--am-c-sc-warning-op50":K(E.value.colorWarning,.5)}));return(C,F)=>{const R=bs;return t(e).packages.length?(u(!0),B(ne,{key:0},Ee(t(e).packages,(M,O)=>(u(),B("div",{key:M[0],style:Be(t(k)),class:j(["am-sc",{"am-sc__canceled":M[1].packageData.status==="canceled"}])},[m("div",{class:j(["am-sc__top",n.responsiveClass])},[m("div",Q_,[m("div",K_,[m("div",eC,w(M[1].packageData.name),1),M[1].packageData.end?(u(),B("div",tC,w(t(A).package_book_expire)+" "+w(t(rt)(M[1].packageData.end.split(" ")[0])),1)):(u(),B("div",aC,w(`${t(A).package_book_expiration} ${t(A).package_book_unlimited}`),1))]),!t(P).isStarter&&t(f).featuresIntegrations.invoices.enabled?(u(),Y(R,{key:0,ref_for:!0,ref:"editRef",visible:L.value[O],persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-sc__popper","popper-style":t(k),trigger:"click",placement:"bottom-end"},{reference:S(()=>[m("span",{class:"am-cc__edit-btn am-icon-dots-vertical",onClick:H=>D(H,O)},null,8,sC)]),default:S(()=>[$t((u(),B("div",lC,[t(P).isStarter?I("",!0):(u(),B("div",{key:0,class:"am-sc__edit-item",onClick:H=>g(O)},[oC,m("span",iC,w(t(A).preview_invoice),1)],8,nC)),t(P).isStarter?I("",!0):(u(),B("div",{key:1,class:"am-sc__edit-item",onClick:H=>y(O)},[cC,m("span",xC,w(t(A).download_invoice),1)],8,rC))])),[[t(Qt),()=>h(O)]])]),_:2},1032,["visible","popper-style"])):I("",!0)]),m("div",{class:j(["am-sc__top-right",n.responsiveClass]),onClick:H=>o(M[0])},[m("div",dC,w(x(M[1])),1),mC],10,uC)],2),M[1].packageData.end&&M[1].packageData.status!=="canceled"?(u(),B(ne,{key:0},[l(M[1].packageData.end.split(" ")[0])>0?(u(),B("div",pC,[m("span",{class:j(["am-sc__expiration",{"am-mobile":t(c)<481}])},[fC,ce(" "+w(`${t(A).package_deal_expire_in} ${l(M[1].packageData.end.split(" ")[0])} ${t(A).expires_days}, ${t(A).appointments_deal_expire}`),1)],2)])):I("",!0)],64)):I("",!0)],6))),128)):(u(),Y(Ta,{key:1,heading:t(A).no_pack_found,text:t(A).have_no_pack},null,8,["heading","text"]))}}});const vC=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),EC={class:"am-cappa__back"},_C={class:"am-cappa__heading-left"},CC={key:0,class:"am-cappa__img-name"},yC={class:"am-cappa__info"},bC={class:"am-cappa__name"},BC={key:0,class:"am-cappa__date"},AC={key:1,class:"am-cappa__date"},kC={key:2,class:"am-cappa__capacity"},DC={class:"am-cappa__service-heading"},FC={class:"am-cappa__service-right"},wC={key:0,class:"am-cappa__service-img__name"},PC={class:"am-cappa__service-info"},TC={class:"am-cappa__service-name"},LC={key:0,class:"am-cappa__service-capacity"},SC={name:"CabinetPackageAppointmentsList",key:"packagesList"},IC=Object.assign(SC,{props:{data:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["goBack","booked","canceled","cancelError"],setup(n,{emit:a}){const e=n;let s=Oe(),l=b(()=>s.getters.getSettings),o={components:{IconComponent:Ge},template:'<IconComponent icon="arrow-left"></IconComponent>'},{selectedPackageCustomerId:i}=U("packageSelection"),r=b(()=>s.getters["entities/getPackage"](e.data.packageData.id)),x=b(()=>r.value.bookable.filter($=>e.data.services[$.service.id]).map($=>$.service.id.toString())),c=b(()=>r.value.bookable.find($=>parseInt($.service.id)===parseInt(E.value))),f=V(null),p=V(null),d=b(()=>{let $=s.getters["entities/getEntitiesRelations"],W=s.getters["entities/getUnfilteredEmployees"],ae=[];if(c.value){if(p.value)Object.keys($).forEach(Z=>{P.value&&P.value.serviceId in $[Z]&&$[Z][parseInt(P.value.serviceId)].indexOf(p.value)!==-1&&ae.push(parseInt(Z))});else{let Z=[];if(c.value.locations.length)Z=c.value.locations.map(xe=>xe.id);else for(let xe in $)c.value.service.id in $[xe]&&(Z=Z.concat($[xe][c.value.service.id]));for(let xe in $)c.value.service.id in $[xe]&&Z.forEach(he=>{$[xe][c.value.service.id].indexOf(he)!==-1&&ae.push(parseInt(xe))})}let J=c.value.providers.length?c.value.providers.map(Z=>Z.id):W.map(Z=>Z.id);return W.filter(Z=>J.indexOf(Z.id)!==-1&&ae.indexOf(Z.id)!==-1&&(s.getters["entities/getShowHidden"]||Z.status==="visible"&&Z.show))}return[]}),_=b(()=>{let $=s.getters["entities/getEntitiesRelations"],W=s.getters["entities/getUnfilteredLocations"],ae=[];if(c.value){if(f.value)ae=$[f.value][c.value.service.id];else{let Z=[];if(c.value.providers.length)Z=c.value.providers.map(xe=>xe.id);else for(let xe in $)c.value.service.id in $[xe]&&Z.push(parseInt(xe));for(let xe in $)c.value.service.id in $[xe]&&Z.indexOf(parseInt(xe))!==-1&&(ae=ae.concat($[xe][c.value.service.id]))}let J=c.value.locations.length?c.value.locations.map(Z=>Z.id):W.map(Z=>Z.id);return W.filter(Z=>J.indexOf(Z.id)!==-1&&ae.indexOf(Z.id)!==-1&&(s.getters["entities/getShowHidden"]||Z.status==="visible"))}return[]}),T=b(()=>{let $=[];return Object.keys(e.data.services).forEach(W=>{Object.keys(e.data.services[W].appointments).forEach(ae=>{e.data.services[W].appointments[ae].appointments.forEach(J=>{$.push(J)})})}),{type:"package",package:r.value,booking:null,bookable:r.value,paymentId:e.data.packageData.payments.length?e.data.packageData.payments[0].id:null,customer:s.getters["auth/getProfile"],packageCustomerId:parseInt(i.value),packageReservations:$,payments:e.data.packageData.payments,price:e.data.packageData.price,tax:e.data.packageData.tax,coupon:e.data.packageData.coupon,discount:e.data.packageData.discount,end:e.data.packageData.end}}),A=V(!1),E=V(null),P=V(null),L=V(null);Ze(()=>{E.value=x.value[0]});function D($,W,ae){let J=0;return Object.keys($).forEach(Z=>{(W===null||parseInt(W)===parseInt(Z))&&(J+=$[Z].purchaseData[ae])}),J}function h($){return $===1?Q.value.appointment_booked:Q.value.appointments_booked}function g($,W=null){let ae=$.packageData.sharedCapacity?$.packageData.sharedCount:D($.services,W,"count"),J=$.packageData.sharedCapacity?$.packageData.sharedTotal:D($.services,W,"total");return`${J-ae}/${J} ${h(J-ae)}`}function y($){E.value=$.paneName}function k(){let $=s.getters["auth/getProfile"],W=s.getters["cabinet/getTimeZone"]?s.getters["cabinet/getTimeZone"]:"UTC",ae={serviceId:parseInt(E.value),group:1,timeZone:s.getters["cabinet/getTimeZone"],structured:!0,page:"cabinet"},J=r.value.bookable.find(Z=>parseInt(Z.service.id)===parseInt(E.value)).providers.map(Z=>Z.id);J.length&&(ae.providerIds=J),ae.locationId=null,L.value=ae,P.value={type:"appointment",bookings:[{packageCustomerService:{id:e.data.services[E.value].purchaseData.packageCustomerServiceId},customer:{id:$.id,firstName:$.firstName,lastName:$.lastName,email:$.email,phone:$.phone,countryPhoneIso:$.countryPhoneIso,externalId:$.externalId,translations:$.translations},customerId:$.id,customFields:null,persons:1,extras:[],deposit:0}],serviceId:E.value,locationId:e.data.services[E.value].purchaseData.locitionId,providerId:e.data.services[E.value].purchaseData.employeeId,isGroup:!0,notifyParticipants:l.value.notifications.notifyCustomers?1:0,payment:null,recurring:[],package:[],timeZone:W===""?Intl.DateTimeFormat().resolvedOptions().timeZone:W,utc:W==="",locale:window.localeLanguage[0]}}function C($){P.value=null,a("booked",$)}let F=V(!1);function R(){F.value=!0,$e.post("/packages/customers/"+parseInt(i.value),{status:"canceled"},Ue(s)).then(()=>{A.value=!1,a("canceled",{message:Q.value.package_purchase_canceled})}).catch($=>{$.response&&a("cancelError",$.response.data)}).finally(()=>{F.value=!1})}function M($){a("booked",$)}function O(){a("goBack")}let H=U("amCustomize");const z=U("labels"),X=U("localLanguage");let le=b(()=>l.value.general.usedLanguages.includes(X.value)),Q=b(()=>{let $=tt({...z}),W=H.value.packageAppointmentsList.translations;return W&&Object.keys(W).forEach(ae=>{W[ae][X.value]&&le.value?$[ae]=W[ae][X.value]:W[ae].default&&($[ae]=W[ae].default)}),$});ze("amLabels",Q);let ue=b(()=>s.getters["cabinet/getPaymentLinkError"].package),ee=V("error"),me=V(Q.value.payment_link_error);function se(){ue.value=!1,s.commit("cabinet/setPaymentLinkError",{value:!1,type:"package"})}function _e($){let W=tt({...z}),ae=H.value[$].translations;return ae&&Object.keys(ae).forEach(J=>{ae[J][X.value]&&le.value?W[J]=ae[J][X.value]:ae[J].default&&(W[J]=ae[J].default)}),W}function de($){return H.value[$].options}let oe=U("amColors"),ye=b(()=>({"--am-c-cappa-text":oe.value.colorMainText,"--am-c-cappa-bgr":oe.value.colorMainBgr,"--am-c-cappa-text-op80":K(oe.value.colorMainText,.8),"--am-c-cappa-text-op70":K(oe.value.colorMainText,.7),"--am-c-cappa-text-op20":K(oe.value.colorMainText,.2),"--am-c-cappa-primary":oe.value.colorPrimary}));return($,W)=>{const ae=_a,J=Ca;return u(),B("div",{class:"am-cappa",style:Be(t(ye))},[t(ue)?(u(),Y(bt,{key:0,ref:"alertContainer",type:t(ee),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:se,onTriggerClose:se},{title:S(()=>[vC,ce(" "+w(t(me)),1)]),_:1},8,["type"])):I("",!0),m("div",EC,[N(Fe,{"custom-class":"am-cappa__back-btn",icon:t(o),type:t(H).packageAppointmentsList.options.backBtn.buttonType,size:"micro",category:"secondary","icon-only":"","aria-label":t(Q).back_btn,onClick:O},null,8,["icon","type","aria-label"]),m("span",null,w(t(Q).back_btn),1)]),m("div",{class:j(["am-cappa__heading",n.responsiveClass])},[m("div",_C,[m("div",{class:"am-cappa__img",style:Be(t(e).data.packageData.pictureThumbPath?{backgroundImage:`url(${t(e).data.packageData.pictureThumbPath})`}:{})},[t(e).data.packageData.pictureThumbPath?I("",!0):(u(),B("span",CC,w(t(jo)(t(e).data.packageData.name)),1)),m("span",{class:"am-cappa__img-color",style:Be({backgroundColor:t(e).data.packageData.color})},null,4)],4),m("div",yC,[m("div",bC,w(t(e).data.packageData.name),1),t(e).data.packageData.end?(u(),B("div",BC,w(t(Q).package_book_expire)+" "+w(t(rt)(t(e).data.packageData.end.split(" ")[0])),1)):(u(),B("div",AC,w(`${t(Q).package_book_expiration} ${t(Q).package_book_unlimited}`),1)),Object.keys(t(e).data.services).length>1?(u(),B("div",kC,w(g(t(e).data)),1)):I("",!0)])]),m("div",{class:j(["am-cappa__heading-right",n.responsiveClass])},[t(l).roles.allowCustomerCancelPackages&&t(e).data.packageData.status!=="canceled"?(u(),Y(Fe,{key:0,category:"danger",size:"small",class:j(["am-cappa__actions",n.responsiveClass]),type:t(H).packageAppointmentsList.options.cancelBtn.buttonType,onClick:W[0]||(W[0]=()=>{De(A)?A.value=!0:A=!0})},{default:S(()=>[ce(w(t(Q).cancel),1)]),_:1},8,["class","type"])):I("",!0),t(e).data.packageData.status==="approved"&&t(e).data.packageData.price>0?(u(),Y(Cr,{key:1,"btn-size":"small",class:j(`am-cappa__actions ${n.responsiveClass}`),type:t(H).packageAppointmentsList.options.payBtn.buttonType,reservation:t(T),bookable:t(r)},null,8,["class","type","reservation","bookable"])):I("",!0)],2)],2),N(J,{modelValue:t(E),"onUpdate:modelValue":W[1]||(W[1]=Z=>De(E)?E.value=Z:E=Z),class:"am-cappa__service",onTabClick:y},{default:S(()=>[(u(!0),B(ne,null,Ee(t(x),Z=>(u(),Y(ae,{key:Z,name:Z},{label:S(()=>[m("div",DC,w(t(e).data.services[Z].purchaseData.name),1)]),default:S(()=>[t(E)===Z?(u(),B(ne,{key:0},[m("div",{class:j(["am-cappa__service-top",n.responsiveClass])},[m("div",FC,[m("div",{class:"am-cappa__service-img",style:Be(t(e).data.services[t(E)].purchaseData.pictureThumbPath?{backgroundImage:`url(${t(e).data.services[t(E)].purchaseData.pictureThumbPath})`}:{})},[t(e).data.services[t(E)].purchaseData.pictureThumbPath?I("",!0):(u(),B("span",wC,w(t(jo)(t(e).data.services[t(E)].purchaseData.name)),1)),m("span",{class:"am-cappa__service-img__color",style:Be({backgroundColor:t(e).data.services[t(E)].purchaseData.color})},null,4)],4),m("div",PC,[m("div",TC,w(t(e).data.services[t(E)].purchaseData.name),1),t(e).data.packageData.sharedCapacity?I("",!0):(u(),B("div",LC,w(g(t(e).data,t(E))),1))])]),t(e).data.packageData.status!=="canceled"?(u(),Y(Fe,{key:0,class:j(["am-cappa__service-book",n.responsiveClass]),size:"small",type:t(H).packageAppointmentsList.options.bookBtn.buttonType,disabled:D(t(e).data.services,t(E),"count")===0,onClick:k},{default:S(()=>[ce(w(t(Q).book_now),1)]),_:1},8,["class","type","disabled"])):I("",!0)],2),N(Ar,{"grouped-appointments":t(e).data.services[t(E)].appointments,"page-width":n.pageWidth,"responsive-class":n.responsiveClass,"is-package-booking":!0,"step-key":"packageAppointmentsList",onCanceled:M,onBooked:M},null,8,["grouped-appointments","page-width","responsive-class"])],64)):I("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),N(Ha,{loading:t(F),visibility:t(A),title:_e("cancelPackage").cancel_package,description:_e("cancelPackage").confirm_cancel_package,"close-btn-text":_e("cancelPackage").close,"confirm-btn-text":_e("cancelPackage").confirm,"customized-options":de("cancelPackage"),onClose:W[2]||(W[2]=()=>{De(A)?A.value=!1:A=!1}),onDecline:W[3]||(W[3]=()=>{De(A)?A.value=!1:A=!1}),onConfirm:R},null,8,["loading","visibility","title","description","close-btn-text","confirm-btn-text","customized-options"]),N(Br,{visibility:t(P)!==null&&!t(P).id,appointment:t(P),employees:t(d),locations:t(_),"slots-params":t(L),labels:_e("bookAppointment"),"customized-options":de("bookAppointment"),onClose:W[4]||(W[4]=Z=>De(P)?P.value=null:P=null),onSuccess:C,onError:W[5]||(W[5]=()=>{}),onEmployeeSelection:W[6]||(W[6]=Z=>De(f)?f.value=Z:f=Z),onLocationSelection:W[7]||(W[7]=Z=>De(p)?p.value=Z:p=Z)},null,8,["visibility","appointment","employees","locations","slots-params","labels","customized-options"])],4)}}});const $C=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),NC={name:"CabinetPackages",key:"packages"},OC=Object.assign(NC,{props:{loadBookingsCounter:{type:Number,default:0}},setup(n){const a=n;let e=Oe(),s=V(null),l=V(0),o=U("sidebarCollapsed");window.addEventListener("resize",i);function i(){s.value&&(l.value=s.value.offsetWidth)}xt(o,O=>{O?setTimeout(()=>{r()},1500):setTimeout(()=>{r()},500)});function r(){l.value=s.value.offsetWidth}Ze(()=>{uo(()=>{l.value=s.value.offsetWidth})});let x=b(()=>ot(l.value)),c=V(null),f=V(!1),p=V("success"),d=V("");function _(){f.value=!1,d.value=""}let T=U("cabinetType");e.commit("cabinetFilters/setDates",Eo(T.value));let A=b(()=>e.getters["cabinet/getPackageLoading"]),E=V([]),P=V(null);function L(){let O=e.getters["cabinetFilters/getPackages"],H=e.getters["cabinetFilters/getServices"],z=e.getters["cabinetFilters/getProviders"],X=e.getters["cabinetFilters/getLocations"];E.value=k.value.filter(le=>{let Q=e.getters["entities/getPackageEntities"](le[1].packageData.id);return(H.length===0||H.filter(ue=>Q.services.includes(ue)).length>0)&&(z.length===0||z.filter(ue=>Q.providers.includes(ue)).length>0)&&(X.length===0||X.filter(ue=>Q.locations.includes(ue)).length>0)&&(O.length===0||O.filter(ue=>Q.packages.includes(ue)).length>0)})}function D(O,H,z){let X=0;return Object.keys(O).forEach(le=>{(H===null||parseInt(H)===parseInt(le))&&(X+=O[le].purchaseData[z])}),X}function h(O){let H=D(O.services,null,"count"),z=D(O.services,null,"total");return z-H===z}function g(O){e.commit("cabinet/setPackageLoading",!0);let H=e.getters["cabinet/getTimeZone"],z=JSON.parse(JSON.stringify(e.getters["cabinetFilters/getPackagesFilters"]));z.timeZone=H,z.source="cabinet-"+T.value,z.activePackages=0,$e.get("/appointments",Js(Object.assign(Ue(e),{params:z}))).then(X=>{let le={};X.data.data.availablePackageBookings.forEach(de=>{de.packages.forEach(oe=>{oe.services.forEach(ye=>{ye.bookings.forEach($=>{let W=e.getters["entities/getPackage"](oe.packageId);if(W&&($.packageCustomerId in le||(le[$.packageCustomerId]={packageData:{id:W.id,name:W.name,start:$.start,end:$.end,price:$.price,tax:$.tax,coupon:$.coupon,status:$.status,type:"package",payments:$.payments,sharedCapacity:$.sharedCapacity,sharedTotal:$.total,sharedCount:$.count,discount:0,color:W.color,pictureFullPath:W.pictureFullPath,pictureThumbPath:W.pictureThumbPath},services:{}}),!(ye.serviceId in le[$.packageCustomerId].services))){let ae=e.getters["entities/getService"](ye.serviceId);le[$.packageCustomerId].services[ye.serviceId]={appointments:{},purchaseData:{packageCustomerServiceId:$.id,total:$.total,count:$.count,employeeId:$.employeeId,locationId:$.locationId,name:ae.name,color:ae.color,pictureThumbPath:ae.pictureThumbPath}}}})})})});let Q=Er(X.data.data.appointments,H,T.value==="provider");Object.keys(Q).forEach(de=>{Q[de].appointments.forEach(oe=>{oe.bookings.forEach(ye=>{let $=ye.packageCustomerService.packageCustomer.id;$ in le&&(de in le[$].services[oe.serviceId].appointments||(le[$].services[oe.serviceId].appointments[de]={date:de,appointments:[]}),le[$].services[oe.serviceId].appointments[de].appointments.push(oe))})})});let ue=Object.entries(le).filter(de=>de[1].packageData.status==="canceled"),ee=Object.entries(le).filter(de=>de[1].packageData.status!=="canceled"&&h(de[1])),me=Object.entries(le).filter(de=>de[1].packageData.status!=="canceled"&&!h(de[1])&&de[1].packageData.end===null),se=Object.entries(le).filter(de=>de[1].packageData.status!=="canceled"&&!h(de[1])&&de[1].packageData.end!==null).sort((de,oe)=>Ce(de[1].packageData.end,"YYYY-MM-DD HH:mm:ss").diff(Ce(oe[1].packageData.end,"YYYY-MM-DD HH:mm:ss"),"minutes"));if(E.value=[...se,...me,...ee,...ue],k.value=[...se,...me,...ee,...ue],!(z.packages.length||z.services.length||z.providers.length||z.locations.length)){let de=[],oe=[],ye=[],$=[];E.value.forEach(W=>{let ae=e.getters["entities/getPackageEntities"](W[1].packageData.id);de=de.concat(ae.services),oe=oe.concat(ae.providers),ye=ye.concat(ae.locations),$=$.concat(ae.packages)}),e.dispatch("cabinetFilters/injectServiceOptions",de.filter((W,ae,J)=>J.indexOf(W)===ae)),e.dispatch("cabinetFilters/injectProviderOptions",oe.filter((W,ae,J)=>J.indexOf(W)===ae)),e.dispatch("cabinetFilters/injectLocationOptions",ye.filter((W,ae,J)=>J.indexOf(W)===ae)),e.dispatch("cabinetFilters/injectPackagesOptions",$.filter((W,ae,J)=>J.indexOf(W)===ae))}}).catch(X=>{console.log(X)}).finally(()=>{e.commit("cabinet/setPackageLoading",!1),O&&"message"in O&&(f.value=!0,d.value=O.message,s.value&&c.value&&setTimeout(function(){gt(s.value,c.value.$el,0,300)},500))})}function y(O){f.value=!0,d.value=O.message,p.value="error",s.value&&c.value&&setTimeout(function(){gt(s.value,c.value.$el,0,300)},500)}ze("packageSelection",{selectedPackageCustomerId:P});let k=V([]);xt(()=>a.loadBookingsCounter,()=>{g()}),Ze(()=>{g()});let C=b(()=>({list:{template:Qe(hC),props:{packages:E.value,responsiveClass:x.value},handlers:{click:R}},item:{template:Qe(IC),props:{data:P.value?E.value.find(O=>O[0]===P.value)[1]:{},responsiveClass:x.value,pageWidth:l.value},handlers:{goBack:M,booked:g,canceled:g,cancelError:y}}})),F=V("list");function R(O){P.value=O,F.value="item"}function M(){P.value=null,F.value="list"}return(O,H)=>(u(),B("div",{ref_key:"pageContainer",ref:s,class:"am-cap"},[t(f)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:c,type:t(p),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:_,onTriggerClose:_},{title:S(()=>[$C,ce(" "+w(t(d)),1)]),_:1},8,["type"])):I("",!0),$t(N(Mo,{"step-key":"packages","responsive-class":t(x),onChangeFilters:L},null,8,["responsive-class"]),[[fo,t(F)==="list"]]),t(A)?(u(),Y(Gl,{key:2})):(u(),Y(ft(t(C)[t(F)].template),Ft({key:1},t(C)[t(F)].props,po(t(C)[t(F)].handlers)),null,16))],512))}});const MC=m("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),VC=m("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),RC=["href"],qC={class:"am-fs-sb__page-wrapper am-fs-sb__page-wrapper__cabinet"},UC=["onClick"],zC={class:"am-fs-sb__page-icon"},jC={key:1,class:"am-fs-sb__page-divider"},YC={class:"am-fs-sb__page-inner"},WC=m("div",{class:"am-fs-sb__page-icon"},[m("span",{class:"am-icon-dashboard"})],-1),HC=m("div",{class:"am-fs-sb__page-divider"},null,-1),ZC={class:"am-fs-sb__page-inner"},GC=m("div",{class:"am-fs-sb__page-icon"},[m("span",{class:"am-icon-logout"})],-1),JC={class:"am-caph"},XC={class:"am-caph__text"},QC=m("span",{class:"am-icon-menu"},null,-1),KC=[QC],e5={name:"CustomerPanel"},t5=Object.assign(e5,{setup(n){const a=Nl().cookies,e=Oe();let s=b(()=>e.getters.getIsRtl);const l=U("shortcodeData");let o=b(()=>e.getters["auth/getAuthenticated"]);xt(o,he=>{he&&(e.commit("auth/setNewPassword",""),e.commit("auth/setConfirmPassword",""))});let i=V(l.value.cabinetType==="employee"?"provider":"customer");ze("cabinetType",i);let r=U("licence"),x=b(()=>i.value==="provider"?"cape":"capc");ze("originKey",x);let c=V(null),{width:f}=Za(c);ze("containerWidth",f);const p=U("settings");let d=V(l.value.appointments||!l.value.events?"appointments":"events");const _=b(()=>p.customizedData&&x.value in p.customizedData?p.customizedData[x.value]:Dl[x.value]);ze("amCustomize",_);const T=V(p.customizedData?p.customizedData.fonts:Dl.fonts);ze("amFonts",T);const A=U("labels");ze("amLabels",A);const E=U("localLanguage");let P=b(()=>p.general.usedLanguages.includes(E.value)),L=b(()=>{let he=tt({...A});return p.customizedData&&Object.keys(_.value).forEach(re=>{if(re!=="colors"&&_.value[re].translations){let be=_.value[re].translations;Object.keys(be).forEach(te=>{be[te][E.value]&&P.value?he[te]=be[te][E.value]:be[te].default&&(he[te]=be[te].default)})}}),he});function D(){let he=document.head||document.getElementsByTagName("head")[0];he.querySelector("#amCustomFont")&&he.querySelector("#amCustomFont").remove();let re="@font-face {font-family: 'comic'; src: url(http://localhost/amelia-test/wp-content/uploads/amelia/fonts/comic.woff);}",be=document.createElement("style");he.appendChild(be),be.setAttribute("type","text/css"),be.setAttribute("id","amCustomFont"),be.appendChild(document.createTextNode(re))}T.value.customFontSelected&&D();let h=b(()=>d.value==="packages"?_.value.packagesList.options:_.value[d.value].options),g=b(()=>{let he=d.value;return i.value==="customer"?he!=="profile"?h.value.timeZone.visibility:!0:he==="appointments"||he==="events"?h.value.timeZone.visibility:!0}),y=V(!1),k=V(!1);ze("sidebarCollapsed",x0(k));let C=V("");xt(k,he=>{he?setTimeout(()=>{C.value="am-collapsed"},1e3):C.value=""});let F=V(null),R=V(0),M=b(()=>f.value>480);Ze(()=>{F.value&&setTimeout(()=>{R.value=F.value.offsetHeight},200),setTimeout(()=>{k.value=f.value<=600?!0:_.value.sidebar.options.toggle.visibility},1300)});const O=()=>{f.value<=600?k.value=!0:k.value=_.value.sidebar.options.toggle.visibility};window.addEventListener("resize",O),xt(f,he=>{y.value=he>481?!1:y.value});function H(){e.dispatch("cabinetFilters/injectServiceOptions",e.getters["entities/getServices"].map(he=>he.id)),e.dispatch("cabinetFilters/injectProviderOptions",i.value==="customer"?e.getters["entities/getEmployees"].map(he=>he.id):[]),e.dispatch("cabinetFilters/injectLocationOptions",e.getters["entities/getLocations"].map(he=>he.id))}const z=b(()=>e.getters["entities/getReady"]);xt(z,he=>{if(he){if(l.value.cabinetType==="employee"&&e.getters["employee/getId"]){let re=e.getters["employee/getEmployee"];e.commit("employee/setServiceList",Di(e,re.serviceList)),e.commit("entities/setEmployees",[e.getters["entities/getEmployee"](e.getters["employee/getId"])])}H()}});const X=U("baseUrls");let le=["employees","categories","locations","packages","entitiesRelations","customFields"];l.value.cabinetType==="employee"&&(le=le.concat(["taxes","spaces","tags","settings"])),e.dispatch("entities/getEntities",{types:le,licence:"basic",loadEntities:!0,showHidden:!0,isPanel:!0});let Q=b(()=>e.getters.getReady),ue=V({profile:Qe(l.value.cabinetType==="employee"?cf:_x)});(l.value.appointments||!l.value.events)&&(ue.value.appointments=Qe(c1)),(l.value.events||!l.value.appointments)&&(ue.value.events=Qe(X_)),p.featuresIntegrations.packages.enabled&&(l.value.appointments||!l.value.events)&&(r.isPro||r.isDeveloper)&&(ue.value.packages=Qe(OC));const ee=V([{key:"profile",icon:"user",pageLabel:L.value.my_profile,label:b(()=>x.value==="cape"?`${e.getters["auth/getProfile"].firstName} ${e.getters["auth/getProfile"].lastName}`:_.value.profile.options.lastName.visibility?`${e.getters["auth/getProfile"].firstName} ${e.getters["auth/getProfile"].lastName}`:`${e.getters["auth/getProfile"].firstName}`)}]);(l.value.appointments||!l.value.events)&&ee.value.push({key:"appointments",icon:"service",label:L.value.appointments}),(l.value.events||!l.value.appointments)&&ee.value.push({key:"events",icon:"star-outline",label:L.value.events}),p.featuresIntegrations.packages.enabled&&l.value.cabinetType==="customer"&&(l.value.appointments||!l.value.events)&&(r.isPro||r.isDeveloper)&&ee.value.push({key:"packages",icon:"shipment",label:L.value.packages}),ze("sidebarSteps",ee),Ze(()=>{me.value=ee.value.findIndex(he=>he.key===d.value)});let me=V(0);function se(he,re){l.value.cabinetType==="employee"&&(he.key!=="appointments"&&(e.commit("appointment/resetAppointment",{providerId:e.getters["auth/getProfile"].id,categoryId:null,serviceId:null,locationId:null}),e.commit("customerInfo/setCustomers",[]),e.commit("customerInfo/setCustomersIds",[])),he.key!=="events"&&(e.commit("event/setEvent",{settings:_s(p,e.getters["event/getSettings"],{},{})}),e.commit("attendee/setAttendee",gs(e,e.getters["attendee/getDefaultAttendee"])))),(he.key==="appointments"||he.key==="events")&&H(),d.value=he.key,me.value=re,e.commit("cabinetFilters/setResetFilters")}function _e(he){l.value.cabinetType==="employee"&&l.value.profile&&he.step.key==="profile"||(se(he.step,he.index),e.commit("cabinetFilters/setResetFilters"))}function de(){e.dispatch("auth/logout")}function oe(){y.value=!1,de()}let ye=V(0);function $(){ye.value++}let W=b(()=>{switch(ee.value[me.value].key){case"profile":return ee.value[me.value].pageLabel;case"appointments":return e.getters["appointment/getActive"]&&!e.getters["appointment/getId"]?L.value.new_appointment:e.getters["appointment/getActive"]&&e.getters["appointment/getId"]?L.value.edit_appointment:ee.value[me.value].label;case"events":return e.getters["attendee/getActive"]&&!e.getters["attendee/getId"]?L.value.event_add_attendee:e.getters["attendee/getActive"]&&e.getters["attendee/getId"]?L.value.event_edit_attendee:e.getters["event/getActive"]&&!e.getters["event/getId"]?L.value.new_event:e.getters["event/getActive"]&&e.getters["event/getId"]?L.value.edit_event:ee.value[me.value].label;default:return ee.value[me.value].label}});ze("bookingsCounterChanger",{bookingsCounterChanger:$});const ae=U("timeZone");Gs(()=>{if(!p.general.showClientTimeZone){let he=ae.value;a.get("ameliaUserTimeZone")&&(he=a.get("ameliaUserTimeZone")),e.commit("cabinet/setTimeZone",he)}e.getters["cabinet/getTimeZone"]||e.commit("cabinet/setTimeZone",zs())});let J=b(()=>_.value.colors);ze("amColors",J);let Z=b(()=>({"--am-c-primary":J.value.colorPrimary,"--am-c-success":J.value.colorSuccess,"--am-c-error":J.value.colorError,"--am-c-warning":J.value.colorWarning,"--am-c-main-bgr":J.value.colorMainBgr,"--am-c-main-heading-text":J.value.colorMainHeadingText,"--am-c-main-text":J.value.colorMainText,"--am-c-main-text-op10":K(J.value.colorMainText,.1),"--am-c-sb-bgr":J.value.colorSbBgr,"--am-c-sb-text":J.value.colorSbText,"--am-c-inp-bgr":J.value.colorInpBgr,"--am-c-inp-border":J.value.colorInpBorder,"--am-c-inp-text":J.value.colorInpText,"--am-c-inp-placeholder":J.value.colorInpPlaceHolder,"--am-c-drop-bgr":J.value.colorDropBgr,"--am-c-drop-text":J.value.colorDropText,"--am-c-btn-prim":J.value.colorBtnPrim,"--am-c-btn-prim-text":J.value.colorBtnPrimText,"--am-c-btn-sec":J.value.colorBtnSec,"--am-c-btn-sec-text":J.value.colorBtnSecText,"--am-c-btn-danger":J.value.colorBtnDanger,"--am-c-btn-danger-text":J.value.colorBtnDangerText,"--am-c-skeleton-op20":K(J.value.colorMainText,.2),"--am-c-skeleton-op60":K(J.value.colorMainText,.6),"--am-c-skeleton-sb-op20":K(J.value.colorSbText,.2),"--am-c-skeleton-sb-op60":K(J.value.colorSbText,.6),"--am-c-scroll-op30":K(J.value.colorPrimary,.3),"--am-c-scroll-op10":K(J.value.colorPrimary,.1),"--am-font-family":T.value.fontFamily,"--am-rad-inp":"6px","--am-fs-inp":"15px","--am-mw-main":M.value?k.value?"858px":"1024px":"520px","--am-brad-main":M.value?"0 0.5rem 0.5rem 0":"0.5rem"})),xe=b(()=>({"--am-c-msd-bgr":J.value.colorSbBgr,"--am-c-msd-text":J.value.colorSbText,"--am-c-msd-text-op05":K(J.value.colorSbText,.05),"--am-c-msd-text-op10":K(J.value.colorSbText,.1),"--am-c-msd-text-op60":K(J.value.colorSbText,.6)}));return(he,re)=>(u(),B(ne,null,[T.value.customFontSelected?I("",!0):(u(),B(ne,{key:0},[MC,VC,m("link",{rel:"stylesheet",type:"text/css",href:`${t(X).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,RC)],64)),m("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:c,class:j(["am-cap__wrapper",[{"am-collapsed":t(k)},{"am-auth":!t(o)}]]),style:Be(t(Z))},[t(o)?I("",!0):(u(),Y(cx,{key:0})),t(o)?(u(),B(ne,{key:1},[t(M)?(u(),Y(u0,{key:0,class:j(["am-fs-sb",[{"am-collapsed":t(k)},{"am-rtl":t(s)}]]),style:Be({width:t(k)?"72px":"240px",paddingBottom:`${t(R)+16}px`})},{"step-list":S(()=>[m("div",qC,[(u(!0),B(ne,null,Ee(ee.value,(be,te)=>(u(),B(ne,{key:be.key},[be.key!=="packages"||t(e).getters["entities/getPackages"].length?(u(),B("div",{key:0,class:j(["am-fs-sb__page",{selected:t(d)===be.key}]),style:Be({"pointer-events":t(l).cabinetType==="employee"&&t(l).profile&&be.key==="profile"?"none":""}),onClick:()=>{t(l).cabinetType==="employee"&&t(l).profile&&be.key==="profile"||se(be,te)}},[m("div",{class:j(["am-fs-sb__page-inner",{"am-collapsed":t(k)}])},[m("div",zC,[m("span",{class:j(`am-icon-${be.icon}`)},null,2)]),N(ga,{name:"fade"},{default:S(()=>[t(k)?I("",!0):(u(),B("p",{key:0,class:j(["am-fs-sb__page-heading",[t(C),{"am-rtl":t(s)}]])},w(be.label),3))]),_:2},1024),N(ga,{name:"fade"},{default:S(()=>[t(k)?I("",!0):(u(),B("div",{key:0,class:j(["am-fs-sb__page-indicator",[t(C),{"am-rtl":t(s)}]])},[m("span",{class:j(t(s)?"am-icon-arrow-big-left":"am-icon-arrow-big-right")},null,2)],2))]),_:1})],2)],14,UC)):I("",!0),te===0&&ee.value[0].key==="profile"?(u(),B("div",jC)):I("",!0)],64))),128))])]),"support-info":S(()=>[m("div",{ref_key:"sidebarFooterRef",ref:F,class:"am-fs-sb__footer"},[m("div",{class:"am-fs-sb__page",onClick:re[0]||(re[0]=be=>De(k)?k.value=!t(k):k=!t(k))},[m("div",YC,[WC,N(ga,{name:"fade"},{default:S(()=>[t(k)?I("",!0):(u(),B("p",{key:0,class:j(["am-fs-sb__page-heading",t(C)])},w(t(L).toggle_sidebar),3))]),_:1})])]),HC,m("div",{class:"am-fs-sb__page",onClick:de},[m("div",ZC,[GC,N(ga,{name:"fade"},{default:S(()=>[t(k)?I("",!0):(u(),B("p",{key:0,class:j(["am-fs-sb__page-heading",t(C)])},w(t(L).log_out),3))]),_:1})])])],512)]),_:1},8,["class","style"])):I("",!0),N(d0,{"max-width":786,"old-responsive":!1},{header:S(()=>[N(E0,{ready:t(Q)},{default:S(()=>[m("div",JC,[m("div",XC,w(t(W)),1),t(M)?I("",!0):(u(),B("div",{key:0,class:"am-caph__menu",onClick:re[1]||(re[1]=()=>De(y)?y.value=!t(y):y=!t(y))},KC)),t(p).featuresIntegrations.timezones.enabled&&t(z)&&t(M)&&t(g)?(u(),Y(Zn,{key:1})):I("",!0),N(xc,{"menu-items":ee.value,monitor:t(d),visibility:t(y),"custom-css":t(xe),"customized-labels":t(L),position:"right",width:240,"onUpdate:visibility":re[2]||(re[2]=be=>De(y)?y.value=be:y=be),onClick:_e,onLogout:oe},null,8,["menu-items","monitor","visibility","custom-css","customized-labels"])])]),_:1},8,["ready"])]),step:S(()=>[(u(),Y(ft(t(ue)[t(d)]),{class:"am-fs__main-content","load-bookings-counter":t(ye)},null,8,["load-bookings-counter"]))]),_:1})],64)):I("",!0)],6)],64))}});var u5=Object.freeze(Object.defineProperty({__proto__:null,default:t5},Symbol.toStringTag,{value:"Module"}));export{u5 as C,B0 as _,qt as a,ra as b,g0 as c,E0 as d,xc as e,ea as f,n5 as g,Z0 as h,Ii as i,J0 as j,o5 as u};
